(function(z){
var Fn=function(a){a=a.tabIndex;return z.qa(a)&&0<=a&&32768>a};var Gn=function(a){a=a.getAttributeNode("tabindex");return null!=a&&a.specified};var Hn=function(a,b){return z.qb(a.iD||[],function(a){return b===a||z.mf(a,b)})};var In=function(a){if(a.Tj)throw Error("Can not change this state of the popup while showing.");};var Jn=function(a){return a.rj.length?a.rj.pop():a.Gn()};var Kn=function(a){try{return a&&a.activeElement}catch(b){}return null};var Ln=function(a){return Gn(a)&&Fn(a)};
var Mn=function(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);};z.Y=function(a,b){return z.aa[a]=b};var Nn=function(a){a.bc()&&a.fire()};
z.On=function(a,b,c){var d=z.Ym;d.ea.g(d,"update",function g(){a.getBoundingClientRect().bottom<this.size.height&&(b.call(c),this.ea.qa(this,"update",g))})};var Pn=function(a,b){var c=b.getBoundingClientRect();return c.bottom<a.DM||c.bottom>a.size.height?!1:!0};var Qn=function(a){z.sk?z.V.enable(a.input,"placeholder-hilight",!1):z.V.enable(a.label,"placeholder-label-hilight",!1)};z.Rn=function(a){var b=z.X;b.yH?(b.yH.innerHTML=a,z.P(b.h,!0)):z.W.message(a)};
var Sn=function(a,b){b&&b.length&&z.w(b,function(a){this.dispatchEvent(new z.Tj(a[0],a[1]))},a)};z.Tn=function(a,b){z.F.call(this);this.ea=new z.zd(this);this.oh(a||null);b&&(this.dc=b)};z.Un=function(a,b){return a.ie.get(b)};var Vn=function(a,b){return a.Sc&&b?z.mb(a.Sc,b):-1};var Wn=function(a,b){a.Ra&&a.Ra.Ze&&(z.Lb(a.Ra.Ze,a.Eb),z.Mb(a.Ra.Ze,b,a));a.Eb=b};var Xn=function(a){return new z.qg(a.top,a.left+a.width,a.top+a.height,a.left)};var Yn=function(a){return"CSS1Compat"==a.Ka.compatMode};
z.Zn=function(a){if(a.da)return Mn(a.da.responseText)};var $n=function(a){z.Ud(a);for(var b={},c=0;c<a.Ya.length;c++){var d=a.Ya[c];b[d]=a.Fb[d]}return b};var ao=function(a){return a};var bo=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^(0,z.G)()).toString(36)};
var co=function(a,b){z.Mc.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.z=b.coords[2];this.duration=b.duration;this.progress=b.progress;this.state=b.N;this.pX=b};var eo=function(a){a=z.ua(a);delete z.tl[a];z.Kb(z.tl)&&z.rl&&z.rl.stop()};var fo=function(){z.F.call(this);this.N=0;this.endTime=this.startTime=null};
var go=function(a,b,c,d){fo.call(this);if(!z.na(a)||!z.na(b))throw Error("Start and end parameters must be arrays");if(a.length!=b.length)throw Error("Start and end points must be the same length");this.Wp=a;this.SN=b;this.duration=c;this.LC=d;this.coords=[];this.Mi=!1;this.progress=0};var ho=function(a,b){a.progress=(b-a.startTime)/(a.endTime-a.startTime);1<=a.progress&&(a.progress=1);io(a,a.progress);1==a.progress?(a.N=0,eo(a),a.kd("finish"),a.hg()):1==a.N&&a.Oz()};
var io=function(a,b){z.sa(a.LC)&&(b=a.LC(b));a.coords=Array(a.Wp.length);for(var c=0;c<a.Wp.length;c++)a.coords[c]=(a.SN[c]-a.Wp[c])*b+a.Wp[c]};var jo=function(a,b,c,d,f){go.call(this,b,c,d,f);this.element=a};var ko=function(a){return 1==a.length?"0"+a:a};var lo=function(a){a=a?z.Ke(a):window.document;return!z.A||9<=z.Ug||Yn(z.H(a))?a.documentElement:a.body};
z.mo=function(a,b){var c=window.$.extend({all:!1},z.mo.defaults,b||{}),d=(0,window.$)(a).get(0).getBoundingClientRect();return!c.all&&(d.bottom<c.paddingTop||d.bottom>(0,window.$)(window).height())||c.all&&(d.top<c.paddingTop||d.bottom>(0,window.$)(window).height())?!1:!0};var no=function(a,b,c,d,f){if(3!=b.length||3!=c.length)throw Error("Start and end points must be 3D");jo.apply(this,arguments)};
var oo=function(a,b,c,d,f){z.qa(b)&&(b=[b]);z.qa(c)&&(c=[c]);jo.call(this,a,b,c,d,f);if(1!=b.length||1!=c.length)throw Error("Start and end points must be 1D");this.gt=-1};z.po=function(a){var b=z.Ke(a),c=new z.He(0,0),d=lo(b);if(a==d)return c;a=z.Cg(a);b=z.wf(z.H(b));c.x=a.left+b.x;c.y=a.top+b.y;return c};var qo=function(a,b,c,d){if(null!=a)for(a=a.firstChild;a;){if(b(a)&&(c.push(a),d)||qo(a,b,c,d))return!0;a=a.nextSibling}return!1};
var ro=function(a,b){for(var c=b;c=c.previousSibling;)if(c==a)return-1;return 1};z.so=function(a,b){for(var c in a)if(a[c]==b)return!0;return!1};z.to=function(a){var b=0,c;for(c in a)b++;return b};z.uo=function(a,b,c){return Array.prototype.every.call(a,b,c)};var vo=function(a){return a.replace(/&([^;]+);/g,function(a,c){switch(c){case "amp":return"\x26";case "lt":return"\x3c";case "gt":return"\x3e";case "quot":return'"';default:if("#"==c.charAt(0)){var d=Number("0"+c.substr(1));if(!(0,window.isNaN)(d))return String.fromCharCode(d)}return a}})};
var wo=function(a){var b={"\x26amp;":"\x26","\x26lt;":"\x3c","\x26gt;":"\x3e","\x26quot;":'"'},c;c=z.r.document.createElement("div");return a.replace(xo,function(a,f){var g=b[a];if(g)return g;if("#"==f.charAt(0)){var h=Number("0"+f.substr(1));(0,window.isNaN)(h)||(g=String.fromCharCode(h))}g||(c.innerHTML=a+" ",g=c.firstChild.nodeValue.slice(0,-1));return b[a]=g})};
z.yo=function(a,b){if(a){"number"===window.$.type(b)&&(b={offsetTop:b});var c=window.$.extend({cC:z.mo},z.kn,b||{});if(!c.cC(a,c)){var d=(0,window.$)(a).offset().top-c.paddingTop-c.offsetTop||0;c.Uv?(0,window.$)(window.document.documentElement).add(window.document.body).animate({scrollTop:d}):(0,window.$)(window).scrollTop(d)}}};
var zo=function(a,b,c){var d;a&&(b=(0,window.$)(a).data("animation")||new no(a,[255,255,150],b||[255,255,255],c||2E3),(0,window.$)(a).data("animation",b),1==b.N&&b.stop(!0),d=a.style.backgroundColor,z.md(b,"end",function(){z.sg(this.element,"background-color",d)},!1,b),b.play())};z.Ao=function(a){return a?a.replace(/^\s+/,"").replace(/\s+$/,""):""};var Bo=function(a,b,c){oo.call(this,a,1,0,b,c)};
var Co=function(a){var b=a.match(Do);if(b){a=Number(b[1]);var c=Number(b[2]),b=Number(b[3]);if(0<=a&&255>=a&&0<=c&&255>=c&&0<=b&&255>=b)return[a,c,b]}return[]};var Eo=function(a){if(!Fo.test(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(Go,"#$1$1$2$2$3$3"));return a.toLowerCase()};
var Ho=function(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||(z.B||z.Hc)&&0==a)return!0;switch(a){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}};z.Io=function(a){return new z.Ie(a.offsetWidth,a.offsetHeight)};
var Jo=function(a){if(z.A&&!(8<=z.Ug))return a.offsetParent;var b=z.Ke(a),c=z.yg(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(11==a.nodeType&&a.host&&(a=a.host),c=z.yg(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null};
var Ko=function(a){var b=a.body;a=a.documentElement;return new z.He(b.scrollLeft||a.scrollLeft,b.scrollTop||a.scrollTop)};z.Lo=function(a,b){var c=[];qo(a,b,c,!1);return c};var Mo=function(a,b){var c=a.parentNode;if(c==b)return-1;for(var d=b;d.parentNode!=c;)d=d.parentNode;return ro(d,a)};var No=function(a,b){return new z.He(a.x-b.x,a.y-b.y)};var Oo=function(a){this.lu=a};
var Po=function(a,b,c){if(null==b)c.push("null");else{if("object"==typeof b){if(z.na(b)){a.serializeArray(b,c);return}if(b instanceof String||b instanceof Number||b instanceof Boolean)b=b.valueOf();else{c.push("{");var d="",f;for(f in b)if(Object.prototype.hasOwnProperty.call(b,f)){var g=b[f];"function"!=typeof g&&(c.push(d),Qo(f,c),c.push(":"),Po(a,a.lu?a.lu.call(b,f,g):g,c),d=",")}c.push("}");return}}switch(typeof b){case "string":Qo(b,c);break;case "number":c.push((0,window.isFinite)(b)&&!(0,window.isNaN)(b)?
String(b):"null");break;case "boolean":c.push(String(b));break;case "function":c.push("null");break;default:throw Error("Unknown type: "+typeof b);}}};var Qo=function(a,b){b.push('"',a.replace(z.Ol,function(a){var b=Ro[a];b||(b="\\u"+(a.charCodeAt(0)|65536).toString(16).substr(1),Ro[a]=b);return b}),'"')};var So=function(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+z.ua(a):b.substr(0,1)+a};
var To=function(a,b){if("function"==typeof a.every)return a.every(b,void 0);if(z.oa(a)||z.pa(a))return z.uo(a,b,void 0);for(var c=z.Ld(a),d=z.Kd(a),f=d.length,g=0;g<f;g++)if(!b.call(void 0,d[g],c&&c[g],a))return!1;return!0};var Uo=function(a){return a.hb&&"function"==typeof a.hb?a.hb():z.oa(a)||z.pa(a)?a.length:z.to(a)};z.Vo=function(a,b){var c=arguments,d=c.length;return function(){var a;d&&(a=c[d-1].apply(this,arguments));for(var b=d-2;0<=b;b--)a=c[b].call(this,a);return a}};
var Wo=function(a){return z.Wa(a,"\x26")?"document"in z.r?wo(a):vo(a):a};z.Xo=function(a){return/^[\s\xa0]*$/.test(a)};z.Yo=function(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c};var Zo=function(a,b){var c=a.getBoundingClientRect(),d=z.Qg(window.document.body).top;if(0<c.top-d)b&&b();else{var f=a.offsetHeight,g=Ko(window.document).y,h=z.Pe().height;b&&b();var k=a.offsetHeight;window.scrollTo(0,g+(c.bottom<h?k-f:c.top-d))}};
z.$o=function(a,b){var c=null;return function(){var d=this,f=arguments;(0,window.clearTimeout)(c);c=(0,window.setTimeout)(function(){b.apply(d,f)},a)}};var ap=function(a){(0,window.$)(a.target.M.h).off("click.disable-a").on("click.disable-a","a",function(a){a.preventDefault()})};var bp=function(a,b){function c(b){return a.getElementsByTagName(b).length}var d=["img","embed"];return b&&z.qb(d,c)?!1:!z.Vo(z.hn,z.bb,z.pf)(a)};
var cp=function(a,b,c,d){window._gaq||(window._gaq=[]);c&&(c=""+c);d&&(d=(0,window.parseInt)(d,10));window._gaq.push(["_trackEvent",a,b,c,d]);z.Ii&&dp("trackEvent(deprecated)",z.wb(arguments))};var ep=function(a){return(a=z.Ao(a))?a.length:0};z.fp=function(a){this.EQ=a;this.data=new z.Sd};z.gp=function(a,b,c){for(c=c||"A";null!=b&&b!==a;){if(b.tagName===c)return b;b=b.parentNode}return null};
var hp=function(a,b,c){var d;b=z.zb(a.data,1);if("topic"===a.data[0]){a=["\x3ca ",' style\x3d"display:block" href\x3d"/topic/'+b[1]+'"\x3e\x3cspan class\x3d"zm-item-tag"\x3e',b[0],"\x3c/span\x3e"].join("");d=6<b.length&&b[6];if(b[5]||d){a+='\x3cspan class\x3d"zm-ac-gray"\x3e';var f=[];d&&f.push("又称 "+b[6]);(d=(0,window.parseInt)(b[5],10))&&f.push(d+" 个精华问答");a+=f.join("，");a+="\x3c/span\x3e"}else a+='\x3cspan class\x3d"zm-ac-gray" \x3e\x26nbsp;\x3c/span\x3e';c.innerHTML=a+"\x3c/a\x3e"}else"people"===
a.data[0]?c.innerHTML='\x3ca href\x3d"/people/'+b[1]+'" title\x3d"'+b[0]+'" class\x3d"zm-ac-link zm-ac-link-people"\x3e\x3cimg class\x3d"zm-item-img-avatar zg-left" src\x3d"'+b[2]+'"\x3e\x3cspan class\x3d"zu-autocomplete-row-name" title\x3d"'+b[0]+'"\x3e'+b[0]+'\x3c/span\x3e\x3cspan class\x3d"zg-gray-normal  zu-autocomplete-row-description"\x3e'+(b[4]||"\x26nbsp;")+"\x3c/span\x3e\x3c/a\x3e":"question"===a.data[0]?(d=(0,window.parseInt)(b[3],10),c.innerHTML=(b[4]?'\x3ca class\x3d"zg-star" data-tip\x3d"s$b$优质问答" href\x3d"/question/'+
b[2]+'"\x3e\x3c/a\x3e':"")+['\x3ca class\x3d"zm-ac-link"','href\x3d"/question/'+b[2]+'"\x3e',b[0]].join("")+('\x3cspan class\x3d"zm-ac-gray"\x3e'+(d?d+" 个回答":"还没有回答")+"\x3c/span\x3e\x3c/a\x3e")):"search_link"===a.data[0]?(c.innerHTML='\x3ca href\x3d"/search?q\x3d'+b[0]+'\x26type\x3dquestion"\x3e查看全部搜索结果\x3ci class\x3d"zg-icon arrow"\x3e\x3c/i\x3e\x3c/a\x3e',z.V.add(c,"zu-autocomplete-row-search-link")):"plain_text"===a.data[0]?c.innerHTML=b[0]:"sina"===a.data[0]&&(c.innerHTML=['\x3ca href\x3d"javascript:;" title\x3d"'+
b[0]+'"\x3e','\x3cimg class\x3d"zm-item-img-avatar" src\x3d"'+b[2]+'" /\x3e',b[0],"\x3c/a\x3e"].join(""));(0,window.$)("a",c).click(function(a){a.preventDefault()})};
var ip=function(a,b,c){b=z.zb(a.data,1);if("topic"===a.data[0]){a=(b[2]?'\x3cimg class\x3d"zm-item-img-avatar zg-left" src\x3d"'+b[2]+'"\x3e':"")+'\x3cspan class\x3d"zu-autocomplete-row-name'+(b[3]?"":" zu-autocomplete-row-name-info")+'" title\x3d"'+b[0]+'"\x3e'+b[0]+"\x3c/span\x3e";var d=5<b.length&&b[5];4<=b.length&&(a+='\x3cspan class\x3d"zg-gray-normal zu-autocomplete-row-description"\x3e',b[4]||d?(d&&(a+="又称 "+b[5]),b[4]&&d&&(a+="，"),b[4]&&(a+=b[4]+" 人关注")):a+="\x26nbsp;",a+="\x3c/span\x3e");
c.innerHTML=a}else"people"===a.data[0]?c.innerHTML='\x3cimg class\x3d"zm-item-img-avatar zg-left" src\x3d"'+b[2]+'"\x3e\x3cspan class\x3d"zu-autocomplete-row-name" title\x3d"'+b[0]+'"\x3e'+b[0]+'\x3c/span\x3e\x3cspan class\x3d"zg-gray-normal zu-autocomplete-row-description"\x3e'+(b[4]||"\x26nbsp;")+"\x3c/span\x3e":"question"===a.data[0]?c.innerHTML=b[0]+'\x3cspan class\x3d"zm-ac-gray"\x3e问题\x3c/span\x3e':"plain_text"===a.data[0]?(c.innerHTML=a.data[1],z.V.add(c,b[1])):"sina"===a.data[0]&&(c.innerHTML=
b[0])};var jp=function(a){var b=0,c=0;do c=a.indexOf("?",c),-1!==c&&(b++,c+=1);while(-1!==c);return b};z.kp=function(a,b,c){a&&(z.gn&&window.document[z.cn]?z.E(window.document,z.fn,function f(){window.document[z.cn]||(zo(a,b,c),z.nd(window.document,z.fn,f))}):zo(a,b,c))};z.lp=function(a,b){z.P(a,!0);z.P(b,!1)};var mp=function(){return'\x3ca href\x3d"javascript:;" class\x3d"zu-edit-button" name\x3d"edit"\x3e\x3ci class\x3d"zu-edit-button-icon"\x3e\x3c/i\x3e修改\x3c/a\x3e'};
var np=function(a){return a?a.replace(/<[^>]+>/g,""):""};z.op=function(a,b,c,d){"bottom"===d&&(d="b");var f="";!1!==c&&(f='data-tip\x3d"t$'+(d||"t")+"$"+a[1]+'"');return["\x3ca ",f,' class\x3d"',b||"zm-item-tag",'" href\x3d"/topic/',a[1],'"\x3e',a[0],"\x3c/a\x3e"].join("")};z.pp=function(a,b){return z.na(a)?['\x3ca data-tip\x3d"p$t$',a[1],'" href\x3d"/people/',a[1],'"',b?' class\x3d"'+b+'"':"",' title\x3d"',a[0],'"\x3e',a[0],"\x3c/a\x3e"].join(""):"匿名用户"};
var qp=function(a){if(0===a||1===a)return"匿名用户";var b=z.M("a",{href:"/people/"+a[1],title:a[0]},a[0]);b.setAttribute("data-tip","p$t$"+a[1]);return b};var rp=function(a){if(0===a||1===a)return z.M("span");if(z.na(a)){var b=z.M("a",{href:"/people/"+a[1],title:a[0],"class":"zm-item-link-avatar"},z.M("img",{src:a[2],"class":"zm-list-avatar"}));b.setAttribute("data-tip","p$t$"+a[1]);return b}};z.sp=function(a,b){var c=new Bo(a,500);b&&z.E(c,"finish",(0,z.q)(function(){z.N(this)},a));c.play()};
var tp=function(a,b){var c=z.Lo(a,function(a){return 3===a.nodeType&&!z.Xo(a.nodeValue)})[0];c&&(c.nodeValue=b)};var up=function(){return window.$.Deferred(function(a){(0,window.setTimeout)(a.resolve,2E3)}).promise()};var vp=function(a,b,c){oo.call(this,a,0,1,b,c)};var wp=function(a,b,c,d,f){jo.call(this,a,[b],[c],d,f)};var xp=function(a,b,c,d,f){jo.call(this,a,[b],[c],d,f)};var yp=function(a,b,c,d,f){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");jo.apply(this,arguments)};
var zp=function(a,b,c,d,f){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");jo.apply(this,arguments)};
var Ap=function(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(Fo.test(c))return b.Hs=Eo(c),b.type="hex",b;c=Co(a);if(c.length){var d=c[0];a=c[1];c=c[2];d=Number(d);a=Number(a);c=Number(c);if((0,window.isNaN)(d)||0>d||255<d||(0,window.isNaN)(a)||0>a||255<a||(0,window.isNaN)(c)||0>c||255<c)throw Error('"('+d+","+a+","+c+'") is not a valid RGB color');d=ko(d.toString(16));a=ko(a.toString(16));c=ko(c.toString(16));b.Hs="#"+d+a+c;b.type="rgb";return b}if(Bp&&(c=Bp[a.toLowerCase()]))return b.Hs=
c,b.type="named",b;throw Error(a+" is not a valid color string");};var Cp=function(a,b,c,d,f){if(!(z.A||z.Hc||z.B&&z.D("525")))return!0;if(z.Vc&&f)return Ho(a);if(f&&!d)return!1;z.qa(b)&&(b=z.fj(b));if(!c&&(17==b||18==b||z.Vc&&91==b))return!1;if((z.B||z.Hc)&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(z.A&&d&&b==a)return!1;switch(a){case 13:return!0;case 27:return!(z.B||z.Hc)}return Ho(a)};
var Dp=function(a){if(a.altKey&&!a.ctrlKey||a.metaKey||112<=a.keyCode&&123>=a.keyCode)return!1;switch(a.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 252:case 224:case 92:return!1;case 0:return!z.y;default:return 166>a.keyCode||183<a.keyCode}};var Ep=function(a,b,c){c?z.bj(a,b):z.dj(a,b)};var Fp=function(a){return z.Zi(a,"label")};
var Gp=function(a,b){var c="";b&&(c=b.id);z.Xi(a,"activedescendant",c)};var Hp=function(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}throw Error("Invalid component state");};
z.Ip=function(a,b,c){c=c?null:a.getElementsByTagName("*");if(z.am){if(b=b?"none":"",a.style&&(a.style[z.am]=b),c){a=0;for(var d;d=c[a];a++)d.style&&(d.style[z.am]=b)}}else if(z.A||z.vg)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;d=c[a];a++)d.setAttribute("unselectable",b)};z.Jp=function(a){var b=z.po(a);a=z.Ig(a);return new z.rg(b.x,b.y,a.width,a.height)};z.Kp=function(a,b,c){var d=z.po(a);b instanceof z.He&&(c=b.y,b=b.x);z.Ag(a,a.offsetLeft+(b-d.x),a.offsetTop+(c-d.y))};
var Lp=function(a,b){var c=b||z.Re(window.document),d;d=c||z.Re(window.document);var f=z.po(a),g=z.po(d),h=z.Tg(d);if(d==z.Re(window.document)){var k=f.x-d.scrollLeft,f=f.y-d.scrollTop;!z.A||10<=z.Ug||(k+=h.left,f+=h.top)}else k=f.x-g.x-h.left,f=f.y-g.y-h.top;var h=d.clientHeight-a.offsetHeight,g=d.scrollLeft,m=d.scrollTop,g=g+Math.min(k,Math.max(k-(d.clientWidth-a.offsetWidth),0)),m=m+Math.min(f,Math.max(f-h,0));d=new z.He(g,m);c.scrollLeft=d.x;c.scrollTop=d.y};
var Mp=function(a){for(var b=new z.qg(0,window.Infinity,window.Infinity,0),c=z.H(a),d=c.wa().body,f=c.wa().documentElement,g=z.Re(c.Ka);a=Jo(a);)if(!(z.A&&0==a.clientWidth||z.B&&0==a.clientHeight&&a==d)&&a!=d&&a!=f&&"visible"!=z.yg(a,"overflow")){var h=z.po(a),k=new z.He(a.clientLeft,a.clientTop);h.x+=k.x;h.y+=k.y;b.top=Math.max(b.top,h.y);b.right=Math.min(b.right,h.x+a.clientWidth);b.bottom=Math.min(b.bottom,h.y+a.clientHeight);b.left=Math.max(b.left,h.x)}d=g.scrollLeft;g=g.scrollTop;b.left=Math.max(b.left,
d);b.top=Math.max(b.top,g);c=z.Pe(c.Va());b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,g+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null};var Np=function(a,b){var c=a.style[z.eb(b)];return"undefined"!==typeof c?c:a.style[z.tg(a,b)]||""};var Op=function(a,b){var c=b.x<a.left?b.x-a.left:b.x>a.right?b.x-a.right:0,d=b.y<a.top?b.y-a.top:b.y>a.bottom?b.y-a.bottom:0;return Math.sqrt(c*c+d*d)};z.Pp=function(a,b){return z.uf(a,null,b,void 0)};
z.Qp=function(a){var b=[];z.rf(a,b,!1);return b.join("")};z.Rp=function(a){if("outerHTML"in a)return a.outerHTML;var b=z.Ke(a).createElement("DIV");b.appendChild(a.cloneNode(!0));return b.innerHTML};
z.Sp=function(a){var b,c=arguments.length;if(!c)return null;if(1==c)return arguments[0];var d=[],f=window.Infinity;for(b=0;b<c;b++){for(var g=[],h=arguments[b];h;)g.unshift(h),h=h.parentNode;d.push(g);f=Math.min(f,g.length)}g=null;for(b=0;b<f;b++){for(var h=d[0][b],k=1;k<c;k++)if(h!=d[k][b])return g;g=h}return g};
var Tp=function(a,b){if(a==b)return 0;if(a.compareDocumentPosition)return a.compareDocumentPosition(b)&2?1:-1;if(z.A&&!(9<=z.Ug)){if(9==a.nodeType)return-1;if(9==b.nodeType)return 1}if("sourceIndex"in a||a.parentNode&&"sourceIndex"in a.parentNode){var c=1==a.nodeType,d=1==b.nodeType;if(c&&d)return a.sourceIndex-b.sourceIndex;var f=a.parentNode,g=b.parentNode;return f==g?ro(a,b):!c&&z.mf(f,b)?-1*Mo(a,b):!d&&z.mf(g,a)?Mo(b,a):(c?a.sourceIndex:f.sourceIndex)-(d?b.sourceIndex:g.sourceIndex)}d=z.Ke(a);
c=d.createRange();c.selectNode(a);c.collapse(!0);d=d.createRange();d.selectNode(b);d.collapse(!0);return c.compareBoundaryPoints(z.r.Range.START_TO_END,d)};z.Up=function(a){return z.ka(a.previousElementSibling)?a.previousElementSibling:z.jf(a.previousSibling,!1)};z.Vp=function(a){return z.ka(a.nextElementSibling)?a.nextElementSibling:z.jf(a.nextSibling,!0)};z.Wp=function(a,b){var c=b.parentNode;c&&c.replaceChild(a,b)};
z.Xp=function(a,b){var c=b||window.document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):z.Me(window.document,"*",a,b)};z.Yp=function(a,b){return a==b?!0:a&&b?a.width==b.width&&a.height==b.height:!1};z.Zp=function(a,b,c){a=[a,"\x26",b];null!=c&&a.push("\x3d",(0,window.encodeURIComponent)(String(c)));a[1]&&(c=a[0],b=c.indexOf("#"),0<=b&&(a.push(c.substr(b)),a[0]=c=c.substr(0,b)),b=c.indexOf("?"),0>b?a[1]="?":b==c.length-1&&(a[1]=void 0));return a.join("")};
var $p=function(a,b){return(new Oo(b)).serialize(a)};var aq=function(a){return eval("("+a+")")};var bq=function(a){this.Fb=new z.Sd;a&&this.addAll(a)};var cq=function(a,b){var c=Uo(b);if(a.hb()>c)return!1;!(b instanceof bq)&&5<c&&(b=new bq(b));return To(a,function(a){var c=b;return c.contains&&"function"==typeof c.contains?c.contains(a):c.Rh&&"function"==typeof c.Rh?c.Rh(a):z.oa(c)||z.pa(c)?z.x(c,a):z.so(c,a)})};var dq=function(a){try{return z.Od(a).next()}catch(b){if(b!=z.Pd)throw b;return null}};
z.eq=function(a,b){var c=z.Od(a),d=new z.Nd;d.next=function(){for(;;){var a=c.next();if(b.call(void 0,a,void 0,c))return a}};return d};var fq=function(a,b,c){return Math.min(Math.max(a,b),c)};z.gq=function(a){var b={},c;for(c in a)b[a[c]]=c;return b};var hq=function(a,b){var c={},d;for(d in a)c[d]=b.call(void 0,a[d],d,a);return c};
var iq=function(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if(z.na(d))for(var f=0;f<d.length;f+=8192)for(var g=z.zb(d,f,f+8192),g=iq.apply(null,g),h=0;h<g.length;h++)b.push(g[h]);else b.push(d)}return b};z.jq=function(a,b){for(var c=z.pa(a)?a.split(""):a,d=a.length-1;0<=d;d--)if(d in c&&b.call(void 0,c[d],d,a))return d;return-1};var kq=function(a,b){var c=0;z.w(a,function(a,f,g){b.call(void 0,a,f,g)&&++c},void 0);return c};
z.lq=function(a){return function(){return!a.apply(this,arguments)}};z.mq=function(a){var b=arguments,c=b.length;return function(){for(var a=0;a<c;a++)if(!b[a].apply(this,arguments))return!1;return!0}};z.nq=function(a){var b=arguments,c=b.length;return function(){for(var a,f=0;f<c;f++)a=b[f].apply(this,arguments);return a}};var oq=function(a){var b;b=b||0;return function(){return a.apply(this,Array.prototype.slice.call(arguments,0,b))}};z.pq=function(){return"goog_"+z.Al++};
var qq=function(a){20<a.length&&(a=a.substring(0,17)+"...");return a};z.rq=function(a){return a.replace(/[\s\xa0]+$/,"")};z.sq=function(a){return a.replace(/^[\s\xa0]+/,"")};var tq=function(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};z.uq=function(a){return a.replace(/(\r\n|\r|\n)+/g," ")};z.vq=function(a){return!/[^\t\n\r ]/.test(a)};var wq=function(){throw Error("unimplemented abstract method");};
z.Z=function(a){z.ee.call(this);this.kK=!!a;this.headers.set("X-Requested-With","XMLHttpRequest");this.on("complete",this.HO,!1,this)};z.xq=function(a,b,c,d){var f=new z.Z;if(b)f.on("complete",b);f.ajax(a,d,c)};var yq=function(a,b){zq.push({yK:a,filter:b})};var Aq=function(a){var b=a.getResponseHeader("content-type");if(b){var c=Bq[b.split(";")[0].toLowerCase()];if(c&&zq.length){var d=z.ue(a);z.w(zq,function(a){"*"!==a.yK&&a.yK!==c||a.filter("json"===c?JSON.parse(d):d,this)},a)}}};
var Cq=function(){if(Dq)return Dq;var a=z.M("div",{id:"zh-global-spinner",style:"display:none",innerHTML:"加载中…"});window.document.body.appendChild(a);return Dq=a};var Eq=function(){z.F.call(this)};
z.Fq=function(a,b,c){function d(){var b=new z.Z(!0),d="/question/"+(a?"set_anonymous":"set_public"),g="qid\x3d"+(c||z.R.pa);b.on("success",function(){var c=z.Zn(b);c&&!c.r&&(z.R&&(z.R.mb=a),f.dispatchEvent(new z.Gq(a)))});b.ajax(d,g)}var f=z.Hq,g={title:"确认使用匿名身份？",content:'\x3cp\x3e使用匿名身份后\x3c/p\x3e\x3cul style\x3d"margin: 5px 0 0 5px;list-style-position: inside;"\x3e\x3cli\x3e提问、回答、赞同、关注会显示为匿名\x3c/li\x3e\x3cli\x3e除提问者本人，不能匿名编辑问题\x3c/li\x3e\x3cli\x3e不能邀请别人回答问题\x3c/li\x3e\x3c/ul\x3e'},h={title:"确认取消匿名身份？",
content:"取消匿名身份后， 提问、回答、赞同和关注将以实名显示。"};z.W.confirm(a?g:h,function(a){a&&d();b&&b(a)})};z.Gq=function(a){this.type="anon_change";this.mb=a};var Iq=function(a){z.F.call(this);this.J=window.$.extend({gk:z.p},a||{});this.qr=z.qm.guiders2||{};this.kQ=(0,z.G)();this.qb=z.Oj&&!z.Pj;this.Rb()};var Jq=function(a,b,c){function d(g){g||(g=a.shift())&&b.call(c,g,f++,d)}a=a.slice();var f=0;d()};
var Kq=function(a){var b={"home-topstory":{path:"/",offset:{right:-10},Tt:"righttop",hn:"arrow-lefttop",nA:".zu-main-feed-con",st:".zu-main-sidebar"}},c=a.qr.section;c&&Jq(z.Ib(c),function(a,f,g){(f=b[a])&&f.path===window.location.pathname?Lq(this,"section",a,c[a],f,!1,g):g()},a)};
var Mq=function(a){var b={"/":{offset:{top:6},trigger:"1page-down inview",Tt:"lefttop",hn:"arrow-righttop",nA:".js-sidebarRoundtable",st:".zu-main-content-inner"},"/explore":{Tt:"lefttop",hn:"arrow-righttop",nA:".explore-side-section-roundtable",st:".zu-main-content-inner"}},c=a.qr["exclusive-popover"];c&&Jq(z.Ib(c),function(a,f,g){var h;"roundtable"===a&&(h=b[window.location.pathname]);h&&Lq(this,"exclusive-popover",a,c[a],h,h.trigger,g)},a)};
var Lq=function(a,b,c,d,f,g,h){if(b&&c&&d&&f){var k=(0,window.$)(f.nA);if(k.length&&("righttop"!==f.Tt||300<z.Pe().width-k[0].getBoundingClientRect().right)){var m=(0,window.$)(z.La('\x3cdiv class\x3d"guide2-section-popover"\x3e\x3cdiv class\x3d"title"\x3e%s\x3c/div\x3e\x3cdiv class\x3d"content"\x3e%s\x3c/div\x3e\x3cdiv class\x3d"action"\x3e\x3ca class\x3d"dismiss" href\x3d"%s"\x3e%s\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e',d.title||"",d.content,d.dismissHref||"#",d.dismissText));m.addClass(f.Tt).addClass(f.hn).appendTo(k);
var n=f.offset;n&&window.$.each(["left","top","right","bottom"],function(a,b){n[b]&&m.css("margin-"+b,n[b])});var t=(0,window.$)([]);z.Aa(function(a){return(0,z.G)()-a},a.kQ);var C=function(){f.st&&(t=(0,window.$)('\x3cspan class\x3d"guidev2-mask"/\x3e').appendTo(f.st));(0,window.setTimeout)(function(){m.add(t).addClass("fx-show");K()});window.$.post("/node/Guide2",{method:"dismiss_popover",params:{category:b,key:c}})},J=function(a){if(window.Modernizr.csstransitions)m.add(t).removeClass("fx-show").onTransitionEnd(function(){(0,window.$)(this).remove()},
350);else m.add(t).remove();h&&h(a)};a=function(a){function b(a){var c=!1;return function(){!0!==c&&(c=a.apply(this,arguments));return c}}var c=0,d=b(function(){var a=window.pageYOffset;if(a>=f.size.height)return c=a,!0}),d={"1page-down .5page-up":z.mq(d,b(function(){return c-window.pageYOffset>=f.size.height/2})),"1page-down inview":z.mq(d,function(){return Pn(f,k[0])})},f=new z.Qk,g=d[a]||d["1page-down .5page-up"];f.o().g(f,"update",function(){g()&&(f.H(),C())})};var K=function(){var a=new z.Qk;
a.o().g(a,"update",function(){m.parent().length?Pn(a,m[0])||(J(),a.H()):a.H()})};(0,window.$)(".dismiss",m).click(function(){J();return!1});(0,window.$)(".skip-all",m).click(function(){window.$.post("/node/Guide2",{method:"skip_popover",params:{category:b}});J(!0);return!1});g?a(g):C()}}};var Nq=function(){var a=(0,window.$)("#guidersv2-page-banner");(0,window.$)(".js-close",a).click(function(){a.remove()})};
var Oq=function(a){function b(a){window.$.post("/node/Guide2",{method:"dismiss_editor",params:{key:a}})}function c(a){z.wi(Object.assign({category:"popup_guide",label:{bio:"popup_guide_personal_introduction",topic:"popup_guide_topic_recommendation"}[k]},a))}function d(a){m||(m=new z.U,m.Cf(!0),m.TE=!1,z.V.add(m.ai(),"guidev2-dialog"));m.ka(a);m.G(!0)}var f=window.$.Deferred(),g=a.qb,h=a.qr.editor;if(!h||!h.length)return f.reject();var h=h.slice(),k,m,n={},t={bio:function(a){if(g)return a();var f=
(0,window.$)("#tmpl-guidev2-bio-editor").html();if(!f)return window.console&&window.console.warn("Cannot find template"),a();var h=z.nq(a,function(){b("bio")});d(f);(function(a){function b(){d.prop("disabled",!window.$.trim(f.val()))}a=(0,window.$)(a).off();var d=(0,window.$)("button.submit",a),f=(0,window.$)("input.bio",a);d.click(function(){var a=n.cw=window.$.trim(f.val());a&&(window.$.post("/node/Guide2",{method:"add_headline",params:{headline:a}}),c({action:"click_edit_personal_introduction_submit",
attributes:{personal_introduction:a}}),h())});(0,window.$)("button.skip",a).click(function(){c({action:"click_edit_personal_introduction_skip"});h()});f.focus().on("change keyup input",b);b()})(m.R());c({action:"popup_edit_personal_introduction_appear"})},topic:function(a){var f=z.nq(a,function(){z.Hq.dispatchEvent("guider2:topicselected")});a=(0,window.$)("#tmpl-guidev2-topic-selector").html();if(!a)return window.console&&window.console.warn("Cannot find template"),f();f=z.nq(f,function(){b("topic")});
d(a);(function(a){function b(){g.prop("disabled",!d.filter(".checked").length)}a=(0,window.$)(a).off();var d=(0,window.$)(".topic",a),g=(0,window.$)("button.submit",a);d.click(function(){(0,window.$)(this).toggleClass("checked");b()});g.click(function(){var a=n.Rm=[],b={};d.filter(".checked").each(function(){var c=(0,window.$)(this),d=c.data("id"),f=c.index(),c=c.find(".name").text();a.push(d);b[d]={topic:c,row:Math.ceil((f+1)/3),column:f%3+1}});a.length&&(window.$.post("/topics/follow",{follow_ids:a.join(",")}),
c({action:"click_popup_guide_topic_recommendation_submit",attributes:{selected_topic:b}}),f())});(0,window.$)("button.skip",a).click(function(){c({action:"click_popup_guide_topic_recommendation_skip"});f()});b()})(m.R());c({action:"popup_guide_topic_recommendation_appear"})}};(0,window.$)(window).on("beforeunload.guide2",function(){m&&m.U()&&c({oc:!0,action:{bio:"click_edit_personal_introduction_close",topic:"click_guide_topic_recommendation_close"}[k]})});Jq(h,function(a,b,c){if(t[a]){k=a;var d=
b===h.length-1,g=function(a){if(m)if(window.Modernizr.cssanimations)var b=(0,window.$)(m.ai()).addClass("fx-hide").onAnimationEnd(function(){b.removeClass("fx-hide");a()},400);else a()};t[a](function(){d?g(function(){m.G(!1);f.resolve(n);(0,window.$)(window).off(".guide2");"/topic"===window.location.pathname&&window.location.reload()}):g(c)})}});return f.promise()};var Pq=function(a,b){z.F.call(this);a&&this.attach(a,b)};
var Qq=function(a,b,c,d){z.Qc.call(this,d);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c};var Rq=function(){};var Sq=function(a,b,c){if(a=c||a.lf())c=b.getAttribute("role")||null,a!=c&&z.Wi(b,a)};var Tq=function(a,b,c){var d=b.eD;null!=d&&a.RA(c,d);b.U()||z.Xi(c,"hidden",!b.U());b.isEnabled()||a.ug(c,1,!b.isEnabled());Uq(b,8)&&a.ug(c,8,!!(b.N&8));Uq(b,16)&&a.ug(c,16,b.tf());Uq(b,64)&&a.ug(c,64,b.rb())};
var Vq=function(a,b){var c=[];b&&(a=a.concat([b]));z.w([],function(d){!z.uo(d,z.Aa(z.x,a))||b&&!z.x(d,b)||c.push(d.join("_"))});return c};var Wq=function(a){var b=a.T();b.replace(/\xa0|\s/g," ");a.kr={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};z.Xq=function(){};z.Yq=function(a,b){if(!a)throw Error("Invalid class name "+a);if(!z.sa(b))throw Error("Invalid decorator function "+b);Zq[a]=b};
var $q=function(a,b,c){z.Q.call(this,c);if(!b){b=this.constructor;for(var d;b;){d=z.ua(b);if(d=ar[d])break;b=b.v?b.v.constructor:null}b=d?z.sa(d.aa)?d.aa():new d:null}this.M=b;this.Cm(z.ka(a)?a:null);this.eD=null};
var br=function(a,b){var c=a.o(),d=a.m();b?(c.g(d,"mouseover",a.od).g(d,"mousedown",a.ge).g(d,"mouseup",a.qf).g(d,"mouseout",a.Ml),a.no!=z.p&&c.g(d,"contextmenu",a.no),z.A&&(c.g(d,"dblclick",a.xF),a.vo||(a.vo=new cr(a),z.Bc(a,a.vo)))):(c.qa(d,"mouseover",a.od).qa(d,"mousedown",a.ge).qa(d,"mouseup",a.qf).qa(d,"mouseout",a.Ml),a.no!=z.p&&c.qa(d,"contextmenu",a.no),z.A&&(c.qa(d,"dblclick",a.xF),z.Dc(a.vo),a.vo=null))};var Uq=function(a,b){return!!(a.aq&b)};
var dr=function(a,b){return!!(a.Yi&b)&&Uq(a,b)};var er=function(a,b,c){return Uq(a,b)&&!!(a.N&b)!=c&&(!(a.yk&b)||a.dispatchEvent(Hp(b,c)))&&!a.Gd};var cr=function(a){z.yc.call(this);this.vr=a;this.lr=!1;this.ea=new z.zd(this);z.Bc(this,this.ea);a=this.vr.h;this.ea.g(a,"mousedown",this.Kl).g(a,"mouseup",this.ys).g(a,"click",this.Jl)};var fr=function(){};z.gr=function(a,b,c){$q.call(this,a,b||fr.aa(),c)};var hr=function(){};
var ir=function(a,b,c){if(b){var d=jr(a,c);z.aj(b,d)||(z.Eb(kr,function(a){a=jr(this,a);Ep(b,a,a==d)},a),z.Xi(b,"checked",c==lr?"mixed":c==mr?"true":"false"))}};var jr=function(a,b){var c=a.T();if(b==mr)return c+"-checked";if(b==nr)return c+"-unchecked";if(b==lr)return c+"-undetermined";throw Error("Invalid checkbox state: "+b);};var or=function(a,b,c){c=c||hr.aa();$q.call(this,null,c,b);this.Ph=z.ka(a)?a:nr};z.pr=function(){};var qr=function(){};
z.rr=function(a,b,c,d,f){function g(a){a&&(a.tabIndex=0,z.Wi(a,h.lf()),z.bj(a,"goog-zippy-header"),sr(h,a),a&&h.PG.g(a,"keydown",h.gS))}z.F.call(this);this.ca=f||z.H();this.Qf=this.ca.m(a)||null;this.lj=this.ca.m(d||null);this.ql=(this.it=z.sa(b)?b:null)||!b?null:this.ca.m(b);this.Jb=1==c;z.ka(c)||this.it||(this.lj?this.Jb=z.Lg(this.lj):this.Qf&&(this.Jb=z.aj(this.Qf,"goog-zippy-expanded")));this.PG=new z.zd(this);this.Iz=new z.zd(this);var h=this;g(this.Qf);g(this.lj);this.Nc(this.Jb)};
var tr=function(a){var b=a.lj;return b&&z.Lg(b)?b:a.Qf};var sr=function(a,b){b&&a.Iz.g(b,"click",a.fS)};var ur=function(a,b,c){z.Mc.call(this,a,b);this.Ng=c};var vr=function(){z.U.call(this);this.Cf(!0)};var wr=function(a){var b=(0,window.$)(".resend-activation-email",a.sC);xr(a,b,10,function(){window.$.post("/reactive")})};
var yr=function(a){window.$.get("/settings/account/request_unlock");var b=(0,window.$)("form.send-code",a.iC),c=a.fC=(0,window.$)("form.activate",a.iC),d=(0,window.$)(".submit",b);b.validate(window.$.extend({},zr,{submitHandler:z.pk(d,window.$.proxy(a.HS,a))}));b=(0,window.$)(".submit",c);c.validate(window.$.extend({},zr,{submitHandler:z.pk(b,window.$.proxy(a.GR,a))}));b=(0,window.$)("button.resend-code",c);xr(a,b,60,function(){var a=(0,window.$)('input[name\x3d"account"]',c).val();if(""===a)return c.data("validator").showErrors({account:"请填写手机号或邮箱"}),
!1;var b=this.uf(a),d;b?(a={email:a},d="/settings/account/send_new_email_digits"):(a={phone_no:a},d="/settings/account/send_new_phone_digits");var k=this;window.$.post(d,a,function(a){a.success?Ar(k,b):(a=a.payload.fields,b?k.tb(a,"email","account"):k.tb(a,"phone_no","account"),c.data("validator").showErrors(a))})})};var Ar=function(a,b){a.vv||(a.vv=(0,window.$)(".tip",a.Bd));b?a.vv.html("验证码已发送至你的邮箱，请查收。"):a.vv.html("验证码已发送至你的手机，请查收。")};
var xr=function(a,b,c,d){var f=b.text();b=z.ok(b,c,function(a){return a?"%s 秒后即可重发":f},window.$.proxy(d,a));z.Bc(a,b)};
var Br=function(a){function b(){(0,window.clearTimeout)(g);g=null;try{delete window[d]}catch(a){window[d]=null}}"string"===window.$.type(a)&&(a={url:a});a=a||{};var c=window.$.Deferred(),d="zh"+(0,z.G)()+bo(),f=window.$.extend({},a.data||{},{callback:d}),g=null;a.timeout&&(g=(0,window.setTimeout)(function(){window[d]&&(window[d]=b,c.reject("timeout"))},a.timeout));window[d]=c.resolve;a=a.url+(-1===a.url.indexOf("?")?"?":"\x26")+window.$.param(f);z.dh(a).fail(c.reject).always(b);return c.promise()};
var Cr=function(a,b){b=void 0===b?0:b;z.F.call(this);this.$L=Object.assign({},Dr,a);this.tT=b;this.ou=1E3;this.mH=3E4;this.dQ=1.5};z.Er=function(a,b){a=void 0===a?z.p:a;b=void 0===b?!1:b;z.Q.call(this);this.fI=a;this.XU=b};var Fr=function(a){window.$.get("/antispam/get_token").then(function(b){a.Gi=b.token;a.timeout=b.ttl;a.startTime=Date.now();(0,window.$)(".js-token",a.h).text(a.Gi);(0,window.$)(".js-timeout",a.h).text((0,window.parseInt)(a.timeout/60))})};
var Gr=function(a){var b=(0,window.$)(".js-sent",a.h);b.click(z.pk(b,function(){if(Date.now()>a.startTime+1E3*a.timeout)return Fr(a),Hr(a,"短信超时，请重新发送");Ir(a);a.Nk.show();return window.$.get("/antispam/is_send_sms").then(function(b){b.is_send_sms?Jr(a,"unblock"):Hr(a,"没收到正确的短信，请重新发送");a.Nk.hide()},function(){a.Nk.hide()})}))};
var Kr=function(a){var b=(0,window.$)(".js-verify",a.h);b.click(z.pk(b,function(){var b=a.Ec.Te.val();if(!b)return Hr(a,"请填写验证码");Ir(a);a.Nk.show();return window.$.post("/antispam/create_appeal",{captcha:b}).then(function(b){0===b.errcode?Jr(a,"appeal"):(a.Ec.fu(),Hr(a,b.msg),a.Nk.hide())},function(){a.Nk.hide()})}))};
var Lr=function(a){(0,window.$)(".js-appeal",a.h).click(function(){a.fI("向管理员申诉解封");a.yv.hide();(0,window.$)(".unblock-dialog-appeal",a.h).show();a.Ec.fu();Ir(a)});(0,window.$)(".js-message",a.h).click(function(){a.fI("帐号解封");a.yv.hide();(0,window.$)(".unblock-dialog-message",a.h).show();Ir(a)})};var Mr=function(a){a.Vt=new Cr({url:"/antispam/is_send_sms"},1E3);z.Bc(a,a.Vt);a.Vt.g("message",function(b){b.data.is_send_sms&&Jr(a,"unblock")});a.Vt.Ut()};
var Jr=function(a,b){a.Vt.H();var c;"unblock"===b?c="成功自助解封":"appeal"===b&&(c="成功提交申诉\x3cbr\x3e申诉成功后会以邮件或私信方式通知你");(0,window.$)(".unblock-dialog-success-text",a.h).html(c);a.yv.hide();(0,window.$)(".unblock-dialog-success",a.h).show();if(a.XU){var d=(0,window.$)(".js-count-down",a.h);d.show();var f=5,g;"unblock"===b?g="刷新":"appeal"===b&&(g="关闭");var h=function(){0>=f?"unblock"===b?window.location.reload():"appeal"===b&&a.dispatchEvent("complete"):(d.text(f--+" 秒后自动"+g),(0,window.setTimeout)(h,1E3))};
h()}};var Hr=function(a,b){a.mC.text(b).addClass("is-visible")};var Ir=function(a){a.mC.removeClass("is-visible")};var Nr=function(a){z.U.apply(this,arguments)};
z.Or=function(a,b,c){function d(a){return a&&a.preventDefault?a.preventDefault():!1}return function(f){var g={kb:!0,re:!1,Et:!1,KI:!1};z.na(b)?(!0===b[0]&&(g=hq(g,function(){return!0})),z.Nb(g,b[1])):!0===b?g=hq(g,function(){return!0}):(z.sa(b)&&(b=b.apply(this,arguments)),z.Nb(g,b||{}));var h=z.sa(c)?c.apply(this,arguments):c;if(!z.S.kb()&&g.kb){var k=new z.Nk;k.Dm(h);k.show();return d(f)}return!z.S.re&&g.re?((new vr).G(!0),window.$.post("/continuation/record",{url:window.location.pathname+window.location.search+
(h||"")}),d(f)):z.fm.QE&&g.KI?(h=z.fm.QE,"warning"===h?k="您的知乎用户名 "+z.S.Hx+' 不符合 \x3ca href\x3d"/question/19791408"\x3e知乎用户名规范\x3c/a\x3e，请您 \x3ca href\x3d"/settings/profile"\x3e修改\x3c/a\x3e。':"pending"===h&&(k="您提交的用户名修改正在审核中，帐号暂时锁定。"),k&&z.W.message(k,4E3),d(f)):z.fm.ew&&g.Et?(z.fm.ew.by_antispam?(new Nr).G(!0):z.W.message(z.fm.ew.message),d(f)):a.apply(this,arguments)}};
z.Pr=function(a){z.F.call(this);this.XG=null;this.qd=a;this.o().g(this.qd,["input","propertychange"],this.eK);Qr(this,!0);z.V.add(this.qd,"zu-seamless-input-origin-element")};var Qr=function(a,b){Rr(a);if(a.oi){var c=a.qd.value;if(b||a.XG!==c)a.XG=c,a.oi.value=c,c=z.Tg(a.qd),a.qd.style.height=z.Bg(a.oi.scrollHeight+c.top+c.bottom,!0),a.dispatchEvent("change")}};
var Rr=function(a){if(!a.oi&&0!==z.Io(a.qd).width){var b=z.M("div",{style:"overflow:hiddenposition:relativeheight:0"},a.oi=z.M("textarea",{rows:1,className:"zu-seamless-input-mock-element"}));window.document.body.appendChild(b);z.Eb("paddingTop paddingBottom fontFamily fontSize fontWeight fontStyle letterSpacing textTransform wordSpacing textIndent lineHeight width white-space".split(" "),function(a){this.oi.style[a]=z.wg(this.qd,a)},a)}};var Sr=function(a){this.Zv=a};
var Tr=function(a,b){a&&(a.tabIndex=b?0:-1)};var Ur=function(a,b,c){if(c)for(var d=c.firstChild,f;d&&d.parentNode==c;){f=d.nextSibling;if(1==d.nodeType){var g=a.ao(d);g&&(g.h=d,b.isEnabled()||g.Wa(!1),b.K(g),g.w(d))}else d.nodeValue&&""!=(0,z.bb)(d.nodeValue)||c.removeChild(d);d=f}};z.Vr=function(a,b,c){z.Q.call(this,c);this.M=b||Sr.aa();this.Nb=a||this.M.mF()};
var Wr=function(a,b){var c=a.o(),d=a.Zb();b?c.g(d,"focus",a.fe).g(d,"blur",a.Zc).g(a.gs(),"key",a.$b):c.qa(d,"focus",a.fe).qa(d,"blur",a.Zc).qa(a.gs(),"key",a.$b)};var Xr=function(a,b){var c=b.m(),c=c.id||(c.id=b.ee());a.Eg||(a.Eg={});a.Eg[c]=b};var Yr=function(a){return z.bh(a,a.Ta)};z.Zr=function(a){$r(a,function(a,c){return(a+1)%c},z.ah(a)-1)};var as=function(a){$r(a,function(a,c){a--;return 0>a?c-1:a},0)};var bs=function(a){$r(a,function(a,c){return(a+1)%c},a.Ta)};
var cs=function(a){$r(a,function(a,c){a--;return 0>a?c-1:a},a.Ta)};var $r=function(a,b,c){c=0>c?Vn(a,a.lc):c;var d=z.ah(a);c=b.call(a,c,d);for(var f=0;f<=d;){var g=z.bh(a,c);if(g&&a.AD(g)){a.ub(c);break}f++;c=b.call(a,c,d)}};var ds=function(){z.Q.call(this);this.ev=[]};z.es=function(a,b){this.Sa=a||[];this.$B=!b};var fs=function(a,b,c){var d=[];if(""!=a){a=z.Ya(a);a=new RegExp("(^|\\W+)"+a,"i");for(var f=0;f<c.length&&d.length<b;f++){var g=c[f];String(g).match(a)&&d.push(g)}}return d};
var gs=function(a,b,c){for(var d=[],f=0;f<c.length;f++){var g=c[f],h=a.toLowerCase(),k=String(g).toLowerCase(),m=0;if(-1!=k.indexOf(h))m=(0,window.parseInt)((k.indexOf(h)/4).toString(),10);else for(var n=h.split(""),t=-1,C=10,J=0,K;K=n[J];J++)K=k.indexOf(K),K>t?(t=K-t-1,t>C-5&&(t=C-5),m+=t,t=K):(m+=C,C+=5);m<6*h.length&&d.push({jV:g,hJ:m,index:f})}d.sort(function(a,b){var c=a.hJ-b.hJ;return 0!=c?c:a.index-b.index});a=[];for(J=0;J<b&&J<d.length;J++)a.push(d[J].jV);return a};
z.hs=function(a,b,c){z.F.call(this);this.Ld=a;this.Bf=c;this.M=b;z.E(b,[is,z.js,ks,z.ls],this.handleEvent,!1,this);this.Xb=null;this.Sa=[];this.Tg=-1;this.Wc=0;this.Yd=this.zc=null;this.wG={}};z.ms=function(a){for(var b=a.Wc+a.Sa.length-1,c=a.Tg,d=0;d<a.Sa.length;d++){if(c>=a.Wc&&c<b)c++;else if(-1==c)c=a.Wc;else if(a.XC&&c==b){a.ag(-1);break}else if(a.BK&&c==b)c=a.Wc;else break;if(a.ag(c))break}};
var ns=function(a){for(var b=a.Wc+a.Sa.length-1,c=a.Tg,d=0;d<a.Sa.length;d++){if(c>a.Wc)c--;else if(a.XC&&c==a.Wc){a.ag(-1);break}else if(!a.BK||-1!=c&&c!=a.Wc)break;else c=b;if(a.ag(c))break}};z.os=function(a){a.kG()||window.setTimeout((0,z.q)(a.kG,a),10)};var ps=function(a,b){var c=b-a.Wc;return 0>c||c>=a.Sa.length?-1:c};
z.qs=function(a){var b=0,c=0;if(rs(a))b=a.selectionStart,c=-1;else if(z.A){var d=ss(a),f=d[0],d=d[1];if(f.inRange(d)){f.setEndPoint("EndToStart",d);if("textarea"==a.type){d.duplicate();b=a=f.text;for(c=!1;!c;)0==f.compareEndPoints("StartToEnd",f)?c=!0:(f.moveEnd("character",-1),f.text==a?b+="\r\n":c=!0);f=[b.length,-1];return f}b=f.text.length;c=-1}}return[b,c]};
z.ts=function(a,b){if(rs(a))a.selectionStart=b,a.selectionEnd=b;else if(z.A){b=us(a,b);var c=a.createTextRange();c.collapse(!0);c.move("character",b);c.select()}};var ss=function(a){var b=a.ownerDocument||a.document,c=b.selection.createRange();"textarea"==a.type?(b=b.body.createTextRange(),b.moveToElementText(a)):b=a.createTextRange();return[b,c]};var us=function(a,b){"textarea"==a.type&&(b=z.Ma(a.value.substring(0,b)).length);return b};var rs=function(a){try{return"number"==typeof a.selectionStart}catch(b){return!1}};
z.vs=function(a,b,c,d){z.yc.call(this);d=d||150;this.gm=null!=c?c:!0;this.Ep=a||",;";this.wN=this.Ep.substring(0,1);a=this.gm?"[\\s"+this.Ep+"]+":"[\\s]+";this.YJ=new RegExp("^"+a+"|"+a+"$","g");this.LU=new RegExp("\\s*["+this.Ep+"]$");this.cH=b||"";this.ET=!1;this.CT=this.gm;this.na=0<d?new z.ud(d):null;this.gc=new z.zd(this);this.Dv=new z.zd(this);this.sb=new Pq;this.UG=-1};
var ws=function(a,b,c){if(z.ka(c)?c:a.gm){c=xs(a,a.W(),z.qs(a.cb)[0]);var d=ys(a,a.W());a.LU.test(b)||(b=z.rq(b)+a.wN);a.fW&&(0==c||z.Xo(d[c-1])||(b=" "+b),c==d.length-1&&(b+=" "));if(b!=d[c]){d[c]=b;b=a.cb;(z.y||z.A&&z.D("9"))&&b.blur();b.value=d.join("");for(var f=0,g=0;g<=c;g++)f+=d[g].length;b.focus();c=f;d=a.cb;b=c;rs(d)?d.selectionStart=b:z.A&&(f=ss(d),g=f[0],g.inRange(f[1])&&(b=us(d,b),g.collapse(!0),g.move("character",b),g.select()));d=a.cb;rs(d)?d.selectionEnd=c:z.A&&(f=ss(d),b=f[1],f[0].inRange(b)&&
(c=us(d,c),d=us(d,z.qs(d)[0]),b.collapse(!0),b.moveEnd("character",c-d),b.select()))}}else a.Ea(b);a.IA=!0};var zs=function(a,b){var c=a.gm&&b.charCode&&-1!=a.Ep.indexOf(String.fromCharCode(b.charCode));a.NU&&c&&a.update();return a.MU&&c&&a.Z.zi()?(b.preventDefault(),!0):!1};var As=function(a){a.sb.attach(a.cb);a.gc.g(a.sb,"key",a.gp);a.gc.g(a.cb,"mousedown",a.WH);z.A&&a.gc.g(a.cb,"keypress",a.SH)};
var Bs=function(a,b){a.Dv.removeAll();a.Z&&z.os(a.Z);b!=a.cb&&(a.cb=b,a.na&&(a.na.start(),a.gc.g(a.na,"tick",a.lm)),a.Oo=a.W(),As(a))};var Cs=function(a){a.Ni&&(a.Ni=!1,a.gc.qa(a.cb,"keypress",a.UH),a.gc.qa(a.cb,"keyup",a.VH))};var xs=function(a,b,c){a=ys(a,b);if(c==b.length)return a.length-1;for(var d=b=0,f=0;d<a.length&&f<=c;d++)f+=a[d].length,b=d;return b};
var ys=function(a,b){if(!a.gm)return[b];for(var c=String(b).split(""),d=[],f=[],g=0,h=!1;g<c.length;g++)a.cH&&-1!=a.cH.indexOf(c[g])?(a.iO&&!h&&(d.push(f.join("")),f.length=0),f.push(c[g]),h=!h):h||-1==a.Ep.indexOf(c[g])?f.push(c[g]):(f.push(c[g]),d.push(f.join("")),f.length=0);d.push(f.join(""));return d};z.Ds=function(a,b,c){z.yc.call(this);this.VB=a;this.$B=!b;this.da=new z.ee(c)};
z.Es=function(a,b,c,d,f,g,h,k,m){var n=Fs(c),t=z.Jp(a),C=Mp(a);C&&t.Sy(new z.rg(C.left,C.top,C.right-C.left,C.bottom-C.top));var C=z.H(a),J=z.H(c);if(C.wa()!=J.wa()){var K=C.wa().body;var J=J.Va(),O=new z.He(0,0),ca=z.Se(z.Ke(K));if(z.Pc(ca,"parent")){var Xa=K;do{var cb=ca==J?z.po(Xa):z.Fg(Xa);O.x+=cb.x;O.y+=cb.y}while(ca&&ca!=J&&ca!=ca.parent&&(Xa=ca.frameElement)&&(ca=ca.parent))}K=No(O,z.po(K));!z.A||9<=z.Ug||Yn(C)||(K=No(K,z.wf(C)));t.left+=K.x;t.top+=K.y}a=Gs(a,b);t=new z.He(a&2?t.left+t.width:
t.left,a&1?t.top+t.height:t.top);t=No(t,n);f&&(t.x+=(a&2?-1:1)*f.x,t.y+=(a&1?-1:1)*f.y);var Ha;if(h)if(m)Ha=m;else if(Ha=Mp(c))Ha.top-=n.y,Ha.right-=n.x,Ha.bottom-=n.y,Ha.left-=n.x;return Hs(t,c,d,g,Ha,h,k)};
var Fs=function(a){var b;if(a=a.offsetParent){var c="HTML"==a.tagName||"BODY"==a.tagName;c&&"static"==z.zg(a)||(b=z.po(a),c||(c=(c=z.Ng(a))&&z.y?-a.scrollLeft:!c||z.Gl&&z.D("8")||"visible"==z.yg(a,"overflowX")?a.scrollLeft:a.scrollWidth-a.clientWidth-a.scrollLeft,b=No(b,new z.He(c,a.scrollTop))))}return b||new z.He};
var Hs=function(a,b,c,d,f,g,h){a=a.clone();var k=Gs(b,c);c=z.Ig(b);h=h?h.clone():c.clone();a=a.clone();h=h.clone();var m=0;if(d||0!=k)k&2?a.x-=h.width+(d?d.right:0):d&&(a.x+=d.left),k&1?a.y-=h.height+(d?d.bottom:0):d&&(a.y+=d.top);if(g){if(f){d=a;k=h;m=0;65==(g&65)&&(d.x<f.left||d.x>=f.right)&&(g&=-2);132==(g&132)&&(d.y<f.top||d.y>=f.bottom)&&(g&=-5);d.x<f.left&&g&1&&(d.x=f.left,m|=1);if(g&16){var n=d.x;d.x<f.left&&(d.x=f.left,m|=4);d.x+k.width>f.right&&(k.width=Math.min(f.right-d.x,n+k.width-f.left),
k.width=Math.max(k.width,0),m|=4)}d.x+k.width>f.right&&g&1&&(d.x=Math.max(f.right-k.width,f.left),m|=1);g&2&&(m=m|(d.x<f.left?16:0)|(d.x+k.width>f.right?32:0));d.y<f.top&&g&4&&(d.y=f.top,m|=2);g&32&&(n=d.y,d.y<f.top&&(d.y=f.top,m|=8),d.y+k.height>f.bottom&&(k.height=Math.min(f.bottom-d.y,n+k.height-f.top),k.height=Math.max(k.height,0),m|=8));d.y+k.height>f.bottom&&g&4&&(d.y=Math.max(f.bottom-k.height,f.top),m|=2);g&8&&(m=m|(d.y<f.top?64:0)|(d.y+k.height>f.bottom?128:0));f=m}else f=256;m=f}g=new z.rg(0,
0,0,0);g.left=a.x;g.top=a.y;g.width=h.width;g.height=h.height;f=m;if(f&496)return f;z.Ag(b,new z.He(g.left,g.top));h=g.Pg();z.Yp(c,h)||(c=h,a=Yn(z.H(z.Ke(b))),!z.A||z.D("10")||a&&z.D("8")?(b=b.style,z.y?b.MozBoxSizing="border-box":z.B?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(c.width,0)+"px",b.height=Math.max(c.height,0)+"px"):(h=b.style,a?(a=z.Qg(b),b=z.Tg(b),h.pixelWidth=c.width-b.left-a.left-a.right-b.right,h.pixelHeight=c.height-b.top-a.top-a.bottom-b.bottom):(h.pixelWidth=
c.width,h.pixelHeight=c.height)));return f};var Gs=function(a,b){return(b&4&&z.Ng(a)?b^2:b)&-5};z.Is=function(a,b,c,d){z.F.call(this);this.Ra=a||window.document.body;this.ca=z.H(this.Ra);this.xp=!a;this.h=null;this.Xb="";this.Sa=[];this.Af=[];this.CJ=this.Ul=-1;this.ob=!1;this.className="ac-renderer";this.lh="ac-row";this.ZG="active";this.Ev="ac-active";this.VP="ac-highlighted";this.kl=b||null;this.lK=null!=d?d:!0;this.lR=!0;this.to=!1;this.nU=!!c;this.Ru=!1;this.To=0;this.yJ=!1};
var Js=function(a,b){a.zc&&(z.Xi(a.zc,"haspopup",b),z.Xi(a.h,"expanded",b),b?z.Xi(a.zc,"owns",a.h.id):(a.zc.removeAttribute("aria-owns"),Gp(a.zc,null)))};var Ks=function(a,b){var c=0<=b&&b<a.Sa.length?a.Sa[b]:void 0,d=0<=b&&b<a.Af.length?a.Af[b]:void 0;a.dispatchEvent({type:"rowhilite",YX:d,xi:c?c.data:null})&&(0<=a.Ul&&z.ej(a.Af[a.Ul],[a.Ev,a.ZG]),a.Ul=b,d&&(z.cj(d,[a.Ev,a.ZG]),a.zc&&Gp(a.zc,d),Lp(d,a.h)))};
var Ls=function(a){if(!a.h){var b=a.ca.B("DIV",{style:"display:none"});a.yJ&&(b.style.overflowY="auto");a.h=b;z.cj(b,(0,z.bb)(a.className).split(" "));z.Wi(b,"listbox");b.id=z.Xg(z.Wg.aa());a.ca.appendChild(a.Ra,b);z.E(b,"click",a.Jl,!1,a);z.E(b,"mousedown",a.Kl,!1,a);z.E(b,"mouseover",a.FF,!1,a)}};
var Ms=function(a){Ls(a);a.Ru&&(a.h.style.visibility="hidden");a.gW&&(a.h.style.minWidth=a.gW.clientWidth+"px");a.Af.length=0;a.ca.vp(a.h);if(a.kl&&a.kl.render)a.kl.render(a,a.h,a.Sa,a.Xb);else{var b=null;z.w(a.Sa,function(a){a=Ns(this,a,this.Xb);this.Ru?this.h.insertBefore(a,b):this.ca.appendChild(this.h,a);b=a},a)}0==a.Sa.length?a.Fc():(a.show(),a.ha(),z.Ip(a.h,!0))};
var Os=function(a,b,c){if(a.to||!a.wK)if(3==b.nodeType){var d=null;z.na(c)&&1<c.length&&!a.to&&(d=z.zb(c,1));c=Ps(a,c);if(0!=c.length){var f=b.nodeValue,g=a.lR?new RegExp("\\b(?:"+c+")","gi"):new RegExp(c,"gi");c=[];for(var h=0,k=g.exec(f),m=0;k;)m++,c.push(f.substring(h,k.index)),c.push(f.substring(k.index,g.lastIndex)),h=g.lastIndex,k=g.exec(f);c.push(f.substring(h));if(1<c.length){d=a.to?m:1;for(f=0;f<d;f++)g=2*f,b.nodeValue=c[g],h=a.ca.createElement("B"),h.className=a.VP,a.ca.appendChild(h,a.ca.createTextNode(c[g+
1])),h=b.parentNode.insertBefore(h,b.nextSibling),b.parentNode.insertBefore(a.ca.createTextNode(""),h.nextSibling),b=h.nextSibling;c=z.zb(c,2*d);b.nodeValue=c.join("");a.wK=!0}else d&&Os(a,b,d)}}else for(b=b.firstChild;b;)d=b.nextSibling,Os(a,b,c),b=d};
var Ps=function(a,b){var c="";if(!b)return c;z.na(b)&&(b=z.nb(b,function(a){return!z.Xo(null==a?"":String(a))}));a.to?z.na(b)?c=z.ob(b,z.Ya).join("|"):(c=b.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,""),c=z.Ya(c),c=c.replace(/ /g,"|")):z.na(b)?c=0<b.length?z.Ya(b[0]):"":/^\W/.test(b)||(c=z.Ya(b));return c};
var Ns=function(a,b,c){var d=a.ca.B("DIV",{className:a.lh,id:z.Xg(z.Wg.aa())});z.Wi(d,"option");a.kl&&a.kl.ud?a.kl.ud(b,c,d):a.TI(b,c,d);c&&a.lK&&(a.wK=!1,Os(a,d,c));z.bj(d,a.lh);a.Af.push(d);return d};var Qs=function(a,b){for(;b&&b!=a.h&&!z.aj(b,a.lh);)b=b.parentNode;return b?z.mb(a.Af,b):-1};z.Rs=function(a,b,c,d){this.Ld=a=new z.Ds(a,!d);d=new z.Is;c=new z.vs(null,null,!!c,300);z.hs.call(this,a,d,c);c.Z=this;c.Vk(b)};
z.Ss=function(a,b){var c=this,d={};z.Nb(d,this.defaults,b||{});this.J=d;var f=d.ud?{ud:(0,z.q)(d.ud,c)}:null;f&&(f.render=d.render?(0,z.q)(d.render,c):null);this.M=f=new z.Is(d.uk,f);var g="string"===typeof d.source?z.Ds:z.es,h=new g(d.source,!d.ZV);this.Ld=h;var k=d.Qy;k||(k=new z.vs(d.separator,d.yN,!!d.multiple,d.delay),k.Ai=function(a,b){var f;z.sa(d.select)&&(f=d.select.call(c,a,c.M.Af[c.M.Ul]));ws(this,z.ka(f)?f:a.label||a.toString(),b);return!1});z.hs.call(this,h,f,k);k.Z=this;k.Vk(a);a.setAttribute("autocomplete",
"off");h.wi=function(a,b,f){var h=f;z.sa(d.format)&&(h=function(a,b){var g=d.format.call(c,b,a);z.sa(d.filter)&&(g=d.filter.call(c,g,a));f(a,g)});return g.prototype.wi.call(this,a,b,h)};f.TI=function(a,b,c){a=a.data;c.innerHTML=a.zV?a.zV():a.label||a.toString()};this.zc=a;d.Ke&&(this.cm=d.Ke);d.placeholder&&(this.mc=new z.qk(a,d.placeholder));this.addEventListener("suggestionsupdate",function(){this.dispatchEvent(this.rb()?"show":"hide")})};var Ts=function(a,b,c,d){z.vs.call(this,a,b,c,d)};
z.Us=function(a,b){z.Q.call(this,b);this.Lb=a||""};var Vs=function(){null!=Ws||(Ws="placeholder"in window.document.createElement("INPUT"));return Ws};var Xs=function(a){!a.fO&&a.S&&a.m().form&&(a.S.g(a.m().form,"submit",a.bP),a.fO=!0)};var Ys=function(a){return!!a.m()&&""!=a.m().value&&a.m().value!=a.Lb};var Zs=function(a,b){return window.$.post("/node/MemberFollowBaseV2",{method:b?"follow_member":"unfollow_member",params:{hash_id:a}})};
var $s=function(a,b){return window.$.post("/node/QuestionFollowBaseV2",{method:b?"follow_question":"unfollow_question",params:{question_id:a}})};var at=function(a,b){return window.$.post(b?"/collection/follow":"/collection/unfollow",{favlist_id:a})};var bt=function(a,b){return window.$.post("/node/TopicFollowBaseV2",{method:b?"follow_topic":"unfollow_topic",params:{topic_id:a}})};z.ct=function(a,b){return window.$.get("/"+a+"/"+b+"/sharetext")};var dt=function(a,b,c,d){z.vs.call(this,a,b,c,d)};
var et=function(a,b){z.Ds.call(this,a,b);this.HA=null;this.ZE=!0};var ft=function(a,b,c,d){this.uH=0;z.vs.call(this,a,b,!!c,d||300)};var gt=function(a,b,c,d){ft.call(this,a,b,!!c,d)};
z.ht=function(a,b,c,d,f,g,h,k,m){var n={};"question_suggest"===g?(n.render=(0,z.q)(this.aU,this),n.ud=hp):"topic_question"===g?(n.render=(0,z.q)(this.cU,this),n.ud=ip):n.ud=g?ip:hp;g=new z.Is(f,n);f&&(g.xp=!1);g.to=!0;this.M=g;this.Ld=new et(a,!d);a=m?m:new ft(null,null,c);h&&h.length&&new z.qk(b,h[0]);a.dK=!1;z.hs.call(this,this.Ld,g,a);a.Z=this;a.Wq(b);k&&(a.uH=k)};
z.it=function(a,b,c){z.F.call(this);this.Ee=c||"搜索话题";this.pa=b;this.data=a||[];this.status=jt;this.XT="/topic/unbind";this.JL="/topic/bind";this.isEnabled=!0;this.Ps='\x3ca class\x3d"zm-tag-editor-tip-link" href\x3d"#" name\x3d"edit"\x3e帮忙给这个问题选个话题吧，好让别人来回答\x3c/a\x3e\x3ca name\x3d"edit" class\x3d"zu-edit-button" href\x3d"#"\x3e\x3ci class\x3d"zu-edit-button-icon"\x3e\x3c/i\x3e添加\x3c/a\x3e';this.Ke=10;this.Ct=!1;this.tt=window.Infinity;this.wt=0;this.QC=!1};
var kt=function(a){a=z.Xp("zm-item-tag",a.rg);return z.ob(a,function(a){var c=[(0,z.bb)(a.innerHTML),a.getAttribute("data-token"),null,a.getAttribute("data-topicid")];c.NV=!!a.getAttribute("data-uneditable");return c})};var lt=function(a){if(a.data.length){var b=z.ob(a.data,function(a){return z.op(a,"",null,"b")},a);a.isEnabled&&b.push(mp());a.rg.innerHTML=b.join("")}else a.isEnabled&&(a.rg.innerHTML=a.Ps)};var mt=function(a,b){return z.nb(b,function(a){return"topic"!==a[0]?!1:!this.qx(a)},a)};
var nt=function(a,b,c){function d(){return z.rb(b,function(a){return"topic"===a[0]&&a[4]&&a[1]===c})}function f(){return z.rb(b,function(a){return 3>=a.length&&a[1]===z.La("创建 %s 话题",a[2])})}var g=(0,z.q)(function(){return z.rb(this.data,function(a){return a[0]===c})},a);z.S.Fs?!a.QC||b.length&&(f()||d())||g()||b.push(["topic",z.La("创建 %s 话题",c),c]):(a=f())&&(1<b.length?z.ub(b,a):b=[["plain_text",'\x3cspan class\x3d"zu-autocomplete-row-name zu-autocomplete-row-name-info"\x3e没有找到话题：'+a[2]+'\x3c/span\x3e\x3cspan class\x3d"zg-gray-normal zu-autocomplete-row-description"\x3e请使用已经创建的话题\x3c/span\x3e']]);
return b};var ot=function(a){var b=a.data.length>=a.tt;a.ff&&z.P(a.ff,!b);a.ut&&z.P(a.ut,b)};var pt=function(a){var b=[];a.data=z.nb(a.data,function(a){if(z.x(b,a[1]))return!1;b.push(a[1]);return!0})};z.qt=function(a,b,c){z.it.call(this,a,0,c?"添加父话题":"添加子话题");this.$y=c;this.Ff=b;this.Ps="";this.SI="/topic/parent/remove"};var rt=function(a){z.it.call(this);this.Ps="";this.Ee=a||"";this.tt=this.Ke=5;this.Eq=(0,window.$)("#zh-question-suggest-title-content")};
var st=function(a){var b;b=a.Zp?z.nb(a.Zp,function(a){return!this.qx(a)},a):[];a.Gq.show();b&&0!==b.length||a.Gq.hide();var c="";b=z.ob(b,function(a){return"\x3ca href\x3d'javascript:;' name\x3d'add' data-id\x3d'"+a[4]+"' data-text\x3d'"+a[1]+"' class\x3d'zg-r3px zm-item-tag'\x3e\x3cspan\x3e"+a[1]+"\x3c/span\x3e\x3c/a\x3e"});c+=b.join("");a.WK.html(c);a.tv.hide()};z.tt=function(a){z.it.call(this,a,0);this.Ps="";this.uD="/topic/ignore"};z.ut=function(){z.yc.call(this)};
z.vt=function(a,b,c,d,f){this.Lc=!!b;this.node=null;this.Vb=0;this.xk=!1;this.sr=!c;a&&this.setPosition(a,d);this.depth=void 0!=f?f:this.Vb||0;this.Lc&&(this.depth*=-1)};z.wt=function(){};var xt=function(a){if(a.getSelection)return a.getSelection();a=a.document;var b=a.selection;if(b){try{var c=b.createRange();if(c.parentElement){if(c.parentElement().document!=a)return null}else if(!c.length||c.item(0).document!=a)return null}catch(d){return null}return b}return null};
z.yt=function(a){for(var b=[],c=0,d=a.xj();c<d;c++)b.push(a.Be(c));return b};z.zt=function(a){return a.Yg()?a.la():a.Y()};z.At=function(a){return a.Yg()?a.La():a.xa()};z.Bt=function(a){return a.Yg()?a.Y():a.la()};z.Ct=function(a){return a.Yg()?a.xa():a.La()};var Dt=function(a,b){z.vt.call(this,a,b,!0)};z.Et=function(){};
z.Ft=function(a,b,c,d,f){this.ua=this.Ba=null;this.Da=this.Fa=0;var g;a&&(this.Ba=a,this.Fa=b,this.ua=c,this.Da=d,1==a.nodeType&&"BR"!=a.tagName&&(a=a.childNodes,(b=a[b])?(this.Ba=b,this.Fa=0):(a.length&&(this.Ba=z.lb(a)),g=!0)),1==c.nodeType&&((this.ua=c.childNodes[d])?this.Da=0:this.ua=c));z.vt.call(this,f?this.ua:this.Ba,f,!0);if(g)try{this.next()}catch(h){if(h!=z.Pd)throw h;}};var Gt=function(a,b){null!=a&&this.append.apply(this,arguments)};var Ht=function(){};
var It=function(a,b){var c=a.O.getClientRects();return c.length?(c=b?c[0]:z.lb(c),new z.He(b?c.left:c.right,b?c.top:c.bottom)):null};z.Jt=function(a){this.O=a};
var Kt=function(a){var b=z.Ke(a).createRange();if(3==a.nodeType)b.setStart(a,0),b.setEnd(a,a.length);else if(Lt(a)){for(var c,d=a;(c=d.firstChild)&&Lt(c);)d=c;b.setStart(d,0);for(d=a;(c=d.lastChild)&&Lt(c);)d=c;b.setEnd(d,1==d.nodeType?d.childNodes.length:d.length)}else c=a.parentNode,a=z.mb(c.childNodes,a),b.setStart(c,a),b.setEnd(c,a+1);return b};var Mt=function(a,b,c,d){var f=z.Ke(a).createRange();f.setStart(a,b);f.setEnd(c,d);return f};var Nt=function(a){this.O=a};
z.Ot=function(a,b){this.ua=this.Ba=this.kg=null;this.Da=this.Fa=-1;this.O=a;this.Mr=b};z.Pt=function(a){var b=z.Ke(a).body.createTextRange();if(1==a.nodeType)b.moveToElementText(a),Lt(a)&&!a.childNodes.length&&b.collapse(!1);else{for(var c=0,d=a;d=d.previousSibling;){var f=d.nodeType;if(3==f)c+=d.length;else if(1==f){b.moveToElementText(d);break}}d||b.moveToElementText(a.parentNode);b.collapse(!d);c&&b.move("character",c);b.moveEnd("character",a.length)}return b};
var Qt=function(a,b){for(var c=b.childNodes,d=0,f=c.length;d<f;d++){var g=c[d];if(Lt(g)){var h=z.Pt(g),k=h.htmlText!=g.outerHTML;if(a.isCollapsed()&&k?0<=a.ye(h,1,1)&&0>=a.ye(h,1,0):a.O.inRange(h))return Qt(a,g)}}return b};
var Rt=function(a,b,c){c=c||a.vc();if(!c||!c.firstChild)return c;for(var d=1==b,f=0,g=c.childNodes.length;f<g;f++){var h=d?f:g-f-1,k=c.childNodes[h],m;try{m=St(k)}catch(t){continue}var n=m.O;if(a.isCollapsed())if(!Lt(k)){if(0==a.ye(n,1,1)){a.Fa=a.Da=h;break}}else{if(m.Fg(a))return Rt(a,b,k)}else{if(a.Fg(m)){if(!Lt(k)){d?a.Fa=h:a.Da=h+1;break}return Rt(a,b,k)}if(0>a.ye(n,1,0)&&0<a.ye(n,0,1))return Rt(a,b,k)}}return c};
var Tt=function(a,b){var c=1==b,d=c?a.Y():a.la();if(1==d.nodeType){for(var d=d.childNodes,f=d.length,g=c?1:-1,h=c?0:f-1;0<=h&&h<f;h+=g){var k=d[h];if(!Lt(k)&&0==a.O.compareEndPoints((1==b?"Start":"End")+"To"+(1==b?"Start":"End"),St(k).O))return c?h:h+1}return-1==h?0:h}f=a.O.duplicate();g=z.Pt(d);f.setEndPoint(c?"EndToEnd":"StartToStart",g);f=f.text.length;return c?d.length-f:f};var Ut=function(a){return 3==a.nodeType?a.nodeValue:a.innerText};
var Vt=function(a,b,c){c=c||z.H(a.parentElement());var d,f=d=b.id;d||(d=b.id=z.pq());a.pasteHTML(b.outerHTML);(b=c.m(d))&&(f||b.removeAttribute("id"));return b};z.Wt=function(a,b,c){var d;d=d||z.H(a.parentElement());var f;1!=b.nodeType&&(f=!0,b=d.B("DIV",null,b));a.collapse(c);b=Vt(a,b,d);f&&(a=b.firstChild,d.ZN(b),b=a);return b};var Xt=function(a){this.O=a};var Yt=function(a){this.O=a};var Zt=function(a){return z.Rl?new z.Ot(a,z.Ke(a.parentElement())):z.B?new Yt(a):z.y?new Nt(a):z.vg?new Xt(a):new z.Jt(a)};
var St=function(a){if(!z.A||9<=z.Ug)a=z.B?new Yt(Kt(a)):z.y?new Nt(Kt(a)):z.vg?new Xt(Kt(a)):new z.Jt(Kt(a));else{var b=new z.Ot(z.Pt(a),z.Ke(a));if(Lt(a)){for(var c,d=a;(c=d.firstChild)&&Lt(c);)d=c;b.Ba=d;b.Fa=0;for(d=a;(c=d.lastChild)&&Lt(c);)d=c;b.ua=d;b.Da=1==d.nodeType?d.childNodes.length:d.length;b.kg=a}else b.Ba=b.ua=b.kg=a.parentNode,b.Fa=z.mb(b.kg.childNodes,a),b.Da=b.Fa+1;a=b}return a};var Lt=function(a){return z.Ze(a)||3==a.nodeType};
z.$t=function(){this.Da=this.ua=this.Fa=this.Ba=this.Kh=null;this.vf=!1};var au=function(a,b){var c=new z.$t;c.Kh=a;c.vf=!!b;return c};z.bu=function(a,b,c,d){var f=new z.$t;f.vf=cu(a,b,c,d);if(z.kf(a)&&!z.Ze(a)){var g=a.parentNode;b=z.mb(g.childNodes,a);a=g}z.kf(c)&&!z.Ze(c)&&(g=c.parentNode,d=z.mb(g.childNodes,c),c=g);f.vf?(f.Ba=c,f.Fa=d,f.ua=a,f.Da=b):(f.Ba=a,f.Fa=b,f.ua=c,f.Da=d);return f};
z.du=function(a){var b;if(!(b=a.Kh)){b=a.Y();var c=a.xa(),d=a.la(),f=a.La();if(!z.A||9<=z.Ug)b=z.B?new Yt(Mt(b,c,d,f)):z.y?new Nt(Mt(b,c,d,f)):z.vg?new Xt(Mt(b,c,d,f)):new z.Jt(Mt(b,c,d,f));else{var g=b,h=c,k=d,m=f,n=!1;1==g.nodeType&&(h=g.childNodes[h],n=!h,g=h||g.lastChild||g,h=0);var t=z.Pt(g);h&&t.move("character",h);g==k&&h==m?t.collapse(!0):(n&&t.collapse(!1),n=!1,1==k.nodeType&&(k=(h=k.childNodes[m])||k.lastChild||k,m=0,n=!h),g=z.Pt(k),g.collapse(!n),m&&g.moveEnd("character",m),t.setEndPoint("EndToEnd",
g));m=new z.Ot(t,z.Ke(b));m.Ba=b;m.Fa=c;m.ua=d;m.Da=f;b=m}b=a.Kh=b}return b};var eu=function(a){z.yc.call(this);this.$C=z.zt(a);this.fM=z.At(a);this.cF=z.Bt(a);this.bO=z.Ct(a)};z.fu=function(){this.Tp=this.eb=this.O=null};var gu=function(a){var b=new z.fu;b.O=a;return b};var hu=function(a){for(var b=z.Ke(arguments[0]).body.createControlRange(),c=0,d=arguments.length;c<d;c++)b.addElement(arguments[c]);return gu(b)};
var iu=function(a){a.Tp||(a.Tp=a.bi().concat(),a.Tp.sort(function(a,c){return a.sourceIndex-c.sourceIndex}));return a.Tp};var ju=function(a){this.eb=a.bi()};var ku=function(a){this.eb=this.ua=this.Ba=null;a&&(this.eb=iu(a),this.Ba=this.eb.shift(),this.ua=z.lb(this.eb)||this.Ba);z.vt.call(this,this.Ba,!1,!0)};z.lu=function(){this.Lf=[];this.tm=[];this.tr=this.Mm=null};var mu=function(a){var b=new z.lu;b.tm=a;b.Lf=z.ob(a,function(a){return a.de()});return b};
var nu=function(a){a.Mm||(a.Mm=z.yt(a),a.Mm.sort(function(a,c){var d=a.Y(),f=a.xa(),g=c.Y(),h=c.xa();return d==g&&f==h?0:cu(d,f,g,h)?1:-1}));return a.Mm};var ou=function(a){this.KA=z.ob(z.yt(a),function(a){return a.JA()})};var pu=function(a){this.dg=null;this.il=0;a&&(this.dg=z.ob(nu(a),function(a){return z.Od(a)}));Dt.call(this,a?this.Y():null,!1)};z.qu=function(a){return(a=xt(a||window))&&ru(a)};
var ru=function(a){var b,c=!1;if(a.createRange)try{b=a.createRange()}catch(f){return null}else if(a.rangeCount){if(1<a.rangeCount){b=new z.lu;for(var c=0,d=a.rangeCount;c<d;c++)b.Lf.push(a.getRangeAt(c));return b}b=a.getRangeAt(0);c=cu(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)}else return null;return z.su(b,c)};z.su=function(a,b){return a&&a.addElement?gu(a):au(Zt(a),b)};z.tu=function(a){return au(St(a),void 0)};z.uu=function(a,b){return z.bu(a,b,a,b)};z.vu=function(a){if(a=xt(a||window))if(a.empty)try{a.empty()}catch(b){}else try{a.removeAllRanges()}catch(b){}};
var cu=function(a,b,c,d){if(a==c)return d<b;var f;if(1==a.nodeType&&b)if(f=a.childNodes[b])a=f,b=0;else if(z.mf(a,c))return!0;if(1==c.nodeType&&d)if(f=c.childNodes[d])c=f,d=0;else if(z.mf(c,a))return!1;return 0<(Tp(a,c)||b-d)};z.wu=function(a,b,c){this.DH=a;this.lU=!!c;a&&!b&&this.next()};var xu=function(a,b,c){z.ka(c)||(c=b&&a.childNodes.length?a.childNodes.length-1:0);z.wu.call(this,a.childNodes[c],!0,b)};z.yu=function(a){for(var b;b=a&&1==a.nodeType?z.zu(z.eq(new xu(a,!1),z.Au)):null;)a=b;return a};
z.zu=function(a){try{return a.next()}catch(b){return null}};z.Au=function(a){return 1==a.nodeType||3==a.nodeType&&!z.vq(a.nodeValue)};z.Bu=function(a,b){var c=z.Qp(a);if(a.getElementsByTagName)for(var d in Cu)if(a.tagName==d||0<a.getElementsByTagName(d).length)return!1;return!b&&" "==c||z.vq(c)};z.Du=function(a){return a.length||a.childNodes.length};z.Eu=function(a,b){z.A&&z.af(a);a.innerHTML=b};var Fu=function(a){return(a=a.exec(z.Cb))?a[1]:""};z.Gu=function(a){z.uu(z.yu(a),0).select()};
z.Hu=function(a,b){var c=a.parentNode,d=z.mb(c.childNodes,a)+(b?0:1),c=z.Iu(c,d,b,!0);z.uu(c.node,c.offset).select()};z.Ju=function(a,b){this.node=a;this.offset=b};z.Iu=function(a,b,c,d){for(;1==a.nodeType;){var f=a.childNodes[b];if(f||a.lastChild)if(f){var g=f.previousSibling;if(c&&g){if(d&&Ku(g))break;a=g;b=z.Du(a)}else{if(d&&Ku(f))break;a=f;b=0}}else{if(d&&Ku(a.lastChild))break;a=a.lastChild;b=z.Du(a)}else break}return new z.Ju(a,b)};var Ku=function(a){return 1==a.nodeType&&!z.Ze(a)};
z.Lu=function(a,b){var c=a?z.H(a):b;z.Q.call(this,c);this.oT=a||this.L().wa().body;this.bA={};z.Mu.push(this);this.su=!0};z.Nu=function(a,b){(a.su=b)?a.oq():z.Ou(a)};
var Pu=function(a){if(!a.wl){var b=a.m(),c=z.po(b).x,d=z.Io(b).width;a.bA={};z.Eb(Qu,function(a){this.bA[a]=b.style[a]},a);z.Eb(Ru,function(a){this.mc.style[a]=b.style[a]||z.xg(b,a)||z.wg(b,a)},a);z.Gg(a.mc,b.offsetWidth,b.offsetHeight);z.sg(b,{left:c+"px",width:d+"px",cssFloat:"none"});b.parentNode.replaceChild(a.mc,b);a.oT.appendChild(b);b.style.position="fixed";a.xp();z.V.add(b,"goog-scrollfloater-floating");a.wl=!0}};
z.Ou=function(a){if(a.wl){var b=a.m();z.Eb(a.bA,function(a,d){b.style[d]=a});a.mc.parentNode.replaceChild(b,a.mc);z.V.remove(b,"goog-scrollfloater-floating");a.wl=!1}};var Su=function(a,b,c){z.Lu.call(this,a,c);this.QT=b;this.tag="";this.eA=100};var Tu=function(a){return a&&z.rb(z.Mu,function(b){return a===b.tag&&b.wl})};var Uu=function(){};var Vu=function(a,b){this.X=(0,window.$)(a);this.J=window.$.extend({},this.defaults,b||{});this.Bg()};
var Wu=function(a,b){window.$.each(Xu,function(c,d){var f=b&&(null!==b&&d in b?b[d]:void 0);f?f(a,d):a.removeAttribute(d)})};var Yu=function(a,b){(0,window.$)("*",a).each(function(){Wu(this,b)})};var Zu=function(a){a=a.J;var b=a.fU,c=a.CA;return{id:function(a,c){a.id&&!z.x(b,a.id)&&a.removeAttribute(c)},"class":function(a,b){if(a.className)if(c.length){var g=z.V.get(a),g=z.nb(g,z.lq(z.Aa(z.x,c)));g.length&&z.V.remove.apply(null,[a].concat(g))}else a.removeAttribute(b)}}};
z.$u=function(a){z.F.call(this);this.J=window.$.extend(!0,{},this.defaults,a||{});this.nw();this.Vg()};var av=function(a,b){a.close();a.dispatchEvent({type:"cancel",data:{originalEvent:b}})};var bv=function(a,b){z.F.call(this);this.input=a;z.Nb(this.J={},this.defaults,b||{});this.lg=new z.$u({an:this.J.an,lk:this.J.lk});z.Bc(this,this.lg);this.Bg()};var cv=function(a){a=z.L(a.J.Is,a.input);var b;if(a)return b=window.document.createTextNode("@"),z.Wp(b,a),b};
var dv=function(a,b){var c;z.y&&(c=z.Qe(window.document),a.input.focus(),window.scrollTo(c.x,c.y));var d;ev?(c=window.getSelection(),d=window.document.createRange(),d.setStartAfter(b),c.removeAllRanges(),c.addRange(d)):3===b.nodeType&&z.uu(b,b.length).select()};var fv=function(a){return a&&"A"===a.nodeName};
var gv=function(a,b,c){var d=window.getSelection();if(b(d.anchorNode.parentNode)){b=d.getRangeAt(0);var f=hv(a);b.insertNode(f);b.selectNode(f);d.removeAllRanges();d.addRange(b);d=window.getSelection().getRangeAt(0);a=iv(a,d);c(a)}};var jv=function(a,b,c){var d=window.document.selection.createRange(),f=d.parentElement();b(f)&&(d.pasteHTML(hv(a).outerHTML),d.moveToElementText(z.L(a.J.Is,a.input)),d.select(),a=iv(a,d),"7.0"===z.Kc&&(a.x-=2),c(a))};
var iv=function(a,b){var c;c=b.getBoundingClientRect();var d;z.A&&(d={width:b.boundingWidth,height:b.boundingHeight},z.Ca(d,c),c=d);d=z.Qe(window.document);var f=z.po(a.lg.vc());f.x=c.left-f.x+d.x;f.y=c.top-f.y+d.y;a.J.position.call(a,f,c);return f};var kv=function(a){return a&&1===a.nodeType&&"A"===a.tagName&&z.x(lv,a.className)};var hv=function(a){return z.M("a",{className:a.J.Is,innerHTML:"@"})};
z.mv=function(a,b,c){z.Q.call(this);this.status=this.Wb=null;this.GG=a;this.fJ=b;this.Dr=c;this.isEnabled=!0;this.fF=!1;this.params=[];this.content=null;this.XB=!1;this.oE=window.$.Deferred()};z.nv=function(a,b){a.params=b};var ov=function(a){return a.Id?a.Ma:a.Ma.m()};var pv=function(a){var b=a.Ma;if(b.m)b.on("load",function(){new Vu(b.m(),{CA:["video-link"].concat(this.Xu?lv:[])})},!1,a)};
var qv=function(a){var b=a.Ma;b.m&&(a=(0,z.q)(function(){new bv(b.m(),{lk:this.kj})},a),b.xc()?a():b.addEventListener("load",a))};var rv=function(a){if(a.dispatchEvent("shouldUpdateContent")){var b=a.content,c=a.jd,d=a.pF();a.XB?(z.nf(c,b),c.appendChild(z.Xe(d))):c.innerHTML=b+d;(0,window.$)("img.lazy",c).lazyload({data_attribute:"actualsrc",threshold:400})}};
z.sv=function(a,b,c){z.mv.call(this,a,b,c);this.uR="mock"+this.ee();this.dx=!1;this.pw=!0;this.Id=!z.Rm||z.Tl;this.Xu=!1;this.jK=this.YV=!0;this.wz=""};var tv=function(a){a.ready(function(){var a=this.Ma;this.Id?z.ts(a,a.value.length):a.Ha.lastChild?z.Hu(a.Ha.lastChild):a.Wf();this.pl&&(this.pl.scrollTop=this.pl.scrollHeight)})};
var uv=function(a,b,c){var d=b.Sb.FullScreenPlugin;if(d){var f=z.$g(c,"toggleFullScreen");d.on("save",a.zs,!1,a).on("willEnterFullScreen",function(){vv(this,!1)},!1,a).on("enterFullScreen",function(){f.xd("退出写作模式")}).on("exitFullScreen",function(){f.xd("写作模式")}).on("shouldExitFullScreenOnEscape",function(){return!b.Ug})}};
var vv=function(a,b){if(a.tg)if(b){z.V.add(a.pl,"zm-editable-editor-field-wrap-active");var c=a.tg;c.Ot=z.po(c.m()).y;z.Nu(a.tg,!0)}else z.V.remove(a.pl,"zm-editable-editor-field-wrap-active"),z.Nu(a.tg,!1)};var wv=function(a){a.AC.toggle();a.xq.toggleClass("no-toolbar")};z.xv=function(){z.U.call(this);this.yE=!0;this.Kz=z.S.Kz;this.RU=-1===window.location.href.indexOf("psq")};z.yv=function(a,b){a.Ic&&(a.Ic.value=b,a.gI(),a.HI.eK(),a.Oa&&a.Oa.Vu())};
var zv=function(a){var b=Av.get("add_question_form_title");b&&z.yv(a,b);(b=Av.get("add_question_form_des"))&&Bv(a,b);b=a.J.Rm;b||(b=Av.get("add_question_form_topics"))&&(b=JSON.parse(b));b&&z.w(b,function(b){a.Oa.Fm(b)})};
var Cv=function(a){function b(){var a=(0,window.$)('\x3cdiv\x3e\x3cdiv style\x3d"text-align:center"\x3e\x3ci class\x3d"spinner-gray"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e'),b=(0,window.$)(tr(this)),c=b.data("answer_count"),f=b.data("url_token");window.$.get("/question/"+f+"/answers/summary").done(function(b){if(b&&!b.r){b=d({forEach:z.w,answers:b.msg,question_url_token:f});var g=z.La('\x3cdiv class\x3d"zippy-row"\x3e\x3ca class\x3d"zg-link-litblue" href\x3d"/question/%s"\x3e查看该问题%s\x3c/a\x3e\x3c/div\x3e',
f,0<c?"的全部 "+c+" 个回答":"");a.html(b+g)}else z.W.message(b.msg)});b.after(a);return a.get(0)}var c=(0,z.jn)(a.kq.GI),d=(0,z.jn)(a.kq.mM),f=a.Ic,g=new Ts;a.KC=new z.Ss(f,{source:"/question/autocomplete",uk:z.I("zh-question-suggest-ac-wrap"),ud:window.$.noop,render:function(d,f,g){a.MC&&a.MC.H();f=(0,window.$)(d.m());var n=a.MC=new ds;f.html(c({forEach:z.w,questions:g,token:(0,window.encodeURIComponent)(this.Xb)}));f.prepend('\x3cdiv class\x3d"ac-head zg-gray"\x3e你的问题可能已经有答案\x3c/div\x3e');(0,window.$)(".ac-row",
f).each(function(){n.Ga(new z.rr((0,window.$)(this).get(0),b,!1))});n.w(d.m())},Qy:g})};var Dv=function(a,b){(0,window.$)(a.fV).toggle(!!b);(0,window.$)(a.hR).toggle(!b);b?a.sD.focus():(a.pG(),a.Ic.focus());a.ha()};
var Ev=function(a){if(!z.Oj||z.Pj){var b=qr.aa(),c=new z.gr("",b);c.Ub(32,!1);a.o().g(c,"action",a.bS);c.w(a.AV);c.xd("切换工具栏");c=new z.gr("",b);c.Ub(32,!1);a.o().g(c,"action",function(){this.Pb.Ma.execCommand("image")});c.w(a.KL);c.xd("添加图片");b=new z.gr("",b);b.Ub(32,!1);a.o().g(b,"action",function(){this.Pb.Ma.execCommand("video")});b.w(a.LL);b.xd("添加视频")}};
var Fv=function(a){a.Oa=new rt;a.Oa.w(a.FV);a.o().g(a.Oa,["add_tag","remove_tag"],a.dI);new z.qk(a.Ic,"写下你的问题");var b=a.AN;a.Pb=new z.sv;a.Pb.wz='\x3cspan style\x3d"font-style: normal;color: #999;"\x3e问题背景、条件等详细信息\x3c/span\x3e';a.Pb.w(b);a.Pb.init();a.Pb.qg();z.Oj&&!z.Pj||wv(a.Pb);(0,window.setTimeout)(function(){a.ha()});Ev(a);Cv(a)};var Gv=function(a,b,c){"title"===c?a.LQ=b:"detail"===c?a.CQ=b:a.NQ=b;a.yE=a.LQ||a.CQ||a.NQ};
var Hv=function(a){(0,window.$)(window).on("beforeunload.AddQuestionForm",(0,z.q)(function(){Iv(this)},a))};var Iv=function(a){a.Ic.value&&Av.set("add_question_form_title",a.Ic.value);var b=a.Pb.Zf();b&&Av.set("add_question_form_des",b);(a=a.Oa.data)&&Av.set("add_question_form_topics",JSON.stringify(a))};var Jv=function(a,b,c){a.zt.innerHTML=b.ze;0===b.level?z.P(a.dk,!1):(3!==b.level&&(z.P(a.fr,!0),z.P(a.sn,!1)),z.P(a.dk,c),c&&a.Ic.focus())};
var Kv=function(a){var b=z.Ao(a.Ic.value).replace(/？/g,"?"),c=Lv(a);1<c.level||(1>jp(z.Ao(a.Ic.value).replace("？","?"))?(c.ze="您还没有给问题添加问号",c.level=3,c.name="noquestionmark"):1<jp(b)&&(c.ze="如果有多个问题，最好拆分一下",c.level=1,c.name="multiquestionmark"));return c};
var Lv=function(a){var b="#",c=a.No||new Mv,d=!1;if(!a.KC||!a.RU)return c;var f=a.KC.Sa;f&&f.length?(z.w(f,function(a){4<a.raw.length&&1===+a.raw[4]&&(d=!0,b="/question/"+a.url_token+"?q\x3d"+(0,window.encodeURIComponent)(this.Ic.value)+"\x26psq\x3d0")},a),d?(c.ze='我们找到了一个也许是你想问的问题，\x3ca href\x3d"'+b+'"\x3e查看问题\x3c/a\x3e',c.level=3,c.name="duplicatedquestion",c.KX=!0,a.sn.href=b,z.P(a.fr,!1),z.P(a.sn,!0)):(c=new Mv,z.P(a.fr,!0),z.P(a.sn,!1)),a.No=c):(c=new Mv,a.No=c,z.P(a.fr,!0),z.P(a.sn,!1));a.No||
(a.No=c);return a.No};var Nv=function(a){a=z.Ao(a.Ic.value).replace(/？/g,"?");a=ep(a);var b=new Mv;3>a?(b.level=3,b.ze="问题字数太少了吧",b.name="tooshort"):40<a&&51>=a?(b.level=1,b.ze='还可以输入 \x3cspan class\x3d"warning"\x3e'+(51-a)+"\x3c/span\x3e 字",b.name="buffer"):51<a&&(b.level=3,b.ze='已超出 \x3cspan class\x3d"error"\x3e'+(a-51)+"\x3c/span\x3e 字",b.name="toolong");return b};var Ov=function(a){a=a.Pb;var b=(0,z.bb)(a.Zf());return a.isContentEditable()?b:z.Na(b)};
var Bv=function(a,b){var c=a.Pb;(0,window.setTimeout)(function(){c.ka(b);c.Ip()})};var Pv=function(a){var b=new z.fp,c=[],d=[];b.add("question_title",a.Ic.value);b.add("question_detail",Ov(a));a.FD&&b.add("anon",a.FD.checked?"1":"0");z.w(a.Oa.data,function(a){a[3]?c.push(a[3]):d.push(a[1])});b.add("topic_ids",c.join(","));b.add("new_topics",d.join("$"));z.mh&&b.add("uid",z.mh[3]);return b};var Mv=function(){this.level=(0,window.isNaN)(void 0)?0:void 0;this.ze=""};var Qv=function(){};
z.Rv=function(a){z.xk.call(this,"register");this.Xn=a};var Sv=function(a){z.Q.apply(this,arguments)};var Tv=function(){};var Uv=function(){var a=(0,window.$)("#rq3-sidenav-link"),b=(0,window.$)(".tour",a);b.length&&(0,window.$)(".close-button",b).click(function(){var a=(0,window.$)(this).data("feature");window.$.get("/notifeature",{feature:a});b.fadeOut(100,function(){b.remove()})})};
var Vv=function(){var a=(0,window.$)(".zm-side-my-columns");if(a.length){var b=a.find(".column-homepage-link .icon-column-logo"),c=+z.Ph.get("navcolumn:entered");a.on("click",".column-unfold",function(b){a.find(".column-list").append((0,window.$)("#SidebarColumnItem-template").html());(0,window.$)(b.currentTarget).parent().remove()});c||(b.addClass("icon-column-logo-active"),a.on("click",".column-homepage-link",function(){b.removeClass("icon-column-logo-active");z.Ph.set("navcolumn:entered",1)}))}};
var Wv=function(a){z.Q.apply(this,arguments)};var Xv=function(a){(new window.Image).src=a};var Yv=function(){(0,window.$)(".shameimaru-placeholder").each(function(){var a=(0,window.$)(this),b=Object.assign({},{loc:a.data("loc")},a.data("params"));window.$.get("/node/Banner",b,function(b){b?(b=(0,window.$)(b),a.replaceWith(b),(new Wv).w(b[0])):a.remove()})})};var Zv=function(){z.Q.call(this)};
var $v=function(){function a(a,b){a=z.pa(a)?new RegExp(a):a;return a.test(b)}var b;z.Gb({home:"^/$",collection:"^/collection/\\d+$",roundtable:"^/roundtable/[\\w\\.-]+$",answer:"^/question/\\d+/answer/\\d+$",question:"^/question/\\d+$",search:"^/search$",people:"^/people/[\\w\\.-]+$",people_answers:"^/people/[\\w\\.-]+/answers$",explore_recommendations:"^/explore/recommendations$",explore_daily_hot:{path:"^/explore$",hash:"^(?!monthly-hot$)"},explore_monthly_hot:{path:"^/explore$",hash:"^monthly-hot$"}},
function(c,d){c.path&&c.hash?a(c.path,window.location.pathname)&&a(c.hash,window.location.hash.slice(1))&&(b=d):a(c,window.location.pathname)&&(b=d);return!!b});return b};z.aw=function(a){return"/qrcode?"+window.$.param({url:a+"#showWechatShareTip"})};var bw=function(){cw=(0,window.$)(".wechat-share-tip");cw.on("touchstart click",function(a){a.preventDefault();dw()});"#showWechatShareTip"===window.location.hash&&(ew(),window.location.hash="")};var fw=function(){cw.length&&(cw.show(),(0,window.$)(window.document.documentElement).addClass("show-wechat-share-tip"))};
var dw=function(){cw.onTransitionEnd(function(){cw.hide()},150);(0,window.$)(window.document.documentElement).removeClass("show-wechat-share-tip")};var ew=function(){var a=$v();z.wi({category:"share",action:"scan_share_"+a+"_to_wechat_start"})};var gw=function(a){z.Q.apply(this,arguments)};var hw=function(){};
var iw=function(a){var b=(0,window.$)("#zh-feedback-form"),c=(0,window.$)(".zg-report-msg",b),d=(0,window.$)("textarea",b),b=(0,window.$)("select",b);a=a.type||b.val();b=window.$.trim(d.val());if(!b)return c.html("请填写反馈内容").show(),d.focus(),!1;c.hide();c=new z.Z(!0);d=new z.uh;c.on("success",function(){z.W.message("建议发送成功，我们会尽快处理，感谢您的帮助");jw.remove("content")});d.add("type",a).add("content",b);c.ajax("/feedback/report",d.toString())};
var kw=function(a,b){return window.$.post("/node/ColumnFollowBaseV2",{method:b?"follow_column":"unfollow_column",params:{column_id:a}})};var lw=function(a,b){return window.$.post("/roundtable/"+a,{action:b?"follow":"unfollow"})};var mw=function(a){z.F.call(this);this.url=a+"/apilive";this.NT=5E3;this.kU=1E3;this.Nw=0;nw(this)};
var nw=function(a){a.client=new window.WebSocket(a.url);a.client.onmessage=function(b){try{a.dispatchEvent({type:"message",data:b.data})}catch(c){}};a.client.onclose=function(){(0,window.setTimeout)(function(){a.Nw<a.kU&&(nw(a),a.Nw+=1)},a.NT)};a.client.onerror=function(){a.client.close()}};var ow=function(a){z.Nb(this.J={},this.defaults,a||{});this.Rb()};var pw=function(a){return qw.every(function(b){return a[b]})};var rw=function(a,b){return qw.every(function(c){return a[c]===b[c]})};
var sw=function(a){return window.$.extend({},{key:a.key},a.Wb)};var tw=function(a,b){a.every(function(a){return!rw(a,b)})&&a.push(b);return a};var uw=function(a,b){var c=a[b.group];c?c.push(b):a[b.group]=[b];return a};
var vw=function(){var a=iq(z.Zm.map(function(a){return z.Hb($n(a.al))})).map(sw).filter(pw).reduce(tw,[]).reduce(uw,{}),b=['\x3cdiv class\x3d"shortcut-tips"\x3e'],c={pU:/([^\s+])+|([\s+])/g,hO:function(a){return a.replace(this.pU,function(a,b){return b?"\x3ckbd\x3e"+a+"\x3c/kbd\x3e":" "+a+" "})}};z.Eb(a,function(a,f){b.push('\x3cdiv class\x3d"group"\x3e\x3ch2\x3e',f,"\x3c/h2\x3e\x3cdl\x3e");z.w(a,function(a){b.push("\x3cdt\x3e",c.hO(a.key),"\x3c/dt\x3e");b.push("\x3cdd\x3e",a.name,"\x3c/dd\x3e")});
b.push("\x3c/dl\x3e\x3c/div\x3e")});b.push("\x3c/div\x3e");return b.join("")};z.ww=function(a){return xw("common").then(function(){return xw(a)})};var yw=function(){var a=z.S;return{signedIn:a.kb(),currentUser:{email:a.Rn,activated:a.re},authRequired:z.Or}};var zw=function(a,b){Aw.push([a,z.qa(b)?b:2]);Aw.sort(function(a,b){return a[1]-b[1]})};var Bw=function(){fo.call(this);this.queue=[]};var Cw=function(){Bw.call(this);this.xx=0};var Dw=function(a){return Math.pow(a,3)};
var Ew=function(a){return 1-Math.pow(1-a,3)};var Fw=function(a){return 3*a*a-2*a*a*a};var Gw=function(){z.F.call(this);this.h=null;this.tR=768;this.tx=this.wU=300;this.ro=!0;this.Vv=!1;this.tV=150};var Hw=function(){};var Iw=function(){z.F.call(this)};z.Jw=function(a){a.fk=new z.Z(!1);a.o().Aa(a.fk,"success",a.sS);a.fk.ajax("/noti7/new?r\x3d"+ +new Date,null,"GET")};
var Kw=function(){if(Lw)(0,window.$)(window.document).on("click.tabless","a",function(a){this.host===window.location.host&&"_blank"===a.currentTarget.target&&(a.currentTarget.target="")})};var Mw=function(){};z.Nw=function(a,b,c){this.element=a;this.af=b;this.jT=c};var Ow=function(a,b){this.Sh=a instanceof z.He?a:new z.He(a,b)};var Pw=function(a,b){this.pA=4;this.Xt=b||void 0;z.Tn.call(this,a)};z.Qw=function(a,b){a.zz=null==b||b instanceof z.qg?b:new z.qg(b,void 0,void 0,void 0);a.U()&&a.ha()};
z.Rw=function(a,b,c){this.ca=c||(a?z.H(z.I(a)):z.H());Pw.call(this,this.ca.B("DIV",{style:"position:absolute;display:none;"}));this.dj=new z.He(1,1);this.eb=new bq;this.Dk=null;a&&this.attach(a);null!=b&&z.nf(this.m(),b)};var Sw=function(a,b){z.nd(b,"mouseover",a.od,!1,a);z.nd(b,"mouseout",a.Nl,!1,a);z.nd(b,"mousemove",a.Ll,!1,a);z.nd(b,"focus",a.fe,!1,a);z.nd(b,"blur",a.Nl,!1,a)};var Tw=function(a,b){var c=z.wf(a.ca);a.dj.x=b.clientX+c.x;a.dj.y=b.clientY+c.y};
var Uw=function(a,b){try{for(;b&&!a.eb.contains(b);)b=b.parentNode;return b}catch(c){return null}};var Vw=function(a,b){if(0==b){var c=a.dj.clone();return new Ww(c)}return new Xw(a.ec)};var Yw=function(a){if(a.anchor)for(var b,c=0;b=Zw[c];c++)z.mf(b.m(),a.anchor)&&(b.fl=a,a.rI=b)};var $w=function(a,b,c){a.Km||(a.Km=z.wd((0,z.q)(a.Bz,a,b,c),a.Qp))};var ax=function(a){a.Km&&(z.xd(a.Km),a.Km=void 0)};var Ww=function(a,b){Ow.call(this,a,b)};var Xw=function(a){z.Nw.call(this,a,3)};
var bx=function(a,b,c){z.Rw.call(this,a,b,c)};z.cx=function(a,b){a.uo=b||null};var dx=function(a,b){if(a.Tv&&a.Tv.contains(b)||a.Xs(b))return!0;var c=a.fl;return!!c&&c.Xs(b)};z.ex=function(a,b,c,d){z.Rw.call(this,null,null,c);z.sa(a)?this.Uy=a:this.aD=a;this.NM=0!=b;this.xB=[];this.Ka=d||(c?c.wa():window.document);z.E(this.Ka,"mouseover",this.UF,!1,this)};
var fx=function(a,b,c){if(b==a.Pf)a.bj();else if(b!=a.anchor){if(1==a.getState()||4==a.getState())ax(a),gx(a);var d=new hx("trigger",a,b,void 0);a.bi().contains(b)||(a.attach(b),a.xB.push(b));a.anchor=b;a.Xz(d)?$w(a,b,c||a.Xt):gx(a)}};var ix=function(a,b){var c=z.mb(a.xB,b);-1!=c&&(a.detach(b),a.xB.splice(c,1))};var gx=function(a){a.dispatchEvent(new hx("canceltrigger",a,a.anchor||null));ix(a,a.anchor);delete a.anchor};var hx=function(a,b,c,d){z.Mc.call(this,a,b);this.anchor=c;this.data=d};
var jx=function(a,b,c){z.Nw.call(this,a,b);this.TC=c};var kx=function(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};z.lx=function(a){a=void 0===a?{}:a;z.F.call(this);this.rq=!0;this.Qm=this.bq=-1;this.OJ="";this.Ia=null;Object.assign(this.J={},this.defaults,a);this.J.Wk&&(this.As=z.Or(this.As,this.J.Wk))};z.mx=function(a,b){a.Ah.innerHTML+='\x3ca class\x3d"zm-profile-email-history-link" href\x3d"'+b+'"\x3e私信记录  »\x3c/a\x3e'};
z.nx=function(a,b,c,d){-1===b?z.lp(a.cd,a.Ah):b!==z.S.fg&&(a.Qm=b,a.OJ=c,a.Ah&&a.cd&&(a.Ah.innerHTML=a.OJ+(d?mp():""),z.lp(a.Ah,a.cd),a.cd.value=""))};var ox=function(a,b){a.zt.innerHTML=b;z.P(a.zt,!0)};var px=function(){z.F.call(this);this.$U=this.UP=250;this.Lh={};this.init()};var qx=function(a,b){return'\x3cdiv class\x3d"popover-content no-hovercard"\x3e'+a+"\x3c/div\x3e"+('\x3cdiv class\x3d"arrow"\x3e\x3c/div\x3e\x3cdiv class\x3d"arrow2'+(b?" loading":"")+'"\x3e\x3c/div\x3e')};
var rx=function(a){var b;switch(a.jl){case "t":b=5;break;case "r":b=4;break;case "b":b=4;break;case "l":b=6}a=a.V;a.pA=b;a.U()&&a.ha()};var sx=function(a,b,c,d){var f=a.Lh[b]&&a.Lh[b][c];if(f)tx(a,qx(f));else if(f=ux[b])window.$.get("/node/"+f,{params:{url_token:c}},(0,z.q)(function(a){vx(this,a,b,c)},a)),tx(a,a.mw(d))};var vx=function(a,b,c,d){a.Vh===c&&a.Ln===d&&vx(a,b);a.Lh[c]=a.Lh[c]||{};a.Lh[c][d]=b;rx(a);tx(a,qx(b));fx(a.V,a.mE,a.jl)};var tx=function(a,b){a.V.Pd(b);a.V.setPosition(a.oN)};
var xx=function(a){z.Q.call(this);this.options=window.$.extend({stopPropagation:!0,yM:"#000",bw:.5,dN:"#666",UD:.2,top:2,width:6,right:2,vM:!0},a);this.Jz=0;this.Pr=!1};var yx=function(a){a.Im&&(a.oe.stop().css({opacity:a.options.bw}).show(),a.mn&&((0,window.clearTimeout)(a.mn),a.mn=!1))};var zx=function(a,b){b=b||0;a.mn=(0,window.setTimeout)((0,z.q)(function(){this.oe.stop().fadeOut();this.mn=!1},a),b)};
var Ax=function(a,b){var c=a.gd.height()-2*a.options.top-a.oe.height(),d=a.Se.height()-a.gd.height();return b/c*d};var Bx=function(a,b,c){z.Mc.call(this,"scroll",a);this.scrollTop=b;this.jJ=c};z.Cx=function(a){z.Q.call(this);this.J=window.$.extend({},this.defaults,a||{})};
var Dx=function(){z.F.call(this);this.Of=[0,0,0];this.HH=[0,0,0];this.types=["default","follow","vote_thank"];this.NE=!z.pm.qb;this.iK=z.pm.qb||null!=window.navigator.userAgent.match(/iPad/i);this.cache=[!1,!1,!1];this.uj=[null,null,null];this.Xo=[0,0,0];this.Jm=[!1,!1,!1]};
var Ex=function(a){a.tab=new z.Cx({zH:".zm-noti7-popup-tab-item",qI:".zm-noti7-content",Cg:"current"});a.o().g(a.tab,"action",function(a){this.kE=a=a.data.index;Fx(this,a);var c=this.og&&this.og[a];c&&((0,window.setTimeout)(function(){c.update()}),this.tab.index()===a&&c.scrollTop())}).g(a.tab,"select",function(a){this.kE=a=a.data.index;Gx(this,a);z.X.fb({type:"ga_click_top_nav_noti_tab",data:{tab:+a}});this.Ud||z.Ph.set("noti7-tab",a)});a.tab.w(a.vi)};
var Hx=function(a){var b=void 0,c=void 0,d=z.$o(100,function(c,d){var h=d.target;200>("number"===typeof d.jJ?d.jJ:h.scrollHeight-h.offsetHeight-h.scrollTop)&&a.rz(c).then(function(a){a||z.od(b[c])},window.$.noop)}),c=a.iK?a.contents:a.og,b=z.ob(c,function(a,b){return z.E(a,"scroll",(0,z.q)(d,void 0,b))})};var Gx=function(a,b){a.og&&z.w(a.og,function(a,d){b===d?a.enter():a.ix&&(a.o().removeAll(),a.Rd&&a.Rd.stop(),a.ix=!1)})};var Ix=function(a){a=z.jq(a.Of,ao);return-1===a?0:a};
var Jx=function(a){if(!z.tm){var b=Kx(a.Ud);a=Kx(a.lG);var c="";b&&a?c="("+a+" 封私信 / "+b+" 条消息) ":b?c="("+b+" 条消息) ":a&&(c="("+a+" 封私信) ");window.document.title=c+window.document.title.replace(/^(\(|\uff08)(\d)*(\+)?( )?(\u5c01\u79c1\u4fe1)?( \/ )?(\d)*(\+)?( )?(\u6761\u6d88\u606f)?(\)|\uff09)( )?/g,"")}};var Lx=function(a,b){a.Ud-=a.Of[b];a.qv.eq(b).removeClass("withdot");0>a.Ud&&(a.Ud=0);z.P(a.En,!!a.Ud);a.En.innerHTML=a.Ud};
var Fx=function(a,b){a.NE?a.visible&&(a.cache[b]?("$$used$$"!==a.cache[b]&&(a.Ew[b].innerHTML=a.cache[b],a.cache[b]="$$used$$"),a.Of[b]&&Mx(a.types[b]),Lx(a,b),a.og&&a.og[b].update().scrollTop(),a.Ud||z.Ph.set("noti7-tab",b)):(a.Jm[b]=!0,a.Hl(b))):a.cache[b]?("$$used$$"!==a.cache[b]&&(a.Ew[b].innerHTML=a.cache[b],a.cache[b]="$$used$$"),a.Of[b]&&Mx(a.types[b]),Lx(a,b)):(a.Jm[b]=!0,a.Hl(b),Mx(a.types[b]))};
var Nx=function(a,b){b?a.vC.fadeIn(50):a.vC.fadeOut(50);a.visible=b;z.V.enable(a.vi,"open",a.visible);z.V.enable(a.hq,"open",a.visible);if(b){a.vi.focus();z.w(a.cache,function(a,b){a||this.Hl(b)},a);a.o().g(window.document,"click",a.rs);var c;a.Ud?(c=Ix(a),a.tab.select(c),a.Jm[c]=!0):(c=Ox(),a.Iw||(a.tab.select(c),a.Jm[c]=!0));Gx(a,c);z.X.fb({type:"ga_click_top_nav_noti",data:{tab:a.kE,bK:+(a.Ud||0)}})}else a.o().qa(window.document,"click",a.rs),Gx(a,-1)};
var Mx=function(a){(new z.Z(!1)).ajax("/noti7/readall","tab\x3d"+a,"POST")};var Ox=function(){var a=z.Ph.get("noti7-tab");return a?+a:0};var Kx=function(a){return 99<a?"99+":a};var Px=function(a){z.Q.call(this);window.$.extend(this.J={},this.defaults,a||{})};
var Qx=function(a){var b=a.xg,c=a.fd,d=c.attr("id");d||(d=z.Xg(z.Wg.aa()),c.attr("id",d),b.attr("aria-labelledby",d));c.attr("role")||c.attr("role","button");a.fd.attr("aria-haspopup","true").attr("aria-activedescendant","");a.xg.children().find("a").attr("tabindex",-1).attr("id",(0,z.q)(function(a,b){return b||z.Xg(z.Wg.aa())},a))};var Rx=function(a,b){var c=a.xg.children().find("a"),d=c.size();b>=d?b=0:-1>=b&&(b=d-1);c=c.eq(b);a.fd.attr("aria-activedescendant",c.attr("id"));c.focus();a.index=b};
var Sx=function(a){z.Q.apply(this,arguments)};var Tx=function(a,b){if(!a.metaKey)try{z.Ph.set("query",a.ba.Xb)}catch(c){b+="?q\x3d"+(0,window.encodeURIComponent)(a.ba.Xb)}return b};var Ux=function(){z.F.call(this)};
var Vx=function(){var a=(0,window.$)("#js-top-nav-link-profile"),b=(0,window.$)("#mobile-top-nav-profile-popup");if(z.Oj&&b.length&&b.children("ul").length){var c=function(c){c=c.target;b[0].contains(c)||c.contains(a[0])||d()},d=function(){a.parent().removeClass("open");b.hide();(0,window.$)(window.document.body).off("mousedown",c)};a.click(function(f){f.preventDefault();b.is(":visible")?d():(a.parent().addClass("open"),b.show(),(0,window.$)(window.document.body).mousedown(c))}).attr("href","javascript:;");
b.find(".slide-up").click(d)}};var Wx=function(){z.Q.call(this)};var Xx=function(){z.vj.call(this,null,!1);this.vD="zh-lightbox-showing";this.vV="zh-lightbox-thumb";this.Rb()};var dp=function(){if(window.console){var a=Array.from(arguments);a.unshift("["+(new Date).toLocaleTimeString()+"]:\t");window.console.log.apply?window.console.log.apply(window.console,a):window.console.log(a[0],a.slice(1).join(","))}};var Yx=function(){};
var Zx=function(a,b,c){$q.call(this,a,c||Yx.aa(),b);this.Ub(1,!1);this.Ub(2,!1);this.Ub(4,!1);this.Ub(32,!1);this.N=1};var $x=function(){this.uw=[]};var ay=function(a,b){var c=a.uw[b];if(!c){switch(b){case 0:c=a.T()+"-highlight";break;case 1:c=a.T()+"-checkbox";break;case 2:c=a.T()+"-content"}a.uw[b]=c}return c};var by=function(a,b,c){a=ay(a,2);return c.B("DIV",a,b)};var cy=function(a,b){var c=a.R(b);if(c){var c=c.firstChild,d=ay(a,1);return!!c&&z.kf(c)&&z.aj(c,d)}return!1};
var dy=function(a,b,c,d){Sq(a,c,b.fi());Tq(a,b,c);d!=cy(a,c)&&(Ep(c,"goog-option",d),c=a.R(c),d?(a=ay(a,1),c.insertBefore(b.L().B("DIV",a),c.firstChild||null)):c.removeChild(c.firstChild))};z.ey=function(a,b,c,d){$q.call(this,a,d||$x.aa(),c);this.Ea(b)};var fy=function(){};z.gy=function(a,b){$q.call(this,null,a||fy.aa(),b);this.Ub(1,!1);this.Ub(2,!1);this.Ub(4,!1);this.Ub(32,!1);this.N=1};var hy=function(a){this.Zv=a||"menu"};z.iy=function(a){z.gy.call(this,fy.aa(),a)};
z.jy=function(a,b){z.Vr.call(this,ky,b||hy.aa(),a);this.Pe(!1)};z.ly=function(a,b,c,d){z.Nw.call(this,a,b);this.Mo=c?5:0;this.dA=d||void 0};var my=function(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};var ny=function(a,b,c,d){z.ly.call(this,a,b,c||d);(c||d)&&this.Em(65|(d?32:132))};var oy=function(){};
var py=function(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var f=c.nodeValue;if(""==(0,z.bb)(f))a.removeChild(c);else{c.nodeValue=b?z.sq(f):z.rq(f);break}}else break;c=d}};var qy=function(){};var ry=function(a,b,c){return c.B("DIV","goog-inline-block "+(b+"-caption"),a)};
z.sy=function(a,b,c,d,f){z.gr.call(this,a,c||qy.aa(),d);this.Ub(64,!0);this.ak=new ny(null,5);b&&this.ph(b);this.pH=null;this.na=new z.ud(500);!z.Oi&&!z.Pj||z.D("533.17.9")||(this.Zs=!0);this.pR=f||hy.aa()};var ty=function(a){a.pH=new z.qg(7,0,7,0)};z.uy=function(a){a.ak.Em&&a.ak.Em(33)};
var vy=function(a){if(a.ma.ya){var b=a.ak;a.ak.element=a.vT||a.m();var c=a.ma.m();a.ma.U()||(c.style.visibility="hidden",z.P(c,!0));!a.Pt&&a.ak.co&&a.ak.co()&32&&(a.Pt=z.Ig(c));b.ha(c,b.af^1,a.pH,a.Pt);a.ma.U()||(z.P(c,!1),c.style.visibility="visible")}};var wy=function(a,b,c){var d=a.o();c=c?d.g:d.qa;c.call(d,b,"action",a.oo);c.call(d,b,"close",a.cy);c.call(d,b,"highlight",a.iy);c.call(d,b,"unhighlight",a.py)};var xy=function(a,b){var c=a.o();(b?c.g:c.qa).call(c,a.m(),"keydown",a.fP)};
var yy=function(a,b){var c=a.m(),d=z.Zi(b,"activedescendant"),d=z.Ke(b).getElementById(d)||b;if(!d.id){var f=z.Wg.aa();d.id=z.Xg(f)}Gp(c,d);z.Xi(c,"owns",d.id)};z.zy=function(){z.F.call(this);this.ta=null;this.sa=0;this.pz=[];this.nt=[];this.EB="最多输入 20 字";this.Vw="最多输入 256 字"};var Ay=function(a,b,c){a.ta||(a.ta=new z.U(null),z.Fj(a.ta,null),a.ta.Na(b||""),c&&(a.ta.R().innerHTML=c),a.o().g(a.ta,"afterhide",a.Xh))};
var By=function(a,b,c){var d=z.I("zh-fav-list-item-place-holder");d&&z.P(d,!1);a.sA=b[5]?"":z.M("span","zm-fav-list-item-lock",[z.M("i","icon icon-lock")]);d=z.M("span","zm-favo-list-item-title");z.nf(d,b[1]);d=z.M("a",{"class":"zg-r5px zm-favo-list-item-link",href:"javascript:;"},[a.sA,d,z.M("span",{className:"meta zg-gray",innerHTML:'\x3cspan class\x3d"num"\x3e'+b[3]+'\x3c/span\x3e 条答案 \x3cspan class\x3d"zg-bull"\x3e•\x3c/span\x3e '+b[4]+" 人关注"})]);a.sA&&a.sA.setAttribute("data-tip","s$t$私密收藏夹");
d.setAttribute("data-lid",b[0]);z.x(a.nt,b[0])&&z.V.add(d,"zm-favo-list-item-link-active");b=z.L("zm-favo-list-item-link",a.ah);c&&b?z.bf(d,b):a.ah.appendChild(d)};var Cy=function(a,b){if(a.sa!==b&&a.ah){var c=z.Xp("zm-favo-list-item-link",a.ah);z.w(c,function(a){z.V.remove(a,"zm-favo-list-item-link-active")},a)}a.sa=b};
z.Dy=function(a,b,c,d){var f=z.I("zh-fav-head-title"),g=z.I("zh-fav-head-description-source");b=b||(f?z.pf(f):"");c=c||(g?z.pf(g):"");a.iE=d||z.lh;Ey(a);a.fc();Fy(a,1);z.P(a.pB,!1);a.mr.innerHTML="取消";a.Hv.innerHTML="保存";a.ta.Na("编辑收藏夹");a.li.value=Wo(b);a.Wj.value=Wo(c);a.iE[1]?(z.P(a.EI,!1),z.P(a.CI,!1),z.P(a.QG,!1)):(z.P(a.EI,!0),z.P(a.CI,!0),z.P(a.QG,!0),a.KG.setAttribute("checked",!0));a.jQ=Gy(a);a.ta.G(!0);a.Yl=!0};
var Hy=function(a){var b=z.Xp("zm-favo-list-item-link",a.ah);z.w(b,function(a){var b=a.getAttribute("data-lid");z.V.remove(a,"zm-favo-list-item-link-active");z.x(this.nt,+b)&&z.V.add(a,"zm-favo-list-item-link-active")},a)};var Ey=function(a){a.GN?Hy(a):a.B()};
var Fy=function(a,b){var c=!!b;a.ta.Na(0===b?"添加到收藏夹":"创建新收藏夹");z.P(a.YQ,!c);z.P(a.Gx,c);(0,window.$)(a.jx).text("").hide();new z.qk(a.li,a.EB);new z.qk(a.Wj,a.Vw);if(1===b)(0,window.$)(a.Gx).on("change.FavoDiag","input, textarea, select",function(){a.Mg()});else(0,window.$)(a.Gx).off("change.FavoDiag"),a.Xh()};var Gy=function(a){var b=new z.fp,c=z.Ao(a.li.value),d=z.Oa(a.Wj.value===a.Vw?"":a.Wj.value);d||(d=-1);b.add("title",c);b.add("description",d);b.add("is_public",a.LG.checked?1:0);return b};
var Iy=function(a){a.ta.G(!1);a.dispatchEvent(Jy);z.X.fb({type:"ga_click_collect_answer",data:{count:(0,window.$)(".zm-favo-list-item-link-active",a.ah).length}})};var Ky=function(a,b,c,d){(0,window.$)(c).addClass("btn-pending").text(d?"保存中":"创建中");a.o().Aa(b,"complete",function(){(0,window.$)(c).removeClass("btn-pending").text(d?"保存":"确认创建")})};var Ly=function(a,b,c){c=c||(b?"保存失败，请重试":"创建失败，请重试");(0,window.$)(a).text(c).show()};
var My=function(a,b){z.wi({category:"collect",action:a,label:-1<window.location.pathname.indexOf("collection")?"collections_sidebar_create_collection":"collect_answer_box",attributes:b})};var Ny=function(a){var b=null;try{b=a.cssRules||a.rules}catch(c){if(15==c.code)throw c.styleSheet=a,c;}return b};
var Oy=function(a){var b=[];a=a||window.document.styleSheets;var c=z.ka(void 0)?void 0:!1;if(a.imports&&a.imports.length)for(var d=0,f=a.imports.length;d<f;d++)z.xb(b,Oy(a.imports[d]));else if(a.length)for(d=0,f=a.length;d<f;d++)z.xb(b,Oy(a[d]));else{var g=Ny(a);if(g&&g.length)for(var d=0,f=g.length,h;d<f;d++)h=g[d],h.styleSheet&&z.xb(b,Oy(h.styleSheet))}!(a.type||a.rules||a.cssRules)||a.disabled&&!c||b.push(a);return b};var Py=function(){this.On="";this.nh=[]};
var Qy=function(a,b,c){var d=[],f;for(f in b){var g=b[f];g&&d.push(f,":",g,c?" !important":"",";")}a.On=d.join("")};var Ry=function(a){this.Sv={};if(a){var b=[];a=a.split(/\s+/gm);for(var c=0;c<a.length;c++)if(a[c]){var d=new Sy(a[c]);b.push(d)}this.ti=b}};
var Sy=function(a){var b=Ty[a];if(b)return b;for(var b=a.match(/[#\.]/)?a.split(/(?=[#\.])/):[a],c={},d=0;d<b.length;d++){var f=b[d];"."==f.charAt(0)?c.className=f.substring(1,f.length):"#"==f.charAt(0)?c.id=f.substring(1,f.length):c.tagName=f.toUpperCase()}this.vG=a;this.kR=c;this.JJ={};Ty[a]=this};
var Uy=function(a,b){var c=b.uid,d=a.JJ[c];if("undefined"!=typeof d)return d;var f=a.kR,d=f.tagName,g=f.className,f=f.id,h=!0;d&&"*"!=d&&d!=b.nodeName?h=!1:f&&f!=b.id?h=!1:g&&!b.SM[g]&&(h=!1);return a.JJ[c]=h};var Vy=function(a){var b=z.ua(a),c=Wy[b];if(c)return c;c=[];do{var d={id:a.id,nodeName:a.nodeName};d.uid=z.ua(d);var f={};if(a.className)for(var g=z.$i(a),h=0;h<g.length;h++)f[g[h]]=1;d.SM=f;c.unshift(d)}while(a=a.parentNode);this.EH=c;this.uid=z.ua(this);Wy[b]=this};
z.Xy=function(){z.F.call(this);this.hc=this.Jq()};var Yy=function(a,b,c,d,f){this.YE=a;this.jB=b;this.dr=c;this.aF=d;this.sx=f||{}};var Zy=function(a,b){this.iW=a;this.eE=b};
var $y=function(a,b,c,d){var f=[];a.dr&&a.jB&&f.push("\x3c!DOCTYPE HTML\x3e");f.push('\x3chtml style\x3d"background:none transparent;min-width:0;');a.dr&&f.push("height:",a.aF?"100%":"auto");f.push('"\x3e');f.push("\x3chead\x3e\x3cstyle\x3e");c&&c.eE&&f.push(c.eE);z.y&&a.jB&&f.push(" img {-moz-force-broken-image-icon: 1;}");f.push("\x3c/style\x3e\x3c/head\x3e");f.push('\x3cbody g_editable\x3d"true" hidefocus\x3d"true" ');z.az&&f.push("contentEditable ");f.push('class\x3d"editable ');f.push('" id\x3d"',
a.YE,'" style\x3d"min-width:0;');z.y&&a.dr&&(f.push(";width:100%;border:0;margin:0;background:none transparent;",";height:",a.jB?"100%":"auto"),a.aF?f.push(";overflow:auto"):f.push(";overflow-y:hidden;overflow-x:auto"));z.vg&&f.push(";outline:hidden");for(var g in a.sx)f.push(";"+g+":"+a.sx[g]);f.push('"\x3e',b,"\x3c/body\x3e\x3c/html\x3e");a=f.join("");d=d.contentDocument||d.contentWindow.document;d.open();d.write(a);d.close()};
var bz=function(a,b){z.F.call(this);this.Sg=this.id=a;this.gb=null;this.Sb={};this.Ij={};for(var c in z.cz)this.Ij[c]=[];this.hl="";this.Bk={};this.Bk[dz]=1;this.Bk[z.ez]=1;this.Hr=new z.pl(this.BE,fz,this);this.Fr={};for(var d in gz)this.Fr[gz[d]]=0;z.y&&(this.we=new z.pl(this.mo,hz,this));this.ic=new z.zd(this);this.jW=[];this.bm=z.iz;this.nm=z.H(b||window.document);this.Kc=this.nm.m(this.id);this.eO=jz;this.Uk=this.nm.Va()};
var kz=function(a){var b=!(a.ctrlKey||a.metaKey)&&a.keyCode in lz;return(a.ctrlKey||a.metaKey)&&a.keyCode in mz||b};var nz=function(a,b){a.bm=2;a.Ha=b;a.gb=z.H(b);b.setAttribute("g_editable","true");z.Wi(b,"textbox")};
var oz=function(a,b){if(9==b.keyCode&&!a.dispatchEvent({type:"beforetab",shiftKey:b.shiftKey,altKey:b.altKey,ctrlKey:b.ctrlKey})||z.y&&b.metaKey&&!z.D(29)&&(37==b.keyCode||39==b.keyCode))return b.preventDefault(),!1;var c;(c=b.charCode)||(c=kz(b)?!0:!(!z.y||b.ctrlKey||b.metaKey||z.y&&!b.charCode));a.Zx=c;a.Zx&&a.Yh();return!0};var pz=function(a,b,c){var d={};a=a.eu(8,b||"",d);z.sg(c,d);z.Eu(c,a)};
var qz=function(a,b){!rz(a,"selectionchange")&&(sz[b.keyCode]||(b.ctrlKey||b.metaKey)&&tz[b.keyCode])&&(a.dispatchEvent("beforeselectionchange"),a.nJ.start())};var uz=function(a,b){if(!b.altKey){var c=z.Vc?b.metaKey:b.ctrlKey;if(c||vz[b.keyCode]){var d=b.charCode||b.keyCode;17!=d&&(d=String.fromCharCode(d).toLowerCase(),z.Vc&&z.y&&"`"==d&&" "==b.jc.key&&(d=" "),a.Co(5,b,d,c)&&b.preventDefault())}}};var wz=function(a){var b;return a.qc()&&(b=a.gb)?(a=b.Va())&&a.frameElement:null};
z.xz=function(a){return(a=a.gb&&a.gb.Va())&&z.qu(a)};z.yz=function(a,b,c){if(!rz(a,"selectionchange")){var d=z.xz(a),d=d&&d.Qb();a.wf=!!d&&z.mf(a.m(),d);a.dispatchEvent("cvc");a.dispatchEvent({type:"selectionchange",SX:b&&b.type});a.Co(4,b,c)}};z.zz=function(a,b,c){b&&(a.we&&Nn(a.we),a.Bk[dz]=1);c&&(z.Az(a),a.Bk[z.ez]=1)};var Bz=function(a,b,c){!b&&a.we&&Nn(a.we);a.Bk[dz]=0;a.Bk[z.ez]=0;b&&a.mo();c&&a.BE()};var rz=function(a,b){return!!a.Bk[b]||a.Fr[b]&&500>=(0,z.G)()-a.Fr[b]};
z.Az=function(a){a.we&&Nn(a.we);Nn(a.Hr)};var Cz=function(a){z.uf(a.target,"A")&&a.preventDefault()};z.Dz=function(a){var b=a.m();if(b){var c=z.yu(b);b==c?z.uu(b,0).select():z.Hu(c,!0);z.yz(a)}};var Ez=function(a){if(!z.ka(a.Xy)&&(a.Xy=!1,z.A&&a.qc())){for(var b=a.nm.Va();b!=b.parent;)try{b=b.parent}catch(c){break}b=b.location;a.Xy="https:"==b.protocol&&-1==b.search.indexOf("nocheckhttps")}return a.Xy};z.Fz=function(a,b){bz.call(this,a,b)};
var Gz=function(a){if(a.Rp?0:a.Rp=!0){var b=wz(a),c=a.m(),d=!1;if(b&&c){var f,g=b.parentNode,h=g.offsetWidth;(0,window.parseInt)(Np(b,"width"),10)!=h&&(f=z.Qg(c),b.style.width=h+"px",c.style.width=h-f.left-f.right+"px",d=!0);g=g.offsetHeight;a.Go()&&(0,window.parseInt)(Np(b,"height"),10)!=g&&(f||(f=z.Qg(c)),b.style.height=g+"px",c.style.height=g-f.top-f.bottom+"px",d=!0)}a.Rp=!1;d&&a.dispatchEvent("ifrsz")}};var Hz=function(a){a.m()&&(Gz(a),a.Go()||a.gB())};
z.Iz=function(a,b){var c=a.split("!");this.type=c[0]+"!";this.namespace=c[1];this.Ac=new Jz(b)};var Jz=function(a){this.category=a.category;this.action=a.action;this.label=a.label;this.value=a.value};var Kz=function(){z.F.call(this)};z.Lz=function(){z.F.call(this)};var Mz=function(a,b,c){window.$.post(a,b).done(function(a){if(a.r)z.W.message(a.msg);else{var b=a.msg;(b=b&&b.redirect)?window.location.href=b:(z.W.message("操作成功！"),c&&c(a))}})};
var Nz=function(a,b){var c=window.$.extend({action:"get_member_info",reason:b.value},a.TN);return window.$.post("/manage",c).then(function(a){return z.La("用户已被警告 %s 次，禁言 %s 次",a.warn_num,a.ban_num)})};z.Oz=function(a){a=void 0===a?{}:a;"post"===a.type&&(a.type="article");this.type=a.type;this.id=a.id;this.submit=z.Or(this.submit.bind(this),!0);this.render=z.Or(this.render.bind(this),!0)};
var Pz=function(a){if(a){var b=z.W({title:"举报成功",content:'\x3cp\x3e您的举报正在等待人工审核，我们会在 24 小时内审核完成\x3cbr\x3e处理完成后会「私信」通知您\x3cbr\x3e您也可以进入 \x3ca href\x3d"/community/report"\x3e社区服务中心\x3c/a\x3e 查看实时处理进度\x3c/p\x3e\x3cp style\x3d"margin-top: 1em"\x3e\x3clabel\x3e\x3cinput type\x3d"checkbox" name\x3d"neverRemind"\x3e不再提醒\x3c/label\x3e\x3c/p\x3e',modal:!0,ha:!0,buttons:{yes:"知道了"}});b.g(z.ik,function(){b.ai().querySelector("[name\x3dneverRemind]").checked&&window.$.post("/community/report/noti",{cancel:!0})})}else{var c=
z.W({title:"举报成功",content:"您的举报正在等待人工审核，我们会在 24 小时内审核完成",modal:!0,buttons:{}});(0,window.setTimeout)(function(){return c.G(!1)},4E3)}};var Qz=function(a){z.Q.call(this);z.Nb(this.J={},this.defaults,a||{});this.cn=new z.Sd;this.te=null};var Rz=function(a,b){var c=a.J,d=new z.ex(c.trigger,!1,null,b);d.Qp=c.ZU;d.so=c.TP;d.oh(a.Zi);z.E(d,"trigger",function(a){d.setPosition(new z.Nw(a.anchor,1))});z.E(d,"beforeshow",function(a){this.te=a.target.anchor;this.render()},!1,a);d.className=c.GL;a.YP=d};
var Sz=function(a,b){var c=a.J.OQ,d=z.ff(a.Zi),f=z.rb(d,function(a){return a.getAttribute("data-action")===b});if(!f||z.V.has(f,c))return!1;z.w(d,function(a){z.V.remove(a,c)});z.V.add(f,c);return!0};var Tz=function(a,b,c,d){a.cn.set(b,{name:b,V:c,Mh:d||z.p})};z.Uz=function(a){z.Q.call(this);z.Nb(this.J={},this.defaults,a||{})};var Vz=function(a){var b=a.J,c=a.h;Wz(c);b=Xz(c,b.YF);b.length&&(a.dispatchEvent("willScrape"),window.$.when.apply(window.$,b).always(function(){a.dispatchEvent("didScrape")}))};
var Yz=function(a,b,c){for(;a&&a!==b;){if(c(a))return a;a=a.parentNode}};var Zz=function(a,b){return Yz(a,b,function(a){return $z(a)||"CODE"===a.nodeName||"PRE"===a.nodeName})};var $z=function(a){return"A"===a.nodeName};var Wz=function(a){var b=z.Lo(a,function(b){return 3===b.nodeType&&!Zz(b,a)}),c,d=z.qu(),f=d&&z.zt(d);z.w(b,function(a){var b=a.nodeValue,d=aA(b);d!==b&&(b=z.Xe(d),f===a&&(c=b.lastChild),z.Wp(b,a))});c&&z.Hu(c)};
var Xz=function(a,b){var c=z.nb(a.getElementsByTagName("A"),function(a){var b=a.getAttribute("href");if(b=!(!b||"#"===b)&&!a.getAttribute("data-editable")&&z.x(bA,a.protocol))b=z.pf(a),z.Ka(a.href,b)?a=void 0:(a.setAttribute("data-editable",!0),a.setAttribute("data-title",b),a=!0),b=!a;return b});return z.ob(c,function(c){return cA(c.href).done(function(f){dA(a,c,f,b)})})};
var dA=function(a,b,c,d){if(c&&a.contains(b)){d=d||{};var f=function(a,b,c){var d=z.qu();if(d){var f=d.Y(),t=d.xa(),C=d.la(),J=d.La();z.mf(b,f)&&(f=a,t=0);z.mf(b,C)&&(C=a,J=0);c(function(){f===a&&C===a?z.Hu(a):z.bu(f,t,C,J).select()})}else c(z.p)};a={link:function(a,b){a.setAttribute("data-editable",!0);b.title===a.href?a.setAttribute("data-title",eA(a.hostname)):(a.setAttribute("data-title",b.title),f(a,a,function(c){z.nf(a,b.title);c()}))},image:function(a,b){var c=window.document.createElement("img");
c.src=b.src;c.setAttribute("data-rawwidth",b.width);c.setAttribute("data-rawheight",b.height);f(c,a,function(b){z.Wp(c,a);b()})}};(d=d[c.type]||a[c.type])&&d(b,c)}};var eA=function(a){return a.split(".").slice(/(.com|.edu|.gov|.net|.org)$/.test(a)?-2:-3).join(".").replace(/^www\./,"")+" 的页面"};var aA=function(a){return a.replace(fA,function(a){z.Ka(a,"http")||(a="http://"+a);return a.link(a)})};
var gA=function(a){var b=new Qz({});Tz(b,"link","链接",function(a){z.nf(a,a.href)});Tz(b,"text","文本",function(a){z.nf(a,a.getAttribute("data-title"))});b.w(a);var c=b.Qx();z.Qw(c,new z.qg(2,0,0,0));z.cx(c,new z.qg(2,0,0,0));var d=b.o();d.g(c,"beforeshow",function(a){a=a.target.anchor;var c=z.pf(a);c===a.href?Sz(b,"link"):(c!==a.getAttribute("data-title")&&a.setAttribute("data-title",c),Sz(b,"text"))}).g(c,"beforehide",function(b){if((b=b.target)&&a.contains(b)&&$z(b))return!1});var f;d.g(c,"show",function(a){f=
a.target.anchor;z.V.add(f,"hover")}).g(c,"hide",function(){f&&(z.V.remove(f,"hover"),f=null)});return b};
z.hA=function(a,b,c){z.Q.call(this);this.id=a;this.type=b;this.Ha=null;this.Ng=this.St=!1;this.mc="写下你的评论…";this.placeholder='\x3cp style\x3d"color:#999"\x3e'+this.mc+"\x3c/p\x3e";this.Uj="";this.Ja=-1;this.sz=window.$.Deferred().resolve();this.qA=this.qt=null;this.KD="zm-comment-box";this.Sd=null;a=iA[b];if(!a)throw Error("API not found");this.Dg=window.$.extend({},iA._default_,a);this.cj="";z.Nb(this.J={},this.defaults,c||{})};var jA=function(a){return z.Or(a,!0,function(){return this.cj})};
var kA=function(a,b,c){if(!z.kf(a)||"TEXTAREA"===a.nodeName)return function(){};var d=new z.Uz({YF:{image:z.p}});d.w(a);b=(new z.uh).add("type",b+"_comment").add("resource_id",c);var f=new bv(a,{an:{source:"/people/autocomplete?"+b.toString()},lk:z.L("zu-main")||window.document.body});new Vu(a,{CA:lv});return function(){d.H();f.H()}};z.lA=function(a,b,c){var d=z.L(a.KD,b);c&&(a.Sd=c);d?a.w(d):(a.St=!0,a.render(b))};
var mA=function(a){z.Eb({WC:".load-more",Cn:".zm-comment-list",SD:".zm-comment-form",Ha:".zm-comment-editable"},function(a,c){this[c]=(0,window.$)(a,this.h)[0]},a)};
var nA=function(a){a.Ha&&a.Ha.setAttribute("aria-label",a.mc);if(z.Rm){var b=a.Ha;b.setAttribute("contentEditable",!0);var c=a.jj={m:function(){return b},Al:function(){return bp(b)?"":b.innerHTML},Pd:function(a,c){b.innerHTML=c},Wf:function(){z.Gu(b)}};z.Cc(a,kA(c.m(),a.type,a.id))}else oA(a);a.o().g(a.Ha,["change","keyup"],function(a){27!==a.keyCode&&(z.Bu(this.Ha)?this.Uj="":this.Uj=this.Ua())}).g(a.jj.m(),"focus",function(){this.ia({action:"click_add_[type]_comment_box"})});pA(a)};
var oA=function(a){var b=z.M("textarea",{placeholder:a.mc,"class":"zm-comment-textarea"});z.Wp(b,a.Ha);new z.Pr(b);a.Ha=b;a.jj={m:function(){return b},Al:function(){return b.value},Pd:function(){b.value="";b.style.height=z.Bg(22,!0)},Wf:function(){b.focus()}}};
var qA=function(a){var b=a.jj,c=b.m();if(b.Al()!==a.placeholder){b.Pd(!1,a.placeholder);var d=["click","focus","keydown"],f=function(){b.Pd(!1,this.Uj||"");this.Ha.lastChild?z.Hu(this.Ha.lastChild):b.Wf();z.nd(c,d,f,!1,this)};z.E(c,d,f,!1,a);var g;window.getSelection?(g=window.getSelection(),g.anchorNode&&z.mf(a.Ha,g.anchorNode)&&g.removeAllRanges()):window.document.selection&&a.Ha.blur()}};var rA=function(a){a.focus();a=z.tu(a);a.collapse();a.select()};
var sA=function(a){var b;(b=z.L("zm-comment-reply-hack"))?(b=z.Xe(z.Rp(b)),z.V.Kv(b,"zm-comment-reply-hack","zm-comment-reply-hacked"),z.cf(b,a)):(b="",z.S.kb()&&(b='\x3cimg class\x3d"avatar" src\x3d"'+z.S.ce("is")+'"\x3e'),b=z.Xe('\x3cdiv class\x3d"zm-comment-form expanded"\x3e\x3cdiv class\x3d"zm-comment-editable-wrap"\x3e'+b+'\x3cdiv class\x3d"zm-comment-editable" aria-label\x3d"写下你的回复"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"zm-command zg-clear"\x3e\x3ca href\x3d"javascript:;" class\x3d"zm-comment-submit zg-right zg-btn-blue"\x3e评论\x3c/a\x3e\x3ca href\x3d"javascript:;" class\x3d"zm-comment-close zm-command-cancel"\x3e取消\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e'),
a.appendChild(b));return b};var tA=function(a,b){return z.rb(uA(a),function(a){return a.getAttribute("data-id")===b})};var uA=function(a){return(0,window.$)(a.Cn).children(".zm-item-comment").get()};
var vA=function(a){a.o().g(a.h,"click",a.Qa).g(a.Ha,"keydown",a.hS).g(z.Hq,"anon_change",a.yj).g(a.jj.m(),["click","focus"],z.Aa(a.Bu,!0)).g(a.jj.m(),"focus",z.Aa(a.Ii,"add_comment_start"));a.Ja=Number(a.h.getAttribute("data-count"));(0,window.$)(a.h).on("focusin focusout","."+a.J.xf,function(a){(0,window.$)(this).toggleClass("focusin","focusin"===a.type)});!z.Oj&&a.WC&&(a.qA=up().then(window.$.proxy(a.eH,a)))};var wA=function(a){0<a.hb()?(a.Uj=a.Ua(),a.Bu(!1),qA(a)):a.Sd?a.collapse():a.Bu();a.Xh()};
var xA=function(a){if(a.Sd){var b=(0,window.$)(a.Sd);a.$(a.fD).show().css("left",b.position().left+b.width()/2)}};var yA=function(a){if("pending"!==a.sz.state()){a.Db();a.h.innerHTML=a.Fn();a.expand();var b=a.Dg.Bl(a.id,a.J.bR).done((0,z.q)(a.YT,a));return a.sz=b}};
var pA=function(a){z.S.kb()?z.S.re||zA(a,'\x3cdiv class\x3d"activate-mask-tip-comment"\x3e'+(z.S.Rn?"为了正常使用知乎的提问、回答、评论和编辑功能，请验证你的邮箱。":"为了正常使用知乎的提问、回答、评论和编辑功能，请绑定你的手机或邮箱。")+"\x3c/div\x3e",'\x3cdiv class\x3d"zm-command"\x3e\x3ca class\x3d"zg-r3px zg-btn-blue" href\x3d"javascript:;"\x3e我要激活\x3c/a\x3e\x3c/div\x3e'):zA(a,'\x3cdiv class\x3d"signin-mask-tip-comment"\x3e\x3c/div\x3e',null)};
var zA=function(a,b,c){b=(0,window.$)(b);var d=(0,window.$)(c);c?((0,window.$)(".zm-command, .zm-comment-info",a.h).hide(),(0,window.$)(a.Ha).hide().after(d).after(b)):b.insertAfter(a.Ha);a=(0,z.q)(jA(z.p),a);b.on("click",a);d.on("click",a)};var AA=function(a){mA(a);nA(a);qA(a);vA(a);BA(a);xA(a)};var BA=function(a){var b=a.J,c=!a.hb();z.V.enable(a.h,b.cx,c);c&&a.Ha&&b.autofocus&&a.xl();a.dispatchEvent("change")};
var CA=function(a,b,c){if(!a.sm||"pending"!==a.sm.state()){var d;z.ta(b)&&(d=b.dU,b=b.content);b=z.Na(b);var f=new z.Sd;f.set(a.type+"_id",a.id);f.set("content",b);d&&f.set("reply",d);b=a.Dg.add($n(f));b.done(window.$.proxy(a.wO,a)).done(c);a.sm=b;a.Uj=a.Ua();a.Ii("add_comment_submit")}};var DA=function(a,b){var c=z.Pp(b,a.J.xf);(new z.Lz).open(b,{id:c.getAttribute("data-id"),type:"comment"},(0,z.q)(function(){z.N(c);--this.Ja;BA(this)},a))};
var EA=function(a,b){var c=z.Pp(b,a.J.xf),d=c.getAttribute("data-id"),f="你确定要删除这条评论吗？",g=(0,window.$)(".zm-item-link-avatar",c).prop("href");g&&(f+='\x3cp class\x3d"js-block" style\x3d"margin-top:.2em;color:#999;visibility:hidden"\x3e\x3clabel\x3e\x3cinput type\x3d"checkbox"\x3e同时将此人屏蔽\x3c/label\x3e\x3c/p\x3e',window.$.get(g+"/block",function(a){a.r||a.msg||(0,window.$)(".js-block",h.m()).css("visibility","visible")}));var h=z.W.confirm("删除评论",f,function(a){a&&(a=(0,window.$)(":checkbox",h.m()).prop("checked"),
FA(this,d,Number(a),z.Aa(z.N,c)))},a)};var GA=function(a,b,c){a.Dg.remove(b).done((0,z.q)(function(){z.sa(c)&&c();--this.Ja;BA(this)},a))};var FA=function(a,b,c,d){a.Dg.tM(b,c).done((0,z.q)(function(){z.sa(d)&&d();--this.Ja;BA(this)},a))};var HA=function(a,b){return a&&(b.length?HA(a[b.shift()],b):a)};var IA=function(a,b){z.Q.call(this);this.zb=a;this.entryType=b;this.Rj=!1;this.mD=!0};var JA=function(a){z.S.kb()&&0===KA(a)&&(0,window.setTimeout)(function(){return a.xl()})};
var LA=function(a){if(!a.vl&&!z.tm){var b=z.Pp(a.h,"zm-item-meta");if(b){var c=z.L("zm-meta-panel",b);c&&(a.vl=new Su(null,b),a.vl.tag="comment",a.vl.w(c))}}};var MA=function(a,b){a.Sd=b;a.wv=(0,window.$)(b);a.hT=z.pf(a.Sd);a.wv.on("click",function(){JA(a)})};var NA=function(a){a.Rj&&(0,window.$)(".icon-spike",a.h).css("left",a.wv.position().left+a.wv.width()/2).removeClass("hidden")};
var OA=function(a){if(a.Sd)if(a.Rj)tp(a.Sd,"收起评论");else{var b=KA(a),c=void 0,c=z.qa(b)?0<b?b+" 条评论":"添加评论":a.hT;tp(a.Sd,c)}};var KA=function(a){var b;if(b=a.Uq)a=a.Uq.store.getState(),b=HA(a,["commentBox","paging","totalCount"]);return b};var PA=function(a,b,c){var d=a.Uq;a=d.store;var f=d.actions,d=d.ActionTypes;/[A-Z]/.test(b[0])?a.dispatch({type:d[b],payload:c}):a.dispatch(f[b](c))};
var QA=function(a,b){z.Q.call(this);window.$.extend(this.options={},RA,b||{});this.state={$l:!1,Ys:!1,$s:!0,Do:!1,lA:!1};var c=new z.Pk(this.update,17,this);z.Bc(this,c);this.NJ=(0,z.q)(c.fire,c)};
var SA=function(a){var b=(0,window.$)(a.h),c=(0,window.$)("\x3cdiv\x3e");window.$.each("display position top right bottom left float margin".split(" "),function(a,f){c.css(f,b.css(f))});c.css({visibility:"hidden",width:b.outerWidth(),height:b.outerHeight()}).insertBefore(b);a.mc=c.get(0);b.addClass(a.options.Cg);a.ha();a.options.cI.call(a)};
var TA=function(a){if(!window.Modernizr.csstransitions)return SA(a);var b=(0,window.$)(a.h);a.state.Do=!0;SA(a);b.css({transition:"none",transform:"translateY("+UA(a)+"px)"});(0,window.setTimeout)(function(){b.css({transition:"",transform:""}).onTransitionEnd(function(){a.onAnimationEnd()},200)})};
var VA=function(a){if(!window.Modernizr.csstransitions)return a.restore();var b=(0,window.$)(a.h);a.state.Do=!0;b.css("transform","translateY("+UA(a)+"px)").onTransitionEnd(function(){b.css({transition:"none",transform:""});a.restore();a.onAnimationEnd()},200)};var UA=function(a){var b=(0,window.$)(a.h).outerHeight();return null===a.options.bottom?-(b+a.options.top):b+a.options.bottom};z.WA=function(a){z.Q.call(this);this.entryType=a};var XA=function(a,b){return z.Or(a,b,function(){return this.$n()})};
var YA=function(a){a.g("trackRequested",function(b){b.label=a.Yx();b.value=(0,window.$)(a.h).index()+1;z.wi(b)})};var ZA=function(a){a=(0,window.$)(a);var b={};(0,window.$)("meta[itemprop]",a).each(function(){var a=(0,window.$)(this);b[a.attr("itemprop")]=a.attr("content")});return b};var $A=function(a){if(a.iB)return a.iB;var b=(0,window.$)('meta[itemprop\x3d"ZReactor"]',a.h).data("meta");a.iB=b&&b.source_type?b.source_type:"";return a.iB};
var aB=function(a){if(a.hz)return a.hz;var b=$v();a.hz=({home:"feed",search:"search_result_question_answer_tab",explore_daily_hot:"daily_trending",explore_monthly_hot:"monthly_trending",people:"people_profile_activities",people_answers:"people_profile_answers",explore_recommendations:"editor_recommendations"}[b]||b)+({collection:"_feed",roundtable:"_feed",answer:"_more"}[b]||"");return a.hz};
var bB=function(a){return{promotion_answer:"promote",member_voteup_answer:"someone_vote_up",topic_acknowledged_answer:"from_topic",roundtable_add_answer:"from_roundtable",member_answer_question:"someone_add",member_create_article:"someone_add",member_voteup_article:"someone_vote_up"}[$A(a)]};var cB=function(a){(0,window.$)(".js-report, a[name\x3dreport]",a.h).on("click",function(){a.gM||(new z.Oz({type:a.entryType,id:a.zb})).render()})};var dB=function(){z.Wk.call(this,{use:["autoload","dataPagingSource"]})};
z.eB=function(a){var b={appkey:"3063806388"};a&&(b.title=a);window.open("http://service.weibo.com/share/share.php?"+window.$.param(b),"_blank","width\x3d615,height\x3d505")||(window.location.href="http://service.weibo.com/share/share.php?"+window.$.param(b))};z.fB=function(a,b,c,d){b=new gB(b,c,d);b.w(a);return b};var hB=function(a){z.ct("answer",a).done(function(a){z.eB(a.msg.sina)})};var gB=function(a,b,c){z.Q.call(this);this.dc=a;this.hK=b;this.uJ=c};
var iB=function(a){var b=a.oH=new z.jy,c=[{label:z.Xe('\x3cspan class\x3d"ico z-ico-weibo-share"\x3e\x3c/span\x3e新浪微博'),value:0},{label:z.Xe('\x3cspan class\x3d"ico z-ico-wechat-share"\x3e\x3c/span\x3e微信扫一扫\x3cimg class\x3d"qrcode-image js-qrcode-image"\x3e'),value:1}];"answer"!==a.dc&&"post"!==a.dc||c.push({label:z.Xe('\x3cspan class\x3d"ico z-ico-daily-share"\x3e\x3c/span\x3e读读日报'),value:2});window.$.each(c,function(a,c){var g=new z.ey(c.label,c.value);b.Ga(g)});z.bh(b,1).Wa(!1);c=new z.sy("share",
b);c.tk=!0;c.Yb=z.Cl;c.w(a.m());z.Bc(c,a);b.g("action",a.vO.bind(a));(0,window.$)(b.m()).addClass("share-menu")};z.jB=function(a){z.Q.call(this);z.Nb(this.options={},kB,a||{});this.content="";this.fd=this.Se=this.Qk=null};var lB=function(a){a.getParent()?a.dispatchEvent("expandRequest"):a.expand()};z.mB=function(){z.Q.call(this);this.hh="roundtable";this.Cp=z.nh};
var nB=function(a){var b=new z.jB({ur:"content",yB:"script.content"});a.K(b);b.w(a.h);a.g("expandRequest",(0,z.q)(a.expand,a));a.g("expand",function(a){a.target===a.currentTarget&&b.expand()});a.g("collapse",function(a){a.target===a.currentTarget&&b.collapse()});b.bz&&a.o().Aa(b,"expand",function(){return(0,z.oB)("answer",a.gf,"read")});z.On(a.m(),function(){return(0,z.oB)("answer",a.gf,"touch")})};
z.pB=function(){var a=(0,window.$)(".roundtable-profile"),b=(0,window.$)(".share",a),c=b.data("token");if(b.length){var d=window.location.protocol+"//"+window.location.host+"/roundtable/"+c;z.fB(b.get(0),"roundtable",c,d).g("trackRequested",function(a){a.label="roundtable";z.wi(a)})}(0,window.$)(".follow",a).click(z.Or(function(){var b=this;(0,z.qB)(b,"roundtable",function(c){(0,window.$)(".label",b).text(c?"取消关注":"关注");var d=(0,window.$)(".followers .count",a);c=Number(d.data("count"))+(c?1:-1);
d.length&&(c=Math.max(c,0),d.text(c).data("count",c))},["button-success","button-cancel"])}))};var rB=function(a,b){z.F.call(this);this.h=a;var c=z.kf(this.h)?this.h:this.h?this.h.body:null;this.KQ=!!c&&z.Ng(c);this.bH=z.E(this.h,z.y?"DOMMouseScroll":"mousewheel",this,b)};var sB=function(a,b){return z.B&&(z.Vc||z.Hl)&&0!=a%b?a:a/b};var tB=function(a,b,c,d){z.Qc.call(this,b);this.type="mousewheel";this.detail=a;this.deltaX=c;this.deltaY=d};var uB=function(){z.F.call(this)};
var vB=function(a,b){return null==a.Ak?b:a.Uo+Math.round((b-a.Uo)/a.Ak)*a.Ak};var wB=function(a,b){z.Q.call(this,a);this.SC=null;this.Ab=new uB;this.RQ=b||z.Dl;z.E(this.Ab,"change",this.LF,!1,this)};
var xB=function(a,b){b?(a.o().g(a.me,"beforedrag",a.ns).g(a.Tf,"beforedrag",a.ns).g(a.me,["start","end"],a.Cs).g(a.Tf,["start","end"],a.Cs).g(a.sb,"key",a.of).g(a.m(),"click",a.xs).g(a.m(),"mousedown",a.xs),a.DG&&yB(a,!0)):(a.o().qa(a.me,"beforedrag",a.ns).qa(a.Tf,"beforedrag",a.ns).qa(a.me,["start","end"],a.Cs).qa(a.Tf,["start","end"],a.Cs).qa(a.sb,"key",a.of).qa(a.m(),"click",a.xs).qa(a.m(),"mousedown",a.xs),a.DG&&yB(a,!1))};
var zB=function(a,b){var c=z.Dg(b,a.m());return"vertical"==a.Nb?c.y:a.be&&a.rd()?a.m().clientWidth-c.x:c.x};var AB=function(a,b){var c=a.Hc(),d=a.Xc();if("vertical"==a.Nb){var f=a.bb.offsetHeight,g=a.m().clientHeight-f,f=zB(a,b)-f/2;return(d-c)*(g-f)/g+c}f=a.bb.offsetWidth;g=a.m().clientWidth-f;f=zB(a,b)-f/2;return(d-c)*f/g+c};var BB=function(a,b){if(b==a.bb)return a.Ab.W();if(b==a.Hd)return a.Ab.W()+a.Ab.ci();throw Error("Illegal thumb element. Neither minThumb nor maxThumb");};
var CB=function(a,b){Math.abs(b)<a.fo()&&(b=(0,z.Nl)(b)*a.fo());var c=BB(a,a.bb)+b,d=BB(a,a.Hd)+b,c=fq(c,a.Hc(),a.Xc()-a.xt),d=fq(d,a.Hc()+a.xt,a.Xc());DB(a,c,d-c)};var EB=function(a,b,c){var d=vB(a.Ab,c);c=b==a.bb?d:a.Ab.W();b=b==a.Hd?d:a.Ab.W()+a.Ab.ci();c>=a.Hc()&&b>=c+a.xt&&a.Xc()>=b&&DB(a,c,b-c)};var DB=function(a,b,c){a.Hc()<=b&&b<=a.Xc()-c&&a.xt<=c&&c<=a.Xc()-b&&(b!=a.W()||c!=a.ci())&&(a.Ab.At=!0,a.Ab.xu(0),a.Ab.Ea(b),a.Ab.xu(c),a.Ab.At=!1,a.LF())};
var FB=function(a,b){return b<=a.Ab.W()+a.Ab.ci()/2?a.bb:a.Hd};var GB=function(a){if(a.bb&&!a.Eo){var b=HB(a,BB(a,a.bb)),c=HB(a,BB(a,a.Hd));if("vertical"==a.Nb)a.bb.style.top=b.y+"px",a.Hd.style.top=c.y+"px",a.Tb&&(b=IB(c.y,b.y,a.bb.offsetHeight),a.Tb.style.top=b.offset+"px",a.Tb.style.height=b.size+"px");else{var d=a.be&&a.rd()?"right":"left";a.bb.style[d]=b.x+"px";a.Hd.style[d]=c.x+"px";a.Tb&&(b=IB(b.x,c.x,a.bb.offsetWidth),a.Tb.style[d]=b.offset+"px",a.Tb.style.width=b.size+"px")}}};
var IB=function(a,b,c){var d=Math.ceil(c/2);return{offset:a+d,size:Math.max(b-a+c-2*d,0)}};var HB=function(a,b){var c=new z.He;if(a.bb){var d=a.Hc(),f=a.Xc(),f=b==d&&d==f?0:(b-d)/(f-d);"vertical"==a.Nb?(d=a.m().clientHeight-a.bb.offsetHeight,f=Math.round(f*d),c.x=JB(a,a.bb),c.y=d-f):(c.x=Math.round(f*(a.m().clientWidth-a.bb.offsetWidth)),c.y=a.bb.offsetTop)}return c};
var KB=function(a,b){b=fq(b,a.Hc(),a.Xc());a.Eo&&(a.Jn.stop(!0),a.Jn.H());var c=new Cw,d,f=FB(a,b),g=a.W(),h=a.ci(),k=BB(a,f),m=HB(a,k);d=a.fo();Math.abs(b-k)<d&&(b=fq(k+(b>k?d:-d),a.Hc(),a.Xc()));EB(a,f,b);k=HB(a,BB(a,f));d="vertical"==a.Nb?[JB(a,f),k.y]:[k.x,f.offsetTop];m=new zp(f,[m.x,m.y],d,100);m.Lg(a.be);c.add(m);a.Tb&&LB(a,f,g,h,k,c);a.SC&&(f=a.SC.wX(g,b,100),z.w(f,function(a){c.add(a)}));a.Jn=c;a.o().g(c,"end",a.RN);a.Eo=!0;c.play(!1)};
var LB=function(a,b,c,d,f,g){var h=HB(a,c),k=HB(a,c+d);c=h;d=k;b==a.bb?c=f:d=f;"vertical"==a.Nb?(b=IB(k.y,h.y,a.bb.offsetHeight),h=IB(d.y,c.y,a.bb.offsetHeight),f=new zp(a.Tb,[JB(a,a.Tb),b.offset],[JB(a,a.Tb),h.offset],100),b=new wp(a.Tb,b.size,h.size,100)):(b=IB(h.x,k.x,a.bb.offsetWidth),h=IB(c.x,d.x,a.bb.offsetWidth),f=new zp(a.Tb,[b.offset,a.Tb.offsetTop],[h.offset,a.Tb.offsetTop],100),b=new xp(a.Tb,b.size,h.size,100));f.Lg(a.be);b.Lg(a.be);g.add(f);g.add(b)};
var MB=function(a){var b=a.m();b&&(z.Xi(b,"valuemin",a.Hc()),z.Xi(b,"valuemax",a.Xc()),z.Xi(b,"valuenow",a.W()),z.Xi(b,"valuetext",a.RQ(a.W())||""))};var yB=function(a,b){b?(a.ck||(a.ck=new rB(a.m())),a.o().g(a.ck,"mousewheel",a.GF)):a.o().qa(a.ck,"mousewheel",a.GF)};var JB=function(a,b){return a.be?z.hj(b):b.offsetLeft};var NB=function(a,b){wB.call(this,a,b);this.Ab.xu(0)};var OB=function(a){z.Q.call(this);this.options=window.$.extend({},this.defaults,a)};
var PB=function(a,b){a.zoom=b;QB(a,a.Ie.uq/2+a.Ie.x,a.Ie.ho/2+a.Ie.y)};var QB=function(a,b,c){var d=a.zoom;a.Ie={uq:a.options.wg/d,ho:a.options.vg/d,x:b-a.options.wg/d/2,y:c-a.options.vg/d/2};RB(a)};var RB=function(a){var b=a.zoom,c=fq(a.options.Um-a.Ie.x*b,a.options.wg+a.options.Um-a.Ks*b,a.options.Um),d=fq(a.options.Vm-a.Ie.y*b,a.options.vg+a.options.Vm-a.Js*b,a.options.Vm),f={width:b*a.Ks,height:b*a.Js,left:c,top:d};a.Aq.css(f);a.ov.css(f);a.Ie.x=(a.options.Um-c)/b;a.Ie.y=(a.options.Vm-d)/b};
z.SB=function(a,b,c){z.Q.call(this);this.Yq=a||z.TB;this.SE=b;this.aJ=c||"l"};var UB=function(){return!!window.FileReader};
var VB=function(a){a.Vl=a.zy=a.Ej="";if(a.dialog)a.dialog.ha();else{a.dialog=new z.U(null);a.dialog.Na("修改图片");var b=z.Jm.Ve,c=z.Jm.Ag,d=new z.Ij;d.set(b,"取消",!1,!0).set(c,"确定",!0);z.Fj(a.dialog,d);a.o().g(a.dialog,z.Hj,function(a){if(a.key===c){if(UB()){var b=this.Jw;a=(0,window.$)("\x3ccanvas\x3e\x3c/canvas\x3e");a.attr("width",b.options.wg);a.attr("height",b.options.vg);var d=a[0];(0,window.$)(window.document.body).append(d);var k=a[0].getContext("2d"),m=b.Ie;k.drawImage(b.Ls,m.x,m.y,m.uq,m.ho,
0,0,b.options.wg,b.options.vg);b=d.toDataURL("image/png");a.remove();a=b}else a=this.Jw.Ie;this.Ej=a;WB(this);this.dialog.G(!1);return!1}})}XB(a.dialog.R());a.dialog.G(!0);z.V.add(a.dialog.h,"avatar-edit-dialog")};var YB=function(a){var b=a.input.cloneNode();z.Wp(b,a.input);a.input=b;a.o().g(a.input,"change",a.Jc)};
var WB=function(a){if(a.Ej&&(UB()||a.zy)){a.dispatchEvent("beforepost");var b={type:a.Yq,dest_id:a.Yq===z.TB?z.S[3]:a.SE,return_size:a.aJ};if(UB()){var c=new window.FormData;c.append("handle_mode","upload");c.append("picture",ZB(a.Ej.replace(/data\:image\/\w{3,4};base64,/,"")),a.file.name);window.$.each(b,function(a,b){c.append(a,b)});window.$.ajax({url:a.TB,data:c,method:"post",processData:!1,contentType:!1,success:window.$.proxy(a.dE,a),dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0})}else{var b=
window.$.extend(b,{handle_mode:"resize",x:Math.round(a.Ej.x),y:Math.round(a.Ej.y),height:Math.round(a.Ej.ho),width:Math.round(a.Ej.uq),hashval:a.zy}),d='\x3cform target\x3d"av_up_frame" style\x3d"display:none;" method\x3d"post" action\x3d"'+a.TB+'"\x3e';window.$.each(b,function(a,b){d+='\x3cinput type\x3d"hidden" name\x3d"'+a+'" value\x3d"'+b+'" /\x3e'});d+="\x3c/form\x3e";b=(0,window.$)(d);b.appendTo(a.h);b[0].submit()}}};
var XB=function(a){var b=(0,window.$)("\x3cdiv class\x3d'new-avatar-editor-loading'\x3e\x3cdiv\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv\x3e正在上传...\x3c/div\x3e\x3c/div\x3e");a=(0,window.$)(a);a.html("");a.append(b)};var ZB=function(a){var b,c;c="image/png";b=b||512;a=(0,window.atob)(a);for(var d=[],f=0;f<a.length;f+=b){for(var g=a.slice(f,f+b),h=Array(g.length),k=0;k<g.length;k++)h[k]=g.charCodeAt(k);g=new window.Uint8Array(h);d.push(g)}return new window.Blob(d,{type:c})};
z.$B=function(a,b,c){z.ey.call(this,a,b,c);this.Di(!0)};z.aC=function(a,b,c){z.Q.call(this);this.offset=this.Ei=0;this.TU=c;this.Qr=a;this.url=b||window.location.href;this.Zg="zm-item";this.params={}};z.bC=function(a,b){b?a.Ok.html('\x3ci class\x3d"spinner-gray"\x3e\x3c/i\x3e正在加载').prop("disabled",!0):a.Ok.html("更多").prop("disabled",!1)};var cC=function(a){var b=a.lb();a.offset=a.Mz?a.Mz(b):b.length;a.Ds?(b=a.Ds(),z.P(a.Nd,b)):a.Nd&&("-1"===a.Ok.attr("data-next")||!b||10>b.length?a.Ok.hide():a.Ok.removeClass("hidden").show())};
z.dC=function(a,b,c,d){c=c||z.p;if(!a.Pi||"pending"!==a.Pi.state()){var f=a.xI(window.$.extend(a.params,{offset:a.offset,start:a.Ei}));"live"!==f.start&&z.X.fb({type:"topstory_feed_more"});a.Pi=window.$.post(a.url,f).done(c).done(window.$.proxy(function(a){if(d)return d.call(this,a);this.YB&&!b?this.aB?this.hk(a):(this.Yt=a,z.bC(this,!1)):this.hk(a)},a));1!==a.ln&&z.bC(a,!0)}};z.eC=function(a){a.dispatchEvent({data:{Ws:a.Ws,WB:a.WB},type:"afterload"})};
var fC=function(a){var b=a.lb(),c;if(a.TU)if(a.Nd&&(c=a.Nd.getAttribute("data-next")),c)a.Ei=c;else if(b=z.lb(b))a.Ei=a.uI(b)};var gC=function(a,b){z.w(b,function(a){var b=this.ep(a);this.dispatchEvent({data:{item:a,PQ:b},type:"itemcreated"})},a)};z.hC=function(a){z.F.call(this);this.na=null;this.h=a;a=z.A||z.Hc||z.B&&!z.D("531")&&"TEXTAREA"==a.tagName;this.S=new z.zd(this);this.S.g(this.h,a?["keydown","paste","cut","drop","input"]:"input",this)};var iC=function(a){null!=a.na&&(z.xd(a.na),a.na=null)};
var jC=function(a){a=new z.Qc(a.jc);a.type="input";return a};var kC=function(a,b,c,d){z.F.call(this);this.Zh=a;this.LE=b;this.vt=c;this.EN=d||lC;a.removeAttribute("maxlength");this.Py=new z.hC(a);z.E(this.Py,"input",this.Rz,!1,this);this.el()};z.mC=function(a){z.F.call(this);this.ta=null;this.pa=a;this.pu=0;this.FI=""};var nC=function(a,b){var c=z.Xp("zm-menu-item-link",a.lI);z.w(c,function(a,c){var g=!z.x(b,c);z.P(a,g)},a)};var oC=function(){z.F.call(this)};
z.pC=function(a){function b(){var b;qC||(qC=new oC,qC.init());b=qC;b.Ui=a;b.FL=a.id.split("-")[1];b.show()}function c(b){if(!a.getAttribute("data-disabled")){var c;rC||(rC=new z.mC,rC.init());c=rC;c.Ui=a;c.pa=a.id.split("-")[1];"redirect"===b?c.show():(z.xq("/question/unredirect",null,"POST","qid\x3d"+c.pa+"\x26rqid\x3d"+c.pu),c.Ui.innerHTML="重定向已撤销",c.Ui.setAttribute("data-disabled",1))}}function d(){function b(){var f=d.value,g=a.getAttribute("id").split("-")[1],f=(new z.uh).add("revision",g).add("reason",
f),t=new z.Z(!0);t.on("success",function(){var a=z.Zn(t);c.G(!1);if(!a)return z.W.message("网络异常");if(a.r)return z.W.message(a.msg);a.msg?window.location.href=a.msg:window.location.reload()});t.ajax("/revert",f.toString())}var c=z.W.confirm("撤销",'\x3cdiv class\x3d"zg-form-text-input"\x3e\x3ctextarea class\x3d"zg-editor-input content" title\x3d"请输入撤销原因" placeholder\x3d"请输入撤销原因"\x3e\x3c/textarea\x3e\x3c/div\x3e',function(a){if(a)return b(),!1}),d=z.L("content",c.R());new z.qk(d);new z.Pr(d);new kC(d,
null,200)}var f=a&&a.name;if(f)switch(f){case "adminflag":b();break;case "redirect":case "cancel_redirect":c(f);break;case "revert":d()}};z.sC=function(a){(0,window.$)(a).on("click",'a[name\x3d"revert"]',function(){z.pC(this)})};
z.tC=function(a){var b={jq:!1,VX:!1};return function(c){if(!1===c)return!1;c={};z.Nb(c,b,a||{});if(c.jq&&!z.S.Fs)return z.W.alert('\x3ca href\x3d"/question/23261456" target\x3d"_blank"\x3e如何参与知乎话题的公共编辑？\x3c/a\x3e'),!1;if(c.qp){if(!z.R.KN)return z.W.alert('\x3cp\x3e创建较久或已有较多讨论的问题限制公共编辑\x3c/p\x3e\x3cp\x3e\x3ca href\x3d"/question/24501563" target\x3d"_blank"\x3e如何参与知乎问题的公共编辑？\x3c/a\x3e\x3c/p\x3e'),!1;if(z.R.Fo)return z.W.alert('\x3cp\x3e创建较久或编辑次数较多的问题锁定公共编辑\x3c/p\x3e\x3cp\x3e\x3ca href\x3d"/question/24501563" target\x3d"_blank"\x3e如何参与知乎问题的公共编辑？\x3c/a\x3e\x3c/p\x3e'),
!1}}};var uC=function(a){return window.$.post("/settings/account/unlock_with_digits",a)};var vC=function(a){return window.$.post("/settings/account/unlock_with_password",a)};
z.wC=function(){return new window.Promise(function(a){function b(a,b){return!!z.rb(a,function(a){return a.challenge_type===b})}function c(a){var b={value:a.challenge_type};switch(b.value){case "password":b.label="使用知乎密码验证";break;case "phone_digits":b.label=z.La("使用手机 %s 验证",a.hint);break;case "email_digits":b.label=z.La("使用邮箱 %s 验证",a.hint)}return b}if(z.Vi.get("unlock_ticket"))return a();var d=z.W.async({title:"验证身份",modal:!0,AJ:"正在进行安全验证，请稍等",className:"settings-account-unlock-dialog",onload:function(b,
c){function d(a){var b=(0,window.$)(".panel",k),c=a?b.filter(function(){return(0,window.$)(this).data("match")===a}):b.first();b.not(c.show()).hide()}var k=(0,window.$)("form",b),m=(0,window.$)(".submit",k),n=(0,window.$)(".error-label-container",k),t=(0,window.$)(".hint-label-container",k),C=(0,window.$)("select",k).change(function(){d(this.value);n.text("");t.text("")});(0,window.$)(".js-send-digits",k).each(function(){var a=(0,window.$)(this),b=a.closest(".panel");(0,window.$)("input",b);var d=
b.data("match"),a=z.ok(a,"email_digits"===d?10:60,function(a){return a?"%s 秒后即可重发":"重发验证码"},function(){t.text("");window.$.post("/settings/account/send_unlock_digits",{type:d}).then(function(){t.text("验证码已发送至你的"+("email_digits"===d?"邮箱":"手机"))})});z.Bc(c,a)});var J=k.validate({messages:z.xC,ignore:"input.text:hidden",errorLabelContainer:n,submitHandler:z.pk(m,function(){var b="password"===C.val();return(b?vC:uC)((0,window.$)(":input:visible",k).serialize()).then(function(d){if(d.success)c.G(!1),a();
else if(d=d.payload,d.fields)J.showErrors(d.fields);else if(d.message){var f={};f[b?"password":"digits"]=d.message;J.showErrors(f)}})})});C.change();(0,window.$)("input.text:visible",k).focus()},Dw:window.$.get("/settings/account/request_unlock").then(function(f){if(f.success)return(0,window.setTimeout)(function(){d.G(!1);a()},3E3),'\x3cp class\x3d"z-text-muted"\x3e验证成功\x3c/p\x3e';var g=f.payload;return window.$.get("/node/SettingsRequestUnlockTemplate").then(function(a){return(0,z.jn)(a,{canUsePanel:z.Aa(b,
g),each:z.w,options:z.ob(g,c)})})})})})};var yC=function(a,b,c,d){z.vt.call(this,a,b,c,null,d)};z.zC=function(){};var AC=function(a,b,c,d){for(var f=[],g=0,h=0;g<c.height;g++){for(var k=[],m=0;m<c.width;m++){var n=b&&b[h++];k.push(BC(a,n,d))}f.push(CC(a,k,d))}return a.Hw(f,d)};var CC=function(a,b,c){a=c.B("TR",a.T()+"-row",b);z.Wi(a,"row");return a};
var BC=function(a,b,c){a=c.B("TD",{"class":a.T()+"-cell",id:a.T()+"-cell-"+DC++},b);z.Wi(a,"gridcell");z.Xi(a,"selected",!1);if(!z.pf(a)&&!Fp(a)){var d;b=new yC(a);for(c="";!c&&(d=dq(b));)1==d.nodeType&&(c=Fp(d)||d.title);(d=c)&&z.Xi(a,"label",d)}return a};var EC=function(a,b,c){for(b=b.m();c&&1==c.nodeType&&c!=b;){if("TD"==c.tagName&&z.aj(c,a.T()+"-cell"))return c.firstChild;c=c.parentNode}return null};var FC=function(a){z.F.call(this);this.He=[];GC(this,a)};
var GC=function(a,b){b&&(z.w(b,function(a){this.Am(a,!1)},a),z.xb(a.He,b))};z.HC=function(a,b,c){$q.call(this,a,b||z.zC.aa(),c);this.Yi&=-89;this.Kn=new IC;this.Kn.Ob(this);this.jz=-1};z.JC=function(a,b){if(a.m())throw Error("Component already rendered");a.yc=z.qa(b)?new z.Ie(b,void 0):b;KC(a)};var LC=function(a){var b=a.Ua();return b&&b[a.Ta]};
var MC=function(a,b,c){if(a.m()){var d=a.Ua();if(d&&0<=b&&b<d.length){var f;f=(f=LC(a))?f.parentNode:null;a.Kn.m()!=f&&(a.Kn.h=f);f=a.Kn;f.Oc(c);!!(f.N&2)==c&&(b=d[b])&&(b=b?b.parentNode:null,Ep(b,a.M.T()+"-cell-hover",c),c?z.Xi(a.h,"activedescendant",b.id):b.id==z.Zi(a.h,"activedescendant")&&a.h.removeAttribute("aria-activedescendant"))}}};
var KC=function(a){var b=a.Ua();if(b)if(a.yc&&a.yc.width){if(b=Math.ceil(b.length/a.yc.width),!z.qa(a.yc.height)||a.yc.height<b)a.yc.height=b}else b=Math.ceil(Math.sqrt(b.length)),a.yc=new z.Ie(b,b);else a.yc=new z.Ie(0,0)};var IC=function(){$q.call(this,null);this.yk|=2};z.NC=function(){};z.OC=function(){this.Zv="toolbar"};var PC=function(){};z.QC=function(a,b,c){z.gr.call(this,a,b||PC.aa(),c)};var RC=function(){};var SC=function(a,b){return b.B("DIV","goog-color-menu-button-indicator",a)};
var TC=function(a,b){if(a&&a.firstChild){var c;if(c=b)c=!!(Fo.test("#"==b.charAt(0)?b:"#"+b)||Co(b).length||Bp&&Bp[b.toLowerCase()]);c=c?Ap(b).Hs:null;a.firstChild.style.borderBottomColor=c||(z.A?"":"transparent")}};var UC=function(a,b,c){this.pr=a||[];z.HC.call(this,null,b||z.zC.aa(),c);this.pr=this.pr;this.Dt=this.dt=null;this.ka(VC(this))};
var VC=function(a){return z.ob(a.pr,function(a,c){var d=this.L().B("DIV",{"class":this.M.T()+"-colorswatch",style:"background-color:"+a}),f;this.dt&&this.dt[c]?f=this.dt[c]:"#"==a.charAt(0)?(f=Eo(a),f="RGB ("+[(0,window.parseInt)(f.substr(1,2),16),(0,window.parseInt)(f.substr(3,2),16),(0,window.parseInt)(f.substr(5,2),16)].join(", ")+")"):f=a;d.title=f;return d},a)};var WC=function(a){if(a)try{return Ap(a).Hs}catch(b){}return null};var XC=function(a,b,c,d){z.sy.call(this,a,b,c||RC.aa(),d)};
var YC=function(a){var b=new z.jy(a);z.Eb(ZC,function(c){c=new UC(c,null,a);z.JC(c,8);b.K(c,!0)});return b};var $C=function(){};var aD=function(){};var bD=function(a,b,c,d){XC.call(this,a,b,c||aD.aa(),d)};var cD=function(a,b,c,d){z.sy.call(this,a,b,c||$C.aa(),d)};var dD=function(a,b,c,d,f){z.sy.call(this,a,b,c,d,f||new hy("listbox"));this.Tw=this.Ua();this.Oy=null;this.zu("listbox")};var eD=function(a,b){a.Tw=b;fD(a)};
var gD=function(a,b){a.oa=new FC;b&&z.ch(b,function(a){hD(a);this.oa.Ga(a)},a);iD(a)};var iD=function(a){a.oa&&a.o().g(a.oa,"select",a.Cj)};var fD=function(a){var b=a.nf();a.ka(b?b.Og():a.Tw);var c=a.M.R(a.m());c&&a.L().isElement(c)&&(null==a.Oy&&(a.Oy=Fp(c)),b=(b=b?b.m():null)?Fp(b):a.Oy,z.Xi(c,"label",b),jD(a))};
var jD=function(a){var b=a.M;if(b&&(b=b.R(a.m()))){var c=a.h;b.id||(b.id=z.Xg(z.Wg.aa()));z.Wi(b,"option");z.Xi(c,"activedescendant",b.id);a.oa&&(c=a.oa.lb(),z.Xi(b,"setsize",kD(c)),a=a.oa.vj(),z.Xi(b,"posinset",0<=a?kD(z.zb(c,0,a+1)):0))}};var kD=function(a){return kq(a,function(a){return a instanceof z.ey})};var hD=function(a){a.zu(a instanceof z.ey?"option":"separator")};var lD=function(a,b,c,d){dD.call(this,a,b,c||$C.aa(),d)};
var mD=function(a){var b=a.indexOf(",");a:for(a=(-1!=b?a.substring(0,b):a).toLowerCase(),b=0;2>b;b++){var c="\"'".charAt(b);if(a.charAt(0)==c&&a.charAt(a.length-1)==c){a=a.substring(1,a.length-1);break a}}return a};var nD=function(a,b){z.w(b,function(b){var d=b.value,f=mD(d);b=new z.$B(b.caption,d,a.L());Wn(b,f);a.Ga(b);b.R().style.fontFamily=d})};
var oD=function(a){z.w(pD,function(b){var c=b.value;b=new z.$B(b.caption,c,a.L());a.Ga(b);b=b.R();b.style.fontSize=(qD[c]||10)+"px";b.firstChild.style.height="1.1em"})};var rD=function(a){z.w(sD,function(b){var c=b.caption;b=b.Ca;var d=a.L(),c=new z.$B(d.B("DIV",null,c),b,d);Wn(c,b);a.Ga(c)})};z.tD=function(a,b,c,d,f,g){c=new z.QC(uD(c,d,g),f,g);Wn(c,a);c.xd(b);return c};z.vD=function(a,b,c,d,f,g){a=z.tD(a,b,c,d,f,g);a.Ub(16,!0);return a};
var wD=function(a,b,c,d,f,g){f=new lD(null,null,f,g);d&&z.w(d.split(/\s+/),f.Ih,f);f.Ih("goog-toolbar-select");eD(f,c);Wn(f,a);f.xd(b);return f};var xD=function(a,b,c,d,f,g){c=new bD(uD(c,d,g),null,f,g);Wn(c,a);c.xd(b);return c};var uD=function(a,b,c){a&&""!=a||!z.y||z.D("1.9a")||(a=" ");return(c||z.H()).B("DIV",b?{"class":b}:null,a)};var yD=function(a){var b="en-us".replace(/_/,"-").toLowerCase(),c=[];b in zD&&(c=zD[b]);c.length&&nD(a,c);nD(a,AD)};
var BD=function(a,b,c,d,f,g){var h=z.tD(a,b,c,d,f,g);h.Li=function(a){h.Wa(a)};return h};var CD=function(a,b){var c=b;try{if(z.A)var d="000000"+c.toString(16),f=d.substr(d.length-6,6),c="#"+f.substring(4,6)+f.substring(2,4)+f.substring(0,2);c!=a.W()&&a.Ea(c)}catch(g){}};z.DD=function(a){z.Xy.call(this);this.ea=new z.zd(this);this.eG=z.M("div",{style:"display:none"});this.h=this.uc=null;this.J={};z.Nb(this.J,this.defaults,a||{})};
var ED=function(a){if(a.iq){var b=(0,window.$)(a.iq);b.stop().text("草稿已经保存").fadeTo(600,.5).delay(3E3).fadeOut(600,function(){b.text("")})}};var FD=function(a){a.dispatchEvent("willEnterFullScreen")&&(a.RE||(a.WP=window.history.length),a.RE=!0,GD(a,"writing"),a.zK=z.wf(z.H((z.r||window).document)),z.Wp(a.eG,a.J.Ek),a.uc.appendChild(a.J.Ek),z.V.add(window.document.body,a.J.Yn),a.Cb=z.L(a.J.EV,a.h),a.Cb.appendChild(a.iq),HD(a),(0,z.bb)(z.pf(a.F.Ha))||a.F.Wf(),a.dispatchEvent("enterFullScreen"))};
var ID=function(a){!z.Pj&&a.RE&&a.WP!==window.history.length?window.history.back():GD(a,"");a.Cb.removeChild(a.iq);a.qJ(!1);a.h.onscroll=null;a.ea.qa(window.document,"keydown",a.fp);z.Wp(a.J.Ek,a.eG);z.V.remove(window.document.body,a.J.Yn);window.scrollTo(a.zK.x,a.zK.y);a.dispatchEvent("exitFullScreen")};var GD=function(a,b){a.ea.qa(window,"hashchange",a.QH);window.location.hash=b||"";(0,window.setTimeout)((0,z.q)(function(){this.ea.g(window,"hashchange",this.QH)},a))};
var HD=function(a){var b=a.h;b.scrollTop=0;var c=a.Cb.getBoundingClientRect().top;b.onscroll=z.Vo((0,z.q)(a.qJ,a),function(){return b.scrollTop>c});a.ea.g(window.document,"keydown",a.fp)};z.JD=function(a,b){this.Qo=this.cf=1;this.om=b||4;this.items=a||[];this.GD=[];this.Qo=Math.ceil(this.items.length/this.om)};var KD=function(a,b,c){b=(b-1)*a.om;return a.items.slice(b,b+c)};z.LD=function(a){return KD(a,a.cf,a.om)};
var MD=function(a,b){var c=KD(a,a.cf+1,1)[0];if(a.qo()&&c){var d=a.remove(b);a.remove(c);a.items.splice(d,0,c);return c}};var ND=function(a){z.WA.apply(this,arguments)};
var OD=function(a){a=(0,window.$)(a.m());var b=(0,window.$)(".js-list",a);(0,window.$)(".js-hidden-list",a);var c=(0,window.$)(".pager",a),d=window.$.makeArray((0,window.$)("\x3cdiv\x3e").html((0,window.$)(".js-hidden-list").html()).children().add(b.children())),f=new z.JD(d,4);f.Jc(function(a){c.find(".next").toggleClass("disabled",!a.qo);c.find(".prev").toggleClass("disabled",!a.Es)});(0,window.$)(".pager",a).on("click",".next:not(.disabled)",function(){f.next();b.html(z.LD(f))}).on("click",".prev:not(.disabled)",
function(){f.prev();b.html(z.LD(f))});a.on("click","[data-follow]",function(a){var b=(0,window.$)(a.target).closest(".item"),c=MD(f,b[0]);c&&b.fadeOut(function(){b.replaceWith(c)})})};var PD=function(a){(0,window.$)(".js-validate",a.h).click(function(){(new vr).G(!0)})};
var QD=function(a){var b=(0,window.$)(".js-headline-input",a.h),c=(0,window.$)(".js-instruction",a.h);b.on("focus",function(){return c.slideDown(200)});b.on("blur",function(){return c.slideUp(200)});b.is(":focus")&&b.trigger("focus");(0,window.$)(".js-form",a.h).on("submit",function(c){c.preventDefault();var f=b.val();f&&z.pk((0,window.$)(".js-submit-button",a.h),function(){return window.$.post("/people/edit",{data:JSON.stringify({headline:f})},function(b){if(b&&!b.r)z.S.bG=f,(0,window.$)(".avatar-reminder .js-headline").text(f),
RD(a);else{var c=b&&b.msg;z.W.message(c?Array.isArray(c)?c[0][1]:b.msg:"更新失败")}})})()})};
var SD=function(a){var b=(0,window.$)(".js-choose-image",a.h)[0],c=(0,window.$)(".segment-avatar-wrapper .avatar",a.h),d=new z.SB(z.TB),f=void 0;d.w(b);d.g("beforepost",function(){f=(0,window.$)('\x3cspan class\x3d"spinner"\x3e\x3c/span\x3e').appendTo(c.parent())});d.g("success",function(){window.$.post("/node/ProfileHeaderV2",{method:"save",params:{data:{avatar_path:d.getData().url}}},function(b){f.remove();b&&b.r?z.W.message("更新失败"):(z.S.nD=d.ce("s"),(0,window.$)(".zu-top .avatar").attr({src:d.ce("s"),
srcset:d.ce("xs")+" 2x"}),(0,window.$)(".headline-reminder .js-avatar-wrapper .avatar").attr({src:d.ce("xs"),srcset:d.ce("l")+" 2x"}),RD(a))})})};var RD=function(a){var b=(0,window.$)(".profile-reminder-template",a.h).html(),b=(0,window.$)(b),c=z.S.bG;c&&b.find(".js-headline").text(c);b.find(".js-avatar-wrapper .avatar").attr({src:z.S.ce("xs"),srcset:z.S.ce("l")+" 2x"});(0,window.$)(".js-inner",a.h).replaceWith(b)};var TD=function(a){z.WA.apply(this,arguments)};
var UD=function(a){for(var b=a.m(),c=[{value:"close",label:"不感兴趣",rf:a.qs.bind(a)},{value:"agreement",label:"知乎广告介绍",rf:a.YS}],d=new z.jy,c=z.ha(c),f=c.next();!f.done;f=c.next())f=f.value,f=new z.ey(f.label,f),d.Ga(f);b=(0,window.$)(".AdFeed-menuBtn",b)[0];c=new z.sy("ad",d);c.ak.af=7;c.Yb=z.Cl;c.w(b);z.Bc(c,a);a.o().g(d,"action",function(a){a.target.W().rf()})};z.VD=function(a,b,c){z.ey.call(this,a,b,c);this.Hp(!0)};var WD=function(a,b){this.Sh=a instanceof z.He?a:new z.He(a,b)};
var XD=function(a,b){WD.call(this,a,b)};z.YD=function(a,b){z.jy.call(this,a,b);this.gn=!0;this.Pe(!0);this.G(!1,!0);this.Ef=new z.Sd};z.ZD=function(a,b,c,d,f){var g=a.U();a.HG()&&a.BV?a.hide():(a.Pf=f||null,a.dispatchEvent("beforeshow")&&(c="undefined"!=typeof c?c:4,g||(a.m().style.visibility="hidden"),z.P(a.m(),!0),b.ha(a.m(),c,d),g||(a.m().style.visibility="visible"),a.ub(-1),a.G(!0)))};
var $D=function(a,b){for(var c=a.Ef.md(),d=0;d<c.length;d++){var f=a.Ef.get(c[d]);if(f.h==b.currentTarget){a.xJ(f,b.clientX,b.clientY);b.preventDefault();b.stopPropagation();break}}};var aE=function(a,b){z.Q.call(this);this.Xp=null;this.kI=b;this.content=a;this.type=b.type;this.Gi=b.Gi;this.title=this.type===bE?"一句话介绍":"在 "+b.Hi+" 话题下的话题经验"};var cE=function(a){a.Te.focus();z.ts(a.Te.get()[0],a.Te.val().length)};var dE=function(a,b){a.Xp=b;(0,window.$)(a.h).attr("class","zm-bio-item "+a.Xp)};
var eE=function(a,b){z.F.call(this);this.lQ=b;this.pE=a;this.items=[];this.YG=!1;this.GU=z.gm.selected_bio};var fE=function(){gE||(gE=new eE(z.im,!1));return gE};var hE=function(a){var b=z.R.Za;a.YG=!0;a.QI=b};var iE=function(a){window.$.get("/question/"+a.QI+"/bios").then(function(b){a.rR=!0;a.pE=b.msg;jE(a)})};
var jE=function(a){if(!a.rR&&a.YG)iE(a);else{if(!a.ta){a.ta=new z.U;a.ta.Na("编辑话题经验");z.Fj(a.ta,null);a.ta.Kp(!0);var b=a.ta.R();z.V.add(a.ta.m(),"bio-editor-modal");b.innerHTML='\x3cdiv class\x3d"bio-editor-modal-title"\x3e可以填写你从事的职业、取得的资格或过往的经历，让你在这个问题下的回答更具说服力。\x3c/div\x3e';a.render(b)}a.ta.G(!0)}};var kE=function(a,b,c){b=new aE(b,c);b.render(a.oQ);c.Gi===a.GU&&b.Mc(!0);b.Ob(a);a.items.push(b)};
var lE=function(a){var b=a.getSelection();b&&window.$.post("/question/"+a.QI+"/bio",{bio:b.getToken()}).then(function(){a.ia({action:"edit_topic_experience_success",attributes:{topic_experience_topic_id:b.getToken(),topic_experience_topic_content:b.Ua()}})})};z.mE=function(a,b,c){z.Q.call(this);this.zb=a;this.entryType=b||"answer";this.Wh=null;this.J=window.$.extend({},this.defaults,c||{})};
var nE=function(a,b,c){var d=+a.kC.text(),f=0;(0,window.isNaN)(d)||(c===oE.Jf?f=1:b===oE.Jf&&(f=-1),a.kC.text(d+f))};var pE=function(a){var b=a.N,c=a.J,d=b===oE.Jf,b=b===oE.Si,f=d?"取消赞同":"赞同",g=b?"取消反对":"反对，不会显示你的姓名";a.xv.toggleClass(c.Zt,d).find(".label").text(f).end().attr("aria-pressed",d).attr("title",f);a.mv.toggleClass(c.Zt,b).find(".label").text(g).end().attr("aria-pressed",b).attr("title",g)};z.qE=function(a,b){z.Q.call(this);this.zb=a;this.entryType=b;this.sm=null;this.Dg="post"===b?rE:sE};
z.tE=function(a){a.sm&&"pending"===a.sm.state()||(a.sm=a.Dg.wF(a.zb).done((0,z.q)(a.wp,a)))};var uE=function(a,b,c){z.sv.call(this,a,b,c)};var vE=function(a,b){z.Q.call(this);this.wb=a;this.$r=ov(this.wb);this.isContentEditable=this.wb.isContentEditable();this.xV=30;this.Rd=new z.ud(1E3*this.xV);this.pa=z.R?z.R.pa:0;this.BG=b||!1};var wE=function(a){xE(a,"保存中…");a.ex();a.pQ()};z.yE=function(a){a.Rd.stop()};var zE=function(a){a.BB&&((0,window.clearInterval)(a.BB),a.BB=null)};
var AE=function(a,b){var c=z.ui(b||(0,z.G)());/^\d/.test(c)&&(c=" "+c);xE(a,"已存于"+c)};var xE=function(a,b,c){var d=(0,window.$)(a.nG);c?d.addClass("warning"):d.removeClass("warning");z.P(a.Os,!0);z.nf(a.nG,b)};z.BE=function(a){CE(a);var b={qid:a.pa,timestamp:(0,z.G)()};(0,window.setTimeout)(function(){window.$.post("/draft/delete",b)},500)};var CE=function(a){a.WG&&(a.WG.abort(),a.Ir());zE(a);z.P(a.Os,!1);a.dispatchEvent(DE)};
var EE=function(a){return(0,window.$)('\x3cdiv class\x3d"copyright-notification"\x3e\x3cdiv class\x3d"user-image-container"\x3e\x3cimg class\x3d"user-image" src\x3d"'+(a||"")+'"\x3e\x3c/div\x3e\x3cdiv class\x3d"tooltip right noty-tooltip"\x3e\x3cdiv class\x3d"tooltip-arrow arrow"\x3e \x3c/div\x3e\x3cdiv class\x3d"tooltip-inner inner"\x3e 如需转载，请通过私信或评论联系我 \x3c/div\x3e\x3c/div\x3e\x3c/div\x3e')};
var FE=function(a,b){var c=-1,d=-1,f=GE();a.on("mousedown",function(a){3===a.which&&(c=a.pageX,d=a.pageY)});a.on("copy",function(g){var h=z.qu(),k=Math.floor(22*Math.random()+44);if(h&&h.Kd()&&(0,z.bb)(h.Kd()).length>k){g.preventDefault();(0,window.$)(".user-image",f).attr("src",b);g=h.Wx();var h=h.Mx(),k=z.po(window).y,m=z.Pe(window).height,n=fq(k+45+15,Math.min(g.y,h.y)+k,k+m-15),t=fq(k+45+15,Math.max(g.y,h.y)+k,k+m-15);z.pm.qb?(m=(z.Pe(window).width-265)/2,g=z.Il?h.y>g.y?h.y+k+10:g.y+k-10:-1!==
d?d+3:n+(t-n)/2-15):(m=-1!==c?c+3:a.offset().left+a.width()/2-15,g=-1!==d?d+3:n+(t-n)/2-15);f.css({position:"absolute",left:m,top:g}).finish().fadeIn(300).delay(2E3).fadeOut(300)}d=c=-1})};
var HE=function(a,b,c){function d(a,b,c){a=["作者："+b,"链接："+a,"来源：知乎","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"];b=["",""];return a=c?a.concat(b):b.concat(a)}function f(a,b,c,f){b=d(b,c,f).join("\x3cbr /\x3e");return"\x3cdiv\x3e"+(f?b+a:a+b)+"\x3c/div\x3e"}function g(a,b,c,f){b=d(b,c,f).join("\n");return f?b+a:a+b}function h(){var a="";window.getSelection?a=window.getSelection().toString():window.document.selection&&"Control"!==window.document.selection.type&&(a=window.document.selection.createRange().text);
return a}function k(a){var d=z.qu(),k=d&&(0,z.bb)(d.Kd());if(k&&!(128>k.length)){k=512<=k.length;if("object"===typeof a.originalEvent.clipboardData&&(a.originalEvent.clipboardData.setData("text/html",f(d.$f(),b,c,k)),a.originalEvent.clipboardData.setData("text/plain",g(h(),b,c,k)),0<a.originalEvent.clipboardData.getData("text/plain").length)){a.preventDefault();return}if(window.getSelection){a=d.$f();var C=(0,window.$)(f(a,b,c,k)).css({position:"fixed",left:"-9999px"}).appendTo("body");window.getSelection().selectAllChildren(C.get(0));
(0,window.setTimeout)(function(){d.select();C.remove()},200)}}}a&&b&&c&&(z.Ka(b,"http")||(b=window.location.protocol+"//"+window.location.host+b),a.on("copy",k))};
var IE=function(a,b){z.Q.call(this);this.DU=(0,window.$)(a).children();this.contents=[];this.Hg=0;this.Nr=[];this.className=b||"";this.kD=!1;this.delay=0;this.Xq=null;z.w(this.DU,function(a){a=(0,window.$)(a).addClass("carousel-inner-content");this.contents.push(a);this.Nr.push((0,window.$)("\x3cdiv\x3e\x3c/div\x3e").addClass("carousel-dot"))},this)};
var JE=function(a,b){if(0>b||b>=a.contents.length)return!1;a.Xq&&((0,window.clearTimeout)(a.Xq),a.Xq=null);a.Nr[a.Hg].removeClass("carousel-dot-selected");a.contents[a.Hg].hide();a.Nr[b].addClass("carousel-dot-selected");a.contents[b].show();a.Hg=b;KE(a);return!0};var KE=function(a){var b=a.Hg;a.kD&&(a.Xq=(0,window.setTimeout)(function(){b===a.Hg&&(b===a.contents.length-1?JE(a,0):a.next())},a.delay))};
var LE=function(){function a(){function a(){return new window.Promise(function(a){k.onAnimationEnd(function(){a()},400)})}function b(a){return z.pb(a,function(a,b){return a.then(b)},window.Promise.resolve())}if(!d){d=!0;var c=(0,window.$)("#copyright-demo-region1"),f=(0,window.$)("#copyright-demo-region2"),g=(0,window.$)("#copyright-demo-region3"),h=(0,window.$)("#copyright-demo-region4"),k=(0,window.$)("#copyright-demo-indicator");(0,window.$)(".frame2-region").removeClass("copyright-demo-region-selected");
b([function(){k.show().addClass("indicator-move1");c.addClass("copyright-demo-region1-select-animation");return a()},function(){c.removeClass("copyright-demo-region1-select-animation").addClass("copyright-demo-region-selected");k.removeClass("indicator-move1").addClass("indicator-move2");return a()},function(){f.addClass("copyright-demo-region-selected");k.removeClass("indicator-move2").addClass("indicator-move3");return a()},function(){g.addClass("copyright-demo-region-selected");k.removeClass("indicator-move3").addClass("indicator-move4");
return a()}]).then(function(){h.addClass("copyright-demo-region-selected");k.removeClass("indicator-move4");d=!1})}}function b(){var a=(0,window.$)(".copyright-demo-pointer"),b=(0,window.$)(".copyright-demo-noty");a.css("opacity","0");b.css("opacity","0");a.addClass("copyright-demo-pointer-show-animation");b.addClass("copyright-demo-noty-show-animation");(0,window.setTimeout)(function(){a.removeClass("copyright-demo-pointer-show-animation");b.removeClass("copyright-demo-noty-show-animation");a.css("opacity",
"1");b.css("opacity","1")},1100)}var c=EE(z.S[2]).addClass("copyright-demo-noty"),d=!1,f=(0,window.$)((0,window.$)("#copyright-demo-template").html());(0,window.$)("#copyright-demo-frame3",f).append(c);var g=new IE(f,"copyright-demo");g.g("rightShow",function(c){1===c.offset?a():2===c.offset&&b()});var c=(0,window.$)('\x3cdiv id\x3d"copyright-demo-helper" style\x3d"display: none; position: absolute;"\x3e\x3cp class\x3d"copyright-demo-helper-intro"\x3e 勾选后，我们将限制其他用户的复制操作，并给予提醒 \x3c/p\x3e\x3cp class\x3d"copyright-demo-helper-btn"\x3e 查看演示 \x3c/p\x3e\x3c/div\x3e'),
h=new z.ex({I:"data-copyright-demo"});h.Qp=250;h.so=750;h.oh(c[0]);h.g("trigger",function(a){h.setPosition(new z.Nw(a.anchor,4))});var k=new z.U;g.render(k.R());k.Na("禁止转载演示");z.Nj(k,462);(0,window.$)(".copyright-demo-helper-btn").click(function(){h.G(!1);JE(g,0);g.kD=!0;g.delay=3E3;KE(g);k.G(!0)})};z.ME=function(a,b){z.sv.call(this,!1);this.mb=!!a;this.wr=!0;this.nK=b;this.Wb="\x26nbsp";this.cw=z.gm||z.S[4];this.Xu=this.dx=this.fF=this.enabled=!0;if(z.S.re||!z.S.kb())this.wz='\x3cspan style\x3d"font-style: normal;color: #999;"\x3e写回答…\x3c/span\x3e'};
var NE=function(a,b){b?OE(a,b,"添加话题经验，提升回答可信度"):OE(a,"","填写话题经验，提升回答可信度")};var PE=function(a,b){b?OE(a,b,"修改话题经验"):OE(a,"","填写话题经验，提升回答可信度")};var OE=function(a,b,c){b=void 0===b?"":b;c=void 0===c?"修改":c;a.Us&&(b&&(b=z.Oa("，"+qq(b.trim()))),a.tD.innerHTML=b+'\x3ca name\x3d"edit_bio" class\x3d"zu-edit-button" href\x3d"#"\x3e\x3ci class\x3d"zu-edit-button-icon"\x3e\x3c/i\x3e'+c+"\x3c/a\x3e")};
var QE=function(a,b,c){b=(0,window.$)(b);(0,window.$)(a.tc).hide();c=(0,window.$)(c);(0,window.$)(a.kj).append(b).after(c);(z.Oj||a.Id)&&b.addClass("activate-mask-tip-answer-simple");a=z.Or(z.p,!0,"#draft");b.on("click",a);c.on("click",a)};
var RE=function(a){a.Kk?a.Kk.show():(a.Kk=(0,window.$)('\x3cdiv class\x3d"question-tip-box-bottom"\x3e确定想要回答你自己提出的问题吗？\x3cbr\x3e如果需要对问题做出更多的解释和说明，请编辑问题描述。 如果需要对其他回答做出回应，请在相应回答下通过评论发布。\x3cbr\x3e\x3cdiv class\x3d"zg-clear"\x3e\x3ca href\x3d"javascript:" class\x3d"zg-right zg-btn zg-btn-blue" name\x3d"confirm"\x3e确定\x3c/a\x3e\x3ca href\x3d"javascript:" class\x3d"zg-right zg-link-gray " name\x3d"cancel"\x3e取消\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e'),a.Kk.on("click",'[name\x3d"cancel"]',function(){a.Kk.hide()}).on("click",
'[name\x3d"confirm"]',function(){a.Kk.hide();(0,window.$)(a.cc).hide();a.Wa(!0);a.qg()}),(0,window.$)(a.cc).after(a.Kk))};var SE=function(a){var b=(0,window.$)("input[name\x3danno-checkbox]",a.tc)[0],c=(0,window.$)("label",a.tc)[0];a.Qq=b;z.R.mb&&(a.Qq.checked=!0);z.Ip(c,!0)};var TE=function(a){var b=fE();a.dw||(hE(b),a.o().g(b,"change",a.Qz).g(b,"trackRequested",function(a){a.label="add_answer_box_edit_topic_experience";z.wi(a)}));a.dw=!0;jE(b)};var UE=function(a){this.X=(0,window.$)(a);this.Rb()};
var VE=function(){this.uw=[]};var WE=function(a,b,c){var d=b.L().B("SPAN");d.className="goog-submenu-arrow";XE(b,d);a.R(c).appendChild(d)};var XE=function(a,b){a.rd()?(z.bj(b,"goog-submenu-arrow-rtl"),z.nf(b,a.Oq?"◄":"►")):(z.dj(b,"goog-submenu-arrow-rtl"),z.nf(b,a.Oq?"►":"◄"))};var YE=function(a,b,c,d){z.ey.call(this,a,b,c,d||VE.aa())};var ZE=function(a){a.Yd&&z.xd(a.Yd);a.cB&&z.xd(a.cB)};var $E=function(a){z.ch(a.getParent(),function(a){a!=this&&"function"==typeof a.Ig&&(a.Ig(),ZE(a))},a)};
var aF=function(a,b){!b&&a.Xa()&&a.Xa().ub(-1);a.dispatchEvent(Hp(64,b));var c=a.Xa();b!=a.Cz&&Ep(a.m(),"goog-submenu-open",b);if(b!=c.U()&&(b&&(c.ya||c.render(),c.ub(-1)),c.G(b),b)){var c=new z.ly(a.m(),a.Oq?6:4,a.IQ),d=a.Xa(),f=d.m();d.U()||(f.style.visibility="hidden",z.P(f,!0));c.ha(f,a.Oq?4:6);d.U()||(z.P(f,!1),f.style.visibility="visible")}a.Cz=b};var bF=function(a,b,c){var d=a.o();(c?d.g:d.qa).call(d,b,"enter",a.WR)};var cF=function(a,b,c,d){YE.call(this,a,b,c,d)};
z.dF=function(a){z.Q.call(this);this.Hk="votebar-mobile";this.Xw="votebar-mobile-dialog";this.Zu=a;this.tK="votebar-"+a.entryType;this.sK=z.M("span","_votebar-holder")};var eF=function(a){var b=a.Zu;z.Wp(a.sK,b.m());z.cj(b.m(),[a.Hk,a.tK]);a.o().g(b,"action",function(){this.Ia&&(0,window.setTimeout)((0,z.q)(function(){this.Ia.G(!1)},this),150)})};
z.fF=function(a){z.Q.call(this);z.Nb(this.options={},gF,a||{});this.pa=this.options.pa;this.sa=this.options.sa;this.Br=this.options.Br;this.Bw=null;this.options.Zl||(this.Jb=!0)};var hF=function(a,b){return z.Or(a,b,function(){return this.$n()})};
var iF=function(a){var b=z.L("zm-item-answer",a.h)||a.h;a.sa=b.getAttribute("data-aid");a.Le="1"===b.getAttribute("data-isowner");a.Za=b.getAttribute("data-atoken");a.ji="1"===b.getAttribute("data-deleted");a.Iw=+b.getAttribute("data-created");a.SP=+b.getAttribute("data-helpful");a.GQ="1"===b.getAttribute("data-good");a.wr="1"===b.getAttribute("data-copyable");a.Qj="1"===b.getAttribute("data-collapsed");a.mb=null};
var jF=function(a){var b=new z.jB;a.K(b);b.w(a.h);a.options.Zl||a.g("expandRequest",(0,z.q)(a.expand,a));a.g("expand",function(a){a.target===a.currentTarget&&b.expand()});a.g("collapse",function(a){a.target===a.currentTarget&&b.collapse()});b.bz&&a.o().Aa(b,"expand",a.Az);z.On(a.m(),a.$j,a)};var kF=function(a){if(z.tm||a.options.Zl||a.options.xE)return!1;a=(0,window.$)(".js-collapse-body",a.h)[0];return!!a&&1<a.offsetHeight/z.Ym.size.height};var lF=function(a,b){a.Mb=b};
var mF=function(a){var b=z.L("zm-item-vote-info",a.h);if(b){a.Ik=new z.qE(a.sa);a.K(a.Ik);a.Ik.w(b);b=(0,window.$)(".zm-item-vote-count",a.h);b[0]||(b=(0,window.$)(".zm-item-vote-count",a.Mb));var c=[b[0],(0,window.$)(".zm-votebar .count",a.h)[0]];if(c.length){var d=a.Ik;a.Ik.on("change",function(){z.w(c,function(a){tp(a,d.hb())})})}}};
var nF=function(a){var b=z.L("more-actions",a.Mb);if(b){var c={share:{label:"分享",action:a.AP},fav:{label:"收藏",action:a.zj},report:{label:"举报",action:a.OF},nohelp:{label:a.SP?"没有帮助":"撤销没有帮助",action:a.HF}},d=new z.jy,f=function(a){z.ah(d)&&d.Ga(new z.iy);var b=new z.ey(c[a].label);b.Ea(a);d.Ga(b)};f("share");f("fav");a.Le||(f("nohelp"),z.S.kb()&&f("report"));f=new z.sy("operation",d);f.tk=!0;z.uy(f);ty(f);f.lm=function(){};f.Yb=z.Cl;f.w(b);z.V.add(d.m(),"zh-answer-more-actions");a.o().g(d,"action",
function(a){var b=a.target.W();(b=c[b])&&b.action&&b.action.call(this,a)})}};
var oF=function(a){if(!a.ue&&a.Le&&z.R&&a.sa){a.ue=new uE(!1,"/answer/content","content");z.Bc(a,a.ue);a.ue.Xu=!0;a.ue.dx=!0;a.ue.rF=z.ME.prototype.rF;var b=z.L("zm-item-rich-text",a.h);z.nv(a.ue,["id\x3d"+a.pa]);a.ue.w(b);a.o().g(a.ue,"shouldUpdateContent",function(a){if(z.na(a.data))return!1});a.o().g(a.h,"click",function(a){"suggest_edit"===a.target.name&&(this.ue.qg(),(0,window.$)(".zh-question-censor-tip",this.h).hide());return!0})}};
var pF=function(a){if(a.Mq)a.Mq.G(!0);else{var b=qF(a);b&&(z.ZD(b,new z.ly(a.NL,1,!0),0,new z.qg(5,0,5,0)),rF(a,b),sF(a,b),a.Mq=b)}};
var qF=function(a){var b=(0,window.$)("a[name\x3dadmin]",a.ni)[0];if(b){a.NL=b;tF=0;var c=new z.YD;a.K(c);c.attach(b,5);var d=a.Qj?new z.ey("取消折叠"):new cF("折叠");d.Ea("collapse");var f=function(a,b){var c=new z.ey(b+1+" "+a.label);c.Ea(a.value);d.Ga(c)};a.Qj||uF("answer","collapse").then(function(a){z.w(a,f);z.V.add(d.Xa().m(),"manage-menu")});b=new z.ey("删除");b.Ea("delete");c.Ga(d);c.Ga(b);c.render(a.h);z.V.add(c.m(),"manage-menu");return c}};
var rF=function(a,b){a.o().g(b,"action",function(a){var b=a.target;a=b.W();var b=b.m(),f=new z.uh;"collapse"===a?(f.add("answer_id",this.sa).add("action","collapse2").add("collapse",this.Qj?"cancel":"done"),b.setAttribute("data-op",this.Qj?"uncollapse-answer":"collapse-answer"),b.setAttribute("data-action","/manage?"+f.toString()),vF(this,b)):"delete"===a?(f.add("answer_id",this.sa).add("action","remove_answer2"),b.setAttribute("data-op","remove-answer"),b.setAttribute("data-action","/manage?"+f.toString()),
vF(this,b)):z.qa(a)&&(b=new z.uh,b.add("answer_id",this.sa).add("action","collapse2").add("collapse",this.Qj?"cancel":"done").add("reason",a),Mz("/manage",b.toString(),(0,z.q)(this.bI,this)))})};var vF=function(a,b){(new z.Lz).open(b,{id:a.sa,type:"answer"},(0,z.q)(a.bI,a))};
var wF=function(a){function b(){c();var b=a.Mq.di(0);b.Xa&&b.Xa()&&(b.Du(),b.Xa().ub(0))}function c(){pF(a);a.Mq.ub(0)}var d=new UE(a.h),d=z.$m.AK(d.getItem()||a.h);z.ol(z.ol(z.ol(z.ol(z.ol(z.ol(d.register("v",function(){this.pb&&this.pb.Qu()},a),{group:"操作",name:"赞同"}).register("d",function(){this.pb&&this.pb.Pu()},a),{group:"操作",name:"反对"}).register("s c",a.zj,a),{group:"操作",name:"收藏"}).register("t",a.Bs,a),{group:"操作",name:"感谢"}).register("c",a.sg,a),{group:"操作",name:"打开评论"}).register("shift+c",
a.ms,a),{group:"操作",name:"定位到评论框"});var f=z.Vc?"⌘":"ctrl";z.pm.zG&&(0,window.$)("a[name\x3dadmin]",a.ni)[0]&&z.ol(z.ol(d.register("meta+.",c),{group:"管理",name:"展开菜单",key:f+"+."}).register("meta+k",b),{group:"管理",name:"展开折叠子菜单 (Kill)",key:f+"+k"})};var sF=function(a,b){a.o().g(b,"show",function(){z.V.add(this.Mb,"zm-item-meta-has-menu")}).g(b,"hide",function(a){a.currentTarget===a.target&&z.V.remove(this.Mb,"zm-item-meta-has-menu")})};
var xF=function(a){var b=(0,window.$)('[name\x3d"comment_opt"]',a.Mb);if(b.length){var c=b.data(),d=new z.jy,f=new z.VD("禁止转载");f.Mc(!c.copyable);d.Ga(f);d.Ga(new z.iy);yF(a,d);d.Ga(new z.iy);d.Ga(new z.ey("删除"));a.o().g(d,"action",a.GO);sF(a,d);z.V.add(d.m(),"zg-gray-normal");(0,window.$)(d.m()).addClass("setting-menu");a=new z.sy("comment",d);a.tk=!0;z.uy(a);ty(a);a.Yb=z.Cl;a.w(b[0])}};
var zF=function(a){if(!a.OD||!a.OD.bc()){var b=new z.Z(!0);a.o().Aa(b,"success",function(a){if((a=z.Zn(a.target))&&!a.r){var b=a.msg;z.w(this.Cw,function(a){a.W()===b&&a.Mc(!0)});this.Bw=b}else z.W.message(a.msg)});b.ajax("/answer/comment_permission?answer_id\x3d"+a.sa,null,"GET");a.OD=b}};var yF=function(a,b){a.Cw=[];z.Eb(AF,function(a,d){var f=new z.VD(a);f.Ea(d);f.Mc(d===this.Bw);this.Cw.push(f);b.Ga(f)},a)};
z.BF=function(a){var b=new z.Z(!0);a.o().Aa(b,"success",function(){z.P(this.h,!this.ji);this.ji?this.Cv="set_delete":(oF(this),this.Cv="cancel_delete");this.dispatchEvent("change");(0,window.$)(this.h).parent(".zm-item").hide()});b.ajax("/answer/"+(a.ji?"remove":"unremove"),"aid\x3d"+a.sa)};var CF=function(a){z.WA.call(this,a)};var DF=function(){z.WA.call(this,"question")};var EF=function(a){z.On(a.h,function(){(0,z.oB)("question",this.gf,"touch")},a)};z.FF=function(){z.WA.call(this,"answer")};
var GF=function(a){return z.L("zm-item-answer",a)||z.L("entry-body",a)};var HF=function(a,b){(0,window.$)(".feed-question-detail-item",a.h).toggleClass("question-detail-expanded",b)};var IF=function(){z.WA.call(this,"column")};z.JF=function(){z.WA.call(this,"post")};var KF=function(){z.WA.call(this,"roundtable")};z.LF=function(a){var b=a.getAttribute("data-type");return(b={ac:ND,ad:TD,p:z.JF,a:z.FF,q:DF,r:KF,c:IF,ANSWER:z.FF,ARTICLE:z.JF}[b])?new b:GF(a)?new z.FF:new z.Q};
z.MF=function(){this.Dx=["zg-btn-follow","zg-btn-unfollow"];this.Ex="people"};z.Nk.prototype.Dm=z.Y(26,function(a){this.cj=a});z.Rj.prototype.Vf=z.Y(25,function(a,b){if(!this.h)return null;for(var c=b||"A",d=a;null!=d&&d!==this.h;){if(d.tagName===c)return d;d=d.parentNode}return null});z.U.prototype.Bm=z.Y(24,function(a){this.Xk=a;this.ya&&z.Mj(this)});z.vj.prototype.zu=z.Y(22,function(a){this.lp=a});z.vj.prototype.Ua=z.Y(21,function(){return null!=this.uc?z.Id(this.uc):""});
z.ij.prototype.Wa=z.Y(20,function(a){this.hc=a});z.ij.prototype.Lg=z.Y(18,function(a){this.Mi=a});z.Q.prototype.qh=z.Y(17,function(a){if(this.ya)throw Error("Component already rendered");this.ng=a});z.Q.prototype.rd=z.Y(16,function(){null==this.ng&&(this.ng=z.Ng(this.ya?this.h:this.ca.wa().body));return this.ng});z.rg.prototype.Pg=z.Y(15,function(){return new z.Ie(this.width,this.height)});
z.rg.prototype.Sy=z.Y(14,function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,!0}return!1});
z.Sf.prototype.Kq=z.Y(13,function(a,b,c){var d=(0,z.G)(),f=c?c:d,g=Jn(this.Ur);g.Wr=2;g.Vr=f;g.type=b;g.RD=a;a=(a=this.CX)&&a.isTracing()?a.totalVarAlloc:-1;g.QJ=a;this.zw++;if(c){c=this.Rf.length;for(a=0;a<c;a++)if(this.Rf[a].Vr>f){z.yb(this.Rf,a,0,g);break}a==c&&this.Rf.push(g)}else this.Rf.push(g);if(f=g.type)g=this.zk.get(f),g||(g=Jn(this.nB),g.type=f,this.zk.set(f,g)),g.count++;this.Su+=(0,z.G)()-d});
z.Je.prototype.bg=z.Y(12,function(a){var b;(b="A"==a.tagName||"INPUT"==a.tagName||"TEXTAREA"==a.tagName||"SELECT"==a.tagName||"BUTTON"==a.tagName?!a.disabled&&(!Gn(a)||Fn(a)):Ln(a))&&z.A?(a=z.sa(a.getBoundingClientRect)?a.getBoundingClientRect():{height:a.offsetHeight,width:a.offsetWidth},a=null!=a&&0<a.height&&0<a.width):a=b;return a});z.Q.prototype.vp=z.Y(11,function(a){for(var b=[];this.Sc&&0!=this.Sc.length;)b.push(this.removeChild(z.bh(this,0),a));return b});
z.Je.prototype.zl=z.Y(10,function(a){return Kn(a||this.Ka)});z.Je.prototype.Hw=z.Y(9,function(a,b,c){var d=this.Ka;c=!!c;for(var f=d.createElement("TABLE"),g=f.appendChild(d.createElement("TBODY")),h=0;h<a;h++){for(var k=d.createElement("TR"),m=0;m<b;m++){var n=d.createElement("TD");c&&z.nf(n," ");k.appendChild(n)}g.appendChild(k)}return f});z.Je.prototype.Yf=z.Y(8,function(a,b){return z.L(a,b||this.Ka)});z.Q.prototype.Yf=z.Y(7,function(a){return this.h?this.ca.Yf(a,this.h):null});
z.Sd.prototype.Rh=z.Y(6,function(a){for(var b=0;b<this.Ya.length;b++){var c=this.Ya[b];if(z.Vd(this.Fb,c)&&this.Fb[c]==a)return!0}return!1});z.uh.prototype.Rh=z.Y(5,function(a){var b=this.Yc();return z.x(b,a)});z.Ri.prototype.Rh=z.Y(4,function(a){for(var b=z.Si(this).values,c=0;c<b.length;c++)if(b[c]==a)return!0;return!1});z.Qc.prototype.kF=z.Y(0,function(){return this.jc});z.v(z.Tn,z.F);z.e=z.Tn.prototype;z.e.h=null;z.e.Xk=!0;z.e.iD=null;z.e.jD=null;z.e.Tj=!1;z.e.SU=!1;z.e.lz=-1;z.e.iz=-1;
z.e.cG=!1;z.e.QN=!0;z.e.dc="toggle_display";z.e.gi=function(){return this.dc};z.e.m=function(){return this.h};z.e.oh=function(a){In(this);this.h=a};z.e.Bm=function(a){In(this);this.Xk=a};z.e.rJ=function(a,b){this.Lm=a;this.Sl=b};z.e.o=function(){return this.ea};z.e.U=function(){return this.Tj};z.e.HG=function(){return this.Tj||150>(0,z.G)()-this.iz};z.e.G=function(a){this.Lm&&this.Lm.stop();this.Sl&&this.Sl.stop();a?this.dB():this.Tl()};z.e.ha=z.p;
z.e.dB=function(){if(!this.Tj&&this.Zo()){if(!this.h)throw Error("Caller must call setElement before trying to show the popup");this.ha();var a=z.Ke(this.h);this.cG&&this.ea.g(a,"keydown",this.aS,!0);if(this.Xk)if(this.ea.g(a,"mousedown",this.OH,!0),z.A){var b;try{b=a.activeElement}catch(d){}for(;b&&"IFRAME"==b.nodeName;){try{var c=b.contentDocument||b.contentWindow.document}catch(d){break}a=c;b=a.activeElement}this.ea.g(a,"mousedown",this.OH,!0);this.ea.g(a,"deactivate",this.MH)}else this.ea.g(a,
"blur",this.MH);"toggle_display"==this.dc?(this.h.style.visibility="visible",z.P(this.h,!0)):"move_offscreen"==this.dc&&this.ha();this.Tj=!0;this.lz=(0,z.G)();this.iz=-1;this.Lm?(z.md(this.Lm,"end",this.kk,!1,this),this.Lm.play()):this.kk()}};z.e.Tl=function(a){if(!this.Tj||!this.dispatchEvent({type:"beforehide",target:a}))return!1;this.ea&&this.ea.removeAll();this.Tj=!1;this.iz=(0,z.G)();this.Sl?(z.md(this.Sl,"end",z.Aa(this.ZD,a),!1,this),this.Sl.play()):this.ZD(a);return!0};
z.e.ZD=function(a){"toggle_display"==this.dc?this.SU?z.wd(this.dG,0,this):this.dG():"move_offscreen"==this.dc&&(this.h.style.top="-10000px");this.jk(a)};z.e.dG=function(){this.h.style.visibility="hidden";z.P(this.h,!1)};z.e.Zo=function(){return this.dispatchEvent("beforeshow")};z.e.kk=function(){this.dispatchEvent("show")};z.e.jk=function(a){this.dispatchEvent({type:"hide",target:a})};z.e.OH=function(a){a=a.target;z.mf(this.h,a)||Hn(this,a)||this.jD&&!z.mf(this.jD,a)||150>(0,z.G)()-this.lz||this.Tl(a)};
z.e.aS=function(a){27==a.keyCode&&this.Tl(a.target)&&(a.preventDefault(),a.stopPropagation())};z.e.MH=function(a){if(this.QN){var b=z.Ke(this.h);if("undefined"!=typeof window.document.activeElement){if(a=b.activeElement,!a||z.mf(this.h,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>(0,z.G)()-this.lz||this.Tl()}};z.e.D=function(){z.Tn.v.D.call(this);this.ea.H();z.Dc(this.Lm);z.Dc(this.Sl);delete this.h;delete this.ea;delete this.iD};z.v(co,z.Mc);z.v(fo,z.F);fo.prototype.gg=function(){this.kd("begin")};
fo.prototype.hg=function(){this.kd("end")};fo.prototype.kd=function(a){this.dispatchEvent(a)};z.v(go,fo);z.e=go.prototype;z.e.Lg=function(a){this.Mi=a};
z.e.play=function(a){if(a||0==this.N)this.progress=0,this.coords=this.Wp;else if(1==this.N)return!1;eo(this);this.startTime=a=(0,z.G)();-1==this.N&&(this.startTime-=this.duration*this.progress);this.endTime=this.startTime+this.duration;this.progress||this.gg();this.kd("play");-1==this.N&&this.kd("resume");this.N=1;var b=z.ua(this);b in z.tl||(z.tl[b]=this);z.ql();ho(this,a);return!0};z.e.stop=function(a){eo(this);this.N=0;a&&(this.progress=1);io(this,this.progress);this.kd("stop");this.hg()};
z.e.pause=function(){1==this.N&&(eo(this),this.N=-1,this.kd("pause"))};z.e.D=function(){0==this.N||this.stop(!1);this.kd("destroy");go.v.D.call(this)};z.e.destroy=function(){this.H()};z.e.LR=function(a){ho(this,a)};z.e.Oz=function(){this.kd("animate")};z.e.kd=function(a){this.dispatchEvent(new co(a,this))};z.v(jo,go);z.e=jo.prototype;z.e.yh=z.p;z.e.rd=function(){z.ka(this.ng)||(this.ng=z.Ng(this.element));return this.ng};z.e.Oz=function(){this.yh();jo.v.Oz.call(this)};
z.e.hg=function(){this.yh();jo.v.hg.call(this)};z.e.gg=function(){this.yh();jo.v.gg.call(this)};var Fo=/^#(?:[0-9a-f]{3}){1,2}$/i,xo=/&([^;\s<&]+);?/g;z.mo.defaults={paddingTop:0};z.v(no,jo);no.prototype.yh=function(){for(var a=[],b=0;b<this.coords.length;b++)a[b]=Math.round(this.coords[b]);this.element.style.backgroundColor="rgb("+a.join(",")+")"};z.v(oo,jo);z.e=oo.prototype;z.e.yh=function(){var a=this.coords[0];Math.abs(a-this.gt)>=z.an&&(z.Kg(this.element,a),this.gt=a)};
z.e.gg=function(){this.gt=-1;oo.v.gg.call(this)};z.e.hg=function(){this.gt=-1;oo.v.hg.call(this)};z.e.show=function(){this.element.style.display=""};z.e.hide=function(){this.element.style.display="none"};var Do=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i,Go=/#(.)(.)(.)/,Ro={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"};z.v(Bo,oo);Bo.prototype.gg=function(){this.show();Bo.v.gg.call(this)};
Bo.prototype.hg=function(){this.hide();Bo.v.hg.call(this)};
var Bp={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},NF=/[^\d]+$/;Oo.prototype.serialize=function(a){var b=[];Po(this,a,b);return b.join("")};
Oo.prototype.serializeArray=function(a,b){var c=a.length;b.push("[");for(var d="",f=0;f<c;f++)b.push(d),d=a[f],Po(this,this.lu?this.lu.call(a,String(f),d):d,b),d=",";b.push("]")};z.fp.prototype.add=function(a,b){!1===this.EQ?this.data.set(a,b):this.data.set((0,window.encodeURIComponent)(a),(0,window.encodeURIComponent)(b))};z.fp.prototype.Jd=function(){var a=[];z.w(this.data.md(),function(b){a.push(b+"\x3d"+this.data.get(b))},this);return a.join("\x26")};z.v(vp,oo);
vp.prototype.gg=function(){this.show();vp.v.gg.call(this)};z.v(wp,jo);wp.prototype.yh=function(){this.element.style.height=Math.round(this.coords[0])+"px"};z.v(xp,jo);xp.prototype.yh=function(){this.element.style.width=Math.round(this.coords[0])+"px"};z.v(yp,jo);
yp.prototype.yh=function(){if(this.Mi){var a=this.element,b=Math.round(this.coords[0]),b=Math.max(b,0);z.Ng(a)?z.y?a.scrollLeft=-b:z.Gl&&z.D("8")?a.scrollLeft=b:a.scrollLeft=a.scrollWidth-b-a.clientWidth:a.scrollLeft=b}else this.element.scrollLeft=Math.round(this.coords[0]);this.element.scrollTop=Math.round(this.coords[1])};z.v(zp,jo);
zp.prototype.yh=function(){var a=this.Mi&&this.rd()?"right":"left";this.element.style[a]=Math.round(this.coords[0])+"px";this.element.style.top=Math.round(this.coords[1])+"px"};z.e=bq.prototype;z.e.hb=function(){return this.Fb.hb()};z.e.add=function(a){this.Fb.set(So(a),a)};z.e.addAll=function(a){a=z.Kd(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};z.e.removeAll=function(a){a=z.Kd(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};z.e.remove=function(a){return this.Fb.remove(So(a))};
z.e.clear=function(){this.Fb.clear()};z.e.Xg=function(){return this.Fb.Xg()};z.e.contains=function(a){return this.Fb.Nf(So(a))};z.e.Sy=function(a){var b=new bq;a=z.Kd(a);for(var c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};z.e.Yc=function(){return this.Fb.Yc()};z.e.clone=function(){return new bq(this)};z.e.equals=function(a){return this.hb()==Uo(a)&&cq(this,a)};z.e.hd=function(){return this.Fb.hd(!1)};var Dq;z.v(z.Z,z.ee);
var OF=/#.*$/,Bq={"*":"*","text/html":"html","text/plain":"text","application/json":"json","application/javascript":"script","application/x-javascript":"script"},zq=[];z.Z.prototype.HO=function(){if(this.kK){var a=Cq();z.P(a,!1)}Aq(this)};
z.Z.prototype.ajax=function(a,b,c){a=(0,window.encodeURI)((0,window.decodeURI)(a));a=a.replace(OF,"");if(!this.da){if(this.kK){var d=Cq();z.P(d,!0)}c=c||"POST";"POST"===c.toUpperCase()&&(d=z.Vi.get("_xsrf"))&&(b=(b?b+"\x26_xsrf\x3d":"_xsrf\x3d")+d);return this.send(a,c,b,this.headers)}};z.v(Eq,z.F);Eq.prototype.o=function(){return this.rf||(this.rf=new z.zd(this))};z.v(z.Gq,z.Mc);z.Hq=new Eq;z.F.prototype.on=function(){z.F.prototype.addEventListener.apply(this,arguments);return this};z.F.prototype.off=function(){z.F.prototype.removeEventListener.apply(this,arguments);return this};z.F.prototype.fb=z.F.prototype.dispatchEvent;z.v(Iq,z.F);Iq.prototype.Rb=function(){var a=(0,z.q)(function(a){var c=this.qr.section;(c=c&&c["home-topstory"])&&(c.content=a)},this);Oq(this).always((0,z.q)(function(b){this.qb||(b&&b.Rm&&b.Rm.length&&a("这里是根据你关注的话题和人定制的内容精选"),this.J.gk(),Kq(this),Mq(this))},this));this.qb||Nq()};z.v(Pq,z.F);z.e=Pq.prototype;z.e.h=null;z.e.bt=null;z.e.cz=null;z.e.ct=null;z.e.he=-1;z.e.ki=-1;z.e.Rv=!1;
var PF={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},QF={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},RF=z.A||z.Hc||z.B&&z.D("525"),SF=z.Vc&&z.y;z.e=Pq.prototype;
z.e.of=function(a){if(z.B||z.Hc)if(17==this.he&&!a.ctrlKey||18==this.he&&!a.altKey||z.Vc&&91==this.he&&!a.metaKey)this.ki=this.he=-1;-1==this.he&&(a.ctrlKey&&17!=a.keyCode?this.he=17:a.altKey&&18!=a.keyCode?this.he=18:a.metaKey&&91!=a.keyCode&&(this.he=91));RF&&!Cp(a.keyCode,this.he,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.ki=z.fj(a.keyCode),SF&&(this.Rv=a.altKey))};z.e.jP=function(a){this.ki=this.he=-1;this.Rv=a.altKey};
z.e.handleEvent=function(a){var b=a.jc,c,d,f=b.altKey;z.A&&"keypress"==a.type?(c=this.ki,d=13!=c&&27!=c?b.keyCode:0):(z.B||z.Hc)&&"keypress"==a.type?(c=this.ki,d=0<=b.charCode&&63232>b.charCode&&Ho(c)?b.charCode:0):z.vg&&!z.B?(c=this.ki,d=Ho(c)?b.keyCode:0):(c=b.keyCode||this.ki,d=b.charCode||0,SF&&(f=this.Rv),z.Vc&&63==d&&224==c&&(c=191));var g=c=z.fj(c),h=b.keyIdentifier;c?63232<=c&&c in PF?g=PF[c]:25==c&&a.shiftKey&&(g=9):h&&h in QF&&(g=QF[h]);a=g==this.he;this.he=g;b=new Qq(g,d,a,b);b.altKey=
f;this.dispatchEvent(b)};z.e.m=function(){return this.h};z.e.attach=function(a,b){this.ct&&this.detach();this.h=a;this.bt=z.E(this.h,"keypress",this,b);this.cz=z.E(this.h,"keydown",this.of,b,this);this.ct=z.E(this.h,"keyup",this.jP,b,this)};z.e.detach=function(){this.bt&&(z.od(this.bt),z.od(this.cz),z.od(this.ct),this.ct=this.cz=this.bt=null);this.h=null;this.ki=this.he=-1};z.e.D=function(){Pq.v.D.call(this);this.detach()};z.v(Qq,z.Qc);var TF;z.la(Rq);var UF={button:"pressed",checkbox:"checked",menuitem:"selected",menuitemcheckbox:"checked",menuitemradio:"checked",radio:"checked",tab:"selected",treeitem:"selected"};z.e=Rq.prototype;z.e.lf=function(){};z.e.B=function(a){return a.L().B("DIV",this.Xf(a).join(" "),a.Ua())};z.e.R=function(a){return a};z.e.mj=function(a,b,c){if(a=a.m?a.m():a){var d=[b];z.A&&!z.D("7")&&(d=Vq(z.$i(a),b),d.push(b));(c?z.cj:z.ej)(a,d)}};z.e.Yb=function(){return!0};
z.e.w=function(a,b){b.id&&Wn(a,b.id);var c=this.R(b);c&&c.firstChild?a.Cm(c.firstChild.nextSibling?z.wb(c.childNodes):c.firstChild):a.Cm(null);var d=0,f=this.T(),g=this.T(),h=!1,k=!1,m=!1,n=z.wb(z.$i(b));z.w(n,function(a){h||a!=f?k||a!=g?d|=this.ks(a):k=!0:(h=!0,g==f&&(k=!0));1==this.ks(a)&&Ln(c)&&z.of(c,!1)},this);a.N=d;h||(n.push(f),g==f&&(k=!0));k||n.push(g);var t=a.kf;t&&n.push.apply(n,t);if(z.A&&!z.D("7")){var C=Vq(n);0<C.length&&(n.push.apply(n,C),m=!0)}if(!h||!k||t||m)b.className=n.join(" ");
return b};z.e.De=function(a){a.rd()&&this.qh(a.m(),!0);a.isEnabled()&&this.Pe(a,a.U())};z.e.RA=function(a,b){z.Xi(a,"label",b)};z.e.Fp=function(a,b){z.Ip(a,!b,!z.A&&!z.vg)};z.e.qh=function(a,b){this.mj(a,this.T()+"-rtl",b)};z.e.bg=function(a){var b;return Uq(a,32)&&(b=a.Zb())?Ln(b):!1};z.e.Pe=function(a,b){var c;if(Uq(a,32)&&(c=a.Zb())){if(!b&&a.N&32){try{c.blur()}catch(d){}a.N&32&&a.Zc(null)}Ln(c)!=b&&z.of(c,b)}};z.e.G=function(a,b){z.P(a,b);a&&z.Xi(a,"hidden",!b)};
z.e.nc=function(a,b,c){var d=a.m();if(d){var f=this.Zn(b);f&&this.mj(a,f,c);this.ug(d,b,c)}};z.e.ug=function(a,b,c){TF||(TF={1:"disabled",8:"selected",16:"checked",64:"expanded"});b=TF[b];var d=a.getAttribute("role")||null;d&&(d=UF[d]||b,b="checked"==b||"selected"==b?d:b);b&&z.Xi(a,b,c)};
z.e.ka=function(a,b){var c=this.R(a);if(c&&(z.af(c),b))if(z.pa(b))z.nf(c,b);else{var d=function(a){if(a){var b=z.Ke(c);c.appendChild(z.pa(a)?b.createTextNode(a):a)}};z.na(b)?z.w(b,d):!z.oa(b)||"nodeType"in b?d(b):z.w(z.wb(b),d)}};z.e.Zb=function(a){return a.m()};z.e.T=function(){return"goog-control"};
z.e.Xf=function(a){var b=this.T(),c=[b],d=this.T();d!=b&&c.push(d);b=a.getState();for(d=[];b;){var f=b&-b;d.push(this.Zn(f));b&=~f}c.push.apply(c,d);(a=a.kf)&&c.push.apply(c,a);z.A&&!z.D("7")&&c.push.apply(c,Vq(c));return c};z.e.Zn=function(a){this.kr||Wq(this);return this.kr[a]};z.e.ks=function(a){this.EJ||(this.kr||Wq(this),this.EJ=z.gq(this.kr));a=(0,window.parseInt)(this.EJ[a],10);return(0,window.isNaN)(a)?0:a};z.v(z.Xq,Rq);z.la(z.Xq);z.e=z.Xq.prototype;z.e.lf=function(){return"button"};z.e.ug=function(a,b,c){switch(b){case 8:case 16:z.Xi(a,"pressed",c);break;default:case 64:case 1:z.Xq.v.ug.call(this,a,b,c)}};z.e.B=function(a){var b=z.Xq.v.B.call(this,a);this.xd(b,a.Il());var c=a.W();c&&this.Ea(b,c);Uq(a,16)&&this.ug(b,16,a.tf());return b};z.e.w=function(a,b){b=z.Xq.v.w.call(this,a,b);var c=this.W(b);a.ne=c;a.HB=this.Il(b);Uq(a,16)&&this.ug(b,16,a.tf());return b};z.e.W=z.p;z.e.Ea=z.p;z.e.Il=function(a){return a.title};
z.e.xd=function(a,b){a&&(b?a.title=b:a.removeAttribute("title"))};z.e.Bi=z.l(28);z.e.T=function(){return"goog-button"};var ar={},Zq={};z.v($q,z.Q);z.e=$q.prototype;z.e.uc=null;z.e.N=0;z.e.aq=39;z.e.Yi=255;z.e.yk=0;z.e.ob=!0;z.e.kf=null;z.e.Aj=!0;z.e.Pq=!1;z.e.lp=null;z.e.Jp=function(a){this.ya&&a!=this.Aj&&br(this,a);this.Aj=a};z.e.Zb=function(){return this.M.Zb(this)};z.e.gs=function(){return this.sb||(this.sb=new Pq)};z.e.Ih=function(a){a&&(this.kf?z.x(this.kf,a)||this.kf.push(a):this.kf=[a],this.M.mj(this,a,!0))};
z.e.mj=function(a,b){b?this.Ih(a):a&&this.kf&&z.ub(this.kf,a)&&(0==this.kf.length&&(this.kf=null),this.M.mj(this,a,!1))};z.e.B=function(){var a=this.M.B(this);this.h=a;Sq(this.M,a,this.fi());this.Pq||this.M.Fp(a,!1);this.U()||this.M.G(a,!1)};z.e.fi=function(){return this.lp};z.e.zu=function(a){this.lp=a};z.e.RA=function(a){this.eD=a;var b=this.m();b&&this.M.RA(b,a)};z.e.R=function(){return this.M.R(this.m())};z.e.Yb=function(a){return this.M.Yb(a)};
z.e.ga=function(a){this.h=a=this.M.w(this,a);Sq(this.M,a,this.fi());this.Pq||this.M.Fp(a,!1);this.ob="none"!=a.style.display};z.e.C=function(){$q.v.C.call(this);Tq(this.M,this,this.h);this.M.De(this);if(this.aq&-2&&(this.Aj&&br(this,!0),Uq(this,32))){var a=this.Zb();if(a){var b=this.gs();b.attach(a);this.o().g(b,"key",this.$b).g(a,"focus",this.fe).g(a,"blur",this.Zc)}}};z.e.Db=function(){$q.v.Db.call(this);this.sb&&this.sb.detach();this.U()&&this.isEnabled()&&this.M.Pe(this,!1)};
z.e.D=function(){$q.v.D.call(this);this.sb&&(this.sb.H(),delete this.sb);delete this.M;this.vo=this.kf=this.uc=null};z.e.Ua=function(){return this.uc};z.e.ka=function(a){this.M.ka(this.m(),a);this.Cm(a)};z.e.Cm=function(a){this.uc=a};z.e.Og=function(){var a=this.Ua();if(!a)return"";a=z.pa(a)?a:z.na(a)?z.ob(a,z.Qp).join(""):z.pf(a);return tq(a)};z.e.Gp=function(a){this.ka(a)};z.e.qh=function(a){$q.v.qh.call(this,a);var b=this.m();b&&this.M.qh(b,a)};
z.e.Fp=function(a){this.Pq=a;var b=this.m();b&&this.M.Fp(b,a)};z.e.U=function(){return this.ob};z.e.G=function(a,b){if(b||this.ob!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.m();c&&this.M.G(c,a);this.isEnabled()&&this.M.Pe(this,a);this.ob=a;return!0}return!1};z.e.isEnabled=function(){return!(this.N&1)};z.e.Wa=function(a){var b=this.getParent();b&&"function"==typeof b.isEnabled&&!b.isEnabled()||!er(this,1,!a)||(a||(this.setActive(!1),this.Oc(!1)),this.U()&&this.M.Pe(this,a),this.nc(1,!a,!0))};
z.e.Oc=function(a){er(this,2,a)&&this.nc(2,a)};z.e.bc=function(){return!!(this.N&4)};z.e.setActive=function(a){er(this,4,a)&&this.nc(4,a)};z.e.YA=function(a){er(this,8,a)&&this.nc(8,a)};z.e.tf=function(){return!!(this.N&16)};z.e.Mc=function(a){er(this,16,a)&&this.nc(16,a)};z.e.rb=function(){return!!(this.N&64)};z.e.Bb=function(a){er(this,64,a)&&this.nc(64,a)};z.e.getState=function(){return this.N};
z.e.nc=function(a,b,c){c||1!=a?Uq(this,a)&&b!=!!(this.N&a)&&(this.M.nc(this,a,b),this.N=b?this.N|a:this.N&~a):this.Wa(!b)};z.e.Ub=function(a,b){if(this.ya&&this.N&a&&!b)throw Error("Component already rendered");!b&&this.N&a&&this.nc(a,!1);this.aq=b?this.aq|a:this.aq&~a};z.e.od=function(a){(!a.relatedTarget||!z.mf(this.m(),a.relatedTarget))&&this.dispatchEvent("enter")&&this.isEnabled()&&dr(this,2)&&this.Oc(!0)};
z.e.Ml=function(a){a.relatedTarget&&z.mf(this.m(),a.relatedTarget)||!this.dispatchEvent("leave")||(dr(this,4)&&this.setActive(!1),dr(this,2)&&this.Oc(!1))};z.e.no=z.p;z.e.ge=function(a){this.isEnabled()&&(dr(this,2)&&this.Oc(!0),z.Uc(a)&&(dr(this,4)&&this.setActive(!0),this.M&&this.M.bg(this)&&this.Zb().focus()));!this.Pq&&z.Uc(a)&&a.preventDefault()};z.e.qf=function(a){this.isEnabled()&&(dr(this,2)&&this.Oc(!0),this.bc()&&this.Od(a)&&dr(this,4)&&this.setActive(!1))};
z.e.xF=function(a){this.isEnabled()&&this.Od(a)};z.e.Od=function(a){dr(this,16)&&this.Mc(!this.tf());dr(this,8)&&this.YA(!0);dr(this,64)&&this.Bb(!this.rb());var b=new z.Mc("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.mA=a.mA);return this.dispatchEvent(b)};z.e.fe=function(){dr(this,32)&&er(this,32,!0)&&this.nc(32,!0)};z.e.Zc=function(){dr(this,4)&&this.setActive(!1);dr(this,32)&&er(this,32,!1)&&this.nc(32,!1)};
z.e.$b=function(a){return this.U()&&this.isEnabled()&&this.pf(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};z.e.pf=function(a){return 13==a.keyCode&&this.Od(a)};if(!z.sa($q))throw Error("Invalid component class "+$q);if(!z.sa(Rq))throw Error("Invalid renderer class "+Rq);var VF=z.ua($q);ar[VF]=Rq;z.Yq("goog-control",function(){return new $q(null)});z.v(cr,z.yc);cr.prototype.Kl=function(){this.lr=!1};cr.prototype.ys=function(){this.lr=!0};
cr.prototype.Jl=function(a){if(this.lr)this.lr=!1;else{var b=a.jc,c=b.button,d=b.type;b.button=0;b.type="mousedown";this.vr.ge(new z.Qc(b,a.currentTarget));b.type="mouseup";this.vr.qf(new z.Qc(b,a.currentTarget));b.button=c;b.type=d}};cr.prototype.D=function(){this.vr=null;cr.v.D.call(this)};z.v(fr,z.Xq);z.la(fr);z.e=fr.prototype;z.e.lf=function(){};z.e.B=function(a){a.Jp(!1);a.Yi&=-256;a.Ub(32,!1);return a.L().B("BUTTON",{"class":this.Xf(a).join(" "),disabled:!a.isEnabled(),title:a.Il()||"",value:a.W()||""},a.Og()||"")};z.e.Yb=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};z.e.w=function(a,b){a.Jp(!1);a.Yi&=-256;a.Ub(32,!1);if(b.disabled){var c=this.Zn(1);z.bj(b,c)}return fr.v.w.call(this,a,b)};
z.e.De=function(a){a.o().g(a.m(),"click",a.Od)};z.e.Fp=z.p;z.e.qh=z.p;z.e.bg=function(a){return a.isEnabled()};z.e.Pe=z.p;z.e.nc=function(a,b,c){fr.v.nc.call(this,a,b,c);(a=a.m())&&1==b&&(a.disabled=c)};z.e.W=function(a){return a.value};z.e.Ea=function(a,b){a&&(a.value=b)};z.e.ug=z.p;z.v(z.gr,$q);z.e=z.gr.prototype;z.e.W=function(){return this.ne};z.e.Ea=function(a){this.ne=a;this.M.Ea(this.m(),a)};z.e.Il=function(){return this.HB};z.e.xd=function(a){this.HB=a;this.M.xd(this.m(),a)};z.e.Bi=z.l(27);z.e.D=function(){z.gr.v.D.call(this);delete this.ne;delete this.HB};z.e.C=function(){z.gr.v.C.call(this);if(Uq(this,32)){var a=this.Zb();a&&this.o().g(a,"keyup",this.pf)}};z.e.pf=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.Od(a):32==a.keyCode};
z.Yq("goog-button",function(){return new z.gr(null)});z.v(hr,Rq);z.la(hr);hr.prototype.B=function(a){var b=a.L().B("SPAN",this.Xf(a).join(" "));ir(this,b,a.Ph);return b};hr.prototype.w=function(a,b){b=hr.v.w.call(this,a,b);var c=z.$i(b),d=nr;z.x(c,jr(this,lr))?d=lr:z.x(c,jr(this,mr))?d=mr:z.x(c,jr(this,nr))&&(d=nr);a.Ph=d;z.Xi(b,"checked",d==lr?"mixed":d==mr?"true":"false");return b};hr.prototype.lf=function(){return"checkbox"};hr.prototype.T=function(){return"goog-checkbox"};z.v(or,$q);var mr=!0,nr=!1,lr=null,kr={vW:mr,hX:nr,jX:lr};z.e=or.prototype;z.e.Lb=null;z.e.tf=function(){return this.Ph==mr};z.e.Mc=function(a){a!=this.Ph&&(this.Ph=a,ir(this.M,this.m(),this.Ph))};z.e.toggle=function(){this.Mc(this.Ph?nr:mr)};
z.e.C=function(){or.v.C.call(this);if(this.Aj){var a=this.o();this.Lb&&a.g(this.Lb,"click",this.by).g(this.Lb,"mouseover",this.od).g(this.Lb,"mouseout",this.Ml).g(this.Lb,"mousedown",this.ge).g(this.Lb,"mouseup",this.qf);a.g(this.m(),"click",this.by)}a=this.h;if(this.Lb&&a!=this.Lb&&z.Xo(Fp(a))){if(!this.Lb.id){var b=this.Lb,c;c=this.ee()+".lbl";b.id=c}z.Xi(a,"labelledby",this.Lb.id)}};z.e.Wa=function(a){or.v.Wa.call(this,a);if(a=this.m())a.tabIndex=this.isEnabled()?0:-1};
z.e.by=function(a){a.stopPropagation();var b=this.Ph?"uncheck":"check";this.isEnabled()&&!a.target.href&&this.dispatchEvent(b)&&(a.preventDefault(),this.toggle(),this.dispatchEvent("change"))};z.e.pf=function(a){32==a.keyCode&&(this.Od(a),this.by(a));return!1};z.Yq("goog-checkbox",function(){return new or});z.v(z.pr,z.Xq);z.la(z.pr);z.e=z.pr.prototype;z.e.B=function(a){var b={"class":"goog-inline-block "+this.Xf(a).join(" ")},b=a.L().B("DIV",b,a.Ua());this.xd(b,a.Il());return b};z.e.lf=function(){return"button"};z.e.Yb=function(a){return"DIV"==a.tagName};z.e.w=function(a,b){z.bj(b,"goog-inline-block");return z.pr.v.w.call(this,a,b)};z.e.W=function(){return""};z.e.T=function(){return"goog-flat-button"};z.Yq("goog-flat-button",function(){return new z.gr(null,z.pr.aa())});z.v(qr,z.pr);z.la(qr);qr.prototype.T=function(){return"goog-link-button"};z.Yq("goog-link-button",function(){return new z.gr(null,qr.aa())});z.v(z.rr,z.F);z.e=z.rr.prototype;z.e.Aj=!0;z.e.D=function(){z.rr.v.D.call(this);z.Dc(this.PG);z.Dc(this.Iz)};z.e.lf=function(){return"tab"};z.e.R=function(){return this.ql};z.e.expand=function(){this.Nc(!0)};z.e.collapse=function(){this.Nc(!1)};z.e.toggle=function(){this.Nc(!this.Jb)};
z.e.Nc=function(a){this.ql?z.P(this.ql,a):a&&this.it&&(this.ql=this.it());this.ql&&z.bj(this.ql,"goog-zippy-content");this.lj?(z.P(this.Qf,!a),z.P(this.lj,a)):this.Qf&&(Ep(this.Qf,"goog-zippy-expanded",a),Ep(this.Qf,"goog-zippy-collapsed",!a),z.Xi(this.Qf,"expanded",a));this.Jb=a;this.dispatchEvent(new ur("toggle",this,this.Jb))};z.e.wc=function(){return this.Jb};z.e.Jp=function(a){this.Aj!=a&&((this.Aj=a)?(sr(this,this.Qf),sr(this,this.lj)):this.Iz.removeAll())};
z.e.gS=function(a){if(13==a.keyCode||32==a.keyCode)this.toggle(),this.dispatchEvent(new z.Mc("action",this)),a.preventDefault(),a.stopPropagation()};z.e.fS=function(){this.toggle();this.dispatchEvent(new z.Mc("action",this))};z.v(ur,z.Mc);z.v(vr,z.U);z.e=vr.prototype;z.e.B=function(){vr.v.B.call(this);var a=(0,window.$)(".activate-dialog-template").html();this.ka(a)};z.e.C=function(){vr.v.C.call(this);z.Nj(this,420);this.Na("激活帐号");this.Bd=(0,window.$)(this.ai()).addClass("activate-dialog");this.Rb()};z.e.Rb=function(){this.sC=(0,window.$)(".link-activate-view",this.Bd);this.iC=(0,window.$)(".code-activate-view",this.Bd);this.sC.length?wr(this):yr(this)};
z.e.HS=function(a){var b=this,c=(0,window.$)(a);a=c.ke();var d=a.account,f=this.uf(d),g=f?"/settings/account/send_new_email_digits":"/settings/account/send_new_phone_digits";f?this.tb(a,"account","email"):this.tb(a,"account","phone_no");return window.$.post(g,a,function(a){a.success?(c.hide(),(0,window.$)('input[name\x3d"account"]',b.fC).val(d),b.fC.show(),Ar(b,f)):(a=a.payload.fields,f?b.tb(a,"email","account"):b.tb(a,"phone_no","account"),c.data("validator").showErrors(a))})};
z.e.GR=function(a){var b=this,c=(0,window.$)(a);a=c.ke();var d=this.uf(a.account),f=d?"/settings/account/update_email":"/settings/account/update_phone";d?this.tb(a,"account","email"):this.tb(a,"account","phone_no");return window.$.post(f,a,function(a){a.success?(b.ka("激活成功。你可以正常使用提问、回答、评论等功能啦！"),(0,window.setTimeout)(function(){window.location.reload()},1E3)):(a=a.payload.fields,d?b.tb(a,"email","account"):b.tb(a,"phone_no","account"),c.data("validator").showErrors(a))})};
z.e.tb=function(a,b,c){a[b]&&(a[c]=a[b],delete a[b])};z.e.uf=function(a){return!/^\+?[0-9]+$/.test(a)};var zr={onkeyup:!1,onfocusout:!1,validClass:"",focusInvalid:!1,highlight:z.p,messages:{account:{required:"请填写手机号或邮箱"},digits:{required:"请填写验证码"}},errorPlacement:function(a,b){var c=b.parent(".input-wrapper");a.appendTo(c).click(function(){b.focus()});b.focus(function(){a.remove()})}};z.ja(Cr,z.F);Cr.prototype.D=function(){z.F.prototype.D.call(this);this.Ku&&((0,window.clearTimeout)(this.Ku),this.Ku=null)};Cr.prototype.Ut=function(){if(!this.promise||"pending"!==this.promise.state()){var a=this.$L;this.promise=(window.$.support.cors?window.$.ajax(a):Br(a)).done(this.onMessage.bind(this)).fail(this.Sz.bind(this))}};Cr.prototype.onMessage=function(a){try{this.dispatchEvent({type:"message",data:a})}catch(b){}this.Ku=(0,window.setTimeout)(this.Ut.bind(this),this.tT)};
Cr.prototype.Sz=function(){this.dispatchEvent("error");this.ou<this.mH&&(this.ou=Math.min(this.ou*this.dQ,this.mH));this.Ku=(0,window.setTimeout)(this.Ut.bind(this),this.ou)};var Dr={type:"GET",url:"",data:{},timeout:6E4,xhrFields:{withCredentials:!0}};z.ja(z.Er,z.Q);z.Er.prototype.B=function(){this.h=z.M("div",{innerHTML:(0,window.$)(".unblock-dialog-template").html()})};z.Er.prototype.C=function(){z.Q.prototype.C.call(this);this.Nk=(0,window.$)(".unblock-dialog-loading",this.h);this.mC=(0,window.$)(".unblock-dialog-error",this.h);this.yv=(0,window.$)(".unblock-dialog-view",this.h);Fr(this);this.Ec=new z.Yj("antispam");this.Ec.w((0,window.$)(".unblock-dialog-captcha",this.h).get(0));this.nn();Mr(this)};
z.Er.prototype.nn=function(){Gr(this);Kr(this);Lr(this)};z.ja(Nr,z.U);Nr.prototype.B=function(){z.U.prototype.B.call(this);this.Na("帐号解封");z.Fj(this,null);this.Cf(!0)};Nr.prototype.C=function(){var a=this;z.U.prototype.C.call(this);this.PB=new z.Er(function(b){return a.Na(b)},!0);z.Bc(this,this.PB);this.PB.render(this.R());this.PB.g("complete",function(){return a.G(!1)})};z.v(z.Pr,z.Rj);z.Pr.prototype.eK=function(){return Qr(this)};z.la(Sr);z.e=Sr.prototype;z.e.lf=function(){return this.Zv};z.e.B=function(a){return a.L().B("DIV",this.Xf(a).join(" "))};z.e.R=function(a){return a};z.e.Yb=function(a){return"DIV"==a.tagName};z.e.w=function(a,b){b.id&&Wn(a,b.id);var c=this.T(),d=!1,f=z.$i(b);f&&z.w(f,function(b){b==c?d=!0:b&&(b==c+"-disabled"?a.Wa(!1):b==c+"-horizontal"?a.setOrientation(z.WF):b==c+"-vertical"&&a.setOrientation(ky))},this);d||z.bj(b,c);Ur(this,a,this.R(b));return b};
z.e.ao=function(a){a:{var b;a=z.$i(a);for(var c=0,d=a.length;c<d;c++)if(b=a[c],b=b in Zq?Zq[b]():null){a=b;break a}a=null}return a};z.e.De=function(a){a=a.m();z.Ip(a,!0,z.y);z.A&&(a.hideFocus=!0);var b=this.lf();b&&z.Wi(a,b)};z.e.Zb=function(a){return a.m()};z.e.T=function(){return"goog-container"};z.e.Xf=function(a){var b=this.T(),c=[b,a.Nb==z.WF?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};z.e.mF=function(){return ky};var ky;z.v(z.Vr,z.Q);z.WF="horizontal";ky="vertical";z.e=z.Vr.prototype;z.e.dz=null;z.e.sb=null;z.e.M=null;z.e.Nb=null;z.e.ob=!0;z.e.hc=!0;z.e.Bx=!0;z.e.Ta=-1;z.e.lc=null;z.e.yf=!1;z.e.bM=!1;z.e.$S=!0;z.e.Eg=null;z.e.Zb=function(){return this.dz||this.M.Zb(this)};z.e.gs=function(){return this.sb||(this.sb=new Pq(this.Zb()))};z.e.B=function(){this.h=this.M.B(this)};z.e.R=function(){return this.M.R(this.m())};z.e.Yb=function(a){return this.M.Yb(a)};
z.e.ga=function(a){this.h=this.M.w(this,a);"none"==a.style.display&&(this.ob=!1)};z.e.C=function(){z.Vr.v.C.call(this);z.ch(this,function(a){a.ya&&Xr(this,a)},this);var a=this.m();this.M.De(this);this.G(this.ob,!0);this.o().g(this,"enter",this.ey).g(this,"highlight",this.iy).g(this,"unhighlight",this.py).g(this,"open",this.sP).g(this,"close",this.cy).g(a,"mousedown",this.ge).g(z.Ke(a),"mouseup",this.LO).g(a,["mousedown","mouseup","mouseover","mouseout","contextmenu"],this.DO);this.bg()&&Wr(this,!0)};
z.e.Db=function(){this.ub(-1);this.lc&&this.lc.Bb(!1);this.yf=!1;z.Vr.v.Db.call(this)};z.e.D=function(){z.Vr.v.D.call(this);this.sb&&(this.sb.H(),this.sb=null);this.M=this.lc=this.Eg=this.dz=null};z.e.ey=function(){return!0};z.e.iy=function(a){var b=Vn(this,a.target);if(-1<b&&b!=this.Ta){var c=Yr(this);c&&c.Oc(!1);this.Ta=b;c=Yr(this);this.yf&&c.setActive(!0);this.$S&&this.lc&&c!=this.lc&&(Uq(c,64)?c.Bb(!0):this.lc.Bb(!1))}b=this.m();null!=a.target.m()&&z.Xi(b,"activedescendant",a.target.m().id)};
z.e.py=function(a){a.target==Yr(this)&&(this.Ta=-1);this.m().removeAttribute("aria-activedescendant")};z.e.sP=function(a){(a=a.target)&&a!=this.lc&&a.getParent()==this&&(this.lc&&this.lc.Bb(!1),this.lc=a)};z.e.cy=function(a){a.target==this.lc&&(this.lc=null);var b=this.m(),c=a.target.m();b&&a.target.N&2&&c&&Gp(b,c)};z.e.ge=function(a){this.hc&&(this.yf=!0);var b=this.Zb();b&&Ln(b)?b.focus():a.preventDefault()};z.e.LO=function(){this.yf=!1};
z.e.DO=function(a){var b;a:{b=a.target;if(this.Eg)for(var c=this.m();b&&b!==c;){var d=b.id;if(d in this.Eg){b=this.Eg[d];break a}b=b.parentNode}b=null}if(b)switch(a.type){case "mousedown":b.ge(a);break;case "mouseup":b.qf(a);break;case "mouseover":b.od(a);break;case "mouseout":b.Ml(a);break;case "contextmenu":b.no(a)}};z.e.fe=function(){};z.e.Zc=function(){this.ub(-1);this.yf=!1;this.lc&&this.lc.Bb(!1)};
z.e.$b=function(a){return this.isEnabled()&&this.U()&&(0!=z.ah(this)||this.dz)&&this.pf(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
z.e.pf=function(a){var b=Yr(this);if(b&&"function"==typeof b.$b&&b.$b(a)||this.lc&&this.lc!=b&&"function"==typeof this.lc.$b&&this.lc.$b(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.keyCode){case 27:if(this.bg())this.Zb().blur();else return!1;break;case 36:z.Zr(this);break;case 35:as(this);break;case 38:if(this.Nb==ky)cs(this);else return!1;break;case 37:if(this.Nb==z.WF)this.rd()?bs(this):cs(this);else return!1;break;case 40:if(this.Nb==ky)bs(this);else return!1;break;
case 39:if(this.Nb==z.WF)this.rd()?cs(this):bs(this);else return!1;break;default:return!1}return!0};z.e.K=function(a,b){z.Vr.v.K.call(this,a,b)};z.e.Sk=function(a,b,c){a.yk|=2;a.yk|=64;!this.bg()&&this.bM||a.Ub(32,!1);a.Jp(!1);var d=a.getParent()==this?Vn(this,a):-1;z.Vr.v.Sk.call(this,a,b,c);a.ya&&this.ya&&Xr(this,a);a=d;-1==a&&(a=z.ah(this));a==this.Ta?this.Ta=Math.min(z.ah(this)-1,b):a>this.Ta&&b<=this.Ta?this.Ta++:a<this.Ta&&b>this.Ta&&this.Ta--};
z.e.removeChild=function(a,b){if(a=z.pa(a)?z.$g(this,a):a){var c=Vn(this,a);-1!=c&&(c==this.Ta?(a.Oc(!1),this.Ta=-1):c<this.Ta&&this.Ta--);(c=a.m())&&c.id&&this.Eg&&z.Lb(this.Eg,c.id)}a=z.Vr.v.removeChild.call(this,a,b);a.Jp(!0);return a};z.e.setOrientation=function(a){if(this.m())throw Error("Component already rendered");this.Nb=a};z.e.U=function(){return this.ob};
z.e.G=function(a,b){if(b||this.ob!=a&&this.dispatchEvent(a?"show":"hide")){this.ob=a;var c=this.m();c&&(z.P(c,a),this.bg()&&Tr(this.Zb(),this.hc&&this.ob),b||this.dispatchEvent(this.ob?"aftershow":"afterhide"));return!0}return!1};z.e.isEnabled=function(){return this.hc};
z.e.Wa=function(a){this.hc!=a&&this.dispatchEvent(a?"enable":"disable")&&(a?(this.hc=!0,z.ch(this,function(a){a.vK?delete a.vK:a.Wa(!0)})):(z.ch(this,function(a){a.isEnabled()?a.Wa(!1):a.vK=!0}),this.yf=this.hc=!1),this.bg()&&Tr(this.Zb(),a&&this.ob))};z.e.bg=function(){return this.Bx};z.e.Pe=function(a){a!=this.Bx&&this.ya&&Wr(this,a);this.Bx=a;this.hc&&this.ob&&Tr(this.Zb(),a)};z.e.ub=function(a){(a=z.bh(this,a))?a.Oc(!0):-1<this.Ta&&Yr(this).Oc(!1)};z.e.Oc=function(a){this.ub(Vn(this,a))};
z.e.AD=function(a){return a.U()&&a.isEnabled()&&Uq(a,2)};z.v(ds,z.Q);ds.prototype.Ga=function(a){this.ev.push(a);a.Ob(this)};ds.prototype.C=function(){ds.v.C.call(this);this.o().g(this,"toggle",this.GP)};ds.prototype.GP=function(a){z.w(this.ev,function(b){a.target!==b&&b.wc()&&b.Nc(!1,!0)},this)};ds.prototype.D=function(){ds.v.D.call(this);z.w(this.ev,function(a){a.H()},this);this.ev=[]};z.es.prototype.wi=function(a,b,c){if(this.$B){var d=this.Sa,f=fs(a,b,d);0==f.length&&(f=gs(a,b,d));b=f}else b=fs(a,b,this.Sa);c(a,b)};var is,ks;z.v(z.hs,z.F);z.e=z.hs.prototype;z.e.cm=10;z.e.kn=!0;z.e.XC=!1;z.e.BK=!1;z.e.XJ=!1;is="hilite";z.js="select";z.ls="dismiss";ks="canceldismiss";z.e=z.hs.prototype;z.e.getToken=function(){return this.Xb};z.e.handleEvent=function(a){var b=this.Ld;if(a.target==this.M)switch(a.type){case is:this.ag(a.xi);break;case z.js:var c=!1;if(z.qa(a.xi)){a=a.xi;var d=this.Sa[ps(this,a)],c=!!d&&b.az&&b.az(d);d&&!c&&this.Tg!=a&&this.ag(a)}c||this.zi();break;case ks:z.os(this);break;case z.ls:this.ej()}};
z.e.Op=function(a,b){this.Xb!=a&&(this.Xb=a,this.Ld.wi(this.Xb,this.cm,(0,z.q)(this.jR,this),b),z.os(this))};z.e.Xx=function(){return this.zc};z.e.rb=function(){return this.M.U()};z.e.ag=function(a){var b=ps(this,a),c=this.Sa[b];return c&&this.Ld.az&&this.Ld.az(c)?!1:(this.Tg=a,this.M.ag(a),-1!=b)};
z.e.zi=function(){var a=ps(this,this.Tg);if(-1!=a){var b=this.Sa[a],c=this.Bf.Ai(b);this.XJ?(this.Xb=null,this.ej()):this.Fc();c||(this.dispatchEvent({type:"update",xi:b,index:a}),this.XJ&&this.Bf.update(!0));return!0}this.Fc();this.dispatchEvent({type:"update",xi:null,index:null});return!1};z.e.Fc=function(){this.Tg=-1;this.Xb=null;this.Wc+=this.Sa.length;this.Sa=[];window.clearTimeout(this.Yd);this.Yd=null;this.M.Fc();this.dispatchEvent("suggestionsupdate");this.dispatchEvent(z.ls)};
z.e.ej=function(){this.Yd||(this.Yd=window.setTimeout((0,z.q)(this.Fc,this),100))};z.e.kG=function(){return this.Yd?(window.clearTimeout(this.Yd),this.Yd=null,!0):!1};z.e.D=function(){z.hs.v.D.call(this);delete this.wG;this.M.H();this.Bf.H();this.Ld=null};z.e.jR=function(a,b,c){this.Xb==a&&this.vm(b,c)};
z.e.vm=function(a,b){var c="object"==z.ma(b)&&b,d=(c?c.FX():b)?ps(this,this.Tg):-1;this.Wc+=this.Sa.length;this.Sa=a;for(var f=[],g=0;g<a.length;++g)f.push({id:this.Wc+g,data:a[g]});g=null;this.zc&&(g=this.wG[z.ua(this.zc)]||this.zc);this.M.ZC=g;this.M.vm(f,this.Xb,this.zc);g=this.kn;c&&void 0!==c.kO()&&(g=c.kO());this.Tg=-1;(g||0<=d)&&0!=f.length&&this.Xb&&(0<=d?this.ag(this.Wc+d):z.ms(this));this.dispatchEvent("suggestionsupdate")};z.e.Vk=function(a){var b=this.Bf;b.Vk.apply(b,arguments)};
z.e.update=function(a){this.Bf.update(a)};z.v(z.vs,z.yc);var XF=(z.Oi||z.Pj)&&!z.D("533.17.9");z.e=z.vs.prototype;z.e.fW=!0;z.e.iO=!0;z.e.gK=!1;z.e.NU=!0;z.e.MU=!0;z.e.Gv=null;z.e.cb=null;z.e.Oo="";z.e.Ni=!1;z.e.IA=!1;z.e.dK=!0;z.e.es=function(){return this.Z};z.e.zl=function(){return this.cb};z.e.W=function(){return this.cb.value};z.e.Ea=function(a){this.cb.value=a};
z.e.Wq=function(a){z.kf(a)&&(z.Wi(a,"combobox"),z.Xi(a,"autocomplete","list"));this.gc.g(a,"focus",this.fe);this.gc.g(a,"blur",this.Zc);this.cb||(this.Dv.g(a,"keydown",this.iS),z.kf(a)&&Kn(z.Ke(a))==a&&Bs(this,a))};z.e.Vk=function(a){for(var b=0;b<arguments.length;b++)this.Wq(arguments[b])};z.e.Ai=function(a,b){this.cb&&ws(this,a.toString(),b);return!1};z.e.D=function(){z.vs.v.D.call(this);null!=this.Gv&&window.clearTimeout(this.Gv);this.gc.H();delete this.gc;this.Dv.H();this.sb.H();z.Dc(this.na)};
z.e.$b=function(a){switch(a.keyCode){case 40:if(this.Z.rb())return this.gK?ns(this.Z):z.ms(this.Z),a.preventDefault(),!0;if(!this.gm)return this.update(!0),a.preventDefault(),!0;break;case 38:if(this.Z.rb())return this.gK?z.ms(this.Z):ns(this.Z),a.preventDefault(),!0;break;case 9:if(!this.Z.rb()||a.shiftKey||this.ET)this.Z.Fc();else if(this.update(),this.Z.zi()&&this.CT)return a.preventDefault(),!0;break;case 13:if(this.Z.rb()){if(this.update(),this.Z.zi())return a.preventDefault(),a.stopPropagation(),
!0}else this.Z.Fc();break;case 27:if(this.Z.rb())return this.Z.Fc(),a.preventDefault(),a.stopPropagation(),!0;break;case 229:if(!this.Ni)return this.Ni||(this.gc.g(this.cb,"keyup",this.VH),this.gc.g(this.cb,"keypress",this.UH),this.Ni=!0),!0;break;default:this.na&&!this.dK&&(this.na.stop(),this.na.start())}return zs(this,a)};z.e.vs=function(){return!1};z.e.fe=function(a){Bs(this,a.target||null)};z.e.Zc=function(){XF?this.Gv=window.setTimeout((0,z.q)(this.DI,this),0):this.DI()};
z.e.DI=function(){this.cb&&(this.gc.qa(this.sb,"key",this.gp),this.sb.detach(),this.gc.qa(this.cb,"keyup",this.vs),this.gc.qa(this.cb,"mousedown",this.WH),z.A&&this.gc.qa(this.cb,"keypress",this.SH),this.Ni&&Cs(this),this.cb=null,this.na&&(this.na.stop(),this.gc.qa(this.na,"tick",this.lm)),this.Z&&this.Z.ej())};z.e.lm=function(){this.update()};z.e.iS=function(a){this.fe(a)};z.e.gp=function(a){this.UG=a.keyCode;this.Z&&this.$b(a)};z.e.UH=function(){this.Ni&&229!=this.UG&&Cs(this)};
z.e.VH=function(a){this.Ni&&(13==a.keyCode||77==a.keyCode&&a.ctrlKey)&&Cs(this)};z.e.WH=function(a){this.Z&&this.ge(a)};z.e.ge=function(){};z.e.SH=function(a){zs(this,a)};z.e.update=function(a){if(this.cb&&(a||this.W()!=this.Oo)){if(a||!this.IA){a=z.qs(this.cb)[0];var b=this.W();a=ys(this,b)[xs(this,b,a)];a=this.YJ?String(a).replace(this.YJ,""):a;this.Z&&(this.Z.zc=this.cb,this.Z.Op(a,this.W()))}this.Oo=this.W()}this.IA=!1};z.v(z.Ds,z.yc);z.e=z.Ds.prototype;z.e.tH="GET";z.e.uc=void 0;z.e.RP=null;z.e.kz=null;z.e.XA=function(a){this.tH=a};z.e.ka=function(a){this.uc=a};z.e.kW=function(a,b,c){c=z.ue(c.target);var d=[];if(c)try{d=aq(c)}catch(f){}b(a,d)};
z.e.wi=function(a,b,c){var d,f=this.$B;d=new z.oh(this.VB);z.qh(d);d.ie.set("token",a);b=String(b);z.qh(d);d.ie.set("max_matches",b);f=String(Number(f));z.qh(d);d.ie.set("use_similar",f);if(d=d.toString())a=(0,z.q)(this.kW,this,a,c),this.da.bc()&&this.da.abort(),this.kz&&z.od(this.kz),this.kz=z.md(this.da,"success",a),this.da.send(d,this.tH,this.uc,this.RP)};z.e.D=function(){this.da.H();z.Ds.v.D.call(this)};z.v(z.Is,z.F);z.e=z.Is.prototype;z.e.m=function(){return this.h};z.e.rh=function(a){this.lK=a};z.e.Ix=function(){return this.ZC};z.e.vm=function(a,b,c){this.Xb=b;this.Sa=a;this.Ul=-1;this.CJ=(0,z.G)();this.zc=c;this.Af=[];Ms(this)};z.e.Fc=function(){this.ob&&(this.ob=!1,Js(this,!1),0<this.To?(z.Dc(this.Tk),this.Tk=new Bo(this.h,this.To),this.Tk.play()):z.P(this.h,!1))};
z.e.show=function(){this.ob||(this.ob=!0,Js(this,!0),0<this.To?(z.Dc(this.Tk),this.Tk=new vp(this.h,this.To),this.Tk.play()):z.P(this.h,!0))};z.e.U=function(){return this.ob};z.e.ag=function(a){if(-1==a)Ks(this,-1);else for(var b=0;b<this.Sa.length;b++)if(this.Sa[b].id==a){Ks(this,b);break}};
z.e.ha=function(){if(this.zc&&this.xp){var a=this.ZC||this.zc,b;b=this.nU?3:1;this.Ru&&(b^=1);var c=65;this.yJ&&(this.h.style.height="",c|=32);z.Es(a,b,this.h,b^1,null,null,c);this.Ru&&(this.h.style.visibility="visible")}};z.e.Xx=function(){return this.zc||null};z.e.D=function(){this.h&&(z.nd(this.h,"click",this.Jl,!1,this),z.nd(this.h,"mousedown",this.Kl,!1,this),z.nd(this.h,"mouseover",this.FF,!1,this),this.ca.removeNode(this.h),this.h=null,this.ob=!1);z.Dc(this.Tk);this.Ra=null;z.Is.v.D.call(this)};
z.e.TI=function(a,b,c){z.nf(c,a.data.toString())};z.e.Jl=function(a){var b=Qs(this,a.target);0<=b&&this.dispatchEvent({type:z.js,xi:this.Sa[b].id});a.stopPropagation()};z.e.Kl=function(a){a.stopPropagation();a.preventDefault()};z.e.FF=function(a){a=Qs(this,a.target);0<=a&&!(300>(0,z.G)()-this.CJ)&&this.dispatchEvent({type:is,xi:this.Sa[a].id})};z.v(z.Rs,z.hs);z.Rs.prototype.rh=function(a){this.M.rh(a)};z.Rs.prototype.XA=function(a){this.Ld.XA(a)};z.Rs.prototype.ka=function(a){this.Ld.ka(a)};z.v(z.Ss,z.Rs);z.Ss.prototype.defaults={source:"",Ke:10,ZV:!1,filter:null,format:null,Qy:null,delay:300,separator:null,yN:null,multiple:!1,uk:null,WX:null,placeholder:"",ud:null,render:null};z.Ss.prototype.defaults.format=function(a){return function(b,c){return(0,z.bb)(c)&&z.na(b)?z.na(b[0])?z.ob(b[0].slice(1),a,this):b:[]}}(function(a){var b;return(b=YF[this.J.source])||(b=YF[ZF][a[0]])?b(a):a});var ZF="/autocomplete",YF={};
YF[ZF]={topic:function(a){return{type:a[0],name:a[1],url_token:a[2],avatar:a[3],id:a[4],answers:a[6],alias:a[7],raw:a,value:a[4],label:a[1]}},question:function(a){return{type:a[0],title:a[1],id:a[2],url_token:a[3],answers:a[4],is_star:!!a[5],raw:a,label:a[1],value:a[2]}},people:function(a){return{type:a[0],fullname:a[1],url_token:a[2],avatar:a[3],id:a[4],headline:a[5],raw:a,label:a[1],value:a[4]}},search_link:function(a){return{type:a[0],raw:a,label:a[1],value:a[1]}}};
YF["/topic/autocomplete"]=function(a){return{type:a[0],name:a[1],url_token:a[2],avatar:a[3],id:a[4],followers:a[5],alias:a[6],label:a[1]}};YF["/question/autocomplete"]=function(a){return{type:a[0],title:a[1],id:a[2],url_token:a[3],is_duplicated:Boolean(+a[4]),answer_count:a[5],raw:a,label:a[1],value:a[2]}};z.v(Ts,z.vs);Ts.prototype.Zc=z.p;Ts.prototype.$b=z.p;Ts.prototype.Ai=function(){return!1};var Ws;z.v(z.Us,z.Q);z.e=z.Us.prototype;z.e.Uf=null;z.e.TQ=10;z.e.Ol=!1;z.e.B=function(){this.h=this.L().B("INPUT",{type:"text"})};z.e.ga=function(a){z.Us.v.ga.call(this,a);this.Lb||(this.Lb=a.getAttribute("label")||"");Kn(z.Ke(a))==a&&(this.Ol=!0,z.dj(this.m(),this.Lo));Vs()&&(this.m().placeholder=this.Lb);z.Xi(this.m(),"label",this.Lb)};
z.e.C=function(){z.Us.v.C.call(this);var a=new z.zd(this);a.g(this.m(),"focus",this.CF);a.g(this.m(),"blur",this.$x);Vs()?this.S=a:(z.y&&a.g(this.m(),["keypress","keydown","keyup"],this.ZO),a.g(z.Se(z.Ke(this.m())),"load",this.LP),this.S=a,Xs(this));this.Oh();this.m().SQ=this};z.e.Db=function(){z.Us.v.Db.call(this);this.S&&(this.S.H(),this.S=null);this.m().SQ=null};z.e.D=function(){z.Us.v.D.call(this);this.S&&(this.S.H(),this.S=null)};z.e.Lo="label-input-label";
z.e.CF=function(){this.Ol=!0;z.dj(this.m(),this.Lo);if(!Vs()&&!Ys(this)&&!this.cQ){var a=this,b=function(){a.m()&&(a.m().value="")};z.A?z.wd(b,10):b()}};z.e.$x=function(){Vs()||(this.S.qa(this.m(),"click",this.CF),this.Uf=null);this.Ol=!1;this.Oh()};z.e.ZO=function(a){27==a.keyCode&&("keydown"==a.type?this.Uf=this.m().value:"keypress"==a.type?this.m().value=this.Uf:"keyup"==a.type&&(this.Uf=null),a.preventDefault())};z.e.bP=function(){Ys(this)||(this.m().value="",z.wd(this.yO,10,this))};
z.e.yO=function(){Ys(this)||(this.m().value=this.Lb)};z.e.LP=function(){this.Oh()};z.e.hasFocus=function(){return this.Ol};z.e.clear=function(){this.m().value="";null!=this.Uf&&(this.Uf="")};z.e.reset=function(){Ys(this)&&(this.clear(),this.Oh())};z.e.Ea=function(a){null!=this.Uf&&(this.Uf=a);this.m().value=a;this.Oh()};z.e.W=function(){return null!=this.Uf?this.Uf:Ys(this)?this.m().value:""};
z.e.Oh=function(){var a=this.m();Vs()?this.m().placeholder!=this.Lb&&(this.m().placeholder=this.Lb):Xs(this);z.Xi(a,"label",this.Lb);Ys(this)?(a=this.m(),z.dj(a,this.Lo)):(this.cQ||this.Ol||(a=this.m(),z.bj(a,this.Lo)),Vs()||z.wd(this.iU,this.TQ,this))};z.e.Wa=function(a){this.m().disabled=!a;Ep(this.m(),this.Lo+"-disabled",!a)};z.e.isEnabled=function(){return!this.m().disabled};z.e.iU=function(){!this.m()||Ys(this)||this.Ol||(this.m().value=this.Lb)};var sE={},$F=/^\/node\//;window.$.ajaxPrefilter(function(a,b){var c=b.data,d;c&&(d=c.params)&&"object"===window.$.type(d)&&$F.test(b.url)&&(c.params=$p(d),a.data=window.$.param(c))});sE.wF=function(a,b){return window.$.get(b?"/node/AnswerFullVoteInfoV2":"/node/AnswerVoteInfoV2",{params:{answer_id:a}})};sE.eC=function(a,b){return window.$.post("/node/AnswerVoteBarV2",{method:b,params:{answer_id:a}},function(a){a&&a.r&&z.W.alert("\x3cp\x3e"+a.msg+'\x3c/p\x3e\x3cp\x3e\x3ca href\x3d"/question/24752645" target\x3d"_blank"\x3e为什么回答会被建议修改？\x3c/a\x3e\x3c/p\x3e')})};
sE.TA=function(a,b){return window.$.post("/node/AnswerMetaV2",{method:"set_copyright",params:{answer_id:a,is_copyable:Number(b)}})};z.v(dt,z.vs);dt.prototype.Ai=function(a){var b=dt.v.Ai.call(this,a);a.select(this.Z.Xx());return b};z.v(et,z.Ds);et.prototype.GT=["根话题","未归类话题"];et.prototype.Lp=function(a){this.HA=a};et.prototype.wi=function(a,b,c){var d=(0,z.q)(function(a,b){for(var d=[],k,m=0;m<b.length;m++)for(var n=1;n<b[m].length;n++){k=b[m][n];var t=!0;this.ZE&&z.w(this.GT,function(a){k[2]===a&&(t=!1)});t&&d.push(k)}this.HA&&(d=this.HA(d,a));c(a,d)},this);et.v.wi.call(this,a,b,d)};z.v(ft,z.vs);z.e=ft.prototype;
z.e.Ai=function(a){var b=dt.v.Ai.call(this,a),c=this.Z.Xx(),d=this.es();d.kJ=a;d.dispatchEvent("select");c.value="";return b};z.e.Ea=function(){};z.e.update=function(a){var b=z.Ao(this.W());!b||"搜索用户"===b||"搜索话题"===b||"在这里输入问题"===b||z.x(this.Z.nx||[],b)||(b?(0,window.unescape)((0,window.encodeURIComponent)(b)).length:0)<this.uH||b===this.hH?(this.Z.ej(),this.Oo=b):(this.hH=null,this.Z.dispatchEvent({type:aG}),ft.v.update.call(this,a))};
z.e.fe=function(a){this.Z&&z.os(this.Z);a.target!==this.cb&&(this.cb=a.target||null,this.na&&(this.na.start(),this.gc.g(this.na,"tick",this.lm)),this.Oo=this.W(),As(this));this.na&&this.na.start();this.update(!0)};z.e.Zc=function(){this.na&&this.na.stop();this.Z&&this.Z.ej()};
z.e.$b=function(a){if(13===a.keyCode){if(this.Z.rb()){if(this.Z.zi())return a.preventDefault(),a.stopPropagation(),!0;a.preventDefault();a.stopPropagation();this.Z.Xb="";this.Z.Fc();this.update(!0);return!1}a.stopPropagation();a.preventDefault();return!1}ft.v.$b.call(this,a)};z.e.Wq=function(a){ft.v.Wq.call(this,a);this.gc.g(a,"mousedown",function(a){a.stopPropagation();return!0})};z.v(gt,ft);gt.prototype.Ai=function(a){var b=this.es();b.kJ=a;b.dispatchEvent("select");return!1};z.v(z.ht,z.Rs);
var aG="before_update";z.e=z.ht.prototype;z.e.zE=!0;z.e.aU=function(a,b,c){z.Qd(c,function(a){a=Ns(this,a,this.Xb);this.ca.appendChild(this.h,a)},a);z.df(a.h,a.ca.B("div","zh-question-suggest-info",[a=a.ca.B("a",{href:"javascript:;",title:"关闭",name:"close",id:"zh-question-suggest-info-close"},[a.ca.B("span","x-m"),"不是"]),"您想问的是不是下面的问题？"]),0);z.E(a,"click",function(){var a=this.Bf;a.Zc();this.Fc();a.hH=a.W()},!1,this)};
z.e.cU=function(a,b,c){0===c.length?this.Fc():(z.Qd(c,function(a){a=Ns(this,a,this.Xb);this.ca.appendChild(this.h,a)},a),b=a.ca.B("div","zh-question-topic-autocomplete-plaintext",["建议添加的话题",a.ca.B("span","x-m")]),z.df(a.h,b,0),z.pm.qb&&z.E(b,"click",function(){this.Bf.Zc();this.Fc()},!1,this))};z.e.wj=function(){return this.kJ};z.e.Lp=function(a){this.Ld.Lp(a)};z.e.Fc=function(){if(this.zE)return z.ht.v.Fc.call(this)};z.e.zi=function(){return-1===ps(this,this.Tg)?!1:z.ht.v.zi.call(this)};
z.e.ej=function(){z.pm.qb?z.md(window.document,"click",(0,z.q)(this.Fc,this)):z.ht.v.ej.call(this)};z.v(z.it,z.Rj);var jt="view",bG="零一二三四五六七八九十".split("");z.e=z.it.prototype;z.e.w=function(a){this.h=a;this.rg=z.L("zm-tag-editor-labels",this.h);this.Ct&&(this.data=kt(this));lt(this);this.xe();this.fc()};
z.e.Sn=function(){this.Vc||(this.Vc=z.M("div","zm-tag-editor-editor",[this.Qn=z.M("div","zg-section zg-clear"),this.ff=z.M("div","zg-section zm-tag-editor-command-buttons-wrap",[this.nb=z.M("input",{"class":"zg-form-text-input zg-mr15",type:"text"}),z.M("a",{"class":"zg-mr15 zg-btn-blue",href:"#",name:"add",style:"display:none;"},"添加"),this.$E=z.M("a",{href:"#",name:"close"},"完成")]),this.ut=z.M("div",{className:"zm-tag-editor-maxcount zg-section",style:"display:none;"},[z.M("span",{},"最多只能为一个问题绑定 "+
this.tt+" 个话题"),z.M("a",{href:"#",name:"close"},"完成")])]),z.cf(this.Vc,this.rg),this.Ee&&(this.gz=new z.Us(this.Ee),this.gz.w(this.nb),this.nb.title=this.Ee),this.Vg(this.ff))};z.e.Vg=function(a,b){this.ba=new z.ht(b||"/topic/autocomplete",this.nb,null,null,a,!0);this.ba.rh(!0);this.ba.cm=this.Ke;this.ba.Lp(this.xm());this.ba.nx=[this.Ee];this.o().g(this.ba,"select",this.Yo);this.o().g(this.ba,"suggestionsupdate",this.Lv)};z.e.qx=function(a){return z.qb(this.data,function(b){return b[0]===a[1]})};
z.e.xm=function(){return(0,z.q)(function(a,b){return nt(this,mt(this,a),b)},this)};z.e.Lv=function(){1<this.ba.Sa.length&&!this.ba.Sa[0][4]&&z.ms(this.ba)};z.e.fc=function(){this.o().g(this.h,"click",this.Qa);z.Hq&&this.o().g(z.Hq,"anon_change",this.yj)};z.e.yj=function(a){a.mb?z.V.add(this.h,"zm-tag-editor-disabled"):z.V.remove(this.h,"zm-tag-editor-disabled")};
z.e.Qa=function(a){var b=this.Vf(a.target);if(b&&b.name)switch(a.preventDefault(),b.name){case "edit":this.Je(!0);break;case "add":(a=z.Ao(np(this.nb.value)))&&a!==this.nb.title&&this.We("",a);break;case "close":this.Je(!1);break;case "remove":this.aI(b)}};z.e.Je=z.Or(function(a){if(a&&(this.dispatchEvent("start_editing"),!1===this.dispatchEvent("beforeedit")))return;this.status=a?"edit":jt;this.Sn();this.Oe();this.xe();ot(this)},!0);
z.e.aI=function(a){var b=a.id.split("-")[1],c=z.Up(a).innerHTML;this.wt&&this.data.length<=this.wt?z.W.message("请至少绑定"+bG[this.wt]+"个话题"):(this.data=z.nb(this.data,function(a){return b?String(a[3])!==b:a[1]!==c}),this.kp(b))};z.e.kp=function(a){if(!this.ju||!this.ju.bc()){this.ju=new z.Z(!0);var b=new z.uh;b.add("qid",this.pa).add("question_id",this.pa).add("topic_id",a);this.o().Aa(this.ju,"complete",this.xP);this.ju.ajax(this.XT,b.toString())}};
z.e.xP=function(a){a=z.Zn(a.target);a.r?z.W.message(a.msg):(this.dispatchEvent("remove_tag"),lt(this),this.Oe(),ot(this))};z.e.xe=function(){this.status===jt?(z.P(this.rg,!0),this.Vc&&z.P(this.Vc,!1)):(z.P(this.rg,!1),this.Vc&&this.isEnabled&&z.P(this.Vc,!0),this.ut&&z.P(this.ut,!1))};
z.e.We=function(a,b){this.bh||(this.dispatchEvent("add_tag"),this.bh=!0,this.xhr=new z.Z(!0),this.o().Aa(this.xhr,"complete",this.Mv),this.xhr.ajax(this.JL,"qid\x3d"+this.pa+"\x26question_id\x3d"+this.pa+"\x26topic_id\x3d"+a+"\x26topic_text\x3d"+(0,window.encodeURIComponent)(b)))};z.e.Yo=function(){var a="",b="",c=this.ba.wj().slice(1);3<c.length?(a=c[3],b=c[0]):b=c[1];z.qb(this.data,function(c){return c[3]&&String(c[3])===a||c[0]===b})||(a||b)&&this.We(a,b)};
z.e.Mv=function(){this.bh=!1;var a=z.Zn(this.xhr);this.Fm(a);ot(this)};z.e.Fm=function(a){var b=null;a&&a.r?a.notify?z.Rn(a.notify):z.W.message(a.msg):(4<a.length&&z.Rn(a[4]),this.lJ=b=a,this.data.push(b),pt(this),lt(this),this.Oe(),this.nb.value="",this.dispatchEvent("select"))};z.e.hF=function(a){return z.op(a,"nor",!1)};
z.e.Oe=function(){var a=z.ob(this.data,function(a){return['\x3cspan class\x3d"zm-tag-editor-edit-item"\x3e',this.hF(a),a.NV?"":'\x3ca id\x3d"rmid-'+a[3]+'" href\x3d"#" class\x3d"zg-r3px zm-tag-editor-remove-button" name\x3d"remove"\x3e\x3c/a\x3e',"\x3c/span\x3e"].join("")},this);this.Qn.innerHTML=a.join("")};z.e.wj=function(){return this.lJ};z.e.Wa=function(a){this.isEnabled=a;this.status=jt;this.xe()};z.v(z.qt,z.it);z.e=z.qt.prototype;
z.e.w=function(a){if(this.isEnabled=!a.getAttribute("data-disabled"))z.qt.v.w.call(this,a),this.Je(!0),z.P(this.$E,!1)};z.e.Vg=function(a){var b;this.$y&&(b="/topic/autocomplete?no_create\x3dtrue");z.qt.v.Vg.call(this,a,b);this.ba.Ld.ZE=!1};z.e.xm=function(){return(0,z.q)(function(a,b){return z.nb(a,function(a){return 3>=a.length?!1:z.uo(this.data,function(d){return d[1]===a[2]?b===a[1]?(a[0]="plain_text",a[1]='"'+b+'"已在现有列表中',!0):!1:!0})},this)},this)};
z.e.We=function(a,b){this.bh||(this.bh=!0,this.xhr=new z.Z(!0),this.o().Aa(this.xhr,"complete",this.Mv),a||(a=-1),this.$y?this.xhr.ajax("/topic/add","tid\x3d"+this.Ff+"\x26pid\x3d"+a+"\x26topic_text\x3d"+(0,window.encodeURIComponent)(b)):this.xhr.ajax("/topic/add","tid\x3d"+this.Ff+"\x26cid\x3d"+a+"\x26topic_text\x3d"+(0,window.encodeURIComponent)(b)))};z.e.hF=function(a){return'\x3ca class\x3d"nor" href\x3d"/topic/'+a[1]+'/organize"\x3e'+a[0]+"\x3c/a\x3e"};
z.e.kp=function(a){if(!this.da||!this.da.bc()){var b=new z.Z(!0);this.o().g(b,"success",function(){var c=z.Zn(b);c.r?z.W.message(c.msg):(lt(this),this.Oe(),this.dispatchEvent({type:"remove_tag",data:{id:a}}))});this.$y?b.ajax(this.SI,"cid\x3d"+this.Ff+"\x26pid\x3d"+a):b.ajax(this.SI,"pid\x3d"+this.Ff+"\x26cid\x3d"+a);this.da=b}};z.v(rt,z.it);z.e=rt.prototype;
z.e.w=function(a){rt.v.w.call(this,a);this.Je(!0);z.w(z.Me(window.document,"a",null,a),function(a){z.P(a,!1)});this.o().g(this.nb,"focus",function(){this.Eq.val()&&!this.OE&&(this.OE=!0,this.Vu());this.placeholder&&(this.placeholder.wk("搜索话题"),Qn(this.placeholder))});this.OG=new Pq;this.OG.attach(this.nb);this.o().g(this.OG,"key",function(a){8===a.keyCode&&(1===this.nb.value.length&&(this.qD=!0,this.xM=(0,window.setTimeout)((0,z.q)(function(){this.qD=!1;(0,window.clearTimeout)(this.xM)},this))),this.nb.value.length||
this.qD||(this.data.pop(),this.Oe(),this.dispatchEvent("remove_tag")))});this.kV=new z.Pk(this.Vu,2E3,this);this.o().g(this.Eq[0],"keyup",function(){var a=this.Eq.val();this.Hu!==a&&(this.kV.fire(),this.Hu=a)});this.o().g(this,["remove_tag","add_tag"],function(){st(this);0<this.data.length&&this.placeholder&&(this.placeholder.wk("搜索话题"),Qn(this.placeholder));5<=this.data.length?(this.Wa(!1),this.yq.show(),this.placeholder&&this.placeholder.hide(),this.sv.hide()):(this.Wa(!0),this.yq.hide(),this.placeholder&&
this.placeholder.show(),this.sv.show(),this.yq.removeClass("light"))})};z.e.qx=function(a){return z.qb(this.data,function(b){return b[1]===a[1]})};z.e.kp=function(){this.dispatchEvent("remove_tag");lt(this);this.Oe()};
z.e.Sn=function(){this.Vc||(rt.v.Sn.call(this),z.V.add(this.Vc,"zg-clear"),z.V.set(this.Qn,"zg-inline"),z.V.add(this.ff,"zg-left"),z.V.remove(this.ff,"zg-section"),z.V.set(this.nb,"zu-question-suggest-topic-input"),z.V.add(this.nb,"label-input-label"),this.Gq=(0,window.$)("\x3cdiv class\x3d'sug-con zg-clear' style\x3d'display:none;'\x3e\x3c/div\x3e").append("\x3cspan class\x3d'zg-gray-normal zg-left tip'\x3e推荐添加\x3c/span\x3e").append(this.WK=(0,window.$)("\x3cspan class\x3d'sugs zg-clear zg-inline'\x3e\x3c/span\x3e")).append(this.tv=
(0,window.$)('\x3cimg data-src\x3d"'+z.pm.oB+'/img/spinner2.gif"\x3e')),this.Gq.insertAfter(this.h),this.Gq.on("click","a[name\x3d'add']",(0,z.q)(function(a){a=a.currentTarget;5>this.data.length?this.We((0,window.$)(a).attr("data-id"),(0,window.$)(a).attr("data-text")):this.yq.addClass("light")},this)),this.sv=(0,window.$)('\x3clabel for\x3d"topic" class\x3d"zg-icon icon-magnify"\x3e\x3c/label\x3e'),(0,window.$)(this.ff).prepend(this.sv),this.placeholder=new z.qk(this.nb,{text:"搜索话题",lD:!0}),(0,window.$)(this.ff).append(this.yq=
(0,window.$)("\x3clabel class\x3d'err-tip' style\x3d'display:none;'\x3e最多添加五个话题\x3c/label\x3e")),this.o().g(this.Vc,"click",this.IV))};z.e.IV=function(a){z.gp(this.h,a.target)||(a=z.L("zu-question-suggest-topic-input",this.Vc),z.Lg(a)&&a.focus())};
z.e.Vu=function(){this.OE&&(this.Hu=this.Eq.val(),8>this.Hu.length?(this.Zp=[],st(this)):(this.$p&&this.$p.abort(),this.$p=new z.Z(!1),this.o().g(this.$p,"success",this.LS),this.$p.ajax("/topic-question/autocomplete?token\x3d"+this.Hu+"\x26max_matches\x3d5\x26use_similar\x3d0","GET"),this.tv.attr("src",this.tv.attr("data-src")).show()))};z.e.LS=function(){this.Zp=z.Zn(this.$p)[0].slice(1);st(this)};
z.e.Oe=function(){var a=[];z.w(this.data,function(b){a.push(['\x3cdiv class\x3d"zm-tag-editor-edit-item"\x3e\x3cspan\x3e',b[0],'\x3c/span\x3e\x3ca id\x3d"rmid-',b[3],'" href\x3d"#" class\x3d"zg-r3px zm-tag-editor-remove-button" name\x3d"remove"\x3e\x3c/a\x3e\x3c/div\x3e'].join(""))},this);this.Qn.innerHTML=a.join("")};z.e.reset=function(){this.data=[];lt(this);this.Oe()};
z.e.aI=function(a){var b=a.id.split("-")[1],c=z.Up(a).innerHTML;this.data=z.nb(this.data,function(a){return b?String(a[3])!==b:a[1]!==c});this.kp(b)};z.e.We=function(a,b){var c=[b,b,"",a];this.lJ=c;this.data.push(c);lt(this);this.Oe();this.nb.value="";this.dispatchEvent("select");this.dispatchEvent("add_tag")};z.e.Wa=function(a){this.nb&&z.P(this.nb,a)};
z.e.trackEvent=function(){if(this.Zp){var a=0,b=this.data.length;z.w(this.data,function(b){z.w(this.Zp,function(d){b[1]===d[1]&&a++},this)},this);z.X.fb({type:"ga_click_add_question",data:{Iu:a,total:b}})}};z.v(z.tt,z.qt);z.tt.prototype.We=function(a){this.bh||(this.bh=!0,this.xhr=new z.Z(!0),this.o().Aa(this.xhr,"complete",this.Mv),this.xhr.ajax(this.uD,"tid\x3d"+a+"\x26method\x3dadd"))};
z.tt.prototype.kp=function(a){this.bh||(this.bh=!0,this.xhr=new z.Z(!0),this.o().g(this.xhr,"complete",function(){lt(this);this.Oe();this.bh=!1}),this.xhr.ajax(this.uD,"tid\x3d"+a+"\x26method\x3ddel"))};z.v(z.ut,z.yc);z.ut.prototype.restore=function(a){var b=this.nu();a||this.H();return b};z.v(z.vt,z.Nd);z.e=z.vt.prototype;z.e.setPosition=function(a,b,c){if(this.node=a)this.Vb=z.qa(b)?b:1!=this.node.nodeType?0:this.Lc?-1:1;z.qa(c)&&(this.depth=c)};z.e.Gg=function(a){this.node=a.node;this.Vb=a.Vb;this.depth=a.depth;this.Lc=a.Lc;this.sr=a.sr};z.e.clone=function(){return new z.vt(this.node,this.Lc,!this.sr,this.Vb,this.depth)};z.e.Sp=z.l(30);
z.e.next=function(){var a;if(this.xk){if(!this.node||this.sr&&0==this.depth)throw z.Pd;a=this.node;var b=this.Lc?-1:1;if(this.Vb==b){var c=this.Lc?a.lastChild:a.firstChild;c?this.setPosition(c):this.setPosition(a,-1*b)}else(c=this.Lc?a.previousSibling:a.nextSibling)?this.setPosition(c):this.setPosition(a.parentNode,-1*b);this.depth+=this.Vb*(this.Lc?-1:1)}else this.xk=!0;a=this.node;if(!this.node)throw z.Pd;return a};z.e.$l=function(){return this.xk};
z.e.equals=function(a){return a.node==this.node&&(!this.node||a.Vb==this.Vb)};z.e.splice=function(a){var b=this.node,c=this.Lc?1:-1;this.Vb==c&&(this.Vb=-1*c,this.depth+=this.Vb*(this.Lc?-1:1));this.Lc=!this.Lc;z.vt.prototype.next.call(this);this.Lc=!this.Lc;for(var c=z.oa(arguments[0])?arguments[0]:arguments,d=c.length-1;0<=d;d--)z.cf(c[d],b);z.N(b)};z.e=z.wt.prototype;z.e.Qb=function(){var a=this.vc();return 1==a.nodeType?a:a.parentNode};z.e.Yg=function(){return!1};z.e.wa=function(){return z.Ke(z.A?this.vc():this.Y())};z.e.Va=function(){return z.Se(this.wa())};z.e.containsNode=function(a,b){return this.Fg(z.tu(a),b)};z.e.mg=z.l(32);z.v(Dt,z.vt);z.v(z.Et,z.wt);z.Et.prototype.Fg=function(a,b){var c=z.yt(this),d=z.yt(a);return(b?z.qb:z.uo)(d,function(a){return z.qb(c,function(c){return c.Fg(a,b)})})};z.Et.prototype.insertNode=function(a,b){b?z.bf(a,this.Y()):z.cf(a,this.la());return a};z.Et.prototype.uh=z.l(49);z.v(z.Ft,Dt);z.e=z.Ft.prototype;z.e.js=function(){return 3!=this.node.nodeType?-1:this.node==this.Ba?this.Fa:0};z.e.fs=function(){return 3!=this.node.nodeType?-1:this.node==this.ua?this.Da:this.node.nodeValue.length};z.e.Y=function(){return this.Ba};z.e.la=function(){return this.ua};z.e.Ho=function(){return this.$l()&&this.node==this.ua&&(!this.Da||1!=this.Vb)};z.e.next=function(){if(this.Ho())throw z.Pd;return z.Ft.v.next.call(this)};z.e.Sp=z.l(29);
z.e.Gg=function(a){this.Ba=a.Ba;this.ua=a.ua;this.Fa=a.Fa;this.Da=a.Da;this.vf=a.vf;z.Ft.v.Gg.call(this,a)};z.e.clone=function(){var a=new z.Ft(this.Ba,this.Fa,this.ua,this.Da,this.vf);a.Gg(this);return a};z.e=Gt.prototype;z.e.$i="";z.e.set=function(a){this.$i=""+a};z.e.append=function(a,b,c){this.$i+=a;if(null!=b)for(var d=1;d<arguments.length;d++)this.$i+=arguments[d];return this};z.e.clear=function(){this.$i=""};z.e.toString=function(){return this.$i};z.e=Ht.prototype;z.e.Wx=function(){return It(this,!0)};z.e.Mx=function(){return It(this,!1)};z.e.Fg=function(a,b){var c=b&&!a.isCollapsed(),d=a.O;try{return c?0<=this.ye(d,0,1)&&0>=this.ye(d,1,0):0<=this.ye(d,0,0)&&0>=this.ye(d,1,1)}catch(f){if(!z.A)throw f;return!1}};z.e.containsNode=function(a,b){return this.Fg(St(a),b)};
z.e.bo=function(){var a=new Gt;z.Qd(this,function(b,c,d){3==b.nodeType?a.append(z.Oa(b.nodeValue.substring(d.js(),d.fs()))):1==b.nodeType&&(-1==d.Vb?z.Ze(b)&&a.append("\x3c/"+b.tagName+"\x3e"):(c=b.cloneNode(!1),c=z.Rp(c),z.A&&"LI"==b.tagName?a.append(c):(b=c.lastIndexOf("\x3c"),a.append(b?c.substr(0,b):c))))},this);return a.toString()};z.e.hd=function(){return new z.Ft(this.Y(),this.xa(),this.la(),this.La())};z.v(z.Jt,Ht);z.e=z.Jt.prototype;z.e.clone=function(){return new this.constructor(this.O.cloneRange())};z.e.vc=function(){return this.O.commonAncestorContainer};z.e.Y=function(){return this.O.startContainer};z.e.xa=function(){return this.O.startOffset};z.e.la=function(){return this.O.endContainer};z.e.La=function(){return this.O.endOffset};
z.e.ye=function(a,b,c){return this.O.compareBoundaryPoints(1==c?1==b?z.r.Range.START_TO_START:z.r.Range.START_TO_END:1==b?z.r.Range.END_TO_START:z.r.Range.END_TO_END,a)};z.e.isCollapsed=function(){return this.O.collapsed};z.e.Kd=function(){return this.O.toString()};
z.e.$f=function(){var a=z.H(this.O.startContainer).B("DIV");a.appendChild(this.O.cloneContents());a=a.innerHTML;if(z.Ka(a,"\x3c")||!this.isCollapsed()&&!z.Wa(a,"\x3c"))return a;var b=this.vc(),b=1==b.nodeType?b:b.parentNode;return z.Rp(b.cloneNode(!1)).replace("\x3e","\x3e"+a)};z.e.select=function(a){var b=z.Se(z.Ke(this.Y()));this.Dp(b.getSelection(),a)};z.e.Dp=function(a){a.removeAllRanges();a.addRange(this.O)};z.e.bd=z.l(37);z.e.surroundContents=function(a){this.O.surroundContents(a);return a};
z.e.insertNode=function(a,b){var c=this.O.cloneRange();c.collapse(b);c.insertNode(a);c.detach();return a};z.e.uh=z.l(48);z.e.collapse=function(a){this.O.collapse(a)};z.v(Nt,z.Jt);Nt.prototype.Dp=function(a,b){!b||this.isCollapsed()?Nt.v.Dp.call(this,a,b):(a.collapse(this.la(),this.La()),a.extend(this.Y(),this.xa()))};z.v(z.Ot,Ht);z.e=z.Ot.prototype;z.e.clone=function(){var a=new z.Ot(this.O.duplicate(),this.Mr);a.kg=this.kg;a.Ba=this.Ba;a.ua=this.ua;return a};z.e.Ed=function(){this.kg=this.Ba=this.ua=null;this.Fa=this.Da=-1};
z.e.vc=function(){if(!this.kg){var a=this.O.text,b=this.O.duplicate(),c=a.replace(/ +$/,"");(c=a.length-c.length)&&b.moveEnd("character",-c);c=b.parentElement();b=z.uq(b.htmlText).length;if(this.isCollapsed()&&0<b)return this.kg=c;for(;b>z.uq(c.outerHTML).length;)c=c.parentNode;for(;1==c.childNodes.length&&c.innerText==Ut(c.firstChild)&&Lt(c.firstChild);)c=c.firstChild;0==a.length&&(c=Qt(this,c));this.kg=c}return this.kg};
z.e.Y=function(){this.Ba||(this.Ba=Rt(this,1),this.isCollapsed()&&(this.ua=this.Ba));return this.Ba};z.e.xa=function(){0>this.Fa&&(this.Fa=Tt(this,1),this.isCollapsed()&&(this.Da=this.Fa));return this.Fa};z.e.la=function(){if(this.isCollapsed())return this.Y();this.ua||(this.ua=Rt(this,0));return this.ua};z.e.La=function(){if(this.isCollapsed())return this.xa();0>this.Da&&(this.Da=Tt(this,0),this.isCollapsed()&&(this.Fa=this.Da));return this.Da};
z.e.ye=function(a,b,c){return this.O.compareEndPoints((1==b?"Start":"End")+"To"+(1==c?"Start":"End"),a)};z.e.cg=z.l(41);z.e.isCollapsed=function(){return 0==this.O.compareEndPoints("StartToEnd",this.O)};z.e.Kd=function(){return this.O.text};z.e.$f=function(){return this.O.htmlText};z.e.select=function(){this.O.select()};z.e.bd=z.l(36);z.e.surroundContents=function(a){z.N(a);a.innerHTML=this.O.htmlText;(a=Vt(this.O,a))&&this.O.moveToElementText(a);this.Ed();return a};
z.e.insertNode=function(a,b){var c=z.Wt(this.O.duplicate(),a,b);this.Ed();return c};z.e.uh=z.l(47);z.e.collapse=function(a){this.O.collapse(a);a?(this.ua=this.Ba,this.Da=this.Fa):(this.Ba=this.ua,this.Fa=this.Da)};z.v(Xt,z.Jt);Xt.prototype.Dp=function(a){a.collapse(this.Y(),this.xa());this.la()==this.Y()&&this.La()==this.xa()||a.extend(this.la(),this.La());0==a.rangeCount&&a.addRange(this.O)};z.v(Yt,z.Jt);Yt.prototype.ye=function(a,b,c){return z.D("528")?Yt.v.ye.call(this,a,b,c):this.O.compareBoundaryPoints(1==c?1==b?z.r.Range.START_TO_START:z.r.Range.END_TO_START:1==b?z.r.Range.START_TO_END:z.r.Range.END_TO_END,a)};Yt.prototype.Dp=function(a,b){b?a.setBaseAndExtent(this.la(),this.La(),this.Y(),this.xa()):a.setBaseAndExtent(this.Y(),this.xa(),this.la(),this.La())};z.v(z.$t,z.wt);z.e=z.$t.prototype;z.e.clone=function(){var a=new z.$t;a.Kh=this.Kh&&this.Kh.clone();a.Ba=this.Ba;a.Fa=this.Fa;a.ua=this.ua;a.Da=this.Da;a.vf=this.vf;return a};z.e.gi=function(){return"text"};z.e.de=function(){return z.du(this).O};z.e.Ed=function(){this.Ba=this.Fa=this.ua=this.Da=null};z.e.xj=function(){return 1};z.e.Be=function(){return this};z.e.vc=function(){return z.du(this).vc()};z.e.Y=function(){return this.Ba||(this.Ba=z.du(this).Y())};
z.e.xa=function(){return null!=this.Fa?this.Fa:this.Fa=z.du(this).xa()};z.e.Wx=function(){return z.du(this).Wx()};z.e.la=function(){return this.ua||(this.ua=z.du(this).la())};z.e.La=function(){return null!=this.Da?this.Da:this.Da=z.du(this).La()};z.e.Mx=function(){return z.du(this).Mx()};z.e.Yg=function(){return this.vf};z.e.Fg=function(a,b){var c=a.gi();return"text"==c?z.du(this).Fg(z.du(a),b):"control"==c?(c=a.bi(),(b?z.qb:z.uo)(c,function(a){return this.containsNode(a,b)},this)):!1};z.e.cg=z.l(40);
z.e.isCollapsed=function(){return z.du(this).isCollapsed()};z.e.Kd=function(){return z.du(this).Kd()};z.e.bo=function(){return z.du(this).bo()};z.e.$f=function(){return z.du(this).$f()};z.e.hd=function(){return new z.Ft(this.Y(),this.xa(),this.la(),this.La())};z.e.select=function(){z.du(this).select(this.vf)};z.e.bd=z.l(35);z.e.surroundContents=function(a){a=z.du(this).surroundContents(a);this.Ed();return a};z.e.insertNode=function(a,b){var c=z.du(this).insertNode(a,b);this.Ed();return c};
z.e.uh=z.l(46);z.e.JA=function(){return new eu(this)};z.e.collapse=function(a){a=this.Yg()?!a:a;this.Kh&&this.Kh.collapse(a);a?(this.ua=this.Ba,this.Da=this.Fa):(this.Ba=this.ua,this.Fa=this.Da);this.vf=!1};z.v(eu,z.ut);eu.prototype.nu=function(){return z.bu(this.$C,this.fM,this.cF,this.bO)};eu.prototype.D=function(){eu.v.D.call(this);this.cF=this.$C=null};z.v(z.fu,z.Et);z.e=z.fu.prototype;z.e.Ed=function(){this.Tp=this.eb=null};z.e.clone=function(){return hu.apply(this,this.bi())};z.e.gi=function(){return"control"};z.e.de=function(){return this.O||window.document.body.createControlRange()};z.e.xj=function(){return this.O?this.O.length:0};z.e.Be=function(a){a=this.O.item(a);return au(St(a),void 0)};z.e.vc=function(){return z.Sp.apply(null,this.bi())};z.e.Y=function(){return iu(this)[0]};z.e.xa=function(){return 0};
z.e.la=function(){var a=iu(this),b=z.lb(a);return z.rb(a,function(a){return z.mf(a,b)})};z.e.La=function(){return this.la().childNodes.length};z.e.bi=function(){if(!this.eb&&(this.eb=[],this.O))for(var a=0;a<this.O.length;a++)this.eb.push(this.O.item(a));return this.eb};z.e.cg=z.l(39);z.e.isCollapsed=function(){return!this.O||!this.O.length};z.e.Kd=function(){return""};z.e.bo=function(){return z.ob(iu(this),z.Rp).join("")};z.e.$f=function(){return this.bo()};z.e.hd=function(){return new ku(this)};
z.e.select=function(){this.O&&this.O.select()};z.e.bd=z.l(34);z.e.mg=z.l(31);z.e.JA=function(){return new ju(this)};z.e.collapse=function(){this.O=null;this.Ed()};z.v(ju,z.ut);ju.prototype.nu=function(){for(var a=(this.eb.length?z.Ke(this.eb[0]):window.document).body.createControlRange(),b=0,c=this.eb.length;b<c;b++)a.addElement(this.eb[b]);return gu(a)};ju.prototype.D=function(){ju.v.D.call(this);delete this.eb};z.v(ku,Dt);z.e=ku.prototype;z.e.js=function(){return 0};z.e.fs=function(){return 0};
z.e.Y=function(){return this.Ba};z.e.la=function(){return this.ua};z.e.Ho=function(){return!this.depth&&!this.eb.length};z.e.next=function(){if(this.Ho())throw z.Pd;if(!this.depth){var a=this.eb.shift();this.setPosition(a,1,1);return a}return ku.v.next.call(this)};z.e.Gg=function(a){this.eb=a.eb;this.Ba=a.Ba;this.ua=a.ua;ku.v.Gg.call(this,a)};z.e.clone=function(){var a=new ku(null);a.Gg(this);return a};z.v(z.lu,z.Et);z.e=z.lu.prototype;z.e.Ed=function(){this.tm=[];this.tr=this.Mm=null};z.e.clone=function(){var a=this.Lf,b=new z.lu;b.Lf=z.wb(a);return b};z.e.gi=function(){return"mutli"};z.e.de=function(){return this.Lf[0]};z.e.xj=function(){return this.Lf.length};z.e.Be=function(a){this.tm[a]||(this.tm[a]=au(Zt(this.Lf[a]),void 0));return this.tm[a]};z.e.vc=function(){if(!this.tr){for(var a=[],b=0,c=this.xj();b<c;b++)a.push(this.Be(b).vc());this.tr=z.Sp.apply(null,a)}return this.tr};z.e.Y=function(){return nu(this)[0].Y()};
z.e.xa=function(){return nu(this)[0].xa()};z.e.la=function(){return z.lb(nu(this)).la()};z.e.La=function(){return z.lb(nu(this)).La()};z.e.cg=z.l(38);z.e.isCollapsed=function(){return 0==this.Lf.length||1==this.Lf.length&&this.Be(0).isCollapsed()};z.e.Kd=function(){return z.ob(z.yt(this),function(a){return a.Kd()}).join("")};z.e.bo=function(){return this.$f()};z.e.$f=function(){return z.ob(z.yt(this),function(a){return a.$f()}).join("")};z.e.hd=function(){return new pu(this)};
z.e.select=function(){var a=xt(this.Va());a.removeAllRanges();for(var b=0,c=this.xj();b<c;b++)a.addRange(this.Be(b).de())};z.e.bd=z.l(33);z.e.JA=function(){return new ou(this)};z.e.collapse=function(a){if(!this.isCollapsed()){var b=a?this.Be(0):this.Be(this.xj()-1);this.Ed();b.collapse(a);this.tm=[b];this.Mm=[b];this.Lf=[b.de()]}};z.v(ou,z.ut);ou.prototype.nu=function(){var a=z.ob(this.KA,function(a){return a.restore()});return mu(a)};
ou.prototype.D=function(){ou.v.D.call(this);z.w(this.KA,function(a){a.H()});delete this.KA};z.v(pu,Dt);z.e=pu.prototype;z.e.js=function(){return this.dg[this.il].js()};z.e.fs=function(){return this.dg[this.il].fs()};z.e.Y=function(){return this.dg[0].Y()};z.e.la=function(){return z.lb(this.dg).la()};z.e.Ho=function(){return this.dg[this.il].Ho()};
z.e.next=function(){try{var a=this.dg[this.il],b=a.next();this.setPosition(a.node,a.Vb,a.depth);return b}catch(c){if(c!==z.Pd||this.dg.length-1==this.il)throw c;this.il++;return this.next()}};z.e.Gg=function(a){this.dg=z.wb(a.dg);pu.v.Gg.call(this,a)};z.e.clone=function(){var a=new pu(null);a.Gg(this);return a};z.v(z.wu,z.Nd);z.wu.prototype.next=function(){var a=this.DH;if(!a)throw z.Pd;this.DH=this.lU?a.previousSibling:a.nextSibling;return a};z.v(xu,z.wu);var Cu={IMG:!0,IFRAME:!0,EMBED:!0};var cG=function(){if(z.Sl)return Fu(/Firefox\/([0-9.]+)/);if(z.A||z.Hc||z.vg)return z.Kc;if(z.Jf)return Fu(/Chrome\/([0-9.]+)/);if(z.Ul&&!(z.Fc()||z.Bb("iPad")||z.Bb("iPod")))return Fu(/Version\/([0-9.]+)/);if(z.Oi||z.Pj){var a;if(a=/Version\/(\S+).*Mobile\/(\S+)/.exec(z.Cb))return a[1]+"."+a[2]}else if(z.Tl)return(a=Fu(/Android\s+([0-9.]+)/))?a:Fu(/Version\/([0-9.]+)/);return""}();var fG,gG,iG,jz,nG,oG;z.dG=z.A&&!(9<=z.Ug);z.eG=z.y||z.B||z.vg||z.Hc||z.A&&9<=z.Ug;z.az=z.A||z.B||z.vg||z.Hc||!1;fG=z.B||!1;gG=z.A||z.B||z.vg;z.hG=z.y||z.B;z.B&&z.D("534.16");iG=z.y&&!0;z.jG=z.y||z.B||z.vg;z.kG=z.y||z.vg;z.A&&z.D("7.0");z.lG=z.y&&z.D("1.8")||z.B||z.vg;jz=z.B||z.A&&z.D("9");z.A||z.Hc||z.vg||z.y&&z.D("1.9");z.mG=z.y||z.B&&!z.D("527");nG=z.A||z.vg;oG=z.A||z.Hc||z.B&&z.D("525");z.pG=z.B&&!z.D("531");z.qG=z.B&&!z.D("528");z.y&&z.D("1.9")||z.A||z.Hc||z.vg||z.B&&z.D("531");
z.rG=z.A||z.Hc||z.y||z.vg;z.sG=z.y||z.B&&!z.D("526");z.tG=z.A||z.vg;z.uG=!z.A&&!z.vg;z.vG=!z.B&&!z.Hc;z.Jf&&0<=z.ab(cG,"4")||z.Ul&&z.D("533")||z.y&&z.D("2.0")||z.A&&z.D("10");z.wG=z.vg&&z.D("11.10");z.Jf&&z.ab(cG,"12");z.v(z.Lu,z.Q);z.xG=0;z.Mu=[];z.Lu.prototype.mc=null;z.Lu.prototype.wl=!1;z.Lu.prototype.Ot=0;var yG=z.A?"styleFloat":"cssFloat",Qu=["position","top","left","width",yG],Ru=["position","top","left","display",yG,"marginTop","marginLeft","marginRight","marginBottom"];z.e=z.Lu.prototype;z.e.B=function(){z.Lu.v.B.call(this);this.ga(this.m())};z.e.ga=function(a){z.Lu.v.ga.call(this,a);z.V.add(a,"goog-scrollfloater")};
z.e.C=function(){z.Lu.v.C.call(this);this.gw=z.Qg(window.document.body).top-2;this.mc||(this.mc=this.L().B("div",{style:"visibility:hidden"}));this.Ot=z.po(this.m()).y;z.Nu(this,this.su);var a=this.cq=new z.Pk(this.oq,150,this);this.o().g(window,"scroll",(0,z.q)(a.fire,a));this.o().g(window,"resize",z.$o(150,this.my))};z.e.D=function(){z.Lu.v.D.call(this);z.ub(z.Mu,this);this.cq.H();this.Wy&&(z.xG-=this.hE);delete this.mc};z.e.oq=function(){this.su&&(z.wf(this.L()).y+this.gw>this.Ot?Pu(this):z.Ou(this))};
z.e.xp=function(){var a=this.m(),b=this.gw;!this.Wy&&0<z.xG&&(b+=z.xG);a.style.top=b+"px"};z.e.my=function(){z.Ou(this);this.Ot=z.po(this.m()).y;this.oq()};z.v(Su,z.Lu);Su.prototype.oq=function(){var a=Tu(this.tag);if(this.su&&(!a||a===this)){var a=this.QT.getBoundingClientRect(),b=this.gw+z.xG,c=b+this.eA;a.top<b&&a.bottom>c?Pu(this):z.Ou(this)}};z.la(Uu);Uu.prototype.bf=function(a,b,c){z.pg("richtexteditor",function(){var d=window.ZH.createRichTextEditor(a,b),f=d[0],d=d[1];c&&c(f,d)})};Vu.prototype.defaults={fU:[],CA:[],WM:!0};var Xu="data-tip class style id bgcolor color size width height".split(" ");Vu.prototype.Bg=function(){var a=this;if(this.J.WM)this.X.on("paste",function(){(0,window.setTimeout)(function(){Yu(a.X,Zu(a))})})};z.v(z.$u,z.F);z.e=z.$u.prototype;z.e.defaults={an:{Ke:6,content:"",method:"GET",source:"/people/autocomplete"},uT:"mention-popup",lk:window.document.body,PC:"activated"};z.e.D=function(){this.Er();z.N(this.h);this.h=null;z.$u.v.D.call(this)};z.e.nw=function(){var a=this.h=z.Xe(this.JV);this.pp=a.getElementsByTagName("input")[0];a.className=this.J.uT;a.style.display="none";this.J.lk.appendChild(a)};z.e.vc=function(){return this.J.lk};z.e.JV='\x3cdiv\x3e\x3cdiv class\x3d"writing-bg"\x3e\x3cinput\x3e\x3c/div\x3e\x3cdiv class\x3d"tip"\x3e想用 @ 提到谁？\x3c/div\x3e\x3c/div\x3e';
z.e.template=(0,z.jn)('\x3c% if (data.id) { %\x3e\x3cimg class\x3d"avatar" src\x3d"\x3c%\x3davatar%\x3e"\x3e\x3cdiv class\x3d"body"\x3e\x3cspan class\x3d"name"\x3e\x3c%\x3dlabel%\x3e\x3c/span\x3e\x3cspan class\x3d"bio"\x3e\x3c%\x3dheadline%\x3e\x3c/span\x3e\x3c/div\x3e\x3c% } %\x3e');z.e.rb=function(){return z.Lg(this.h)};z.e.open=function(){this.rb()||(z.P(this.h,!0),this.pp.focus(),this.Bg(),this.dispatchEvent("open"))};
z.e.close=function(){this.rb()&&(z.P(this.h,!1),z.V.remove(this.h,this.J.PC),this.pp.value="",this.pp.blur(),this.Er(),this.dispatchEvent("close"))};z.e.NH=function(a){this.rb()&&!z.mf(this.h,a.target)&&av(this,a)};z.e.fp=function(a){var b=a.keyCode,c=this.pp;if(27===b||c===a.target&&""===c.value&&(8===b||32===b))av(this,a),a.preventDefault(),a.stopPropagation()};z.e.Bg=function(){z.E(window.document,"click",this.NH,!1,this);z.E(this.h,"keydown",this.fp,!1,this)};
z.e.Er=function(){z.nd(window.document,"click",this.NH,!1,this);z.nd(this.h,"keydown",this.fp,!1,this)};
z.e.Vg=function(){var a=this,b=this.J.an,c=new z.Ss(this.pp,{uk:this.h,Ke:b.Ke,source:b.source,select:function(b){(0,window.setTimeout)(function(){a.close();a.dispatchEvent({type:"select",data:{sT:b}})});return""},ud:function(b,c,g){g.innerHTML=a.template(b.data)}});c.XA(b.method);c.ka(b.content);c.addEventListener("suggestionsupdate",function(){z.V.enable(this.h,this.J.PC,c.rb())},!1,this);this.Z=c};z.e.position=function(a){z.Ag(this.h,a)};z.e.Ne=z.l(42);z.v(bv,z.F);var ev=!!window.getSelection;bv.prototype.defaults={an:{},lk:window.document.body,Vj:"member_mention",Is:"mention-holder",position:function(a,b){a.x+=b.width+7;a.y-=5;z.A&&7<z.Kc&&(a.y+=b.height/2-9)}};var lv=z.Hb({TW:"member_mention"});bv.prototype.m=function(){return this.input};
bv.prototype.Bg=function(){var a=this.lg;z.E(a,"cancel",function(a){var c=cv(this);a=a.data.originalEvent;c&&"click"!==a.type&&("keydown"===a.type&&32===a.keyCode&&(c=c.parentNode.insertBefore(window.document.createTextNode(" "),c.nextSibling)),dv(this,c))},!1,this);z.E(a,"select",function(a){var c=a.data.sT;a=z.L(this.J.Is,this.input);var c=this.zr(c),d=a.previousSibling,f=window.document.createTextNode(" ");z.Wp(c,a);z.cf(f,c);d&&3===d.nodeType&&!z.Yo(z.pf(d)," ")&&z.bf(window.document.createTextNode(" "),
c);dv(this,f)},!1,this);z.E(this.input,"click",function(){a.rb()&&cv(this)},!1,this);z.E(this.input,"keydown",function(a){var c;if(8===a.keyCode&&(c=z.qu())){a=c.Y();var d=c.la(),f=c.xa();c=c.La();var g=!1;kv(a.parentNode)&&(f=0,g=!0);kv(d.parentNode)&&(c=d.length,g=!0);g&&z.bu(a,f,d,c).select()}},!1,this);z.E(this.input,z.Vc||z.Oi||z.Pj?"keypress":"keyup",function(a){function c(a,b){if(3!==a.nodeType||"@"===a.nodeValue&&fv(a.previousSibling)||fv(a.parentNode))return!1;var c=a.nodeValue,d=b-1;if("@"!==
c.slice(d,d+1))return!1;var f=c;0<=d&&d<c.length&&(f=c.substr(0,d)+c.substr(d+1,c.length-d-1));a.nodeValue=f;return!0}if("keypress"!==a.type||"@"===String.fromCharCode(a.charCode)){var d,f,g,h;if("keyup"===a.type){if(50!==a.keyCode)return;if(ev){d=window.getSelection();g=d.anchorNode;h=d.anchorOffset;if(!c(g,h))return;z.B&&!g.nextSibling&&(g.nodeValue+=" ");f=window.document.createRange();d.removeAllRanges();f.setStart(g,h-1);f.setEnd(g,h-1);d.addRange(f)}else{f=z.su(window.document.selection.createRange());
g=z.zt(f);h=f.xa();if(!c(g,h))return;z.uu(g,h-1).select()}}this.Iu(a)}},!1,this)};bv.prototype.Iu=function(a){var b=this,c=this.lg;if(!c.rb()){var d=function(c){return fv(c)||c.className===b.J.Vj?!1:(a&&a.preventDefault(),!0)},f=function(a){c.position(a);c.open()};ev?gv(b,d,f):jv(b,d,f)}};bv.prototype.zr=function(a,b){return z.M("a",{"data-hash":a.id,href:"/people/"+a.url_token,className:b||this.J.Vj,innerHTML:"@"+a.label})};z.v(z.mv,z.Q);z.e=z.mv.prototype;z.e.D=function(){this.Ma=null;z.mv.v.D.call(this)};
z.e.ga=function(a){z.mv.v.ga.call(this,a);var b=a.getAttribute("data-resourceid");b&&(this.hU=a.getAttribute("data-action"),this.Bp=b);this.status||(this.status="normal");a=this.L();this.jd||(this.jd=a.Yf("zm-editable-content",this.h))&&"1"===this.jd.getAttribute("data-disabled")&&(this.disabled=!0);this.cc?this.Wb&&(this.cc.innerHTML=this.Wb):(this.cc=a.Yf("zm-editable-tip",this.h),this.Wb&&!this.cc&&(this.cc=a.B("div","zm-editable-tip"),this.cc.innerHTML=this.Wb,a.Vs(this.cc,this.jd)));this.Ib=
a.Yf("zm-editable-editor-wrap",this.h);this.content=(0,z.bb)(this.content||this.XB?z.pf(this.jd):this.jd.innerHTML);this.xe();rv(this)};z.e.B=function(){var a=this.L(),a=a.B("div","zm-editable-item-wrap",[this.cc=a.B("div","zm-editable-tip"),this.jd=a.B("div","zm-editable-content",this.content)]);this.ga(a)};z.e.C=function(){z.mv.v.C.call(this);this.o().g(this.jd,"click",this.Qa);this.cc&&this.o().g(this.cc,"click",this.Qa)};z.e.ka=function(a){this.content=a;rv(this)};
z.e.Qa=function(a){var b=z.gp(this.h,a.target),c=this.L();if(!b||!b.name)return a=c.jO(a.target,"div","zm-editable-tip-label"),this.isEnabled&&a&&this.qg(),!0;a=b.name;switch(a){case "expand":rv(this);break;case "collapse":rv(this);break;case "edit":z.S.re?!1!==this.dispatchEvent("beforeedit")&&(this.init(),this.qg()):(new vr).G(!0);this.dispatchEvent("click_edit");break;case "save":this.zs();break;case "cancel":this.dispatchEvent("cancel_edit");this.Fi();break;default:return this.os(a)}return!0};
z.e.zs=function(){var a=z.Ao(this.Zf()),b=/<embed/i.test(a);if(/<img/i.test(a)||b||this.GG||a&&np(a).length)a!==this.content||this.fF?(this.dispatchEvent("save_changed"),this.gh(a)):(this.dispatchEvent("save_unchanged"),this.Fi())};z.e.gh=function(a){if(!this.da||!this.da.bc())if(this.Dr&&this.fJ){this.da=new z.Z(!0);this.o().Aa(this.da,"success",this.VC);var b=new z.uh(this.params.join("\x26"));b.add(this.Dr,a).add("field_name",this.Dr);this.da.ajax(this.fJ,b.toString())}else this.dispatchEvent("change")};
z.e.Fi=function(){this.status="normal";this.xe()};z.e.VC=function(){var a=z.Zn(this.da);if(!a)return z.W.message("网络异常");if(a.r)return z.W.message(a.msg);this.ka(a.msg);this.Fi();this.dispatchEvent("saveSuccess");this.dispatchEvent("change")};z.e.Ua=function(){return this.content};z.e.Nx=z.l(43);z.e.isContentEditable=function(){return!this.Id};z.e.Zf=function(){return(0,z.hn)(z.Na(this.Ma.value))};z.e.os=function(a){this.dispatchEvent(a);return!0};z.e.init=function(){this.PP||(this.PP=!0,this.bf())};
z.e.bf=function(){var a=this.L();this.Ib?(this.tc=a.Yf("zm-command",this.Ib),this.Ma=a.Yf("zm-editable-editor-input",this.Ib)):(this.Ib=a.B("div","zm-editable-editor-wrap clearfix",this.kj=a.B("div","zm-editable-editor-outer",a.B("div","zm-editable-editor-inner zg-form-text-input",this.Ma=a.B("textarea","zm-editable-editor-input")))),a.Ry(this.Ib,this.jd),this.gl());this.Ma&&this.Ma.tagName&&"TEXTAREA"===this.Ma.tagName&&!this.vE&&new z.Pr(this.Ma);this.ap()};z.e.ready=function(a){this.oE.done(a)};
z.e.ap=function(){this.o().g(this.tc,"click",this.Qa);this.Xu&&qv(this);pv(this);this.oE.resolveWith(this)};z.e.gl=function(){this.tc=z.M("div","zm-command",[this.jr=z.M("a",{"class":"zm-command-cancel",name:"cancel",href:"javascript:;"},"取消"),this.Dn=z.M("a",{"class":"zg-r3px zg-btn-blue",name:"save",href:"javascript:;"},"保存")]);this.Ib.appendChild(this.tc)};
z.e.xe=function(){this.Cr&&z.V.remove(this.h,this.Cr);"editing"===this.status?(this.cc&&z.P(this.cc,!1),this.Ib&&z.P(this.Ib,!0),z.P(this.jd,!1),this.Cr="zm-editable-status-editing"):(this.cc&&(!this.GG||this.content||this.disabled?z.P(this.cc,!1):z.P(this.cc,!0)),this.Ib&&z.P(this.Ib,!1),this.content?z.P(this.jd,!0):z.P(this.jd,!1),this.Cr="zm-editable-status-normal");z.V.add(this.h,this.Cr)};z.e.qg=function(){this.Zr||(this.init(),this.ready(function(){this.status="editing";this.xe();this.Ip()}))};
z.e.Ip=function(){if(this.Bp)this.Zr=!0,this.vx();else{var a=this.Ma,b;b=Wo(this.content.replace(/<br \/>/g,"\n").replace(/<br>/g,"\n")).replace(/<a.*?href="(.*?)".*?<\/a>/g,"$1");a.value=b}};z.e.pF=function(){var a=[];this.disabled||a.push('\x3ca href\x3d"javascript:;" class\x3d"zu-edit-button" name\x3d"edit"\x3e\x3ci class\x3d"zu-edit-button-icon"\x3e\x3c/i\x3e修改\x3c/a\x3e');return a.join("")};
z.e.vx=function(){this.Zr||(this.Zr=!0,z.xq(this.hU+"?id\x3d"+this.Bp,(0,z.q)(function(a){this.Zr=!1;a=z.Zn(a.target);a.r?z.W.message(a.msg):this.yu(a.msg)},this),"GET"))};z.e.yu=function(a){this.Ma.value=a};z.v(z.sv,z.mv);z.e=z.sv.prototype;z.e.yu=function(a){this.Id?z.sv.v.yu.call(this,a):(a||(a=z.y?"":"\x3cdiv\x3e\x3c/div\x3e"),this.Ma.Pd(!1,a,!0))};z.e.Ip=function(){this.ready(function(){this.Bp?this.vx():this.Id?z.sv.v.Ip.call(this):this.content?this.Ma.Pd(!1,this.content,!1,!0):this.Ma.Pd(!1,z.B?"\x3cdiv\x3e\x3cbr\x3e\x3c/div\x3e":"\x3cdiv\x3e\x3c/div\x3e",!1,!0)})};z.e.D=function(){z.Dc(this.Ma);z.N(this.Ib);this.xq=this.AC=this.oi=this.pl=this.GB=this.kj=this.Ib=null;z.sv.v.D.call(this)};
z.e.bf=function(){if(this.Id)z.sv.v.bf.call(this);else{var a=this.L();this.Ib=a.B("div","zm-editable-editor-wrap",this.kj=a.B("div","zm-editable-editor-outer",[this.GB=a.B("div","zm-editable-toolbar-container"),this.pl=a.B("div","zm-editable-editor-field-wrap",this.oi=a.B("div",{id:this.uR,className:"zm-editable-editor-field-element"}))]));this.AC=(0,window.$)(this.GB);this.xq=(0,window.$)(this.Ib);this.xq.hide();a.Ry(this.Ib,this.jd);this.Bp||(this.oi.innerHTML=this.content);a={loremIpsum_:this.wz,
enableFullScreen:this.dx,content:this.content,useScraper_:this.YV,canUploadMedia_:this.pw,useRemoveFormat_:this.jK};this.gl();Uu.aa().bf(this.Ib,a,(0,z.q)(this.ap,this));z.Oj||(this.tg=new Su(null,this.kj),this.tg.w(this.GB),z.Nu(this.tg,!1),z.Ou(this.tg),z.Bc(this,this.tg))}};z.e.ap=function(a,b){if(this.Id)z.sv.v.ap.call(this);else{this.Ma=a;this.xq.show();z.sv.v.ap.call(this);uv(this,a,b);var c=a.Sb.CodePlugin;c&&(c.PU(b),c.Bg())}};
z.e.qg=function(){z.sv.v.qg.call(this);this.ready(function(){this.Id||this.NN||(this.NN=!0,z.md(this.Ma,"load",function(){var a=this.Ma,b=a.Sb.FullScreenPlugin;z.y&&(a=a.Ha);z.E(a,["focus","blur"],function(a){b&&z.V.has(window.document.body,b.J.Yn)||vv(this,"focus"===a.type)},!1,this)},!1,this),this.Ma.Je())})};z.e.Zf=function(){if(this.Id)return z.sv.v.Zf.call(this);var a=this.Ma;return bp(a.m(),!0)?"":a.Al()};z.e.xe=function(){z.sv.v.xe.call(this);this.tg&&z.Nu(this.tg,"editing"===this.status)};z.v(z.xv,z.U);z.la(z.xv);var Av=z.Bm.create("AddQuestionForm"+z.S.fg);z.e=z.xv.prototype;
z.e.C=function(){z.xv.v.C.call(this);var a=z.Xe((0,z.bb)('\x3cdiv class\x3d"zh-add-question-form"\x3e\x3cdiv class\x3d"js-add-question-splash add-question-splash-page" \x3e\x3cp\x3e知乎是一个真诚、友善、认真、互助的社区\x3cbr\x3e我们希望每一个疑惑都有解答，好的问题更容易得到好答案 \x3ca href\x3d"//www.zhihu.com/question/19555761"\x3e如何提一个好问题？\x3c/a\x3e\x3c/p\x3e\x3cp\x3e\x3cb\x3e提问应遵循真实、客观、简洁、明确、规范的原则\x3c/b\x3e\x3cbr\x3e1、提问应尽可能简洁明了，避免「请问」「有谁知道」「谢谢！」等与问题本身无关的附加语。\x3cbr\x3e2、应避免使用「为神马」「童鞋」「肿么办」等网络用语。\x3cbr\x3e3、基于个人判断或传言的问题，在提问时应在补充说明里详细说明原由\x3cbr\x3e4、避免太宽泛问题，如调查性的问题容易变成每个人都可以发表观点，但对其他人没有价值。\x3cbr\x3e\x3c/p\x3e\x3cp\x3e\x3cb\x3e知乎禁止这些提问\x3c/b\x3e\x3cbr\x3e1、和已有问题完全重复的问题，\x3cb\x3e为避免重复，提问前可以先进行搜索\x3c/b\x3e\x3cbr\x3e2、招聘 / 求职、交易 / 合作、寻人 / 征友、召集 / 赠送、求码类内容\x3cbr\x3e3、投票类问题。例如：你支持方舟子还是韩寒？\x3cbr\x3e4、作业或其他希望代为完成个人任务类的内容，以及针对个人具体病情的求医问药类问题\x3cbr\x3e完整的提问建议可查看 \x3ca href\x3d"//www.zhihu.com/question/19806261"\x3e知乎的提问规范有哪些？\x3c/a\x3e\x3cbr\x3e\x3c/p\x3e\x3cdiv class\x3d"before-ask-form"\x3e\x3cb\x3e提问前请先搜索\x3c/b\x3e\x3cdiv style\x3d"position:relative;margin-top:18px;"\x3e\x3cinput type\x3d"text" class\x3d"zg-form-text-input" id\x3d"js-before-ask" placeholder\x3d"请输入你的问题"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cform class\x3d"js-add-question-form"\x3e\x3cdiv class\x3d"zg-section-big clearfix"\x3e\x3cdiv id\x3d"zm-modal-dialog-info-wrapper"\x3e\x3c/div\x3e\x3cdiv style\x3d"display: none;position: relative;" id\x3d"zm-modal-dialog-warnmsg-wrapper"\x3e\x3cdiv class\x3d"zm-modal-dialog-warnmsg zm-modal-dialog-guide-warn-message zg-r5px"\x3e\x3c/div\x3e\x3ca name\x3d"close" title\x3d"关闭" href\x3d"javascript:;" class\x3d"zu-global-notify-close"  style\x3d"display:none"\x3ex\x3c/a\x3e\x3cspan class\x3d"zm-modal-dialog-guide-title-msg"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"zg-form-text-input add-question-title-form" style\x3d"position: relative;"\x3e\x3ctextarea rows\x3d"1" class\x3d"zg-editor-input" title\x3d"在这里输入问题" id\x3d"zh-question-suggest-title-content"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cspan id\x3d"js-title-length-err-msg" class\x3d"title-length-err-msg zg-right"\x3e\x3c/span\x3e\x3cdiv id\x3d"zh-question-suggest-ac-wrap" class\x3d"question-suggest-ac-wrap"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"zg-section-big"\x3e\x3cdiv style\x3d"display: none;position: relative;" class\x3d"zm-modal-dialog-warnmsg-wrapper"\x3e\x3cdiv class\x3d"zm-modal-dialog-warnmsg zm-modal-dialog-guide-warn-message zg-r5px"\x3e\x3c/div\x3e\x3ca name\x3d"close" title\x3d"关闭" href\x3d"javascript:;" class\x3d"zu-global-notify-close" style\x3d"display:none"\x3ex\x3c/a\x3e\x3cspan class\x3d"zm-modal-dialog-guide-title-msg"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"add-question-section-title"\x3e\x3cspan class\x3d"zg-right extra-editor-toolbar hidden-phone"\x3e\x3cdiv class\x3d"js-toggle-editor-toolbar"\x3e\x3ci class\x3d"tr-inline-icon z-ico-textedit"\x3e\x3c/i\x3e\x3c/div\x3e\x3cdiv class\x3d"js-editor-add-pic"\x3e\x3ci class\x3d"tr-inline-icon tr-image"\x3e\x3c/i\x3e\x3c/div\x3e\x3cdiv class\x3d"js-editor-add-video"\x3e\x3ci class\x3d"tr-inline-icon tr-video"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/span\x3e问题说明（可选）：\x3cspan id\x3d"zh-question-form-detail-err"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"zh-question-suggest-detail-container"\x3e\x3cdiv class\x3d"zm-editable-content" data-disabled\x3d"1"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"zm-add-question-form-topic-wrap"\x3e\x3cdiv class\x3d"add-question-section-title"\x3e\x3cspan class\x3d"zg-gray zg-right hidden-phone"\x3e话题越精准，越容易让相关领域专业人士看到你的问题\x3c/span\x3e选择话题：\x3cspan id\x3d"zh-question-form-tag-err"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"zh-question-suggest-topic-container" class\x3d"zm-tag-editor zg-section"\x3e\x3cdiv class\x3d"zm-tag-editor-labels"\x3e\x3c/div\x3e\x3cdiv id\x3d"zh-question-suggest-autocomplete-container"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"zm-command"\x3e\x3clabel class\x3d"zm-question-form-hide-in-about-question-el zg-left"\x3e\x3cinput type\x3d"checkbox" value\x3d"1" class\x3d"zg-addq-isanon"\x3e匿名\x3c/label\x3e\x3ca href\x3d"javascript:;" name\x3d"cancel" class\x3d"zm-command-cancel"\x3e取消\x3c/a\x3e\x3ca href\x3d"javascript:;" name\x3d"addq" class\x3d"zg-r5px zu-question-form-add zg-btn-blue"\x3e发布\x3c/a\x3e\x3ca name\x3d"jumpq" class\x3d"zg-r5px zg-btn-blue zu-question-form-jump" style\x3d"display:none;"\x3e查看问题\x3c/a\x3e\x3c/div\x3e\x3c/form\x3e\x3c/div\x3e'));this.R().appendChild(a);
this.Ic=z.Xp("zg-editor-input",this.h)[0];this.fr=z.L("zu-question-form-add",this.h);this.sn=z.L("zu-question-form-jump",this.h);this.dk=z.I("zm-modal-dialog-warnmsg-wrapper");this.jt=z.I("js-title-length-err-msg");this.uA=z.L("zm-modal-dialog-warnmsg-wrapper",this.h);this.uE=z.I("zh-question-form-detail-err");this.vB=z.I("zh-question-form-tag-err");this.$M=z.L("zu-global-notify-close",this.dk);this.GV=z.L("zu-global-notify-close",this.uA);this.eQ=z.I("zm-modal-dialog-info-wrapper");this.zt=z.L("zm-modal-dialog-warnmsg",
this.dk);z.L("zm-modal-dialog-warnmsg",this.uA);this.FD=z.L("zg-addq-isanon",this.h);this.AV=z.L("js-toggle-editor-toolbar",this.h);this.KL=z.L("js-editor-add-pic",this.h);this.LL=z.L("js-editor-add-video",this.h);this.fV=z.L("js-add-question-splash",this.h);this.hR=z.L("js-add-question-form",this.h);this.sD=z.I("js-before-ask");this.AN=z.I("zh-question-suggest-detail-container");this.FV=z.I("zh-question-suggest-topic-container");this.Gy();this.Kz?(Dv(this,!0),this.Ey()):(this.pG(),Dv(this,!1))};
z.e.show=z.Or(function(a){this.J=window.$.extend({Rm:null,gk:null},a||{});this.G(!0)},!0,"#ask");z.e.jm=function(){z.xv.v.jm.call(this);this.J={}};z.e.Gy=function(){this.Na("提问");z.Nj(this,550);z.Fj(this,null);this.X=(0,window.$)(this.h);this.X.addClass("absolute-position");this.G(!0);this.ha()};z.e.pG=z.Kj(function(){Fv(this);this.fc();zv(this)});z.e.kq={};z.e.kq.GI='\x3c% forEach(questions, function(q, i) { q \x3d q.data; %\x3e\x3cdiv class\x3d"ac-row" data-url_token\x3d"\x3c%\x3dq.url_token%\x3e" data-answer_count\x3d"\x3c%\x3dq.answer_count%\x3e"\x3e\x3c% if (q.is_star) { %\x3e\x3ca class\x3d"zg-star" data-tip\x3d"s$b$优质问答" href\x3d"/question/\x3c%\x3dq.url_token%\x3e"\x3e\x3c/a\x3e\x3c% } %\x3e\x3ca class\x3d"zippy-indicator"\x3e\x3ci\x3e\x3c/i\x3e\x3c/a\x3e\x3ca style\x3d"color:#222" href\x3d"/question/\x3c%\x3dq.url_token%\x3e?q\x3d\x3c%\x3d token %\x3e"\x3e\x3c%\x3dq.title%\x3e\x3c/a\x3e \x3cspan class\x3d"zm-ac-gray"\x3e\x3c%\x3d parseInt(q.answer_count) \x3e 0 ? q.answer_count + " 个回答" : "还没有回答" %\x3e \x3c/span\x3e\x3c/div\x3e\x3c% }) %\x3e';
z.e.kq.mM='\x3c% forEach(answers, function(a, i) { %\x3e\x3cdiv class\x3d"zippy-row"\x3e\x3cdiv class\x3d"summary-item"\x3e\x3ca class\x3d"inline-block zm-item-vote-count" href\x3d"/question/\x3c%\x3dquestion_url_token%\x3e/answer/\x3c%\x3da.url_token%\x3e"\x3e\x3c%\x3da.vote_count%\x3e\x3c/a\x3e\x3c% if (a.author.url_token) { %\x3e\x3ca class\x3d"inline-block" href\x3d"/people/\x3c%\x3da.author.url_token%\x3e"\x3e\x3cspan class\x3d"author"\x3e\x3c%-a.author.name%\x3e\x3c/span\x3e \x3c/a\x3e\x3c% } else { %\x3e\x3cspan class\x3d"inline-block anon-author"\x3e\x3c%-a.author.name%\x3e\x3c/span\x3e \x3c% } %\x3e\x3cspan class\x3d"inline-block summary ellipsis"\x3e\x3c%\x3da.summary_text%\x3e\x3c/span\x3e\x3ca class\x3d"inline-block" href\x3d"/question/\x3c%\x3dquestion_url_token%\x3e/answer/\x3c%\x3da.url_token%\x3e"\x3e阅读全部 »\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c% }) %\x3e';
z.e.Ey=function(){function a(){Dv(b,!1);b.Ic.value=d.value}var b=this,c=(0,z.jn)(this.kq.GI),d=this.sD,f=new Ts;this.EL=new z.Ss(d,{source:"/question/autocomplete",uk:d.offsetParent,ud:function(){},render:function(b,f,k){b=(0,window.$)(b.m());b.html(c({forEach:z.w,questions:k,token:(0,window.encodeURIComponent)(this.Xb)}));0<k.length&&b.prepend('\x3cdiv class\x3d"ac-row ac-first"\x3e\x3cb\x3e你想问的是不是：\x3c/b\x3e\x3c/div\x3e').append((0,window.$)('\x3cdiv class\x3d"ac-row ac-last iwanttoask"\x3e\x3ca href\x3d"#"\x3e不是，我要提一个新问题 »\x3c/a\x3e\x3c/div\x3e'));
0===k.length&&d.value&&(b.html('\x3cdiv class\x3d"ac-row ac-last iwanttoask"\x3e\x3ca href\x3d"#"\x3e没有找到相关问题，马上提问 »\x3c/a\x3e\x3c/div\x3e').show(),k.push("fake row"));b.off("click").on("click",".iwanttoask",a)},Qy:f});this.EL.kn=!1};z.e.resetForm=function(){this.Ic.value="";this.Oa&&this.Oa.Vu();this.dk&&z.P(this.dk,!1);this.Oa.reset()};
z.e.fc=function(){this.o().g(this.h,"click",this.EO);this.UQ&&this.UQ.w(this.Ic);this.HI=new z.Pr(this.Ic);this.o().g(this.HI,"change",this.gI);this.o().g(this.$M,"click",function(){z.P(this.dk,!1);z.P(this.eQ,!0)});this.o().g(this.GV,"click",function(){z.P(this.uA,!1)});this.o().g(this,"afterhide",function(){Iv(this)});Hv(this)};z.e.EO=function(a){if(a=z.gp(this.h,a.target))switch(a=a.name,a){case "expand":z.V.add(this.h,"zg-qform-expanded");break;default:this.os(a)}};
z.e.gk=function(){var a=z.Zn(this.xhr);if(!a)return z.W.message("网络异常");if(a.r)if(281===a.errcode){var b=new Mv;b.ze=a.msg;b.level=3;Jv(this,b,!0)}else z.W.message(a.msg);else z.Ph.set("__Q_ISNEWLYCREATED__","yep"),Av.clear(),(0,window.$)(window).off("beforeunload.AddQuestionForm"),a=a.msg,b=a.match(/\/question\/(\d+)/)[1],this.J.gk?this.J.gk({url:a,Za:b}):window.location.href=a};
z.e.os=function(a){if("cancel"===a)this.G(!1);else if("addq"===a){a=Nv(this);var b=Kv(this);if(!(1<b.level||1<a.level)){var c=Ov(this),d=new Mv;3E3<ep(c)?(d.level=3,d.ze="请控制在 3000 字以下"):d.level=0;c=1<d.level;this.uE.innerHTML=d.ze;z.P(this.uE,c);Gv(this,c,"detail");this.dI()}Gv(this,1<b.level||1<a.level,"title");this.yE?Jv(this,1<a.level?a:b,!0):this.xhr&&this.xhr.bc()||(this.xhr=new z.Z(!0),this.o().Aa(this.xhr,"success",this.gk),this.xhr.ajax("/question/add",Pv(this).Jd()),this.Oa.trackEvent())}};
z.e.gI=function(){var a=Nv(this),b=Kv(this);"toolong"===a.name||"buffer"===a.name?(this.jt.innerHTML=a.ze,z.P(this.jt,!0)):(this.jt.innerHTML=a.ze,z.P(this.jt,!1));"multiquestionmark"===b.name||"duplicatedquestion"===b.name?Jv(this,b,!0):Jv(this,b,!1);Gv(this,1<b.level,"title")};z.e.dI=function(){var a=!1;1>this.Oa.data.length?(a=!0,this.vB.innerHTML="至少添加一个话题"):5<this.Oa.data.length&&(a=!0,this.vB.innerHTML="最多添加五个话题");z.P(this.vB,a);Gv(this,a,"topic")};z.e.bS=function(){this.Pb&&wv(this.Pb)};Qv.prototype.init=function(){var a=(0,window.$)("#zh-question-related-questions");if(a.length){var b=(0,window.$)("li",a),c=function(a,b,c){var h=1,k=Math.ceil(a.length/b);return{next:function(){1!==k&&(h=h===k?1:h+1,c(h))},qN:function(){var c=(h-1)*b;return a.slice(c,c+b)}}}(b,5,function(){b.attr("hidden","true");c.qN().removeAttr("hidden")});(0,window.$)(".next",a).click(function(){c.next();z.T("question_answer","click_sidebarrelatedquestions_pager")});a.on("click","a[data-id]",function(){(0,z.Em)(this,
{action:"OpenUrl",element:"Link"},{content:{type:"Question",id:String((0,window.$)(this).data("id"))}})})}};z.ja(z.Rv,z.xk);z.Rv.prototype.B=function(){z.xk.prototype.B.call(this);this.ka((0,window.$)(".phone-verification-template").html())};z.Rv.prototype.C=function(){z.xk.prototype.C.call(this);var a=(0,window.$)(".view.verification",this.Bc),b=new z.Mk(this.Xn);this.K(b);b.Pc(this.Hf);b.w(a[0])};z.ja(Sv,z.Q);Sv.prototype.C=function(){z.Q.prototype.C.call(this);this.Ye()};
Sv.prototype.Ye=function(){var a=this,b=this.m();this.Dq=(0,window.$)(".SignFlow-panel",b);(0,window.$)(".switch-to-login",b).on("click",function(){a.Dq.filter(":visible").attr("hidden",!0).siblings().removeAttr("hidden");a.ia({category:"sign_in",action:"switch_to_sign_in_box_appear"})});var c=(0,window.$)(".LoginForm",b)[0],d=new z.Ik;d.Pc(this.Hf);d.w(c);b=(0,window.$)(".SignupForm",b)[0];c=new z.Lk;c.Pc(this.Hf);c.w(b);c.g("success",function(b){b=new z.Rv(b.data);b.Ob(a);b.G(!0)})};
z.Ca(Sv.prototype,z.Wm);Tv.prototype.init=function(){this.Ly();Uv();Vv()};Tv.prototype.Ly=function(){var a=(0,window.$)("#SidebarSignFlow")[0];if(a){var b=function(b){var d=(0,window.$)(".account",a);b||d.attr("name","account").attr("aria-label","手机号或邮箱").attr("data-placeholder","手机号或邮箱");(0,window.$)("[data-placeholder]",a).attr("placeholder",function(){return(0,window.$)(this).attr("data-placeholder")})};window.$.get("/register/is_domestic").then(function(c){b(c.value);c=new Sv;c.Pc("sidebar_signflow");c.w(a)})}};z.ja(Wv,z.Q);Wv.prototype.C=function(){var a=this;z.Q.prototype.C.call(this);var b=this.m(),c=(0,window.$)(b),d=c.find(".shameimaru-link"),f=c.find(".shameimaru-close"),g=c.data("track"),h=z.Zp(g,"at","view"),k=z.Zp(g,"at","close");z.On(b,function(){Xv(h)});d.one("click",function(){var a=d.attr("href");d.attr("href",z.Zp(a,"click",1))});f.one("click",function(b){b.preventDefault();Xv(k);c.fadeOut(500,function(){return c.remove()});a.H()})};z.v(Zv,z.Q);Zv.prototype.init=function(){var a=(0,window.$)(".app-promotion-bar");this.X=a;var b=this;if(a.length&&(0,window.$)("html").hasClass("show-app-promotion-bar"))a.on("click",".close, .download-btn",function(){(0,window.$)(this).hasClass("download-btn")?z.T("app-promotion","click_mobileweb_app_dl_bar_download_btn"):z.T("app-promotion","click_mobileweb_app_dl_bar_close_btn");z.Ph.set("hideAppPromotionBar","true");b.remove()})};
Zv.prototype.remove=function(){var a=this.X;a.addClass("hide");(0,window.setTimeout)(function(){a.remove()},200)};var cw;z.ja(gw,z.Q);z.e=gw.prototype;z.e.init=function(){var a=window.document.querySelector(".js-WechatLoginIntro");a&&this.w(a)};z.e.C=function(){z.Q.prototype.C.call(this);this.h.querySelector(".js-login").addEventListener("click",this.KP.bind(this));this.h.querySelector(".js-other").addEventListener("click",this.tP.bind(this));this.h.querySelector(".js-close").addEventListener("click",this.close.bind(this));z.wi({action:"show",category:"wechat-login-intro"})};
z.e.KP=function(){z.wi({category:"wechat_login_intro",action:"click_main"})};z.e.tP=function(){(new z.Jk).show();z.wi({category:"wechat_login_intro",action:"click_other"})};z.e.close=function(){this.h.parentNode.removeChild(this.h);window.$.post("/intro/wechat/uninterest");z.wi({category:"wechat_login_intro",action:"close"})};z.la(hw);var jw=z.Bm.create("Report"+z.S.fg);hw.prototype.wL='\x3cdiv id\x3d"zh-feedback-form"\x3e\x3cselect name\x3d"type" class\x3d"zg-editor-type zg-right"\x3e\x3coption value\x3d"help"\x3e使用帮助 \x3c/option\x3e\x3coption value\x3d"bug"\x3e问题反馈\x3c/option\x3e\x3coption value\x3d"search_suggest"\x3e搜索反馈\x3c/option\x3e\x3coption value\x3d"suggest"\x3e功能建议\x3c/option\x3e\x3c/select\x3e\x3cdiv class\x3d"zg-report-title"\x3e\x3cspan class\x3d"zg-gray-darker"\x3e请填写你的反馈内容\x3c/span\x3e\x3cspan class\x3d"zg-report-msg" style\x3d"display:none;"\x3e请选择反馈种类：\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"zg-editor-simple-wrap zg-form-text-input zg-report-content"\x3e\x3ctextarea class\x3d"zg-editor-input" name\x3d"content"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3c/div\x3e';
hw.prototype.defaults={title:"建议和反馈"};hw.prototype.Ye=function(a){var b=(0,window.$)("#zh-feedback-form"),c=(0,window.$)("select",b),b=(0,window.$)("textarea",b);new z.Pr(b[0]);c.toggle(!a.type);b.html(jw.get("content")||"");b.on("input change",function(){jw.set("content",this.value)})};hw.prototype.create=function(a){var b=window.$.extend(this.defaults,a||{});z.W.confirm(b.title,this.wL,function(a){if(a)return iw(b)},this);this.Ye(b)};var zG,AG;
AG={"rt:button":function(){(0,z.qB)(this,"roundtable",null,["zg-btn-follow","zg-btn-unfollow"])},"rt:link":function(){(0,z.qB)(this,"roundtable",null,null,{follow_text:"关注圆桌"})},"c:link":function(){(0,z.qB)(this,"column",null,null,{follow_text:"关注专栏"})},"c:button":function(){(0,z.qB)(this,"column",null,["zg-btn-follow","zg-btn-unfollow"])},"q:link":function(){(0,z.qB)(this,"question",null,null,{follow_text:"关注问题"})},"m:link":function(){var a=this.getAttribute("data-follow_text");(0,z.qB)(this,"people",
null,null,a?{follow_text:a}:{})},"t:link":function(){(0,z.qB)(this,"topic",null,null,{follow_text:"关注话题"})},"t:link:simple":function(){(0,z.qB)(this,"topic")},"m:button":function(){var a=this;(0,z.qB)(a,"people",function(){a.getAttribute("data-followme")&&(z.V.has(a,"zg-btn-follow")?a.setAttribute("data-tip","s$b$对方已关注你"):a.setAttribute("data-tip","s$b$已互相关注"))},["zg-btn-follow","zg-btn-unfollow"])},"q:fi:button":function(){var a=this;(0,z.qB)(a,"question",function(b){(0,window.$)(".label",a).text(b?
"取消关注":"关注");var c=(0,window.$)(".count",a);b=Number(c.data("count"))+(b?1:-1);c.length&&(b=Math.max(b,0),c.text("（"+b+"）").data("count",b))},["unfollowing","following"])},"q:m:button":function(){(0,z.qB)(this,"question",null,["zg-btn-green","zg-btn-white"],{follow_text:"关注问题"})},"f:button":function(){(0,z.qB)(this,"favlist",null,["zg-btn-follow","zg-btn-unfollow"])},"t:button":function(){(0,z.qB)(this,"topic",null,["zg-btn-follow","zg-btn-unfollow"])}};
z.qB=z.Or(function(a,b,c,d,f){function g(a){a.r?z.W.message(a.msg):h(n)}function h(b){b?(z.V.Kv(a,k,m),tp(a,f.unfollow_text||"取消关注")):(z.V.Kv(a,m,k),tp(a,f.follow_text||"关注"));z.sa(c)&&c(b)}zG&&"pending"===zG.state()&&zG.abort();f=f||{};b=b||a.getAttribute("data-focustype");d=d||["zg-follow","zg-unfollow"];var k=d[0],m=d[1],n=z.V.has(a,k);z.X.fb({type:"ga_click_follow",target:a,data:{type:b,Sj:n}});d={roundtable:lw,column:kw,people:Zs,question:$s,topic:bt,favlist:at}[b];var t=a.getAttribute("data-id")||
a.id.match(/-(.*)/)[1];d&&(d=d(t,n),"people"===b&&n?d.done(g):h(n),zG=d)});z.v(mw,z.F);var qw=["group","key","name"];ow.prototype.defaults={BN:"帮助信息",Xw:"shortcut-tips-dialog"};ow.prototype.Rb=function(){z.ol(z.$m.register("shift+/",this.show,this),{group:"导航",name:"帮助",key:"?"})};ow.prototype.show=function(){var a=this.J;z.W.alert({title:a.BN,content:vw(),className:a.Xw})};var xw=z.ak(function(a){var b=z.qm["ra-urls"],c=b&&b[a];return c?new window.Promise(function(b){window.$.ajax({url:c,dataType:"script",cache:!0}).then(function(){b(window.ra[a])})}):window.Promise.reject("Missing app name: ",a)});var Aw=[];z.Hq.on("init",function(){function a(){var b=Aw.shift();b&&(b=b[0],b.length?b(a):(b(),a()))}a()});z.Hq.on("init",function(){(0,window.$)("img.lazy").lazyload({load:function(){(0,window.$)(this).trigger("contentchange")},data_attribute:"actualsrc",event:"scroll updatelazy",threshold:400})});z.Hq.on("init",function(){z.S.Rn&&z.Ph.set("lastuser:email",z.S.Rn)});zw(function(a){new Iq({gk:a})},0);
zw(function(){"#ask"===window.location.hash&&(z.xv.aa().show(),window.history.replaceState?window.history.replaceState(null,window.document.title,window.location.pathname+window.location.search):window.location.hash="")},window.Infinity);z.Hq.on("init",function(){(new Qv).init()});z.Hq.on("init",function(){(new Tv).init()});z.Hq.on("init",function(){Yv()});z.Hq.on("init",function(){(new Zv).init()});z.Hq.on("init",function(){bw()});z.Hq.on("init",function(){z.eh()});z.Hq.on("init",function(){return(new gw).init()});
z.Hq.on("init",function(){z.Ji()});z.Hq.on("postinit",function(){(0,window.$)("#js-feedback-button").click(function(){hw.aa().create()})});z.Hq.on("init",function(){(0,window.$)(window.document.body).on("click.follow","[data-follow]",function(){if(this.name)return dp("未清除的 name 属性:",this);var a=this.getAttribute("data-follow");(a=a&&AG[a])&&a.call(this)})});z.Hq.on("postinit",function(){window.FastClick&&!z.vm&&window.FastClick.attach(window.document.body)});
z.Hq.on("postinit",function(){if(z.S.kb())if(window.WebSocket){var a;a=-1!==z.pm.An.indexOf("https")?z.pm.An.replace("https","wss"):z.pm.An.replace("http","ws");(new mw(a)).addEventListener("message",function(a){Sn(z.X,JSON.parse(a.data.replace(/^\+;/,"")))})}else a=new Cr({url:z.cm,data:{loc:window.location.href,channel:(0,z.G)()+bo()},dataType:"polling",converters:{"text polling":function(a){return JSON.parse(a.replace(/^\+;/,""))}}}),a.addEventListener("message",function(a){Sn(z.X,a.data)}),a.Ut()});
z.Hq.on("init",function(){new ow;z.xl.prototype.defaults.offsetTop=-60;var a=(0,window.$)('div[data-widget\x3d"navigable"], ul[data-widget\x3d"navigable"]');if(1===a.length){var b=a.data("navigable-options"),b=new z.xl(b);b.w(a.get(0));var c=(0,window.$)("#zh-load-more");b.on("action",function(a){a.data.index>=a.data.size&&c.is(":visible")&&c[0].click()})}});z.Hq.on("init",function(){(0,window.$)(window.document).on("click",'a[href\x3d"#"]',function(a){a.preventDefault()})});
z.Hq.on("postinit",function(){var a=window.location.pathname;(z.S.kb()&&"/"===a||/^\/(question|explore|collection|topic|people|search|roundtable\/)/.test(a))&&z.ww("CommentApp")});
z.Hq.on("postinit",function(){(0,window.$)(".js-openProfilePage").on("click",function(){var a=(0,window.$)(this).attr("data-url"),a=(0,window.$)("\x3cform target\x3d'_blank' method\x3d'POST' style\x3d'display:none;'\x3e\x3c/form\x3e").attr({action:a}).appendTo(window.document.body);(0,window.$)('\x3cinput type\x3d"hidden" /\x3e').attr({name:"content",value:(0,window.$)("#performance-profile-data").text()}).appendTo(a);a.submit();a.remove()})});
z.Hq.on("init",function(){var a=z.Vi.get("d_c0",""),b=new z.Z(!0);""===a&&b.ajax("/udid","","POST")});z.v(Bw,fo);Bw.prototype.add=function(a){z.x(this.queue,a)||(this.queue.push(a),z.E(a,"finish",this.IH,!1,this))};Bw.prototype.remove=function(a){z.ub(this.queue,a)&&z.nd(a,"finish",this.IH,!1,this)};Bw.prototype.D=function(){z.w(this.queue,function(a){a.H()});this.queue.length=0;Bw.v.D.call(this)};z.v(Cw,Bw);
Cw.prototype.play=function(a){if(0==this.queue.length)return!1;if(a||0==this.N)this.xx=0,this.gg();else if(1==this.N)return!1;this.kd("play");-1==this.N&&this.kd("resume");var b=-1==this.N&&!a;this.startTime=(0,z.G)();this.endTime=null;this.N=1;z.w(this.queue,function(c){b&&-1!=c.N||c.play(a)});return!0};Cw.prototype.pause=function(){1==this.N&&(z.w(this.queue,function(a){1==a.N&&a.pause()}),this.N=-1,this.kd("pause"))};
Cw.prototype.stop=function(a){z.w(this.queue,function(b){0==b.N||b.stop(a)});this.N=0;this.endTime=(0,z.G)();this.kd("stop");this.hg()};Cw.prototype.IH=function(){this.xx++;this.xx==this.queue.length&&(this.endTime=(0,z.G)(),this.N=0,this.kd("finish"),this.hg())};z.v(Gw,z.Rj);z.e=Gw.prototype;z.e.init=function(){if(!z.om("back_to_top")){this.h=z.Xe(this.qV);window.document.body.appendChild(this.h);var a=new z.Pk(this.Jt,this.tV,this);this.MJ=(0,z.q)(a.fire,a);this.o().g(window,"resize",this.hI);this.hI()}};z.e.start=function(){this.xk||(this.xk=!0,this.o().g(window,"scroll",this.MJ).g(this.h,"click",this.pD),this.Jt())};z.e.stop=function(){this.xk&&(this.xk=!1,this.o().qa(window,"scroll",this.MJ).qa(this.h,"click",this.pD),this.hide())};
z.e.hI=function(){z.Pe().width>=this.tR?this.start():this.stop()};z.e.qV='\x3cdiv class\x3d"zh-backtotop" style\x3d"display:none"\x3e\x3ca data-action\x3d"backtotop" data-tip\x3d"s$r$回到顶部" href\x3d"javascript:;" class\x3d"btn-backtotop btn-action"\x3e\x3cdiv class\x3d"arrow"\x3e\x3c/div\x3e\x3cdiv class\x3d"stick"\x3e\x3c/div\x3e\x3c/a\x3e\x3c/div\x3e';
z.e.pD=function(){var a=z.Re(window.document),b=z.Qe(window.document),c=b.x,b=b.y,d=new Cw,f=this.o();d.add(new yp(a,[c,b],[0,0],this.wU,Fw));d.add(new Bo(this.h,this.tx,Ew));f.g(d,"finish",this.cS);f.g(d,"begin",this.PR);d.play();z.X.fb("ga_click_back_to_top");(0,z.Em)(this,{action:"BackToTop",element:"Button"})};z.e.PR=function(){this.Vv=this.ro=!0};z.e.cS=function(){this.Vv=!1};z.e.show=function(){(new vp(this.h,this.tx,Dw)).play();this.ro=!1};
z.e.hide=function(){(new Bo(this.h,this.tx,Ew)).play();this.ro=!0};z.e.Jt=function(){this.Vv||(1200<=z.Qe(window.document).y?this.ro&&this.show():this.ro||this.hide())};Hw.prototype.link="想来知乎工作？请发送邮件到 jobs@zhihu.com";Hw.prototype.oM="          _____                    _____                    _____                    _____          \n         /\\    \\                  /\\    \\                  /\\    \\                  /\\    \\         \n        /::\\____\\                /::\\    \\                /::\\    \\                /::\\    \\        \n       /:::/    /                \\:::\\    \\              /::::\\    \\              /::::\\    \\       \n      /:::/    /                  \\:::\\    \\            /::::::\\    \\            /::::::\\    \\      \n     /:::/    /                    \\:::\\    \\          /:::/\\:::\\    \\          /:::/\\:::\\    \\     \n    /:::/____/                      \\:::\\    \\        /:::/__\\:::\\    \\        /:::/__\\:::\\    \\    \n   /::::\\    \\                      /::::\\    \\      /::::\\   \\:::\\    \\      /::::\\   \\:::\\    \\   \n  /::::::\\    \\   _____    ____    /::::::\\    \\    /::::::\\   \\:::\\    \\    /::::::\\   \\:::\\    \\  \n /:::/\\:::\\    \\ /\\    \\  /\\   \\  /:::/\\:::\\    \\  /:::/\\:::\\   \\:::\\____\\  /:::/\\:::\\   \\:::\\    \\ \n/:::/  \\:::\\    /::\\____\\/::\\   \\/:::/  \\:::\\____\\/:::/  \\:::\\   \\:::|    |/:::/__\\:::\\   \\:::\\____\\\n\\::/    \\:::\\  /:::/    /\\:::\\  /:::/    \\::/    /\\::/   |::::\\  /:::|____|\\:::\\   \\:::\\   \\::/    /\n \\/____/ \\:::\\/:::/    /  \\:::\\/:::/    / \\/____/  \\/____|:::::\\/:::/    /  \\:::\\   \\:::\\   \\/____/ \n          \\::::::/    /    \\::::::/    /                 |:::::::::/    /    \\:::\\   \\:::\\    \\     \n           \\::::/    /      \\::::/____/                  |::|\\::::/    /      \\:::\\   \\:::\\____\\    \n           /:::/    /        \\:::\\    \\                  |::| \\::/____/        \\:::\\   \\::/    /    \n          /:::/    /          \\:::\\    \\                 |::|  ~|               \\:::\\   \\/____/     \n         /:::/    /            \\:::\\    \\                |::|   |                \\:::\\    \\         \n        /:::/    /              \\:::\\____\\               \\::|   |                 \\:::\\____\\        \n        \\::/    /                \\::/    /                \\:|   |                  \\::/    /        \n         \\/____/                  \\/____/                  \\|___|                   \\/____/         \n";z.v(Iw,z.Rj);z.BG=null;Iw.prototype.init=function(){z.BG=this;z.Jw(this)};Iw.prototype.sS=function(){var a=z.Zn(this.fk);a&&!a.r&&Sn(z.X,[a])};var Lw=window.localStorage&&!z.Ph.Xl()||z.rm&&(z.fh||z.um);Mw.prototype.ha=function(){};z.v(z.Nw,Mw);z.Nw.prototype.ha=function(a,b,c){z.Es(this.element,this.af,a,b,void 0,c,this.jT)};z.v(Ow,Mw);Ow.prototype.ha=function(a,b,c,d){z.Es(lo(a),0,a,b,this.Sh,c,null,d)};z.v(Pw,z.Tn);Pw.prototype.setPosition=function(a){this.Xt=a||void 0;this.U()&&this.ha()};Pw.prototype.ha=function(){if(this.Xt){var a=!this.U()&&"move_offscreen"!=this.gi(),b=this.m();a&&(b.style.visibility="hidden",z.P(b,!0));this.Xt.ha(b,this.pA,this.zz);a&&z.P(b,!1)}};z.v(z.Rw,Pw);var Zw=[];z.e=z.Rw.prototype;z.e.ec=null;z.e.className="goog-tooltip";z.e.Qp=500;z.e.so=0;z.e.L=function(){return this.ca};z.e.attach=function(a){a=z.I(a);this.eb.add(a);z.E(a,"mouseover",this.od,!1,this);z.E(a,"mouseout",this.Nl,!1,this);z.E(a,"mousemove",this.Ll,!1,this);z.E(a,"focus",this.fe,!1,this);z.E(a,"blur",this.Nl,!1,this)};z.e.detach=function(a){if(a)a=z.I(a),Sw(this,a),this.eb.remove(a);else{for(var b=this.eb.Yc(),c=0;a=b[c];c++)Sw(this,a);this.eb.clear()}};z.e.Px=function(){return this.so};
z.e.Pd=function(a){a=z.Jd(a,null);var b=this.m();b&&z.Ge(b,a)};z.e.oh=function(a){var b=this.m();b&&z.N(b);z.Rw.v.oh.call(this,a);a?(b=this.ca.wa().body,b.insertBefore(a,b.lastChild),z.Dc(this.Dk),this.Dk=new z.pj(this.m()),z.Bc(this,this.Dk),z.E(this.Dk,"focusin",this.bj,void 0,this),z.E(this.Dk,"focusout",this.Vp,void 0,this)):(z.Dc(this.Dk),this.Dk=null)};z.e.Kd=function(){return z.pf(this.m())};z.e.Rx=z.l(44);z.e.getState=function(){return this.Km?this.U()?4:1:this.Rl?3:this.U()?2:0};
z.e.Xs=function(a){if(!this.U())return!1;var b=z.po(this.m()),c=z.Ig(this.m());return b.x<=a.x&&a.x<=b.x+c.width&&b.y<=a.y&&a.y<=b.y+c.height};z.e.Zo=function(){if(!z.Tn.prototype.Zo.call(this))return!1;if(this.anchor)for(var a,b=0;a=Zw[b];b++)z.mf(a.m(),this.anchor)||a.G(!1);z.tb(Zw,this);a=this.m();a.className=this.className;this.bj();z.E(a,"mouseover",this.oy,!1,this);z.E(a,"mouseout",this.SF,!1,this);ax(this);return!0};
z.e.jk=function(){z.ub(Zw,this);for(var a=this.m(),b,c=0;b=Zw[c];c++)b.anchor&&z.mf(a,b.anchor)&&b.G(!1);this.rI&&this.rI.Vp();z.nd(a,"mouseover",this.oy,!1,this);z.nd(a,"mouseout",this.SF,!1,this);this.anchor=void 0;0==this.getState()&&(this.tu=!1);z.Tn.prototype.jk.call(this)};z.e.Bz=function(a,b){this.anchor==a&&this.eb.contains(this.anchor)&&(this.tu||!this.XX?(this.G(!1),this.U()||(this.anchor=a,this.setPosition(b||Vw(this,0)),this.G(!0))):this.anchor=void 0);this.Km=void 0};z.e.bi=function(){return this.eb};
z.e.zl=function(){return this.ec};z.e.nH=function(a){this.Rl=void 0;if(a==this.anchor){a=this.L();var b=a.zl();a=b&&this.m()&&a.contains(this.m(),b);null!=this.ec&&(this.ec==this.m()||this.eb.contains(this.ec))||a||this.fl&&this.fl.ec||this.G(!1)}};z.e.od=function(a){var b=Uw(this,a.target);this.ec=b;this.bj();b!=this.anchor&&(this.anchor=b,$w(this,b),Yw(this),Tw(this,a))};z.e.Ll=function(a){Tw(this,a);this.tu=!0};
z.e.fe=function(a){this.ec=a=Uw(this,a.target);this.tu=!0;if(this.anchor!=a){this.anchor=a;var b=Vw(this,1);this.bj();$w(this,a,b);Yw(this)}};z.e.Nl=function(a){var b=Uw(this,a.target),c=Uw(this,a.relatedTarget);b!=c&&(b==this.ec&&(this.ec=null),ax(this),this.tu=!1,!this.U()||a.relatedTarget&&z.mf(this.m(),a.relatedTarget)?this.anchor=void 0:this.Vp())};z.e.oy=function(){var a=this.m();this.ec!=a&&(this.bj(),this.ec=a)};
z.e.SF=function(a){var b=this.m();this.ec!=b||a.relatedTarget&&z.mf(b,a.relatedTarget)||(this.ec=null,this.Vp())};z.e.Vp=function(){2==this.getState()&&(this.Rl=z.wd((0,z.q)(this.nH,this,this.anchor),this.Px()))};z.e.bj=function(){this.Rl&&(z.xd(this.Rl),this.Rl=void 0)};z.e.D=function(){this.G(!1);ax(this);this.detach();this.m()&&z.N(this.m());this.ec=null;delete this.ca;z.Rw.v.D.call(this)};z.v(Ww,Ow);
Ww.prototype.ha=function(a,b,c){b=lo(a);b=Mp(b);c=c?new z.qg(c.top+10,c.right,c.bottom,c.left+10):new z.qg(10,0,0,10);Hs(this.Sh,a,4,c,b,9)&496&&Hs(this.Sh,a,4,c,b,5)};z.v(Xw,z.Nw);Xw.prototype.ha=function(a,b,c){var d=new z.He(10,0);z.Es(this.element,this.af,a,b,d,c,9)&496&&z.Es(this.element,2,a,1,d,c,5)};z.v(bx,z.Rw);z.e=bx.prototype;z.e.sN=!1;z.e.rN=100;z.e.lq=!1;z.e.kk=function(){bx.v.kk.call(this);this.er=Xn(z.Jp(this.m()));this.anchor&&(this.Tv=Xn(z.Jp(this.anchor)));this.lq=this.sN;z.E(this.L().wa(),"mousemove",this.Ll,!1,this)};z.e.jk=function(){z.nd(this.L().wa(),"mousemove",this.Ll,!1,this);this.Tv=this.er=null;this.lq=!1;bx.v.jk.call(this)};
z.e.Xs=function(a){if(this.uo){var b=z.po(this.m()),c=z.Ig(this.m());return b.x-this.uo.left<=a.x&&a.x<=b.x+c.width+this.uo.right&&b.y-this.uo.top<=a.y&&a.y<=b.y+c.height+this.uo.bottom}return bx.v.Xs.call(this,a)};z.e.nH=function(a){this.Rl=void 0;a!=this.anchor||dx(this,this.dj)||this.zl()||this.fl&&this.fl.ec||z.y&&0==this.dj.x&&0==this.dj.y||this.G(!1)};
z.e.Ll=function(a){var b=this.U();if(this.er){var c=z.wf(this.L()),c=new z.He(a.clientX+c.x,a.clientY+c.y);dx(this,c)?b=!1:this.lq&&(b=Op(this.er,c)>=Op(this.er,this.dj))}if(b){if(this.Vp(),this.ec=null,b=this.fl)b.ec=null}else 3==this.getState()&&this.bj();bx.v.Ll.call(this,a)};z.e.oy=function(){this.zl()!=this.m()&&(this.lq=!1,this.ec=this.m())};z.e.Px=function(){return this.lq?this.rN:bx.v.Px.call(this)};z.v(z.ex,bx);z.e=z.ex.prototype;z.e.D=function(){z.ex.v.D.call(this);z.nd(this.Ka,"mouseover",this.UF,!1,this)};z.e.Uy=function(a){return a.tagName in this.aD&&!!a.getAttribute(this.aD[a.tagName])};z.e.UF=function(a){if(a=a.target)this.Uy(a)?(this.setPosition(null),fx(this,a)):this.NM&&(a=z.vf(a,(0,z.q)(this.Uy,this),!1,this.MX))&&(this.setPosition(null),fx(this,a))};z.e.Xz=function(a){return this.dispatchEvent(a)};z.e.Ix=function(){return this.Pf||this.anchor};
z.e.jk=function(){z.ex.v.jk.call(this);null!=this.Pf&&ix(this,this.Pf);this.Pf=null};z.e.od=function(a){var b=Uw(this,a.target);b&&b!=this.anchor?fx(this,b):z.ex.v.od.call(this,a)};z.e.Nl=function(a){var b=this.anchor,c=this.getState();z.ex.v.Nl.call(this,a);c==this.getState()||1!=c&&4!=c||(this.anchor=b,gx(this))};z.e.Bz=function(a,b){z.ex.v.Bz.call(this,a,b);this.U()?(a!=this.Pf&&ix(this,this.Pf),this.Pf=a):(ax(this),gx(this))};z.v(hx,z.Mc);z.v(jx,z.Nw);jx.prototype.co=function(){return 5};
jx.prototype.ha=function(a,b,c,d){var f={"1-4":"bottom","0-4":"top","0-5":"top","1-5":"bottom","2-5":"top","3-5":"bottom","3-4":"bottom","2-6":"left","2-4":"right"},g;if(this.TC){g=z.Es(this.element,this.af,a,b,null,c,10,d);var h=kx(g,this.af),k=kx(g,b);g&496&&(g=z.Es(this.element,h,a,k,null,c,10,d),g&496&&(h=kx(g,h),k=kx(g,k),this.TC?z.Es(this.element,h,a,k,null,c,this.co(),d):z.Es(this.element,h,a,k,null,c,0,d)));this.Wt&&(a=(z.ka(h)?h:this.af)+"-"+(z.ka(b)?b:k),this.Wt(f[a],a))}else z.Es(this.element,
this.af,a,b,void 0,c),this.Wt&&(a=this.af+"-"+b,this.Wt(f[a],a))};z.v(z.lx,z.Rj);z.e=z.lx.prototype;z.e.defaults={qT:"pm",iu:!1,Wk:!0};z.e.oh=function(a){this.h=a};z.e.m=function(){return this.h};z.e.Gy=function(){this.Ia=new z.U(null);this.Ia.Na("发送私信");z.Fj(this.Ia,null);this.Ia.Cf(!0);this.Ia.G(!0);this.h=this.Ia.R()};z.e.focus=function(){this.init();this.qd.focus()};
z.e.init=function(){this.OP||(this.OP=!0,this.rq&&(this.Ia||this.Gy(),this.h.innerHTML='\x3cdiv class\x3d"zm-pm-wrap"\x3e\x3cdl class\x3d"zm-form-table zm-form-table-medium"\x3e\x3cdt class\x3d"zm-form-table-head zm-form-table-head-align-middle"\x3e\x3clabel class\x3d"zg-medium-gray"\x3e发给：\x3c/label\x3e\x3c/dt\x3e\x3cdd class\x3d"zm-form-table-field"\x3e\x3cdiv class\x3d"zm-pm-selector-wrap"\x3e\x3cdiv class\x3d"zg-user-name" style\x3d"display:none;padding:4px 0 0 0"\x3e\x3c/div\x3e\x3cinput class\x3d"zg-form-text-input zm-pm-user-selector" type\x3d"text" /\x3e\x3c/div\x3e\x3c/dd\x3e\x3cdt class\x3d"zm-form-table-head zm-form-table-head-align-middle"\x3e\x3clabel class\x3d"zg-medium-gray"\x3e内容：\x3c/label\x3e\x3c/dt\x3e\x3cdd class\x3d"zm-form-table-field zm-form-table-field-last"\x3e\x3cdiv class\x3d"zg-editor-simple-wrap zg-form-text-input"\x3e\x3ctextarea class\x3d"zg-editor-input" style\x3d"font-weight:normal"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3c/dd\x3e\x3c/dl\x3e\x3cdiv class\x3d"zh-pm-warnmsg" style\x3d"display:none;text-align:right;color:#C3412F;"\x3e\x3c/div\x3e\x3cdiv class\x3d"zm-command zg-clear"\x3e\x3cdiv class\x3d"zm-item-meta zg-left" style\x3d"margin: 0 0 0 57px;"\x3e\x3cspan class\x3d"zg-text-counter" style\x3d"display:none"\x3e还可以输入 500 字\x3c/span\x3e\x3cspan class\x3d"additional-info" \x3e\x3c/span\x3e\x3c/div\x3e\x3ca name\x3d"cancel" href\x3d"javascript:;" class\x3d"zm-command-cancel"\x3e取消\x3c/a\x3e\x3ca name\x3d"send" href\x3d"javascript:;" class\x3d"zg-btn-blue zg-r3px" id\x3d"zh-question-pm-send-button"\x3e发送\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e'),this.Ah=
z.L("zg-user-name",this.h),this.qd=z.L("zg-editor-input",this.h),this.cd=z.L("zm-pm-user-selector",this.h),this.Bn=z.L("zm-command",this.h),z.L("zg-text-counter",this.h),this.zt=z.L("zh-pm-warnmsg",this.h),(0,window.$)(".additional-info",(0,window.$)(this.h)),new z.Pr(this.qd),this.o().g(this.Bn,"click",this.Qa).g(this.Ah,"click",this.Qa).g(this.qd,"keydown",this.eP),this.cd&&((new z.Us("搜索用户")).w(this.cd),this.o().g(this.cd,"blur",this.OM),this.ba=new z.ht("/people/autocomplete?type\x3d"+this.J.qT,
this.cd,null,null,z.L("zm-pm-wrap",this.h),!0),this.ba.rh(!0),this.o().g(this.ba,"select",this.ES)),z.S.re||ox(this,"未激活用户，不能发送私信。请先激活邮箱。"))};z.e.eP=function(a){13===a.keyCode&&(a.ctrlKey||a.metaKey)&&(this.As(),a.preventDefault())};z.e.OM=function(){this.ID&&(0,window.clearTimeout)(this.ID);this.ID=(0,window.setTimeout)((0,z.q)(this.PM,this),200)};z.e.PM=function(){var a=z.Ao(this.cd.value);-1===this.Qm&&a&&"搜索用户"!==a&&ox(this,"请输入对方姓名，从下拉菜单里选择收件人")};z.e.Op=function(a){this.KU=a};
z.e.show=function(){this.init();this.rq&&(this.Ia.G(!0),this.Ia.ha())};z.e.ES=function(){var a=z.zb(this.ba.wj(),1);z.nx(this,a[3],a[0],!0)};z.e.As=function(){if(!this.Wh||"pending"!==this.Wh.state())if(-1===this.Qm)ox(this,"请填写收信人。");else{var a=this.qd.value;(0,z.bb)(a)?(a=-1!==this.bq?window.$.post("/inbox/reply",{message_id:this.bq,content:a,type:this.zB}):window.$.post("/inbox/post",{member_id:this.Qm,content:a,token:this.KU}),a.done((0,z.q)(this.GS,this)),this.Wh=a):ox(this,"请填写私信内容。")}};
z.e.Qa=function(a){if(a=(a=this.Vf(a.target))&&a.name)switch(a){case "edit":this.Qm=-1;z.lp(this.cd,this.Ah);break;case "cancel":this.rq&&this.Ia.G(!1);break;case "send":this.As()}};z.e.GS=function(a){cp("message","send_message");if(!a)return z.W.message("网络异常");if(a.r)return ox(this,a.msg);this.rq&&this.Ia.G(!1);this.J.iu?window.location.reload():z.W.message("发送成功")};z.v(px,z.Rj);var ux={p:"MemberProfileCardV2",t:"TopicProfileCardV2",c:"ColumnProfileCardV2",r:"RoundtableProfileCardV2"};z.e=px.prototype;z.e.XP={t:0,r:2,b:1,l:2};
z.e.init=function(){if(!z.pm.qb&&!z.om("tooltiop")){var a=this.V=new z.ex({A:"data-tip",SPAN:"data-tip",BUTTON:"data-tip",I:"data-tip",DIV:"data-tip",INPUT:"data-tip",IMG:"data-tip"}),b=z.M("div",{id:"zh-tooltip"});window.document.body.appendChild(b);this.V.oh(b);this.V.Qp=this.$U;this.V.so=this.UP;this.o().g(this.V,"trigger",this.Xz);var c=(0,window.$)(b),d=null;a.on("show",function(a){(0,window.clearTimeout)(d);c.addClass("in");z.X.fb({type:"ga_hover_hovercard",target:a.target.Ix()})}).on("hide",
function(){c.css({display:"block",visibility:"visible"}).removeClass("in").addClass("out");d=(0,window.setTimeout)(function(){c.removeClass("out").css({display:"none",visibility:"hidden"})},1E3)});this.o().g(this.V,"beforeshow",this.Zo);this.o().g(this.V,"beforehide",this.OR);(0,window.$)(a.m()).on("click",".member-profile-card-pm",function(b){b.preventDefault();var c=(0,window.$)(this);a.G(!1);z.Or(function(){var a=new z.lx({Wk:!1});a.show();z.nx(a,c.data("pmHash"),c.data("pmName"));z.mx(a,c.attr("href"));
a.qd.focus()},!0)()})}};z.e.OR=function(){"s"!==this.Vh&&this.Lh[this.Vh]&&this.Lh[this.Vh][this.Ln]&&(this.Lh[this.Vh][this.Ln]=(0,window.$)(this.V.m()).find(".popover-content").html())};
z.e.Zo=function(){var a=this.V.Ix(),b=a.getAttribute("data-tip");this.mE=a;b=b.split("$");this.Vh=b[0];this.Ln=b[2];this.jl=b[1];this.V.m().setAttribute("data-theme",a.getAttribute("data-theme")||"");"s"===this.Vh?(a=this.Ln,b=[],b.push('\x3cdiv class\x3d"tooltip-arrow"\x3e\x3c/div\x3e'),b.push('\x3cdiv class\x3d"tooltip-inner content-prewrap"\x3e'),b.push(Wo(a)),b.push("\x3c/div\x3e"),tx(this,b.join(""))):sx(this,this.Vh,this.Ln,this.jl);rx(this)};
z.e.mw=function(){return qx('\x3cdiv class\x3d"zh-hovercard-spinner"\x3e\x3c/div\x3e',!0)};
z.e.Xz=function(a){var b=a.anchor,c=b&&b.getAttribute("data-tip");a=c.split("$");var d=null;z.Pp(b,"no-hovercard")?(a=this.V,ax(a),gx(a)):c&&1<a.length?(b.title&&(b.setAttribute("data-original_title",b.title),b.removeAttribute("title")),d=a[1],"s"!==a[0]&&(210>z.Eg(b).y?"t"===d&&(d="b",b.setAttribute("data-tip",c.replace("$t$","$b$"))):(d="t",b.setAttribute("data-tip",c.replace("$b$","$t$")))),this.oN=d=new jx(b,this.XP[d],"b"===d||"t"===d),b=(0,z.q)(this.IS,this),d.Wt=b,this.V.className="s"!==a[0]?
"goog-hovercard popover":"tooltip"):(a=this.V,ax(a),gx(a))};
z.e.IS=function(a,b){var c=this.V.m();z.V.remove(c,"top","bottom","left","right");z.V.add(c,a);var d=z.Io(c),f=z.Io(this.mE),g=new z.He(c.offsetLeft,c.offsetTop);if("t"===this.jl||"b"===this.jl){var d=(d.width-f.width)/2,h=g.x-d;if("s"===this.Vh)z.sg(c,"left",h+"px");else{var h=z.x(["2-5","3-5","3-4","2-4"],b),k=(0,window.$)(".zh-hovercard-spinner",c)[0],m=z.L("arrow",c),n=z.L("arrow2",c);k?z.sg(c,"left",g.x-d+"px"):h?z.sg(c,"left",g.x+83+"px"):z.sg(c,"left",g.x-70+"px");var t=f.width/2;m&&n&&(k||
(h?z.w([m,n],function(a){z.sg(a,"left","auto");z.sg(a,"right",t+70+"px")}):z.w([m,n],function(a){z.sg(a,"left",t+70+"px")})))}}else z.sg(c,"top",g.y-(d.height-f.height)/2+"px"),"l"===this.jl&&z.Ag(c,g.x-f.width)};z.v(xx,z.Q);z.e=xx.prototype;
z.e.ga=function(a){this.h=a;this.X=(0,window.$)(this.h);this.X.addClass("zh-scroller").css({position:"relative",overflow:"hidden"}).wrapInner('\x3cdiv class\x3d"zh-scroller-content"\x3e\x3c/div\x3e');this.X.wrapInner('\x3cdiv class\x3d"zh-scroller-inner"\x3e\x3c/div\x3e');this.X.append("\x3cdiv class\x3d'zh-scroller-bar-container'\x3e\x3cdiv\x3e");this.X.append('\x3cdiv class\x3d"zh-scroller-bar"\x3e\x3c/div\x3e');this.gd=this.X.children(".zh-scroller-inner");this.Jk=this.X.children(".zh-scroller-bar-container");
this.oe=this.X.children(".zh-scroller-bar");this.Se=this.gd.children(".zh-scroller-content");this.$q=this.oe[0];this.mQ=this.gd[0];this.content=this.Se[0];this.ar=this.Jk[0];this.gd.css({height:"100%",width:"150%",overflow:"auto"});this.oe.css({position:"absolute",right:this.options.right,top:this.options.top,opacity:this.options.bw,background:this.options.yM,width:this.options.width,"border-radius":3,cursor:"default"});this.Jk.css({position:"absolute",right:this.options.right-1,top:0,height:"100%",
width:this.options.width,background:this.options.dN,border:"1px solid #444",opacity:0,cursor:"default","border-radius":"2px"});this.Di(this.$q,!1);this.Di(this.ar,!1);this.update()};
z.e.C=function(){xx.v.C.call(this);this.AB=new z.Pk(this.Vz,50,this);this.options.stopPropagation&&this.gd.bind("mousewheel DOMMouseScroll",function(a){var b=null;"mousewheel"===a.type?b=-1*a.originalEvent.wheelDelta:"DOMMouseScroll"===a.type&&(b=40*a.originalEvent.detail);b&&(a.preventDefault(),(0,window.$)(this).scrollTop(b+(0,window.$)(this).scrollTop()))})};
z.e.enter=function(){this.ix||(this.o().g(this.mQ,"scroll",function(){this.AB.fire()}),z.A||(this.o().g(this.ar,"click",this.NR),this.o().g(window.document,"mousedown",this.oS),this.o().g(window.document,"mouseup",this.qS),this.o().g(window.document,"mousemove",this.pS)),this.options.vM?(this.Rd=new z.ud(200),this.o().g(this.Rd,"tick",function(){2===this.Jz||1===this.Jz?(yx(this),this.Im&&this.Jk.css({opacity:this.options.UD})):this.Pr||this.mn||(zx(this,1E3),this.Jk.css({opacity:0}))})):(this.oe.css({opacity:this.options.bw}),
this.Jk.css({opacity:this.options.UD})),this.Rd&&this.Rd.start(),zx(this),this.ix=!0)};z.e.oS=function(a){a.target===this.$q&&(this.Pr=!0,this.zM=a.clientY,this.AM=(0,window.parseInt)(this.oe.css("top"),10));a.target!==this.$q&&a.target!==this.ar||this.Di(window.document.body,!1)};z.e.qS=function(){this.Pr=!1;this.Di(window.document.body,!0)};z.e.pS=function(a){if(this.Pr){var b=Ax(this,this.AM+(a.clientY-this.zM));this.gd.scrollTop(b)}this.Jz=a.target===this.$q?2:a.target===this.ar?1:0};
z.e.Vz=function(){var a=this.gd.scrollTop(),b=this.Se.height(),c=this.gd.height(),d=a/b*(c-2*this.options.top);yx(this);this.oe.css({top:d+this.options.top});this.dispatchEvent(new Bx(this,a,b-a-c))};z.e.update=function(){var a=this.Pg(this.gd).height,b=this.Pg(this.Se).height;a>=b?(this.Im=!1,this.oe.hide()):(this.Im=!0,this.oe.show());this.oe.css({height:a/b*(a-2*this.options.top)});this.Jk.css({height:a-2});this.Se.css({overflow:"hidden",width:this.X.width(),"min-height":"100%"});return this};
z.e.Pg=function(a){var b={height:a.height(),width:a.width()};if(!b.height){var c=a.css("display"),d=a.css("position"),f=a.css("visibility");a.css({position:"absolute",display:"block",visibility:"hidden"});b={height:a.height(),width:a.width()};a.css({position:d,display:c,visibility:f})}return b};z.e.NR=function(a){this.scrollTo(Ax(this,a.offsetY-this.oe.height()/2))};z.e.scrollTop=function(a){this.Im&&(a=a||200,yx(this),this.gd.stop().animate({scrollTop:0},a));return this};
z.e.Di=function(a,b){z.Ip(a,!b)};z.e.scrollBy=function(a,b){if(this.Im){yx(this);var c=b||this.Pg(this.gd).height,c=Math.abs(c),c=this.gd.scrollTop()+(a?-1:1)*c;this.gd.stop().animate({scrollTop:c},200)}};z.e.scrollTo=function(a){this.Im&&(yx(this),this.gd.stop().animate({scrollTop:a},200));return this};z.v(Bx,z.Mc);z.v(z.Cx,z.Q);z.Cx.prototype.defaults={zH:".tab-nav",qI:".tab-panel",Cg:"active"};z.Cx.prototype.ga=function(a){if(a){this.h=a;var b=this,c=this.J;this.Pk=(0,window.$)(c.zH,a);this.Dq=(0,window.$)(c.qI,a);this.Hj=this.Pk.index("."+c.Cg);this.Pk.on("click",function(){b.select(b.Pk.index(this))});this.Pk.attr("role","tab").parent().attr("role","tablist")}};
z.Cx.prototype.select=function(a){if(!(0>a||a>this.Pk.size())&&(this.dispatchEvent({type:"action",data:{index:a}}),a!==this.Hj)){this.Hj=a;var b=this.J;this.Pk.eq(a).addClass(b.Cg).attr("aria-selected","true").siblings().removeClass(b.Cg).attr("aria-selected","false");b=this.Dq.eq(a);this.Dq.not(b.show()).hide();this.dispatchEvent({type:"select",data:{index:a}})}};z.Cx.prototype.index=function(){return this.Hj};z.ja(Dx,z.Rj);z.e=Dx.prototype;
z.e.init=function(){this.vi=z.I("zh-top-nav-live-new");this.vC=(0,window.$)(this.vi);this.hq=z.I("zh-top-nav-count-wrap");this.En=z.M("span",{id:"zh-top-nav-count",className:"zu-top-nav-count zg-noti-number",style:"display:none"});this.contents=z.Xp("zm-noti7-content",this.vi);this.Ew=z.Xp("zm-noti7-content-body",this.vi);this.hq.appendChild(this.En);this.o().g(this.hq,"click",this.PJ).g(this.hq,"keypress",function(a){32===a.keyCode&&(a.preventDefault(),this.PJ())});this.o().g(z.X,"notification",
this.qP);this.o().g(this.vi,"click",function(a){a=a.target;a.href&&/group_id=/.test(a.href+"")&&(0,window.$)(a).parent(".unread").removeClass("unread")});this.qv=(0,window.$)(".zm-noti7-popup-tab-container .icon");Ex(this);this.iK||(this.og=z.ob(this.contents,function(a){var b=new xx;b.w(a);return b}));Hx(this);this.pm=z.I("zh-top-nav-pm-count");this.pm||(this.pm=z.M("span"));this.im=z.I("zh-top-nav-new-pm");this.im||(this.im=z.M("span"));this.lG=(0,window.parseInt)((0,window.$)(this.im).attr("data-count")||
(0,window.$)(this.pm).attr("data-count"),10)||0;this.o().g(z.X,"inbox",this.dP)};z.e.qP=function(a){this.HH=this.Of;this.Of=a.zf;this.Ud=this.Of[0]+this.Of[1]+this.Of[2];z.P(this.En,!!this.Ud);this.En.innerHTML=Kx(this.Ud);z.w(this.Of,function(a,c){a?(this.qv.eq(c).addClass("withdot"),this.cache[c]=!1):this.qv.eq(c).removeClass("withdot");this.NE&&0<a-this.HH[c]&&this.Hl(c)},this);Jx(this)};z.e.PJ=function(){this.visible?z.pm.qb?Nx(this,!1):Nx(this,!!this.Ud):Nx(this,!0);Jx(this)};
z.e.Hl=function(a){if(!this.uj[a]){var b=this.uj[a]=new z.Z(!1);this.o().Aa(b,"success",function(){var b=z.Zn(this.uj[a]);this.uj[a]=null;if(b)if(b.r)z.W.message(b.msg);else{this.Iw=!0;var d=b.msg;if(d)1===a&&(d='\x3cdiv class\x3d"zm-noti7-content-head-item"\x3e\x3cspan class\x3d"zg-gray-normal"\x3e这些人最近关注了你\x3c/span\x3e\x3c/div\x3e'+d);else{switch(a){case 0:d="暂无新消息";break;case 1:d="有人关注你时会显示在这里";break;case 2:d="你的答案收到赞同、感谢时会显示在这里"}d='\x3cdiv class\x3d"zm-noti7-popup-empty"\x3e'+d+"\x3c/div\x3e"}this.cache[a]=
d;b.hasMore&&0===this.Xo[a]&&(this.Xo[a]=b.offset);this.Jm[a]&&(Fx(this,a),this.Jm[a]=!1)}});b.ajax("/noti7/stack/"+this.types[a]+"?limit\x3d10\x26r\x3d"+(0,z.G)(),"","GET")}};
z.e.rz=function(a){var b=this;if(this.uj[a])return window.Promise.reject("Request already in progress");if(0===this.Xo[a])return window.Promise.resolve(!1);var c=this.Ew[a],d=z.Xe('\x3cdiv class\x3d"text-center"\x3e\x3ci class\x3d"spinner-gray"\x3e\x3c/i\x3e\x3c/div\x3e');c.appendChild(d);return this.uj[a]=window.$.get("/noti7/stack/"+this.types[a],{offset:this.Xo[a],r:(0,z.G)()}).then(function(f){z.N(d);if(f)if(f.r)z.W.message(f.msg);else{var g=z.Xe(f.msg);c.appendChild(g);b.uj[a]=null;b.og&&b.og[a]&&
b.og[a].update();b.Xo[a]=f.offset;return f.hasMore}})};z.e.dP=function(a){this.lG=a=window.$.isNumeric(a)?a:a.zf;0!==a?(this.im.innerHTML=this.pm.innerHTML=a,this.im.style.visibility=this.pm.style.visibility="visible"):this.im.style.visibility=this.pm.style.visibility="hidden";Jx(this)};z.e.rs=function(a){z.mf(this.vi,a.target)||z.mf(this.hq,a.target)||Nx(this,!1)};z.v(Px,z.Q);z.e=Px.prototype;z.e.defaults={trigger:"hover",iI:"open",hideFocus:!1};z.e.Yb=function(){return this.xg.length&&this.fd.length};z.e.w=function(a){if(a){var b=(0,window.$)(a),c=b.prev();this.xg=b;this.fd=c;this.$parent=b.parent();Px.v.w.call(this,a);return this}};z.e.toggle=function(){this.rb()?this.close():this.open()};z.e.rb=function(){return this.xg.is(":visible")};z.e.open=function(){this.xg.attr("aria-hidden","false").parent().addClass(this.J.iI);this.fd.attr("aria-expanded","true")};
z.e.close=function(){this.xg.attr("aria-hidden","true").parent().removeClass(this.J.iI);this.fd.attr("aria-expanded","false")};z.e.UR=function(a){var b=a.keyCode;switch(b){case 32:a.preventDefault();this.toggle();break;case 27:case 9:this.close();break;case 38:case 40:Rx(this,38===b?-1:0)}};z.e.kS=function(a){var b=a.keyCode;switch(b){case 27:case 9:this.close();this.fd.focus();break;case 38:case 40:a.preventDefault(),Rx(this,this.index+(38===b?-1:1))}};
z.e.C=function(){var a=this,b=this.J;Qx(this);this.xg.on("keydown",(0,z.q)(this.kS,this));this.fd.on("keydown",(0,z.q)(this.UR,this));var c=z.Sm?"click":b.trigger;if("hover"===c)this.$parent.on("hover",(0,z.q)(function(a){"mouseenter"===a.type?this.open():this.close()},this));else if("click"===c)this.fd.on("click",(0,z.q)(function(a){a.preventDefault();this.toggle();this.fd.focus()},this));this.$parent.on("focusout",function(){(0,window.setTimeout)(function(){a.$parent.get(0).contains(window.document.activeElement)||
a.close()})});if(b.hideFocus)this.xg.children().find("a").on("click",function(){this.blur()})};z.ja(Sx,z.Q);z.e=Sx.prototype;z.e.C=function(){z.Q.prototype.C.call(this);this.Dy()};z.e.es=function(){return this.ba};z.e.KB=function(a,b,c){if(a){var d={query:(0,z.bb)(this.m().value)};z.wi({oc:!0,category:"search",action:a,label:b,value:c,attributes:d})}};
z.e.Dy=function(){var a=this,b=this.m();z.ol(z.$m.register("/",function(){(0,window.setTimeout)(function(){b.focus()});z.kp(b,null,500)}),{group:"导航",name:"搜索"});var c=new gt,d=b.getAttribute("placeholder")||"搜索你感兴趣的内容...";this.ba=new z.ht("/autocomplete",b,null,null,b.offsetParent,null,[d],null,c);this.ba.kn=!1;this.ba.rh(!0);this.o().g(this.ba,"select",this.yP);var f=b.form;if(f){var g=function(a){(0,z.bb)(b.value)?f.submit():a.preventDefault()};this.o().g(b,"keydown",function(b){13===b.keyCode&&
(a.KB("visit_search_result","enter"),g(b))});this.o().g(f,"submit",g);(0,window.$)(":submit",f).click(function(){a.KB("visit_search_result","search_box_submit")})}this.o().g(this.ba,"suggestionsupdate",this.Iv);var h=(0,z.q)(function(){this.ba.zE=!(this.metaKey||this.Ez)},this);this.o().g(window.document,"keydown",function(a){a.metaKey&&(this.metaKey=!0,h())});this.o().g(window.document,"keyup",function(a){if(91===a.keyCode||224===a.keyCode)this.metaKey=!1,h()});this.o().g(window.document,"mouseup",
function(a){z.Rc(a,1)&&(this.Ez=!0,h(),(0,window.setTimeout)((0,z.q)(function(){this.Ez=!1;h()},this),0))});this.o().g(b,"mousedown",function(a){a.stopPropagation();return!0})};
z.e.Iv=function(){var a=this.ba.Sa,b=this.ba.M.Af;if(a&&0!==a.length){if(1===a.length){var c=z.M("div",{className:"zu-autocomplete-empty"},"没有找到相关的结果");z.bf(c,b[0]);z.N(b[0])}z.w(a,function(c,f){if(0===f||c[0]!==a[f-1][0]){var g=b[f],h={people:"用户",topic:"话题",question:"问题"}[c[0]];h&&(h=z.M("div",{className:"zu-autocomplete-row-label ac-row"},h),z.bf(h,g),this.o().g(this.ba,"suggestionsupdate",ap))}},this)}};
z.e.yP=function(a){var b=this.ba.wj(),c=this.ba.M.Ul,d=z.zb(b,1),f=null,b=b[0];"topic"===b?(f="/topic/"+d[1],f=Tx(this,f)):"people"===b?(f="/people/"+d[1],f=Tx(this,f)):"question"===b?(f="/question/"+d[2],f=Tx(this,f)):"search_link"===b&&(f="/search?q\x3d"+(0,window.encodeURI)(d[0])+"\x26type\x3dcontent");f&&(z.X.fb({type:"ga_serach_select",data:{type:b,index:c}}),d=c+1,(d={topic:["visit_topic","instant_search_result_topic",d],question:["visit_question","instant_search_result_question",d],people:["visit_people_profile",
"instant_search_result_people",d],search_link:["visit_search_result"]}[b])&&this.KB.apply(this,d),z.Vi.set("s-q",(0,window.encodeURI)(this.ba.Xb),-1,"/"),z.Vi.set("s-i",c+1,-1,"/"),z.Vi.set("sid",(0,z.ln)(),-1,"/"),z.Vi.set("s-t","autocomplete",-1,"/"),this.metaKey||this.Ez?window.open(f):window.location.href=f);a.stopPropagation();a.preventDefault()};z.v(Ux,z.Rj);
Ux.prototype.init=function(){if((0,window.$)(".zu-top").length){z.Ph.get("__Q_ISNEWLYCREATED__")&&(z.Ph.remove("__Q_ISNEWLYCREATED__"),z.R&&(z.R.FG=!0));if(z.S.kb())(new Dx).init();else(0,window.$)("#zh-top-inner").on("click",'a[href\x3d"/topic"]',function(){var a=new z.Jk;a.Pc("top_navigation_topics");a.show();return!1}).on("click",".js-signin-noauth",function(){var a=new z.Jk;a.Pc("top_navigation_sign_in");a.show();return!1}).on("click",".js-signin-noauth-mobile",function(){z.T("app-promotion","click_mobileweb_signin_btn");
var a=new z.Jk;a.Pc("top_navigation_sign_in_mobile");a.show();return!1}).on("click",".js-signup-noauth",function(){var a=new z.Nk;a.Pc("top_navigation_sign_up");a.show();return!1}).on("click",".js-signup-noauth-mobile",function(){z.T("app-promotion","click_mobileweb_signup_btn");var a=new z.Nk;a.Pc("top_navigation_sign_up_mobile");a.show();return!1});if(this.KE=z.I("zh-top-search")){this.sQ=z.L("zu-top-search-input",this.KE);var a=z.I("zu-top-add-question");this.o().g(a,"click",this.WU);z.Pj||!z.Oj?
(new Px({hideFocus:!0})).w((0,window.$)("#top-nav-profile-dropdown").get(0)):Vx();this.Dy()}}};Ux.prototype.Dy=function(){var a=(new z.oh(window.location)).Jd().get("q");a?a=(0,window.decodeURIComponent)(a):(a=z.Ph.get("query"),z.Ph.remove("query"));var b=this.sQ;a&&(b.value=a);z.Oj&&this.o().g(b,["focus","blur"],function(a){(0,window.$)(".zu-top").toggleClass("is-searching","focus"===a.type)});(new Sx).w(b)};Ux.prototype.WU=z.Or(function(){z.xv.aa().show()},!0,"#ask");window.JSON||(window.JSON={parse:Mn,stringify:$p});z.A&&(Object.getPrototypeOf=function(a){return function(b){return b.__proto__||a.apply(this,arguments)}}(Object.getPrototypeOf));z.v(Wx,z.Q);z.CG=new Wx;z.CG.w(window.document);z.v(Xx,z.vj);z.la(Xx);z.e=Xx.prototype;z.e.Rb=function(){z.Fj(this,null);this.o().g(window.document,"click",this.rs)};
z.e.rs=function(a){a=a.target;if("IMG"===a.tagName&&z.V.has(a,this.vV)){var b=a.getAttribute("data-original");if(b&&!z.tm&&!z.Pp(a,"editable")){this.ka('\x3cdiv class\x3d"zm-light-box-x1" id\x3d"zm-light-box-x1"\x3e\x3cdiv class\x3d"zm-light-box-x2" id\x3d"zm-light-box-x2"\x3e\x3cimg src\x3d"'+b+'" class\x3d"zm-light-box-img-el" /\x3e\x3cdiv class\x3d"zm-light-box-footer"\x3e\x3ca class\x3d"zm-light-box-show-origin" href\x3d"'+b+'" target\x3d"_blank"\x3e查看原图\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e');
this.G(!0);z.V.add(this.m(),"zm-light-box-fullscreen-image");var b=z.Pe(),c=z.I("zm-light-box-x1"),d=z.I("zm-light-box-x2"),f=a.getAttribute("data-rawheight"),g=a.getAttribute("data-rawwidth"),g=g?+g:0;(f?+f:0)>b.height-80?d.style.marginTop="40px":c.style.lineHeight=b.height+"px";d.style.width=g>b.width-80?b.width-80+"px":g+"px";z.X.fb({type:"ga_click_enlarge_image",target:a})}}};z.e.ha=z.p;z.e.focus=z.p;z.e.$I=z.Dl;z.e.cP=function(){this.G(!1);z.V.remove(window.document.body,this.vD)};
z.e.ri=function(){Xx.v.ri.call(this);z.V.add(window.document.body,this.vD);this.o().Aa(window.document,"click",this.cP)};z.e.B=function(){Xx.v.B.call(this);z.V.add(this.m(),"zm-light-box")};z.e.yz=function(){this.Rc=this.L().B("div",this.Tc+"-bg zm-light-box-background");z.P(this.Rc,!1)};Xx.aa();z.kg("common");window.console||(window.console={info:z.p,log:z.p,warning:z.p,error:z.p});z.CG.on(["click!","show!","visit!"],function(a){var b=a.Ac;b.category&&b.action&&z.T(b.category,a.type.replace("!","")+"_"+b.action,b.label,b.value)});z.vd=window;
(function(){function a(a){return(0,z.Ei)({responseId:a.getResponseHeader("X-Za-Response-Id")})}z.Oj=z.pm.qb;window.$.ajaxPrefilter(function(a,c){var d,f;!1!==c.processData&&"get"!==a.type.toLowerCase()&&(f=z.Vi.get("_xsrf"))&&(d=c.data||{},"string"===window.$.type(d)?z.Wa(d,"_xsrf\x3d")||(d+="\x26_xsrf\x3d"+f):(d._xsrf=f,d=window.$.param(d)),a.data=d)});window.$.ajaxPrefilter(function(b,c,d){return d.always(function(){return a(d)})});yq("*",function(b,c){return a(c)});(new Ux).init()})();z.Hq.dispatchEvent("init");
(0,window.$)(function(){z.Hq.dispatchEvent("postinit")});z.S.kb()?(yq("json",function(a){(a=a.profile_result)&&(0,window.$)(a).css("border-top","1px solid #eee").appendTo(window.document.body)}),z.pm.qb&&(window.$.fx.off=!0),(0,window.$)(function(){(new Iw).init()})):(0,window.$)("body").addClass("no-auth");z.Wa(window.location.host,"zhihu.com")||(z.Ii=!0);(0,window.$)(window.document.body).children("div.zu-main").attr("role","main");
window.document.addEventListener&&window.document.addEventListener("touchstart",z.p,!1);z.Pj&&(0,window.$)('meta[name\x3d"viewport"]').attr("content","width\x3ddevice-width, initial-scale\x3d1.0");(0,window.$)(function(){window.znonce&&window.znonce.evalScripts();(new Gw).init();new px;var a=new Hw;window.console&&window.console.info&&window.console.info(a.oM+"\n\n"+a.link);Kw();z.T.init()});z.v(Yx,Rq);z.la(Yx);Yx.prototype.T=function(){return"goog-menuheader"};z.v(Zx,$q);z.Yq("goog-menuheader",function(){return new Zx(null)});z.v($x,Rq);z.la($x);z.e=$x.prototype;z.e.lf=function(){return"menuitem"};z.e.B=function(a){var b=a.L().B("DIV",this.Xf(a).join(" "),by(this,a.Ua(),a.L()));dy(this,a,b,Uq(a,8)||Uq(a,16));return b};z.e.R=function(a){return a&&a.firstChild};z.e.w=function(a,b){var c=z.hf(b),d=ay(this,2);c&&z.aj(c,d)||b.appendChild(by(this,b.childNodes,a.L()));z.aj(b,"goog-option")&&(a.Hp(!0),this.Hp(a,b,!0));return $x.v.w.call(this,a,b)};
z.e.ka=function(a,b){var c=this.R(a),d=cy(this,a)?c.firstChild:null;$x.v.ka.call(this,a,b);d&&!cy(this,a)&&c.insertBefore(d,c.firstChild||null)};z.e.Di=function(a,b,c){a&&b&&dy(this,a,b,c)};z.e.Hp=function(a,b,c){a&&b&&dy(this,a,b,c)};z.e.Zn=function(a){switch(a){case 2:return ay(this,0);case 16:case 8:return"goog-option-selected";default:return $x.v.Zn.call(this,a)}};
z.e.ks=function(a){var b=ay(this,0);switch(a){case "goog-option-selected":return 16;case b:return 2;default:return $x.v.ks.call(this,a)}};z.e.T=function(){return"goog-menuitem"};z.v(z.ey,$q);z.e=z.ey.prototype;z.e.W=function(){var a=this.Gz;return null!=a?a:this.Og()};z.e.Ea=function(a){this.Gz=a};z.e.Ub=function(a,b){z.ey.v.Ub.call(this,a,b);switch(a){case 8:this.tf()&&!b&&this.Mc(!1);var c=this.m();c&&this.M.Di(this,c,b);break;case 16:(c=this.m())&&this.M.Hp(this,c,b)}};z.e.Di=function(a){this.Ub(8,a)};z.e.Hp=function(a){this.Ub(16,a)};
z.e.Og=function(){var a=this.Ua();return z.na(a)?(a=z.ob(a,function(a){return z.kf(a)&&(z.aj(a,"goog-menuitem-accel")||z.aj(a,"goog-menuitem-mnemonic-separator"))?"":z.Qp(a)}).join(""),tq(a)):z.ey.v.Og.call(this)};z.e.qf=function(a){var b=this.getParent();if(b){var c=b.jI;b.jI=null;if(b=c&&z.qa(a.clientX))b=new z.He(a.clientX,a.clientY),b=c==b?!0:c&&b?c.x==b.x&&c.y==b.y:!1;if(b)return}z.ey.v.qf.call(this,a)};z.e.pf=function(a){return a.keyCode==this.Fz&&this.Od(a)?!0:z.ey.v.pf.call(this,a)};
z.e.mO=function(){return this.Fz};z.Yq("goog-menuitem",function(){return new z.ey(null)});z.ey.prototype.fi=function(){return Uq(this,16)?"menuitemcheckbox":Uq(this,8)?"menuitemradio":z.ey.v.fi.call(this)};z.ey.prototype.getParent=function(){return $q.prototype.getParent.call(this)};z.ey.prototype.ei=function(){return $q.prototype.ei.call(this)};z.v(fy,Rq);z.la(fy);fy.prototype.B=function(a){return a.L().B("DIV",this.T())};fy.prototype.w=function(a,b){b.id&&Wn(a,b.id);if("HR"==b.tagName){var c=b;b=this.B(a);z.bf(b,c);z.N(c)}else z.bj(b,this.T());return b};fy.prototype.ka=function(){};fy.prototype.T=function(){return"goog-menuseparator"};z.v(z.gy,$q);z.gy.prototype.C=function(){z.gy.v.C.call(this);z.Wi(this.m(),"separator")};z.Yq("goog-menuseparator",function(){return new z.gy});z.v(hy,Sr);z.la(hy);z.e=hy.prototype;z.e.Yb=function(a){return"UL"==a.tagName||hy.v.Yb.call(this,a)};z.e.ao=function(a){return"HR"==a.tagName?new z.gy:hy.v.ao.call(this,a)};z.e.Mf=function(a,b){return z.mf(a.m(),b)};z.e.T=function(){return"goog-menu"};z.e.De=function(a){hy.v.De.call(this,a);z.Xi(a.m(),"haspopup","true")};z.v(z.iy,z.gy);z.Yq("goog-menuseparator",function(){return new z.gy});z.v(z.jy,z.Vr);z.e=z.jy.prototype;z.e.gn=!0;z.e.cM=!1;z.e.T=function(){return this.M.T()};z.e.Mf=function(a){if(this.M.Mf(this,a))return!0;for(var b=0,c=z.ah(this);b<c;b++){var d=z.bh(this,b);if("function"==typeof d.Mf&&d.Mf(a))return!0}return!1};z.e.Ga=function(a){this.K(a,!0)};z.e.Vi=function(a,b){this.Sk(a,b,!0)};z.e.removeItem=function(a){(a=this.removeChild(a,!0))&&a.H()};z.e.di=function(a){return z.bh(this,a)};z.e.Fl=function(){return z.ah(this)};
z.e.lb=function(){var a=[];z.ch(this,function(b){a.push(b)});return a};z.e.setPosition=function(a,b){var c=this.U();c||z.P(this.m(),!0);z.Kp(this.m(),a,b);c||z.P(this.m(),!1)};z.e.G=function(a,b,c){(b=z.jy.v.G.call(this,a,b))&&a&&this.ya&&this.gn&&this.Zb().focus();this.jI=a&&c&&z.qa(c.clientX)?new z.He(c.clientX,c.clientY):null;return b};z.e.ey=function(a){this.gn&&this.Zb().focus();return z.jy.v.ey.call(this,a)};z.e.AD=function(a){return(this.cM||a.isEnabled())&&a.U()&&Uq(a,2)};
z.e.ga=function(a){var b=this.M,c;c=this.L();c=z.Me(c.Ka,"DIV",b.T()+"-content",a);for(var d=c.length,f=0;f<d;f++)Ur(b,this,c[f]);z.jy.v.ga.call(this,a)};z.e.pf=function(a){var b=z.jy.v.pf.call(this,a);b||z.ch(this,function(c){!b&&c.mO&&c.Fz==a.keyCode&&(this.isEnabled()&&this.Oc(c),b=c.$b(a))},this);return b};z.e.ub=function(a){z.jy.v.ub.call(this,a);(a=z.bh(this,a))&&Lp(a.m(),this.m())};z.v(z.ly,z.Nw);z.ly.prototype.co=function(){return this.Mo};z.ly.prototype.Em=function(a){this.Mo=a};z.ly.prototype.ha=function(a,b,c,d){var f=z.Es(this.element,this.af,a,b,null,c,10,d,this.dA);if(f&496){var g=my(f,this.af);b=my(f,b);f=z.Es(this.element,g,a,b,null,c,10,d,this.dA);f&496&&(g=my(f,g),b=my(f,b),z.Es(this.element,g,a,b,null,c,this.co(),d,this.dA))}};z.v(ny,z.ly);z.v(oy,z.Xq);z.la(oy);z.e=oy.prototype;z.e.B=function(a){var b={"class":"goog-inline-block "+this.Xf(a).join(" ")},b=a.L().B("DIV",b,this.Th(a.Ua(),a.L()));this.xd(b,a.Il());return b};z.e.lf=function(){return"button"};z.e.R=function(a){return a&&a.firstChild&&a.firstChild.firstChild};z.e.Th=function(a,b){return b.B("DIV","goog-inline-block "+(this.T()+"-outer-box"),b.B("DIV","goog-inline-block "+(this.T()+"-inner-box"),a))};z.e.Yb=function(a){return"DIV"==a.tagName};
z.e.w=function(a,b){py(b,!0);py(b,!1);var c;a:{c=a.L().qF(b);var d=this.T()+"-outer-box";if(c&&z.aj(c,d)&&(c=a.L().qF(c),d=this.T()+"-inner-box",c&&z.aj(c,d))){c=!0;break a}c=!1}c||b.appendChild(this.Th(b.childNodes,a.L()));z.cj(b,["goog-inline-block",this.T()]);return oy.v.w.call(this,a,b)};z.e.T=function(){return"goog-custom-button"};z.v(qy,oy);z.la(qy);z.e=qy.prototype;z.e.R=function(a){return qy.v.R.call(this,a&&a.firstChild)};z.e.w=function(a,b){var c=z.Me(window.document,"*","goog-menu",b)[0];if(c){z.P(c,!1);z.Ke(c).body.appendChild(c);var d=new z.jy;d.w(c);a.ph(d)}return qy.v.w.call(this,a,b)};z.e.Th=function(a,b){return qy.v.Th.call(this,[this.createCaption(a,b),b.B("DIV","goog-inline-block "+(this.T()+"-dropdown")," ")],b)};z.e.createCaption=function(a,b){return ry(a,this.T(),b)};z.e.T=function(){return"goog-menu-button"};z.v(z.sy,z.gr);z.e=z.sy.prototype;z.e.Zs=!1;z.e.tk=!1;z.e.FU=!1;z.e.C=function(){z.sy.v.C.call(this);xy(this,!0);this.ma&&wy(this,this.ma,!0);z.Xi(this.h,"haspopup",!!this.ma)};z.e.Db=function(){z.sy.v.Db.call(this);xy(this,!1);if(this.ma){this.Bb(!1);this.ma.Db();wy(this,this.ma,!1);var a=this.ma.m();a&&z.N(a)}};z.e.D=function(){z.sy.v.D.call(this);this.ma&&(this.ma.H(),delete this.ma);delete this.vT;this.na.H()};
z.e.ge=function(a){z.sy.v.ge.call(this,a);this.bc()&&(this.Bb(!this.rb(),a),this.ma&&(a=this.rb(),this.ma.yf=a))};z.e.qf=function(a){z.sy.v.qf.call(this,a);this.ma&&!this.bc()&&(this.ma.yf=!1)};z.e.Od=function(){this.setActive(!1);return!0};z.e.KO=function(a){this.ma&&this.ma.U()&&!this.Mf(a.target)&&this.Bb(!1)};z.e.Mf=function(a){return a&&z.mf(this.m(),a)||this.ma&&this.ma.Mf(a)||!1};
z.e.pf=function(a){if(32==a.keyCode){if(a.preventDefault(),"keyup"!=a.type)return!0}else if("key"!=a.type)return!1;if(this.ma&&this.ma.U()){var b=13==a.keyCode||32==a.keyCode,c=this.ma.$b(a);return 27==a.keyCode||b?(this.Bb(!1),!0):c}return 40==a.keyCode||38==a.keyCode||32==a.keyCode||13==a.keyCode?(this.Bb(!0,a),!0):!1};z.e.oo=function(){this.Bb(!1)};z.e.nP=function(){this.bc()||this.Bb(!1)};z.e.Zc=function(a){this.Zs||this.Bb(!1);z.sy.v.Zc.call(this,a)};
z.e.Xa=function(){this.ma||this.ph(new z.jy(this.L(),this.pR));return this.ma||null};z.e.ph=function(a){var b=this.ma;if(a!=b&&(b&&(this.Bb(!1),this.ya&&wy(this,b,!1),delete this.ma),this.ya&&z.Xi(this.h,"haspopup",!!a),a)){this.ma=a;z.Zg(a,this);a.G(!1);var c=this.Zs;(a.gn=c)&&a.Pe(!0);this.ya&&wy(this,a,!0)}return b};z.e.Ga=function(a){this.Xa().K(a,!0)};z.e.Vi=function(a,b){this.Xa().Sk(a,b,!0)};z.e.removeItem=function(a){(a=this.Xa().removeChild(a,!0))&&a.H()};
z.e.di=function(a){return this.ma?z.bh(this.ma,a):null};z.e.Fl=function(){return this.ma?z.ah(this.ma):0};z.e.G=function(a,b){var c=z.sy.v.G.call(this,a,b);c&&!this.U()&&this.Bb(!1);return c};z.e.Wa=function(a){z.sy.v.Wa.call(this,a);this.isEnabled()||this.Bb(!1)};z.e.xJ=function(){this.Bb(!0)};
z.e.Bb=function(a,b){z.sy.v.Bb.call(this,a);if(this.ma&&!!(this.N&64)==a){if(a){if(!this.ma.ya)if(this.tk){var c=z.Vp(this.m());c?this.ma.wp(c.parentNode,c):this.ma.render(this.m().parentNode)}else this.ma.render();this.rK=Mp(this.m());this.yD=z.Jp(this.m());vy(this);c=!!b&&(13==b.keyCode||32==b.keyCode);b&&(40==b.keyCode||38==b.keyCode)||c&&this.FU?z.Zr(this.ma):this.ma.ub(-1)}else{this.setActive(!1);this.ma.yf=!1;if(c=this.m())z.Xi(c,"activedescendant",""),z.Xi(c,"owns","");null!=this.Pt&&(this.Pt=
void 0,(c=this.ma.m())&&z.Gg(c,"",""))}this.ma.G(a,!1,b);if(!this.Gd){var c=this.o(),d=a?c.g:c.qa;d.call(c,this.L().wa(),"mousedown",this.KO,!0);this.Zs&&d.call(c,this.ma,"blur",this.nP);d.call(c,this.na,"tick",this.lm);a?this.na.start():this.na.stop()}}this.ma&&this.ma.m()&&this.ma.h.removeAttribute("aria-hidden")};
z.e.lm=function(){var a=z.Jp(this.m()),b=Mp(this.m()),c=this.yD;(c=!(c==a||c&&a&&c.left==a.left&&c.width==a.width&&c.top==a.top&&c.height==a.height))||(c=this.rK,c=!(c==b||c&&b&&c.top==b.top&&c.right==b.right&&c.bottom==b.bottom&&c.left==b.left));c&&(this.yD=a,this.rK=b,vy(this))};z.e.iy=function(a){(a=a.target.m())&&yy(this,a)};z.e.fP=function(a){Uq(this,32)&&this.Zb()&&this.ma&&this.ma.U()&&a.stopPropagation()};
z.e.py=function(){if(!Yr(this.ma)){var a=this.m();z.Xi(a,"activedescendant","");z.Xi(a,"owns","")}};z.e.cy=function(a){if(this.rb()&&a.target instanceof z.ey){a=a.target;var b=a.m();a.U()&&a.N&2&&null!=b&&yy(this,b)}};z.Yq("goog-menu-button",function(){return new z.sy(null)});z.v(z.zy,z.Rj);z.la(z.zy);z.e=z.zy.prototype;
z.e.B=function(){this.GN=!0;this.h=z.M("div",null,[this.YQ=z.M("div",null,[this.ah=z.M("div","zm-favo-list-content"),this.RC=z.M("div","zh-favo-add-new-wrap zm-command",this.gV=z.M("a",{"class":"zm-favo-dialog-create zg-left",href:"javascript:;"},"+ 创建收藏夹"),this.xw=z.M("a",{href:"javascript:;","class":"zg-btn-blue"},"关闭")),this.Jv=z.M("div","zh-favo-add-new-wrap zm-command",this.ZM=z.M("a",{href:"javascript:;","class":""},"取消"),this.hV=z.M("a",{"class":"zm-favo-dialog-create zg-btn-blue",href:"javascript:;"},
"创建收藏夹"))]),this.Gx=z.M("div",{"class":"zh-favo-add-form",style:"display:none"},[z.M("div",null,["标题",this.DB=z.M("span",{"class":"zh-favo-add-title-error"},"请填写标题")]),z.M("div","zg-section",this.li=z.M("input",{"class":"zg-form-text-input"})),z.M("div",null,"描述（可选）"),z.M("div",{"class":"zg-section zg-form-text-input"},this.Wj=z.M("textarea",{"class":"zg-editor-input",style:"height:66px"})),this.EI=z.M("label",null,[this.LG=z.M("input",{type:"radio",checked:"checked",value:"public",name:"mode"}),
z.M("strong",null," 公开 "),z.M("span","zg-gray-normal","公开后不能设置为私密")]),this.QG=z.M("br"),this.CI=z.M("label",null,[this.KG=z.M("input",{type:"radio",value:"private",name:"mode"}),z.M("strong",null," 私密 "),z.M("span","zg-gray-normal","只有你可以查看这个收藏夹")]),z.M("div","zm-command",[this.jx=z.M("label",{href:"javascript:;","class":"zh-favo-error-message-label zg-left"},""),this.pB=z.M("a",{href:"javascript:;","class":"zg-mr10"},"取消"),this.mr=z.M("a",{href:"javascript:;","class":"zg-mr10"},"完成"),this.Hv=z.M("a",
{"class":"zg-btn-blue"},"确认创建")])])]);z.P(this.DB,!1);z.P(this.Jv,!1);(new z.Us(this.EB)).w(this.li);(new z.Us(this.Vw)).w(this.Wj);z.w(this.pz,function(a){By(this,a)},this);this.pz.length||(this.ah.innerHTML='\x3cdiv id\x3d"zh-fav-list-item-place-holder" class\x3d"zg-r5px zm-fav-list-item-place-holder"\x3e你可以创建多个收藏夹，将答案分类收藏\x3c/div\x3e ',z.P(this.Jv,!0),z.P(this.RC,!1));Ay(this);this.ta.R().innerHTML="";this.ta.R().appendChild(this.h);this.ta.ha()};
z.e.fc=function(){this.FM||(this.FM=!0,this.o().g(this.pB,"click",function(){this.sa?Fy(this,0):Iy(this);My("click_add_collection_cancel")}).g(this.gV,"click",function(){z.X.fb({type:"ga_click_add_collection"});Fy(this,1);z.yi("collect","click_add_collection_start","collect_answer_box")}).g(this.xw,"click",function(){My("click_add_collection_close");Iy(this)}).g(this.hV,"click",function(){z.X.fb({type:"ga_click_add_collection"});Fy(this,1)}).g(this.ZM,"click",function(){Iy(this)}).g(this.mr,"click",
function(){Iy(this)}).g(this.Hv,"click",function(){var a=this.Wj.value,b=this.li.value;a&&My("click_add_collection_discription",a);b&&My("click_add_collection_title",b);this.gh()}).g(this.ah,"click",this.DS).g(this.li,"change",function(){z.P(this.DB,!1)}).g(this.LG,"click",function(){My("click_add_collection_public")}).g(this.KG,"click",function(){My("click_add_collection_private")}))};
z.e.DS=function(a){var b=z.uf(a.target,"A");if(b&&!this.locked){a=b.getAttribute("data-lid");var c=!1;z.V.has(b,"zm-favo-list-item-link-active")?(c=!0,this.jE=a):this.gE=a;b=new z.fp;b.add("answer_id",this.sa);b.add("favlist_id",a);this.NA=new z.Z(!0);this.locked=!0;this.o().Aa(this.NA,"complete",this.YL);this.NA.ajax(c?"/collection/remove":"/collection/add",b.Jd())}};
z.e.YL=function(){this.locked=!1;this.xw.innerHTML="关闭";var a=z.Zn(this.NA);a&&!a.r?(a=z.Xp("zm-favo-list-item-link",this.ah),z.w(a,function(a){var c=a.getAttribute("data-lid"),d=z.L("num",a),f=(0,window.parseInt)(d.innerHTML,10);c===this.jE?(d.innerHTML=f-1+"",z.V.remove(a,"zm-favo-list-item-link-active")):c===this.gE&&(d.innerHTML=f+1+"",z.V.add(a,"zm-favo-list-item-link-active"))},this),this.gE=this.jE=null,cp("Favorite","add_favorite")):z.W.message("添加失败: "+a.msg)};
z.e.kk=function(){this.fc();this.xw.innerHTML="关闭";this.sa?(z.P(this.mr,!1),Fy(this,0)):(Fy(this,1),z.P(this.pB,!1),this.mr.innerHTML="取消")};z.e.show=function(a){a?(Ey(this),this.ta.G(!0),this.kk()):(Ay(this,"添加到收藏夹",'\x3cdiv style\x3d"text-align: center; color: #999;"\x3e收藏夹加载中\x3ci class\x3d"spinner-gray"\x3e\x3c/i\x3e\x3c/div\x3e'),this.ta.G(!0),this.hs())};z.e.hs=function(){this.sa&&window.$.get("/collections/json",{answer_id:this.sa}).done((0,z.q)(this.nS,this))};
z.e.nS=function(a){a&&!a.r&&(this.pz=a.msg[0],this.nt=a.msg[1],Ey(this),this.kk())};
z.e.gh=function(){if(!this.xhr||!this.xhr.bc()){(0,window.$)(this.jx).text("").hide();var a=z.Ao(this.li.value);if(a&&a!==this.EB){a=Gy(this);this.sa&&a.add("answer_id",this.sa);if(this.Yl){if(this.jQ.Jd()===a.Jd()){Iy(this);return}a.add("favlist_id",this.iE[0])}this.xhr=new z.Z(!0);Ky(this,this.xhr,this.Hv,this.Yl);this.o().Aa(this.xhr,"complete",this.PL);this.xhr.ajax(this.Yl?"/collection/update":"/collection/create",a.Jd())}else z.P(this.DB,!0)}};
z.e.PL=function(){var a=z.Zn(this.xhr);a&&!a.r?this.Yl?(Iy(this),z.W.message("编辑成功"),(0,window.setTimeout)(function(){window.location.reload()},1E3),this.Yl=!1):this.sa?(z.P(this.Jv,!1),z.P(this.RC,!0),Fy(this,0),this.nt.push(a.msg[0]),By(this,a.msg,!0),this.li.value="",this.Wj.value=""):(Iy(this),z.W.message("创建成功"),(0,window.setTimeout)(function(){window.location.href="/collections/mine"},1E3)):Ly(this.jx,this.Yl,a.msg)};z.e.U=function(){return this.ta.U()};var Jy="close";
z.zy.prototype.Mg=function(){(0,window.$)(window).on("beforeunload.FavoDiag",(0,z.q)(function(){return"你对收藏夹的修改还未保存，确认离开该页面吗？"},this))};z.zy.prototype.Xh=function(){(0,window.$)(window).off("beforeunload.FavoDiag")};z.oB=function(a,b){var c=[],d=[].slice,f=z.$o(a,function(){c.length&&(b(c),c=[])});return function(){c.push(d.call(arguments));f()}}(550,function(a){z.S.kb()&&(a={items:JSON.stringify(a)},window.$.post("/lastread/touch",a))});var DG=/a(:(link|visited|active|hover))?/;Py.prototype.clone=function(){var a=new Py;a.nh=this.nh.concat();a.On=this.On;return a};var EG=/(^|;|{)\s*color:([^;]+);/g,Ty={},Wy={},FG={},GG="color visibility quotes list-style-type list-style-image list-style-position list-style page-break-inside orphans widows font-family font-style font-variant font-weight text-indent text-align text-transform white-space caption-side border-collapse border-spacing empty-cells cursor".split(" "),HG="font-family font-size font-weight font-variant font-style color text-align text-decoration text-indent text-transform letter-spacing white-space word-spacing".split(" ");var IG;z.v(z.Xy,z.F);z.e=z.Xy.prototype;z.e.F=null;z.e.uM=!0;z.e.cK=function(){this.F&&(this.disable(this.F),this.F=null)};z.e.enable=function(a){this.F==a&&(this.hc=!0)};z.e.disable=function(a){this.F==a&&(this.hc=!1)};z.e.isEnabled=function(a){return this.F==a?this.hc:!1};z.e.Jq=z.Bl;z.e.MG=z.Bl;z.e.D=function(){this.F&&this.cK(this.F);z.Xy.v.D.call(this)};z.cz=z.gq({jy:1,gP:2,vs:3,Cj:4,ws:5,execCommand:6,queryCommandValue:7,wI:8,UM:10,TM:11});IG={8:!0,10:!0,11:!0};
z.Xy.prototype.execCommand=function(a,b){var c=this.MG(a);c||(z.y&&z.zz(this.F,!0,!0),this.F.Yh());try{var d=this.jf.apply(this,arguments)}finally{c||(this.F.ef(),z.yz(this.F))}return d};z.Xy.prototype.Ge=function(){return!1};var dz,gz;z.v(bz,z.F);bz.prototype.Ha=null;bz.prototype.Kc=null;dz="change";z.ez="delayedchange";gz={wW:"cvc",RW:"load",lX:"unload",oW:"beforechange",uW:dz,yW:z.ez,pW:"beforefocus",BW:"focus",sW:"blur",rW:"beforetab",JW:"ifrsz",qW:"beforeselectionchange",$W:"selectionchange"};z.iz=0;z.JG=null;z.e=bz.prototype;z.e.Ug=!1;z.e.mK=!1;z.e.$u=!1;z.e.m=function(){return this.Ha};
z.e.addListener=function(a,b,c,d){var f=this.m();iG&&f&&this.qc()&&(f=f.ownerDocument);d?z.Ad(this.ic,f,a,b,c,d):this.ic.g(f,a,b,c)};var hz=15,fz=250;bz.prototype.qc=z.Cl;bz.prototype.Go=z.Cl;bz.prototype.vJ=z.Bl;var lz={46:!0,8:!0};z.A||(lz[9]=!0);var mz={86:!0,88:!0};z.dl&&!z.y&&(lz[229]=!0);
bz.prototype.ww=function(){this.ic&&this.ic.removeAll();if((z.Oi||z.Pj)&&this.qc()&&this.vJ()){try{var a=this.gb.Va();a.removeEventListener("keydown",this.rn,!1);a.removeEventListener("touchend",this.rn,!1)}catch(b){}delete this.rn}if(z.vg&&this.qc()){try{a=this.gb.Va(),a.removeEventListener("focus",this.iw,!1),a.removeEventListener("blur",this.hw,!1)}catch(b){}delete this.iw;delete this.hw}this.we&&this.we.stop();this.Hr.stop()};
bz.prototype.D=function(){this.Io()||this.xc();this.Kc&&this.execCommand("clearlorem");this.bm=z.iz;for(var a in this.Sb){var b=this.Sb[a];b.Jq()||b.disable(this)}this.gb=this.Ha=null;this.ww();this.sl&&(z.od(this.sl),this.sl=null);this.nm=null;this.ic&&(this.ic.H(),this.ic=null);for(;a=this.jW.pop();)a.H();z.JG==this.id&&(z.JG=null);for(var c in this.Sb)a=this.Sb[c],a.uM&&a.H();delete this.Sb;bz.v.D.call(this)};
var KG=["DOMNodeInserted","DOMNodeRemoved","DOMNodeRemovedFromDocument","DOMNodeInsertedIntoDocument","DOMCharacterDataModified"];bz.prototype.ZA=function(){if(fG||!this.qc())this.ic.g(this.m(),"DOMSubtreeModified",this.ky);else{var a=this.gb.wa();this.ic.g(a,KG,this.ky,!0);this.ic.g(a,"DOMAttrModified",(0,z.q)(this.zF,this,this.ky),!0)}};var sz={8:1,9:1,13:1,33:1,34:1,35:1,36:1,37:1,38:1,39:1,40:1,46:1},tz={65:!0,86:!0,88:!0},vz={8:1,9:1,13:1,27:1,33:1,34:1,37:1,38:1,39:1,40:1};z.e=bz.prototype;
z.e.Co=function(a,b){for(var c=this.Ij[a],d=z.zb(arguments,1),f=0;f<c.length;++f){var g=c[f];if((g.isEnabled(this)||IG[a])&&g[z.cz[a]].apply(g,d))return!0}return!1};z.e.zQ=function(a,b){for(var c=this.Ij[a],d=z.zb(arguments,1),f=0;f<c.length;++f){var g=c[f];(g.isEnabled(this)||IG[a])&&g[z.cz[a]].apply(g,d)}};z.e.eu=function(a,b,c){for(var d=this.Ij[a],f=z.zb(arguments,1),g=0;g<d.length;++g){var h=d[g];if(h.isEnabled(this)||IG[a])f[0]=h[z.cz[a]].apply(h,f)}return f[0]};
z.e.of=function(a){z.Vc&&65==a.keyCode&&qz(this,a);(z.y||oz(this,a))&&!this.Co(1,a)&&oG&&uz(this,a)};z.e.hP=function(a){if(z.y){if(!oz(this,a))return}else this.Zx=!0,this.Yh();this.Co(2,a)||oG||uz(this,a)};z.e.iP=function(a){z.y||!this.Zx&&!kz(a)||this.mo();this.Co(3,a);qz(this,a)};z.e.execCommand=function(a,b){for(var c=arguments,d,f=this.Ij[6],g=0;g<f.length;++g){var h=f[g];if(h.isEnabled(this)&&h.Ge(a)){d=h.execCommand.apply(h,c);break}}return d};
z.e.queryCommandValue=function(a){var b=this.xc()&&this.wf;if(z.pa(a))return this.$t(a,b);for(var c={},d=0;d<a.length;d++)c[a[d]]=this.$t(a[d],b);return c};z.e.$t=function(a,b){for(var c=this.Ij[7],d=0;d<c.length;++d){var f=c[d];if(f.isEnabled(this)&&f.Ge(a)&&(b||f.Jq()))return f.queryCommandValue(a)}return b?null:!1};z.e.zF=function(a,b){if(!rz(this,dz)){var c=b.jc;try{if(c.originalTarget.prefix||"scrollbar"==c.originalTarget.nodeName)return}catch(d){return}c.prevValue!=c.newValue&&a.call(this,c)}};
z.e.ky=function(a){rz(this,dz)||(a=a.kF?a.jc:a,a.target.firebugIgnore||this.we.start())};z.e.ss=function(){z.A&&this.execCommand("clearlorem",!0);z.y&&this.Yw();this.ef()};z.e.zP=function(){var a=this.mJ;this.mJ=null;z.yz(this,void 0,a)};z.e.Yh=function(){rz(this,"beforechange")||this.dispatchEvent("beforechange")};z.e.ef=function(a){Bz(this,!0,a)};z.e.mo=function(){rz(this,dz)||(this.we&&this.we.stop(),rz(this,z.ez)||this.Hr.start())};z.e.BE=function(){rz(this,z.ez)||(this.Hr.stop(),this.dispatchEvent(z.ez))};
z.e.Yw=function(){this.AE();this.CE()};z.e.AE=function(){rz(this,"beforefocus")||(this.execCommand("clearlorem",!0),this.dispatchEvent("beforefocus"))};z.e.CE=function(){if(!rz(this,"focus")){z.JG=this.id;this.wf=!0;this.dispatchEvent("focus");if(z.y){var a=this.m(),b=z.xz(this);if(b){var c=z.Bt(b);0!=z.Ct(b)||c&&c!=a&&"BODY"!=c.tagName||z.Gu(a)}}!gG&&this.qc()&&this.gb.Va().parent.getSelection().removeAllRanges()}};z.e.Kr=function(){rz(this,"blur")||(z.JG==this.id&&(z.JG=null),this.wf=!1,this.dispatchEvent("blur"))};
z.e.Kl=function(a){z.JG=this.id;if(z.A){var b=a.target;b&&"A"==b.tagName&&a.ctrlKey&&this.nm.Va().open(b.href)}this.$u=!0};z.e.dy=function(){this.$u=!1};z.e.ys=function(a){if(!this.mK||this.$u)this.$u=!1,this.dispatchEvent("beforeselectionchange"),z.yz(this,a),z.A&&(this.mJ=a.target,this.nJ.start())};
z.e.Al=function(){if(this.queryCommandValue("usinglorem"))return" ";if(!this.xc())return this.Kc.innerHTML;var a=this.m(),b=a.cloneNode(!1),a=a.innerHTML;z.A&&a.match(/^\s*<script/i)&&(a=" "+a);b.innerHTML=a;this.zQ(11,b);return this.eu(10,b.innerHTML)};
z.e.Pd=function(a,b,c,d){if(!this.Io()){d&&this.execCommand("clearlorem");b&&a&&(b="\x3cp\x3e"+b+"\x3c/p\x3e");c&&z.zz(this,!1,!0);a=b;if(b=this.m()){if(this.qc()&&z.B)for(var f=b.ownerDocument.getElementsByTagName("HEAD"),g=f.length-1;1<=g;--g)f[g].parentNode.removeChild(f[g])}else b=this.Kc;b&&pz(this,a,b);d&&this.execCommand("updatelorem");this.xc()&&(c?(z.y&&Nn(this.we),Bz(this)):this.ef())}};z.e.NB=function(){var a=this.gb.wa();a.designMode="on";z.lG&&a.execCommand("styleWithCSS",!1,!1)};
z.e.xG=function(){this.hl&&Ez(this)&&z.Mg(this.hl,this.m())};z.e.xc=function(){return 2==this.bm};z.e.Io=function(){return 1==this.bm};z.e.focus=function(){if(!z.az&&this.qc())this.gb.Va().focus();else{if(z.vg)var a=this.Uk.pageXOffset,b=this.Uk.pageYOffset;this.m().focus();z.vg&&this.Uk.scrollTo(a,b)}};z.e.Wf=function(){!z.dG&&z.y||z.Dz(this);this.focus()};z.e.Je=function(a){this.bm=1;var b=this.Kc;this.nodeName=b.nodeName;this.cssText=b.style.cssText;z.bj(b,"editable");this.xz(a)};
z.e.xz=function(a){var b=this.Kc;if(b){var b=b.innerHTML,c={},b=this.eu(8,b,c),d=this.nm.B("IFRAME",this.sF());if(Ez(this)){var f=(0,z.q)(this.hG,this,d,b,c);this.sl=z.E(d,"load",f,!0);a&&(d.src=a)}this.hD(d);Ez(this)||this.hG(d,b,c)}};
z.e.ts=function(){z.A&&z.vu(this.gb.Va());z.JG!=this.id&&this.execCommand("updatelorem");if((z.Oi||z.Pj)&&this.qc()&&this.vJ()){var a=this.gb.Va();this.rn=(0,z.q)(a.focus,a);a.addEventListener("keydown",this.rn,!1);a.addEventListener("touchend",this.rn,!1)}z.vg&&this.qc()?(this.iw=(0,z.q)(this.Yw,this),this.hw=(0,z.q)(this.Kr,this),a=this.gb.Va(),a.addEventListener("focus",this.iw,!1),a.addEventListener("blur",this.hw,!1)):(nG?(this.addListener("focus",this.CE),this.addListener(z.Ll,this.AE)):this.addListener("focus",
this.Yw),this.addListener("blur",this.Kr,z.y));z.y?this.ZA():(this.addListener(["beforecut","beforepaste","drop","dragend"],this.Yh),this.addListener(["cut","paste"],oq(this.ef)),this.addListener("drop",this.ss));this.addListener(z.B?"dragend":"dragdrop",this.ss);this.addListener("keydown",this.of);this.addListener("keypress",this.hP);this.addListener("keyup",this.iP);this.nJ=new z.pl(this.zP,250,this);this.eO&&this.addListener("click",Cz);this.addListener("mousedown",this.Kl);this.mK?(this.ic.g(this.gb.wa(),
"mouseup",this.ys),this.addListener("dragstart",this.dy)):this.addListener("mouseup",this.ys);this.xG();Bz(this);this.dispatchEvent("load");for(var b in this.Sb)this.Sb[b].enable(this)};z.e.hD=function(a){var b=this.Kc;a.className=b.className;a.id=b.id;z.Wp(a,b)};z.e.Ox=function(a){var b=Yn(z.H(this.Kc));return new Yy(this.id,b,!1,!1,a)};
z.e.CK=function(a,b,c){c=this.Ox(c);Ez(this)?(a=(a.contentDocument||a.contentWindow.document).body,z.az&&(a.contentEditable=!0),a.className="editable",a.setAttribute("g_editable",!0),a.hideFocus=!0,a.id=c.YE,z.sg(a,c.sx),a.innerHTML=b):$y(c,b,new Zy(this.m(),this.hl),a)};z.e.hG=function(a,b,c){this.sl&&(z.od(this.sl),this.sl=null);a.allowTransparency="true";this.CK(a,b,c);nz(this,(a.contentDocument||a.contentWindow.document).body);!z.az&&this.qc()&&this.NB();this.ts()};
z.e.sF=function(){var a="padding:0;"+this.Kc.style.cssText;z.Yo(a,";")||(a+=";");a+="background-color:white;";z.A&&(a+="overflow:visible;");return{frameBorder:0,style:a}};var LG;z.v(z.Fz,bz);z.e=z.Fz.prototype;z.e.CG=!1;z.e.FQ=!1;z.e.Go=function(){return this.CG};z.e.JF=function(){rz(this,dz)||Gz(this)};
z.e.gB=function(){if(this.Rp?0:this.Rp=!0){var a=!1,b=wz(this);if(b){var c,d=wz(this),f=d.contentDocument.body;c=f.parentNode;0===(0,window.parseInt)(Np(d,"height"),10)&&z.sg(d,"height","1px");Yn(z.H(f))?d=c.offsetHeight:(d=c.scrollHeight,c.clientHeight!=c.offsetHeight&&(d+=LG||(LG=z.Vg())));c=d;this.sR&&(c=Math.max(c,this.sR));(0,window.parseInt)(Np(b,"height"),10)!=c&&(b.style.height=c+"px",a=!0)}this.Rp=!1;a&&this.dispatchEvent("ifrsz")}};z.e.vy="";var MG=!1;z.e=z.Fz.prototype;z.e.qc=function(){return!z.az};
z.e.ZA=function(){z.Fz.v.ZA.call(this);if(this.qc()){var a=wz(this).ownerDocument;this.ic.g(a,KG,this.JF,!0);this.ZQ=z.md(this.gb.Va(),"load",this.gB,!0,this);this.ic.g(a,"DOMAttrModified",(0,z.q)(this.zF,this,this.JF),!0)}};z.e.mo=function(){rz(this,dz)||(z.Fz.v.mo.call(this),this.qc()&&this.gB())};
z.e.Kr=function(){if(!rz(this,"blur")&&(z.Fz.v.Kr.call(this),!z.az&&!gG)){var a=this.gb.Va(),b=!1;z.od(this.aH);this.aH=z.md(a.document.body,"dragover",function(){b=!0});z.r.setTimeout((0,z.q)(function(){if(!b&&this.gb){var a=z.xz(this),d=this.gb.Va();z.vu(d);a&&(a.collapse(!0),a.select())}},this),0)}};z.e.NB=function(){z.Fz.v.NB.call(this);var a=this.gb.wa();a.execCommand("enableInlineTableEditing",!1,"false");a.execCommand("enableObjectResizing",!1,"false")};
z.e.xG=function(){this.qc()||MG||(this.hl&&z.Mg(this.hl,this.m()),MG=!0)};z.e.xz=function(a){if(this.qc())z.Fz.v.xz.call(this,a);else if(a=this.Kc)nz(this,a),a.contentEditable=!0,pz(this,a.innerHTML,a),this.ts()};z.e.ts=function(){if(this.qc()){var a=this;z.r.setTimeout(function(){Hz(a)},0)}z.Fz.v.ts.call(this)};z.e.sF=function(){return{frameBorder:0,style:"padding:0;"}};
z.e.hD=function(a){if(!this.FQ){var b=this.Kc;b&&(this.CG="auto"==z.yg(b,"overflowY"))}var b=this.Kc,c=z.H(b),d=b.style.width,f=b.style.height;z.sg(b,"visibility","hidden");var c=c.B("DIV",{style:"height:0;clear:both",innerHTML:"\x26nbsp;"}),g=c.cloneNode(!0);b.insertBefore(c,b.firstChild);b.appendChild(g);g=z.Ke(b);if((c=z.A&&b.currentStyle)&&Yn(z.H(g))&&"auto"!=c.width&&"auto"!=c.height&&!c.boxSizing)g=z.Og(b,c.width,"width","pixelWidth"),c=z.Og(b,c.height,"height","pixelHeight"),g=new z.Ie(g,c);
else var c=z.Io(b),g=z.Qg(b),h=z.Tg(b),g=new z.Ie(c.width-h.left-g.left-g.right-h.right,c.height-h.top-g.top-g.bottom-h.bottom);c=g.width;g=g.height;h="";this.Go()&&(h="\x26nbsp;",z.sg(b,"position","relative"),z.sg(b,"overflow","visible"),z.sg(a,"position","absolute"),z.sg(a,"top","0"),z.sg(a,"left","0"));z.Gg(b,c,g);Yn(z.H(b))&&z.sg(b,"lineHeight","0");z.Eu(b,h);z.Gg(a,c,g);z.Gg(b,d,f);z.sg(b,"visibility","");b.appendChild(a);Ez(this)||(b=a.contentWindow.document,Yn(z.H(a.ownerDocument))&&(b.open(),
a=z.Jd("\x3c!DOCTYPE HTML\x3e\x3chtml\x3e\x3c/html\x3e",null),b.write(z.Id(a)),b.close()))};z.e.Ox=function(a){var b=this.Kc;if(b)return new Yy(this.id,Yn(z.H(b)),!0,this.Go(),a);throw Error("no field");};
z.e.CK=function(a,b,c){z.sg(a,"visibility","hidden");c=this.Ox(c);var d=this.Kc,f=this.hl;if(!this.vy){var g=this.Kc;if(g){var h=g.ownerDocument,k=z.ua(h);if(!FG[k]){for(var m=z.ua(h),n=[],h=Oy(h.styleSheets),t=0,C;C=h[t];t++)if((C=Ny(C))&&C.length)for(var J=0,K=C.length;J<K;J++){var O=new Py,ca;ca=O;var Xa=C[J],cb=Xa.style;if(cb){var Ha=void 0,Ba="";cb&&(Ha=Xa.selectorText)&&(Ba=cb.cssText)?z.A&&(Ba+="/* */"):Xa.cssText&&(Ba=/([^\{]+)\{/,Ha=Ba.exec(Xa.cssText)[1],Ba=Xa.cssText.replace(Ba,"").replace(/\}[^\}]*$/g,
""));if(Ha){Xa=ca;Xa.nh=[];Ha=Ha.split(/,\s*/gm);for(cb=0;cb<Ha.length;cb++){var yd=Ha[cb];0<yd.length&&Xa.nh.push(new Ry(yd))}ca.On=Ba;ca=!0}else ca=!1}else ca=!1;ca&&n.push(O)}FG[m]=n}m=FG[k];k=[];for(n=0;n<m.length;n++)k.push(m[n].clone());h=new Vy(g);t=new Sy("body");for(m=0;m<k.length;m++)for(C=k[m].nh,n=C.length,J=0;J<n;J++){K=C[J];O=K;ca=h.uid;if(O.Sv[ca])ca=O.Sv[ca];else{for(var Ba=0,cb=Ha=Xa=null,yd=h.EH,gi=yd.length,oe=0;oe<=O.ti.length;oe++){for(Ha=O.ti[oe];Ba<gi;){var Hd=yd[Ba];if(Ha&&
Uy(Ha,Hd)){Xa={ME:Ba,oJ:oe};Ba++;break}else cb&&Uy(cb,Hd)&&(Xa={ME:Ba,oJ:oe-1});Ba++}cb=Ha}ca=O.Sv[ca]=Xa}ca&&(O=ca.oJ,K=K.ti,Ba=K.length-1,ca.ME==h.EH.length-1||O<Ba?(K=K.concat(),K.splice(0,O+1,t),O=new Ry,O.ti=K,C.push(O)):0<O&&O==Ba&&(O=new Ry,O.ti=[t,K[Ba]],C.push(O)))}h=new Py;g=g.currentStyle||z.Ke(g).defaultView.getComputedStyle(g,"")||{};m=new Ry;m.ti=[new Sy("html")];h.nh=[m];t={};for(m=0;n=GG[m];m++)t[n]=g[z.eb(n)];Qy(h,t);k.push(h);h=new Py;t=new Ry;t.ti=[new Sy("body")];C={position:"relative",
top:"0",left:"0",right:"auto",display:"block",visibility:"visible"};for(m=0;n=HG[m];m++)C[n]=g[z.eb(n)];Qy(h,C,!0);h.nh=[t];k.push(h);g=[];n=k.length;for(m=0;m<n;m++){C=k[m];h=g;J=C.nh.length;t=!1;for(K=0;K<J;K++){O=C.nh[K].ti;ca=O.length;for(Ba=0;Ba<ca;Ba++)h.push(O[Ba].vG," ");K<J-1&&h.push(",");z.y&&!z.D("1.9a")&&(t=t||DG.test(O[ca-1].vG))}C=C.On;t&&(C=C.replace(EG,"$1 color: $2 ! important; "));h.push("{",C,"}\n")}this.vy=g.join("")}}d=new Zy(d,f+this.vy);c.dr&&(f=z.Qg(d.iW),(f.top||f.left||f.right||
f.bottom)&&z.sg(a,"margin",-f.top+"px "+-f.right+"px "+-f.bottom+"px "+-f.left+"px"));$y(c,b,d,a);Hz(this);z.sg(a,"visibility","visible")};z.e.ww=function(){z.od(this.aH);z.od(this.ZQ);z.Fz.v.ww.call(this)};var iA={};iA._default_={Sx:function(a){return window.$.get("/node/CommentV2",{params:{comment_id:a}})},Bl:wq,Cl:wq,add:function(a){return window.$.post("/node/AnswerCommentAddV2",{method:"add_comment",params:a})},remove:function(a){return window.$.post("/node/CommentV2",{method:"remove_comment",params:{comment_id:a}})},oz:function(a,b){return window.$.post("/node/CommentV2",{method:b?"like_comment":"undo_like_comment",params:{comment_id:a}})}};
iA.answer={Bl:function(a,b){return window.$.get("/node/AnswerCommentBoxV2",{params:{answer_id:a,load_all:b}})},Cl:function(a){return window.$.get("/node/AnswerCommentListV2",{params:{answer_id:a}})},add:function(a){return window.$.post("/node/AnswerCommentAddV2",{method:"add_comment",params:a})},tM:function(a,b){return window.$.post("/node/AnswerCommentV2",{method:"author_remove_comment",params:{comment_id:a,is_block:b}})}};
iA.question={Bl:function(a){return window.$.get("/node/QuestionCommentBoxV2",{params:{question_id:a}})},Cl:function(a){return window.$.get("/node/QuestionCommentListV2",{params:{question_id:a}})},add:function(a){return window.$.post("/node/QuestionCommentAddV2",{method:"add_comment",params:a})}};
iA.favlist={Bl:function(a){return window.$.get("/node/FavlistCommentBoxV2",{params:{favlist_id:a}})},Cl:function(a){return window.$.get("/node/FavlistCommentListV2",{params:{favlist_id:a}})},add:function(a){return window.$.post("/node/FavlistCommentAddV2",{method:"add_comment",params:a})}};
iA.post={Sx:function(a){return window.$.get("/node/PostCommentV2",{params:{comment_id:a}})},Bl:function(a,b){return window.$.get("/node/PostCommentBoxV2",{params:{post_id:a,load_all:b}})},Cl:function(a){return window.$.get("/node/PostCommentListV2",{params:{post_id:a}})},add:function(a){return window.$.post("/node/PostCommentV2",{method:"add_comment",params:a})},oz:function(a,b){return window.$.post("/node/PostCommentV2",{method:b?"like_comment":"undo_like_comment",params:{comment_id:a}})},remove:function(a){return window.$.post("/node/PostCommentV2",
{method:"remove_comment",params:{comment_id:a}})}};
iA.roundtable={Sx:function(a){return window.$.get("/roundtable/comments/"+a)},Bl:function(a,b){return window.$.get("/node/RoundtableCommentBoxV2",{params:{roundtable_id:a,load_all:b}})},Cl:function(a){return window.$.get("/roundtable/comments",{roundtable_id:a})},add:function(a){return window.$.post("/node/RoundtableCommentV2",{method:"add_comment",params:a})},oz:function(a,b){return window.$.post("/node/RoundtableCommentV2",{method:b?"like_comment":"undo_like_comment",params:{comment_id:a}})},remove:function(a){return window.$.post("/node/RoundtableCommentV2",
{method:"remove_comment",params:{comment_id:a}})}};z.v(z.Iz,z.Mc);Jz.prototype.fill=function(a,b){this[a]=this[a].replace("?",b);return this};z.v(Kz,z.F);z.e=Kz.prototype;z.e.yL={question:"问题",comment:"评论",answer:"回答",favlist:"收藏",member:"用户",message:"私信",image:"图片",video:"视频",post:"文章"};z.e.Kw="report-dialog";z.e.gH="loading";z.e.gO='\x3cform\x3e\x3cdiv class\x3d"header"\x3e\x3c% if (headnote) { %\x3e\x3cspan class\x3d"headnote"\x3e\x3c%\x3dheadnote%\x3e\x3c/span\x3e\x3c% } %\x3e\x3cspan class\x3d"error-container"\x3e\x3c/span\x3e\x3c/div\x3e\x3cul class\x3d"options clearfix"\x3e\x3c% each(options, function(option) { %\x3e\x3cli\x3e\x3clabel\x3e\x3cinput value\x3d"\x3c%\x3doption.value%\x3e" name\x3d"reason" type\x3d"radio"\x3e\x3c%\x3doption.label%\x3e\x3c/label\x3e\x3c% if (option.description) { %\x3e\x3cdiv class\x3d"description visible-if-checked"\x3e\x3c%\x3doption.description%\x3e\x3c/div\x3e\x3c% } %\x3e\x3c% if (option.options) { %\x3e\x3cul class\x3d"group-options clearfix visible-if-checked"\x3e\x3c% each(option.options, function(opt) { %\x3e\x3cli\x3e\x3clabel\x3e\x3cinput required data-description\x3d"\x3c%\x3dopt.description%\x3e" value\x3d"\x3c%\x3dopt.value%\x3e" name\x3d"reason-\x3c%\x3doption.value%\x3e" type\x3d"radio"\x3e\x3c%\x3dopt.label%\x3e\x3c/label\x3e\x3c/li\x3e\x3c% }) %\x3e\x3c/ul\x3e\x3cdiv class\x3d"group-description visible-if-checked"\x3e\x3c/div\x3e\x3c% } %\x3e\x3c% if (option.value \x3d\x3d 0) { %\x3e\x3cp class\x3d"input-container visible-if-checked"\x3e\x3cinput placeholder\x3d"请填写原因" type\x3d"text" name\x3d"detail" class\x3d"reason-text zg-form-text-input"\x3e\x3c/p\x3e\x3cp class\x3d"error-container visible-if-checked"\x3e\x3c/p\x3e\x3c% } %\x3e\x3c/li\x3e\x3c% }) %\x3e\x3c/ul\x3e\x3cp class\x3d"footnote"\x3e\x3c/p\x3e\x3c/form\x3e';
z.e.nF=function(){return this.Lr};z.e.lw=function(a,b){var c=new z.U;c.Kp(!0);c.Cf(!0);z.Fj(c,z.wj());c.addEventListener(z.Hj,this.JO,!1,this);z.Bc(c,this);a&&c.Na(a);b&&c.ka(b);c.G(!0);c.ha();z.V.add(c.m(),this.Kw);return this.Lr=c};z.e.JO=function(a){if("ok"===a.key)return(a=(0,window.$)("form",this.Lr.m()).valid())&&this.submit(),a};
z.e.open=function(a,b,c){var d=this.lw(z.La("确定要%s该%s？",this.BC[this.yl()],this.yL[a]||"条目"),this.mw());z.V.add(d.m(),this.gH);uF(a,this.yl()).then((0,z.q)(function(f){d.ka((0,z.jn)(this.gO,{each:z.w,options:f,headnote:c}));z.V.remove(d.m(),this.gH);d.ha();z.Nj(d,450);this.TN={type:a,id:b};this.Ye(f)},this))};z.e.IF=function(){};
z.e.Ye=function(a){var b=this,c=(0,window.$)(this.Lr.m()),d=(0,window.$)("form",c),f=(0,window.$)(".reason-text",c);c.on("change",":radio",function(g){g=(0,window.$)(g.target);c.find("li").removeClass("checked");g.parentsUntil(d,"li").addClass("checked");var h=this.value,k=z.rb(a,function(a){return h===String(a.value)});b.IF(k);k="0"===h;f.toggle(k);k&&f.placeholder();g.closest("li").find("ul, :text").length||d.valid()});c.find("ul ul").on("change",":radio",function(a){(0,window.$)(a.delegateTarget).parent().find(".group-description").text((0,window.$)(this).data("description"))});
d.validate({rules:{reason:"required",detail:{rangelength:[2,100],required:function(){return!!(0,window.$)("input[name\x3dreason]:checked",c).length}}},messages:{reason:"请选择理由",detail:"理由为 2-100 字"},errorLabelContainer:(0,window.$)(".error-container",d)})};z.e.mw=function(){return'\x3cdiv class\x3d"loading"\x3e理由加载中\x3ci class\x3d"spinner-gray"\x3e\x3c/i\x3e\x3c/div\x3e'};z.v(z.Lz,Kz);var uF=function(a){return function(b,c){return a(z.La("/manage/%s/options?action\x3d%s",b,c))}}(z.ak(window.$.getJSON));z.e=z.Lz.prototype;z.e.BC={remove:"删除",lock:"锁定",unlock:"解除锁定",collapse:"折叠",uncollapse:"解除折叠",mute:"隔离",unmute:"解除隔离"};z.e.lw=function(a,b){var c=z.Lz.v.lw.call(this,a,b);c.sc.set("ok",this.BC[this.yl()]);return c};z.e.yl=function(){return this.au.op.split("-")[0]};z.e.pJ=function(a){(0,window.$)(".footnote",this.nF().m()).text(a)};
z.e.IF=function(a){a&&(a.trackable?Nz(this,a).then((0,z.q)(this.pJ,this)):this.pJ(""))};z.e.submit=function(){var a=this.au.action,b=this.au.content,c=(0,window.$)((0,window.$)("form",this.Lr.m())[0]).serialize();b&&(c+="\x26"+b);Mz(a,c,this.cl)};z.e.D=function(){this.cl=this.au=null;z.Lz.v.D.call(this)};z.e.open=function(a,b,c){this.au=z.kf(a)?(0,window.$)(a).data():a;this.cl=c||z.ke.NX;z.Lz.v.open.call(this,b.type,b.id,"")};z.Oz.prototype.submit=function(a,b){function c(){b?b():d.handleError()}var d=this;window.$.post("/report",{type:this.type,id:this.id,reason:a||"edit",source:"web"}).done(function(a){d.aK&&d.aK();a.r?"duplicate_report"===a.errtype?d.handleError(a.msg):c():Pz(!!a.noti)}).fail(c)};z.Oz.prototype.handleError=function(a){var b=z.W({title:"举报",content:void 0===a?"举报失败":a,modal:!0,buttons:{}});(0,window.setTimeout)(function(){return b.G(!1)},4E3)};
z.Oz.prototype.render=function(){var a=this,b=new z.U;b.Cf(!0);z.Nj(b,420);b.Na("举报");b.render();var c=b.R();c.style.margin="0";c.style.padding="0";z.ww("Report").then(function(d){function f(){d.unmountComponentAtNode(c);b.G(!1)}a.aK=f;var g={};d.render(c,(g.type=a.type,g.onContentChange=function(a){b.Na(a);b.m().focus()},g.onClose=f,g.onSubmit=a.submit.bind(a),g));b.G(!0);b.ha()})};z.v(Qz,z.Q);z.e=Qz.prototype;z.e.defaults={trigger:{A:"data-editable"},GL:"hc-actionbar",OQ:"checked",ZU:100,TP:100};z.e.C=function(){Qz.v.C.call(this);this.Zi=z.M("div");window.document.body.appendChild(this.Zi);Rz(this,this.h)};z.e.D=function(){z.N(this.Zi);this.Zi=null;Qz.v.D.call(this)};z.e.Qx=function(){return this.YP};
z.e.JM=function(a,b,c){b=z.M("div",{title:a.V,"data-action":a.name,className:"button "+a.name+(0===b?" first":b===c.length-1?" last":"")},[z.M("i","icon icon-actionbar-"+a.name)]);z.Ip(b,!0);this.o().g(b,"click",function(){Sz(this,a.name)&&a.Mh(this.te)});return b};z.e.render=function(){this.Zi.innerHTML="";z.$e(this.Zi,z.ob(z.Hb($n(this.cn)),this.JM,this))};z.v(z.Uz,z.Q);z.Uz.prototype.defaults={YF:{},qM:!0};z.Uz.prototype.C=function(){z.Uz.v.C.call(this);var a=this,b=this.h;this.J.qM&&(this.bn=gA(b),z.Bc(this,this.bn));this.o().g(b,"paste",function(){(0,window.setTimeout)(function(){Vz(a)})}).g(b,"keydown",this.NP)};
z.Uz.prototype.NP=function(a){var b=Ho(a.keyCode),c=8===a.keyCode;if(!(a.ctrlKey||a.altKey||a.metaKey||!b&&!c)){var b=z.qu(),d=b.Y(),f=b.la(),g=this.h,h,k=Yz(d,g,$z)||f!==d&&(h||(h=Yz(f,g,$z)));if(k){var m=z.pf(k),n=b.xa(),t=b.La();if(k.getAttribute("data-editable")&&m===k.href||"video-link"===k.className){var C=!1;h=h||Yz(f,g,$z)||k;var g=k.contains(d),J=h.contains(f);if(c)g&&(d=k,n=0,C=!0),J&&(f=h,t=z.Du(h),C=!0),C&&z.bu(d,n,f,t).select();else if(g&&J&&h===k){if(!b.isCollapsed()||0!==n&&m.length!==
n)a.preventDefault(),z.Hu(k)}else g&&(d=k.nextSibling,n=0,C=!0),J&&(f=h.previousSibling,t=z.Du(f),C=!0),C&&z.bu(d,n,f,t).select()}}}};var fA=/\b(?:(?:https?):\/\/|www\.)(?:\([\-A-Z0-9+&@#\/%=~_|$?!:,.]*\)|[\-A-Z0-9+&@#\/%=~_|$?!:,.])*(?:\([\-A-Z0-9+&@#\/%=~_|$?!:,.]*\)|[A-Z0-9+&@#\/%=~_|$])/ig,bA=["http:","https:"],cA=z.ak(function(a){return window.$.post("/scraper",{url:a})});z.v(z.hA,z.Q);z.e=z.hA.prototype;z.e.defaults={bR:!1,autofocus:!0,cx:"empty",xf:"zm-item-comment"};z.e.ga=function(a){z.hA.v.ga.call(this,a);AA(this);a=window.location.hash.slice(1).split("-");if(a="comment"===a[0]&&a[1])a=tA(this,a),z.kp(a),z.yo(a),a.focus();this.Ng=!0;z.w(uA(this),this.Ht,this)};z.e.hn="zm-comment-bubble";z.e.fD="."+z.hA.prototype.hn;z.e.$=function(a){return(0,window.$)(a,this.h)};z.e.B=function(){this.h=z.M("div",{"class":this.KD,style:"display:none"});this.Mg()};z.e.Fn=function(){return'\x3ci class\x3d"icon icon-spike zm-comment-bubble"\x3e\x3c/i\x3e\x3cdiv class\x3d"zm-comment-spinner"\x3e正在加载，请稍等 \x3ci class\x3d"spinner-lightgray"\x3e\x3c/i\x3e\x3c/div\x3e'};
z.e.D=function(){z.hA.v.D.call(this);this.Ha=this.SD=this.Cn=this.WC=this.Sd=this.qA=this.dH=null};
z.e.cV=jA(function(a){var b=z.L("zm-comment-content-wrap",a),c=z.L("zm-comment-form",a),d=a.getAttribute("data-id"),f=this,g;if(c){g=z.L("zm-comment-editable",c);if(z.Lg(c)){if(z.mo(c)){z.P(c,!1);return}}else z.P(c,!0);rA(g)}else{c=sA(b);g=z.L("zm-comment-editable",c);var h=new z.Fz(g);h.Pd(!1,"");h.Je();z.Cc(this,kA(h.m(),this.type,this.id));rA(g);a=z.L("zm-comment-close",c);b=z.L("zm-comment-submit",c);b.name="";var k=function(){f.ia({action:"click_reply_[type]_comment_submit"});var a=(0,z.bb)(h.Al()),
b=(0,z.bb)(z.pf(g));a&&b?CA(f,{content:a,dU:d},function(a){a.r||(z.P(c,!1),h.Pd(!1,""),(a=z.lb(uA(f)))&&z.yo(a,{offsetTop:100,Uv:!0}))}):(z.W.message("请填写内容"),g.focus())};z.E(a,"click",function(){z.P(c,!1)});z.E(b,"click",k);z.E(g,"keydown",function(a){13===a.keyCode&&(a.ctrlKey||a.metaKey)&&(k(),a.preventDefault())})}z.yo(c,100)});z.e.Bu=function(a){z.V.enable(this.SD,"expanded",a)};
z.e.Ii=function(a,b){this.dispatchEvent(new z.Iz("click!comment",{category:"?",action:this.type+"_comments",label:"?_"+a,value:z.qa(b)?b:this.hb()}))};z.e.yj=function(){this.Ng?yA(this):this.St=!0};z.e.hS=function(a){13===a.keyCode&&(a.ctrlKey||a.metaKey)&&(this.Kq(),(0,window.$)(this.Ha).blur(),a.preventDefault());27===a.keyCode&&wA(this)};
z.e.Qa=function(a){var b=z.gp(this.h,a.target,"BUTTON")||z.gp(this.h,a.target);if(b&&b.name){var c=z.Pp(b,this.J.xf);a.preventDefault();switch(b.name){case "reply_comment":this.ia({action:"click_reply_[type]_comment_start"});this.cV(c);break;case "cancelanon":a=(0,window.$)(this.h).parents(".feed-item-hook").data("qid");z.Fq(0,null,a);break;case "delcomment":this.ps(b);break;case "like_comment":this.kP(b);break;case "author_delcomment":EA(this,b);break;case "admin_delcomment":DA(this,b);break;case "closeform":this.ia({action:"click_add_[type]_comment_cancel"});
wA(this);break;case "addnew":this.ia({action:"click_add_[type]_comment_submit"});this.Kq();break;case "load-more":this.Ii("comments_all"),this.ia({action:"click_view_all_comment"}),this.dH(b)}}};
z.e.dH=function(a){this.qt&&"pending"===this.qt.state()||(a&&z.V.add(a,"loading"),this.qt=this.qA||this.eH(),this.qt.done((0,z.q)(function(b){b=(0,window.$)(b).filter(".zm-item-comment").get();if(b.length){var c=uA(this);c.length&&(b=z.nb(b,function(a){return!z.rb(c,function(b){return b.getAttribute("data-id")===a.getAttribute("data-id")})}),b=z.vb(c,b).sort(function(a,b){return a.getAttribute("data-id")-b.getAttribute("data-id")}),z.w(b,this.Ht,this),a&&z.N(a));z.$e(this.Cn,b)}},this)))};
z.e.kP=jA(function(a){var b=(0,window.$)(a),c=z.Pp(a,this.J.xf);a=(0,window.$)(".like-num",c);var d=c.getAttribute("data-id");if(c=!b.hasClass("liked"))this.Ii("like_comment"),this.ia({action:"click_like_[type]_comment"});this.Dg.oz(d,c);var d=(0,window.$)("em",a),f=+d.text()+(c?1:-1);a.toggleClass("liked",c).toggleClass("nil",0>=f).attr("data-tip","s$r$"+f+" 人觉得这个很赞");d.text(f);b.toggleClass("liked",c);tp(b[0],c?"取消赞":"赞")});z.e.expand=function(){this.Nc(!0)};z.e.collapse=function(){this.Nc(!1)};
z.e.wc=function(){return this.Ng};z.e.Nc=function(a){if(a!==this.Ng){a&&(this.$(this.fD).hide(),this.Mg());this.Ng=a;this.dispatchEvent(a?"beforeexpand":"beforecollapse");z.P(this.h,this.Ng);var b=(0,z.q)(function(){a&&xA(this);this.dispatchEvent(a?"expand":"collapse");this.ul&&!a&&(z.Ou(this.ul),z.yo(this.ul.h))},this),c;a&&this.St?(c=yA(this))&&c.done(b):(0,window.setTimeout)(b);this.Sd&&(a?(this.iT=z.pf(this.Sd),tp(this.Sd,"收起评论")):tp(this.Sd,0>this.Ja?this.iT:this.Ja?this.Ja+" 条评论":"添加评论"))}};
z.e.Gf=function(){this.Nc(!this.Ng)};z.e.eH=function(){return this.Dg.Cl(this.id)};z.e.Dm=function(a){this.cj=a};z.e.YT=function(a){a=z.Xe((0,z.bb)(a));z.P(a,this.Ng);z.w((0,window.$)("."+this.J.xf,a).get(),this.Ht,this);this.St=!1;this.Db();z.Wp(a,this.h);this.h=a;AA(this)};z.e.xl=function(){this.Ha.focus()};z.e.Ua=function(){var a=(0,z.bb)(this.jj.Al());return a===this.placeholder?"":a};
z.e.Kq=jA(function(){var a=this.Ua(),b=(0,z.bb)(z.pf(this.Ha));a&&"TEXTAREA"===this.Ha.tagName&&b||a?CA(this,a):(z.W.message("请填写内容"),this.xl())});z.e.hb=function(){return this.Ja};z.e.wO=function(a){if(!a)return z.W.message("网络异常");if(a.r)return z.W.alert(a.msg);this.Dg.Sx(a.msg).done(window.$.proxy(this.ZT,this));this.jj.Pd("");qA(this);this.Bu(!1)};
z.e.Ht=function(a){if(z.nm("auth_f_manage")&&"favlist"!==this.type&&!(0,window.$)(".del, .op.remove",a).length){var b=a.getAttribute("data-id");(0,window.$)("\x3ca\x3e",{href:"#",name:"admin_delcomment","class":"del zm-comment-op-link op needsfocus",html:'\x3ci class\x3d"zg-icon zg-icon-comment-del"\x3e\x3c/i\x3e删除',"data-op":"remove-comment","data-action":"/manage?"+window.$.param({comment_id:b,action:"remove_comment2"})}).appendTo((0,window.$)(".zm-comment-ft, .actions",a))}this.Kj(a)};
z.e.Kj=function(a){(0,window.$)("a[name\x3dreport], button.report",a).on("click",function(){(new z.Oz({type:"comment",id:a.getAttribute("data-id")})).render()})};z.e.ZT=function(a){this.Uj="";a=z.Xe(a);this.Cn.appendChild(a);this.Ht(a);this.Ja+=1;BA(this)};z.e.ps=function(a){var b=z.Pp(a,this.J.xf),c=b.getAttribute("data-id");z.W.confirm("删除评论","你确定要删除这条评论吗？",function(a){a&&GA(this,c,z.Aa(z.N,b))},this)};
z.e.Mg=function(){(0,window.$)(window).on("beforeunload.CommentForm",(0,z.q)(function(){if(this.Uj)return"你的评论还未保存，确认离开该页面吗？"},this))};z.e.Xh=function(){(0,window.$)(window).off("beforeunload.CommentForm")};z.e.ia=function(a){this.dispatchEvent({type:"trackRequested",category:"comment",action:a.action.replace("[type]",this.type)})};z.ja(IA,z.Q);z.e=IA.prototype;z.e.wc=function(){return this.Rj};z.e.Nc=function(a){a!==this.Rj&&(this.dispatchEvent(a?"beforeexpand":"beforecollapse"),this.Rj=a,z.P(this.h,a),NA(this),OA(this),this.dispatchEvent(a?"expand":"collapse"),this.vl&&!a&&(z.Ou(this.vl),z.yo(this.vl.m())))};z.e.Gf=function(){this.Nc(!this.Rj)};z.e.Ii=function(){};z.e.xl=function(){(0,window.$)("[data-input-box]",this.m()).focus()};z.e.reload=function(){PA(this,"reloadComments")};z.e.Dm=function(a){this.cj=a};
z.e.Ye=function(){var a=this;NA(this);OA(this);LA(this);this.o().g(z.Hq,"anon_change",function(){a.Rj&&a.reload()});(0,window.$)(this.m()).on("click",'button[data-key\x3d"cancel"]',function(b){0===KA(a)&&(b.preventDefault(),a.Nc(!1))})};z.e.B=function(){this.h=z.M("div","comment-app-holder");z.P(this.h,!1)};
z.e.render=function(a,b){b=void 0===b?{}:b;var c=this;z.Q.prototype.render.call(this,a);var d=this.entryType,f=this.zb,g={},h=Object.assign((g.entry={id:f,type:d},g.useContentEditable=z.Rm,g.createItemActions=function(a){var b=[],d=a.id,f=a.own;!f&&z.pm.zG&&b.push({key:"adminremove",label:"删除",icon:"zg-icon zg-icon-comment-del",onClick:function(){var a={op:"remove-comment",action:"/manage?comment_id\x3d"+d+"\x26action\x3dremove_comment2"},b={id:d,type:"comment"};(new z.Lz).open(a,b,function(){PA(c,
"RemoveComment",{id:d})})}});f||b.push({key:"report",label:"举报",icon:"zg-icon zg-icon-comment-report",onClick:function(){(new z.Oz({type:"comment",id:a.id})).render()}});return b},g.onEditorCreated=function(a){return kA(a,d,f)},g.onRequestHighlight=function(a){z.kp(a);z.yo(a,{offsetTop:45});a.focus()},g),b),g=z.ha(window.location.hash.match(/#comment-(\d+)/)||[]);g.next();(g=g.next().value)&&(h.query={bycomment:g});var k=Object.assign({},yw(),{authRequired:function(a){return z.Or(a,!0,function(){return c.cj})}}),
m=z.Kj(function(){return c.mD&&JA(c)});z.ww("CommentApp").then(function(b){a.appendChild(c.h);c.Uq=b.render(c.h,h,k);c.Ye();c.Uq.store.subscribe(function(){(0,window.setTimeout)(function(){NA(c);OA(c);m()})})})};z.v(QA,z.Q);var RA={Cg:"is-sticky",top:null,bottom:null,xb:null,bD:!1,cI:z.p,It:z.p};z.e=QA.prototype;z.e.D=function(){this.stop();QA.v.D.call(this)};z.e.start=function(){this.state.$l||(this.state.$l=!0,(0,window.$)(window).on("scroll resize",this.NJ).trigger("scroll"))};z.e.stop=function(){this.state.$l&&(this.state.$l=!1,(0,window.$)(window).off("scroll resize",this.NJ),this.restore(),this.state.Ys=!1,this.state.$s=!0,(0,window.setTimeout)(function(){(0,window.$)(window).trigger("scroll")}))};
z.e.update=function(){if(this.state.Do)this.state.lA=!0;else{var a=this.options.top,b=this.options.bottom,c=this.state.Ys,d=this.state.$s,f,g,h=(this.mc||this.h).getBoundingClientRect(),k=this.options.xb.getBoundingClientRect(),m=(0,window.$)(window).height();h.height||(h.height=h.bottom-h.top);null!==a?(f=h.top>a,g=k.bottom>a+h.height):null!==b&&(f=h.bottom>m-b,g=k.top>m-h.height-b);this.state.Ys=f;this.state.$s=g;if((c&&!d)===(f&&!g))f&&!g&&this.ha();else{if(d&&!g)return TA(this);if(!d&&g)return VA(this);
this.options.bD?f?TA(this):VA(this):f?SA(this):this.restore()}}};z.e.ha=function(){var a=(this.mc||this.h).getBoundingClientRect().left,b=this.options.top,c=this.options.bottom;(0,window.$)(this.h).css({left:a+"px",top:b?b+"px":"auto",bottom:c?c+"px":"auto"})};z.e.restore=function(){this.mc&&((0,window.$)(this.h).removeClass(this.options.Cg).css({left:"",top:"",bottom:""}),(0,window.$)(this.mc).remove(),this.mc=null,this.options.It.call(this))};
z.e.onAnimationEnd=function(){this.state.Do=!1;this.state.lA&&(this.state.lA=!1,this.update())};z.v(z.WA,z.Q);z.e=z.WA.prototype;z.e.pj="zm-item-expanded";z.e.dm="zm-item-meta";z.e.Vj=null;z.e.Pn="z-icon-fold";z.e.Yp="sprite-global-icon-fold-white";z.e.C=function(){z.WA.v.C.call(this);var a=ZA(this.h);this.zb=a[this.entryType+"-id"];this.gf=a[this.entryType+"-url-token"];this.Sr=a;this.pn();this.se();cB(this);YA(this)};z.e.Yx=function(){return aB(this)};z.e.$n=function(){var a=this.entryType+"-"+this.zb;return(0,window.$)('a[name\x3d"'+a+'"]',this.h).length&&"#"+a};
z.e.pn=function(a){var b={".js-expand":this.expand,".js-collapse":this.collapse,'a[name\x3d"ignore"]':this.us,".js-close":this.NF,".js-collect":this.zj,".js-hiderelated":this.MF,".js-toggle-commentbox":this.RF,".js-unhide":this.VF,'a[name\x3d"dislike"]':this.qs,".column[data-entry-url]":this.FO};z.Nb(b,a||{});z.Eb(b,function(a,b){if(z.sa(a))(0,window.$)(this.h).on("click",b,window.$.proxy(a,this))},this);var c=(0,window.$)(".zm-meta-panel",this.h);z.Eb({'a[name\x3d"toggle-comment"]':function(a){this.RF(a);
c.toggleClass("focusin",this.va.wc())}},function(a,b){c.on("click",b,window.$.proxy(a,this))},this)};z.e.RF=function(a){this.sg();this.va.wc()&&(a=(0,window.parseInt)(z.pf(a.currentTarget),10)||0,this.va.Ii("view_comments",a))};z.e.Az=function(){(0,z.oB)(this.entryType,this.gf,"read")};z.e.$j=function(){(0,z.oB)(this.entryType,this.gf,"touch")};
z.e.expand=function(a){this.Jb||(this.Jb=!0,z.V.add(this.h,this.pj),z.tm||(0,window.setTimeout)((0,z.q)(this.Fy,this)),this.dispatchEvent("expand"),a=a&&z.kf(a.target)&&z.aj(a.target,"js-vote-count"),this.JB(a))};z.e.collapse=function(){this.Jb&&(this.Jb=!1,this.IB(),Zo(this.h,(0,z.q)(function(){z.V.remove(this.h,this.pj);this.dispatchEvent("collapse")},this)))};z.e.wc=function(){return this.Jb};z.e.Gf=function(){this.Jb?this.collapse():this.expand()};
z.e.Fy=function(){if(!this.CN){this.CN=!0;var a=this,b=(0,window.$)(".js-collapse",this.h)[0];if(!b){if("answer"!==this.entryType)return;b=(0,window.$)(".zm-meta-panel",this.h);if(!b.length)return;b=(0,window.$)('\x3cbutton class\x3d"item-collapse js-collapse"\x3e\x3ci class\x3d"sprite-global-icon-fold-white"\x3e\x3c/i\x3e收起\x3c/button\x3e').appendTo(b).on("click",(0,z.q)(this.collapse,this)).get(0)}var c=this.FJ=new QA(0,{bottom:12,xb:(0,window.$)(".js-collapse-body",this.h)[0],cI:function(){(0,window.$)("i",
this.h).removeClass(a.Pn).addClass(a.Yp)},It:function(){(0,window.$)("i",this.h).removeClass(a.Yp).addClass(a.Pn)}});z.Bc(this,c);c.w(b);this.g("expand",function(a){a.target===a.currentTarget&&c.start()});this.g("collapse",function(a){a.target===a.currentTarget&&c.stop()});c.start()}};
z.e.JB=function(a){var b="view_answer",c=aB(this);a=a?"vote_up_count":"expand_answer";var d=(0,window.$)(this.h).index()+1;if("feed"!==c)z.yi(b,"click_expand_answer",c+"_"+a,d);else{var c=$A(this),f=bB(this);-1<c.indexOf("article")?(b="view_article",c="feed_article",a="expand_article"):c="feed_answer";z.yi(b,"click_expand_answer",c+"_"+f+"_"+a,d)}};
z.e.IB=function(){var a="view_answer",b=aB(this),c;if(c=this.FJ)c=this.FJ,c=c.state.Ys&&!c.state.$s;c=c?"blue":"grey";var d="collapse_answer_"+c,f=(0,window.$)(this.h).index()+1;if("feed"!==b)z.yi(a,"click_collapse_answer",b+"_"+d,f);else{var b=$A(this),g=bB(this);-1<b.indexOf("article")?(a="view_article",b="feed_article",d="collapse_article_"+c):b="feed_answer";z.yi(a,"click_collapse_answer",b+"_"+g+"_"+d,f)}};z.e.ZS=function(){window.open(z.L(this.Vj,this.h).href)};
z.e.NF=function(){(0,window.$)(this.h).fadeOut(150,function(){(0,window.$)(this).remove()})};z.e.zj=z.p;z.e.us=z.p;z.e.VF=z.p;z.e.MF=z.p;
z.e.qs=function(){var a=(0,window.$)(this.h),b=(0,window.$)(".feed-item-inner",a),c=(0,window.$)(".undo-dislike-options",a),d=c.data();c.off().one("click",".revert",function(){b.slideDown();c.slideUp();window.$.post("/topstory/item/uninterest/revert",d)}).one("click",".close",function(){a.slideUp(function(){a.remove()})});window.$.post("/topstory/item/uninterest",d).done(function(){b.slideUp();c.slideDown()})};
z.e.FO=function(a){var b=(0,window.$)(a.currentTarget).data("entry-url");"column"===this.entryType&&b&&!a.target.href&&window.open(b)};
z.e.sg=function(){if(!this.va){var a=(0,window.$)(".toggle-comment, .js-toggle-commentbox",this.h)[0];if("answer"===this.entryType)this.va=new IA(this.zb,this.entryType),this.K(this.va),this.va.render(z.L(this.dm,this.h),{embedded:/^\/roundtable/.test(window.location.pathname)}),MA(this.va,a);else if(this.va=new z.hA(this.zb,this.entryType),this.K(this.va),z.lA(this.va,z.L(this.dm,this.h),a),a=this.va,!a.ul&&!z.pm.qb){var b=z.Pp(a.h,"zm-item-meta");if(b){var c=z.L("zm-meta-panel",b);c&&(a.ul=new Su(null,
b),a.ul.tag="comment",a.ul.w(c))}}this.va.Dm(this.$n())}this.va.Gf()};z.e.hy=function(){this.va?this.va.xl():this.sg()};z.e.se=function(){this.Qd=z.$m.AK(this.h);z.ol(this.Qd.register("shift+o",this.ZS,this),{group:"操作",name:"新窗口打开条目"});var a=(0,window.$)('a[name\x3d"dislike"], a[name\x3d"ignore"]',this.h);a.length&&z.ol(this.Qd.register("i g",function(){a.click()}),{group:"操作",name:"不感兴趣"})};z.v(dB,z.zl);dB.prototype.un=function(){return z.Xe('\x3cbutton class\x3d"feeds-loading"\x3e\x3cspan\x3e更多\x3c/span\x3e\x3c/button\x3e')};dB.prototype.Cu=function(a){this.Dc&&(z.nf(this.Dc.firstChild,a?"努力加载中...":"更多"),z.V.enable(this.Dc,"loading",a))};z.v(gB,z.Q);z.e=gB.prototype;z.e.ia=function(a){this.dispatchEvent({type:"trackRequested",category:"share",action:a.action.replace("[type]","post"!==this.dc?this.dc:"article"),attributes:a.attributes})};z.e.ga=function(a){gB.v.ga.call(this,a);a=this.Bd=(0,window.$)(a);z.fh?a.click(fw):z.tm?a.click(this.tJ.bind(this)):this.Rb();a.click((0,z.q)(function(){this.ia({action:"click_share_[type]_start"})},this))};z.e.Rb=function(){iB(this);this.Bd.one("mouseover focus",window.$.proxy(z.Kj(this.zT),this))};
z.e.zT=function(){this.Gm||(this.Gm=z.ct(this.dc,this.hK));if(this.oH){var a=z.aw(this.uJ);(0,window.$)(".js-qrcode-image",this.oH.m()).attr("src",a)}};z.e.vO=function(a){a=a.target.W();0===a?this.tJ():2===a&&(window.open("https://dudu.zhihu.com/post?"+window.$.param({url:this.uJ,utm_source:"zhihu-web_share",utm_medium:"button",utm_campaign:"post"}),"_blank"),this.ia({action:"click_share_[type]_to_dudu_start"}))};
z.e.tJ=function(){this.Gm||(this.Gm=z.ct(this.dc,this.hK));this.Gm.then(function(a){z.eB(a.msg.sina)});this.ia({action:"click_share_[type]_to_weibo_start"})};z.v(z.jB,z.Q);var kB={yB:"textarea.content",KM:".toggle-expand",lV:".summary",ur:"zm-editable-content"};z.e=z.jB.prototype;
z.e.C=function(){z.jB.v.C.call(this);var a=this.h;this.Hq=(0,window.$)(this.options.yB,a);this.content=this.Hq.is(":input")?this.Hq.val():this.Hq.html();this.Qk=(0,window.$)(this.options.lV,a);this.Se=(0,window.$)("."+this.options.ur+":not(script)",a);this.fd=(0,window.$)(this.options.KM,this.Qk);if(!this.Qk.length)return this.dispatchEvent("invalid");this.bz=!!this.fd.length;this.fd.on("click",(0,z.q)(this.AO,this));this.Qk.on("click",(0,z.q)(this.CP,this))};
z.e.AO=function(a){a.preventDefault();lB(this)};z.e.CP=function(a){var b=z.qu();b&&b.Kd()||a.target===this.fd[0]||(b=(0,window.$)(a.target).closest("a").get(0),b&&"javascript:"!==b.protocol||(a.preventDefault(),lB(this)))};z.e.expand=function(){this.Se.length||(this.Se=(0,window.$)("\x3cdiv\x3e").html(this.content).addClass(this.options.ur).insertBefore(this.Hq));this.Qk.hide();this.Se.show();this.dispatchEvent("expand")};z.e.collapse=function(){this.Qk.show();this.Se.hide();this.dispatchEvent("collapse")};z.v(z.mB,z.Q);z.mB.prototype.Rk=function(){z.WA.call(this,"answer");this.pj="entry-expaneded";this.dm="item-footer";this.Hk="votebar";this.Pn="sprite-global-icon-fold-round-default";this.Yp="sprite-global-icon-fold-round-white"};z.v(z.mB.prototype.Rk,z.WA);z.e=z.mB.prototype.Rk.prototype;
z.e.pn=function(){z.mB.prototype.Rk.v.pn.call(this,{".js-thank":this.Bs});this.Ny();var a=(0,window.$)(".phone-actions",this.m());if(a.length){var b=new z.jy;b.w((0,window.$)(".menu",a)[0]);b=new z.sy("operation",b);b.tk=!0;z.uy(b);ty(b);b.Yb=z.Cl;b.w((0,window.$)(".menubutton",a)[0])}nB(this);this.Nj();b=(0,window.$)(".js-copyright-enable",this.h);a=(0,window.$)(".entry-content",this.h);if(b.length)b=b.data("author-avatar"),FE(a,b);else{var b=a.data("entryUrl"),c=a.data("authorName");HE(a,b,c)}this.Lj()};
z.e.Lj=function(){var a=(0,window.$)(".js-share",this.m()).get(0),b=(0,window.$)(this.m()).closest(".item").find(".js-title-link").get(0);a&&b&&z.fB(a,"answer",this.gf,b.href+"/answer/"+this.gf).Ob(this)};
z.e.Nj=function(){var a=(0,z.q)(function(){if(!this.Bh){var a=z.L("entry-content",this.h),c=this.pb&&this.pb.m();!z.Oj&&c&&(0,window.$)(c).is(":visible")&&a&&230<(0,window.$)(a).height()&&(a=this.Bh=new Su(null,a),this.K(a),a.tag="votebar",a.w(c))}},this);this.o().g(this,["expand","collapse"],function(b){(b="expand"===b.type)&&a();this.Bh&&z.Nu(this.Bh,b)})};
z.e.Ny=function(){var a,b,c=(0,window.$)("."+this.Hk,this.m())[0];c&&(a=this.pb=new z.mE(this.zb,this.entryType),this.K(a),z.Bc(this,a),a.w(c),(c=(0,window.$)(".js-mobi-vote",this.m())[0])&&(new z.dF(a)).w(c));if(c=(0,window.$)(".zm-item-vote-info",this.m())[0])b=new z.qE(this.zb,this.entryType),this.K(b),z.Bc(this,b),b.w(c);a&&b&&this.o().g(a,"change",function(){z.tE(b)}).g(b,"change",function(){(0,window.$)("[data-bind-votecount]",this.m()).text(b.hb())})};
z.e.Bs=XA(function(a){(a=a.target)&&!z.V.has(a,"thanked")&&(!0===window.$.parseJSON(a.getAttribute("data-thanked"))?(tp(a,"感谢"),a.setAttribute("data-thanked",!1),window.$.post("/answer/cancel_thanks",{aid:this.zb})):(tp(a,"取消感谢"),a.setAttribute("data-thanked",!0),window.$.post("/answer/thanks",{aid:this.zb})))},{kb:"question_answer_thank"});z.e.zj=XA(function(){var a=z.zy.aa();Cy(a,this.zb);a.show()},{kb:"question_answer_collect",re:!0});
z.e.se=function(){z.mB.prototype.Rk.v.se.call(this);z.ol(this.Qd.register("v",function(){this.pb&&this.pb.Qu()},this),{group:"操作",name:"赞同"});z.ol(this.Qd.register("d",function(){this.pb&&this.pb.Pu()},this),{group:"操作",name:"反对"});z.ol(z.ol(z.ol(z.ol(this.Qd.register("o",this.Gf,this),{group:"操作",name:"显示全部/收起"}).register("c",this.sg,this),{group:"操作",name:"打开评论"}).register("s c",this.zj,this),{group:"操作",name:"收藏"}).register("shift+c",this.hy,this),{group:"操作",name:"定位到评论框"})};
z.mB.prototype.HC=function(){z.WA.call(this,"question");this.dm="item-footer"};z.v(z.mB.prototype.HC,z.WA);z.mB.prototype.init=function(){z.CG.K(this);this.w(window.document.body);this.Mj();this.Ss();z.pB();var a=(0,window.$)(".rt-comment-box")[0];if(a){var b=new z.hA(this.Cp.id,"roundtable");this.K(b);b.w(a)}};z.mB.prototype.Mj=function(){this.o().g(this,"click!",function(a){"comment"===a.namespace&&a.Ac.fill("label","roundtable").fill("category",this.hh)})};
z.mB.prototype.Ss=function(){function a(a){a=a.getAttribute("data-type");return(a={answer:z.mB.prototype.Rk,question:z.mB.prototype.HC}[a])?new a:new z.Q}var b=this;(0,window.$)("[data-paging]").each(function(){var c=new dB;c.use("childConstructor",{factory:a});null!==this.getAttribute("data-navigable")&&c.use("shortcut",{items:"\x3e.item"});b.K(c);c.w(this)})};z.v(rB,z.F);rB.prototype.handleEvent=function(a){var b=0,c=0,d=0;a=a.jc;if("mousewheel"==a.type){c=1;if(z.A||z.B&&(z.dl||z.D("532.0")))c=40;d=sB(-a.wheelDelta,c);z.ka(a.wheelDeltaX)?(b=sB(-a.wheelDeltaX,c),c=sB(-a.wheelDeltaY,c)):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),z.ka(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;z.qa(this.kH)&&(b=fq(b,-this.kH,this.kH));z.qa(this.lH)&&(c=fq(c,-this.lH,this.lH));this.KQ&&(b=-b);b=new tB(d,a,b,c);this.dispatchEvent(b)};
rB.prototype.D=function(){rB.v.D.call(this);z.od(this.bH);this.bH=null};z.v(tB,z.Qc);z.v(uB,z.F);z.e=uB.prototype;z.e.ne=0;z.e.Uo=0;z.e.Ro=100;z.e.Tn=0;z.e.Ak=1;z.e.AG=!1;z.e.At=!1;z.e.Ea=function(a){a=vB(this,a);this.ne!=a&&(this.ne=a+this.Tn>this.Ro?this.Ro-this.Tn:a<this.Uo?this.Uo:a,this.AG||this.At||this.dispatchEvent("change"))};z.e.W=function(){return vB(this,this.ne)};z.e.xu=function(a){a=vB(this,a);this.Tn!=a&&(this.Tn=0>a?0:this.ne+a>this.Ro?this.Ro-this.ne:a,this.AG||this.At||this.dispatchEvent("change"))};
z.e.ci=function(){var a=this.Tn;return null==this.Ak?a:Math.round(a/this.Ak)*this.Ak};z.e.Hc=function(){return vB(this,this.Uo)};z.e.Xc=function(){return vB(this,this.Ro)};z.e.fo=function(){return this.Ak};z.v(wB,z.Q);z.e=wB.prototype;z.e.Nb="horizontal";z.e.Eo=!1;z.e.yR=!1;z.e.Kf=10;z.e.xt=0;z.e.DG=!0;z.e.xH=0;z.e.eL=1E3;z.e.hc=!0;z.e.be=!1;z.e.B=function(){wB.v.B.call(this);var a=this.L().B("DIV",this.T(this.Nb));this.ga(a)};z.e.ga=function(a){wB.v.ga.call(this,a);z.bj(a,this.T(this.Nb));a=this.m();var b=z.Me(window.document,null,"goog-slider-thumb",a)[0];b||(b=this.L().B("DIV","goog-slider-thumb"),z.Wi(b,"button"),a.appendChild(b));this.bb=this.Hd=b;z.Wi(this.m(),"slider");MB(this)};
z.e.C=function(){wB.v.C.call(this);this.me=new z.ij(this.bb);this.Tf=new z.ij(this.Hd);this.me.Lg(this.be);this.Tf.Lg(this.be);this.me.Rw=this.Tf.Rw=z.p;this.sb=new Pq(this.m());xB(this,!0);this.m().tabIndex=0;GB(this)};z.e.Db=function(){wB.v.Db.call(this);z.Ec(this.me,this.Tf,this.sb,this.ck)};
z.e.ns=function(a){var b=a.Or==this.me?this.bb:this.Hd,c;"vertical"==this.Nb?(c=this.m().clientHeight-b.offsetHeight,c=(c-a.top)/c*(this.Xc()-this.Hc())+this.Hc()):c=a.left/(this.m().clientWidth-b.offsetWidth)*(this.Xc()-this.Hc())+this.Hc();c=a.Or==this.me?Math.min(Math.max(c,this.Hc()),this.W()+this.ci()):Math.min(Math.max(c,this.W()),this.Xc());EB(this,b,c)};
z.e.Cs=function(a){var b="start"==a.type;Ep(this.m(),"goog-slider-dragging",b);Ep(a.target.handle,"goog-slider-thumb-dragging",b);a=a.Or==this.me;b?(this.dispatchEvent("h"),this.dispatchEvent(a?"d":"f")):(this.dispatchEvent("i"),this.dispatchEvent(a?"e":"g"))};
z.e.of=function(a){var b=!0;switch(a.keyCode){case 36:KB(this,this.Hc());break;case 35:KB(this,this.Xc());break;case 33:CB(this,this.Kf);break;case 34:CB(this,-this.Kf);break;case 37:var c=this.be&&this.rd()?1:-1;CB(this,a.shiftKey?c*this.Kf:c*this.nq);break;case 40:CB(this,a.shiftKey?-this.Kf:-this.nq);break;case 39:c=this.be&&this.rd()?-1:1;CB(this,a.shiftKey?c*this.Kf:c*this.nq);break;case 38:CB(this,a.shiftKey?this.Kf:this.nq);break;default:b=!1}b&&a.preventDefault()};
z.e.xs=function(a){this.m().focus&&this.m().focus();var b=a.target;z.mf(this.bb,b)||z.mf(this.Hd,b)||(b="click"==a.type,b&&(0,z.G)()<this.xH+this.eL||(b||(this.xH=(0,z.G)()),this.yR?KB(this,AB(this,a)):(this.rB(a),this.Re=FB(this,AB(this,a)),this.mG="vertical"==this.Nb?this.ft<this.Re.offsetTop:this.ft>JB(this,this.Re)+this.Re.offsetWidth,a=z.Ke(this.m()),this.o().g(a,"mouseup",this.qB,!0).g(this.m(),"mousemove",this.rB),this.ii||(this.ii=new z.ud(200),this.o().g(this.ii,"tick",this.QF)),this.QF(),
this.ii.start())))};z.e.GF=function(a){CB(this,(0<a.detail?-1:1)*this.nq);a.preventDefault()};z.e.QF=function(){var a;if("vertical"==this.Nb){var b=this.ft,c=this.Re.offsetTop;this.mG?b<c&&(a=BB(this,this.Re)+this.Kf):b>c+this.Re.offsetHeight&&(a=BB(this,this.Re)-this.Kf)}else b=this.ft,c=JB(this,this.Re),this.mG?b>c+this.Re.offsetWidth&&(a=BB(this,this.Re)+this.Kf):b<c&&(a=BB(this,this.Re)-this.Kf);z.ka(a)&&EB(this,this.Re,a)};
z.e.qB=function(){this.ii&&this.ii.stop();var a=z.Ke(this.m());this.o().qa(a,"mouseup",this.qB,!0).qa(this.m(),"mousemove",this.rB)};z.e.rB=function(a){this.ft=zB(this,a)};z.e.Hc=function(){return this.Ab.Hc()};z.e.Xc=function(){return this.Ab.Xc()};z.e.LF=function(){GB(this);MB(this);this.dispatchEvent("change")};z.e.Do=function(){return this.Eo};z.e.RN=function(){this.Eo=!1};
z.e.setOrientation=function(a){if(this.Nb!=a){var b=this.T(this.Nb),c=this.T(a);this.Nb=a;this.m()&&(a=this.m(),z.aj(a,b)&&(z.dj(a,b),z.bj(a,c)),b=this.be&&this.rd()?"right":"left",this.bb.style[b]=this.bb.style.top="",this.Hd.style[b]=this.Hd.style.top="",this.Tb&&(this.Tb.style[b]=this.Tb.style.top="",this.Tb.style.width=this.Tb.style.height=""),GB(this))}};
z.e.D=function(){wB.v.D.call(this);this.ii&&this.ii.H();delete this.ii;this.Jn&&this.Jn.H();delete this.Jn;delete this.bb;delete this.Hd;this.Tb&&delete this.Tb;this.Ab.H();delete this.Ab;this.sb&&(this.sb.H(),delete this.sb);this.ck&&(this.ck.H(),delete this.ck);this.me&&(this.me.H(),delete this.me);this.Tf&&(this.Tf.H(),delete this.Tf)};z.e.nq=1;z.e.fo=function(){return this.Ab.fo()};z.e.W=function(){return this.Ab.W()};z.e.Ea=function(a){EB(this,this.bb,a)};z.e.ci=function(){return this.Ab.ci()};
z.e.xu=function(a){EB(this,this.Hd,this.Ab.W()+a)};z.e.G=function(a){z.P(this.m(),a);a&&GB(this)};z.e.Wa=function(a){this.hc!=a&&this.dispatchEvent(a?"enable":"disable")&&(this.hc=a,xB(this,a),a||this.qB(),Ep(this.m(),"goog-slider-disabled",!a))};z.e.isEnabled=function(){return this.hc};z.v(NB,wB);NB.prototype.T=function(a){return"vertical"==a?"goog-slider-vertical":"goog-slider-horizontal"};z.v(OB,z.Q);z.e=OB.prototype;z.e.defaults={VD:310,WD:310,vg:250,wg:250,nR:2,opacity:.25,eY:"#eee"};z.e.ga=function(a){OB.v.ga.call(this,a);this.src=this.h.src;this.options.src=this.src;this.options.Vm=(this.options.VD-this.options.vg)/2;this.options.Um=(this.options.WD-this.options.wg)/2;this.xr()};
z.e.xr=function(){var a=this.options;this.jC=(0,window.$)((0,z.jn)('\x3cdiv class\x3d"avatar-editor-container" style\x3d"width:\x3c%\x3dcontainerWidth%\x3epx"\x3e\x3cdiv class\x3d"avatar-editor-container-inner" style\x3d"height:\x3c%\x3dcontainerHeight%\x3epx;"\x3e\x3cdiv class\x3d"avatar-editor-window" style\x3d"height:\x3c%\x3dwindowHeight%\x3epx;width:\x3c%\x3dwindowWidth%\x3epx;margin:\x3c%\x3dwindowMarginTop%\x3epx \x3c%\x3dwindowMarginLeft%\x3epx;"\x3e\x3cdiv class\x3d"avatar-editor-window-shadow" style\x3d"height:\x3c%\x3dwindowHeight%\x3epx;width:\x3c%\x3dwindowWidth%\x3epx;"\x3e\x3c/div\x3e\x3cdiv class\x3d"avatar-editor-window-inner" style\x3d"width:\x3c%\x3dcontainerWidth%\x3epx; height:\x3c%\x3dcontainerHeight%\x3epx;margin:-\x3c%\x3dwindowMarginTop%\x3epx 0 0 -\x3c%\x3dwindowMarginLeft%\x3epx;"\x3e\x3cimg class\x3d"inner" title\x3d"拖动相片"/\x3e\x3c/div\x3e\x3c/div\x3e\x3cimg class\x3d"outer" style\x3d"opacity:\x3c%\x3dopacity%\x3e;"/\x3e\x3c/div\x3e\x3cdiv class\x3d"goog-slider-wrap"\x3e\x3ci class\x3d"zg-icon image-minus"\x3e\x3c/i\x3e\x3ci class\x3d"zg-icon image-plus"\x3e\x3c/i\x3e\x3cdiv class\x3d"goog-slider"\x3e\x3cdiv class\x3d"line"\x3e\x3c/div\x3e\x3cdiv class\x3d"goog-slider-thumb"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',{containerWidth:a.WD,
containerHeight:a.VD,windowHeight:a.vg,windowWidth:a.wg,windowMarginTop:a.Vm,windowMarginLeft:a.Um,src:a.src,opacity:a.opacity}));this.xb=this.jC[0];this.jC.insertBefore(this.h);z.P(this.h,!1);this.hN=z.L("avatar-editor-container-inner",this.xb);this.Ls=z.L("outer",this.xb);this.Ay=z.L("inner",this.xb);this.Aq=(0,window.$)(this.Ls);this.ov=(0,window.$)(this.Ay);this.jG=0;this.Aq.load((0,z.q)(this.ZJ,this));this.ov.load((0,z.q)(this.ZJ,this));this.Ay.src=this.Ls.src=this.options.src;this.dV=z.L("goog-slider",
this.xb)};
z.e.C=function(){this.hB=new NB;this.hB.w(this.dV);this.o().g(this.hN,["mousedown","touchstart"],function(a){var b=new z.ij(this.xb);b.addEventListener("drag",(0,z.q)(function(a){var b=this.zoom;this.Ie={uq:this.options.wg/b,ho:this.options.vg/b,x:(this.options.Um-(this.uG.left+(a.clientX-this.Fu)))/b,y:(this.options.Vm-(this.uG.top+(a.clientY-this.Gu)))/b};RB(this)},this));b.addEventListener("end",(0,z.q)(function(){b.H()},this));b.Om(a);this.Om(a)});this.o().g(this.xb,["touchmove"],function(a){a.stopPropagation();a.preventDefault()});
this.o().g(this.hB,"change",function(){var a=this.hB.W(),b=this.FK;PB(this,(this.lW-b)*a/100+b)})};z.e.ZJ=function(){this.iQ||(this.Ay.complete&&this.Ls.complete?this.init():(this.jG++,2<=this.jG&&this.init()))};
z.e.init=function(){var a,b;b=this.Aq[0];if(b.naturalWidth)a=b.naturalWidth,b=b.naturalHeight;else{var c=new window.Image;c.src=b.src;a=c.width;b=c.height}this.Ks=a;this.Js=b;a=this.options.wg/this.Ks;b=this.options.vg/this.Js;this.FK=a=b>a?b:a;this.lW=this.FK*this.options.nR;this.Ie={ho:this.options.wg/a,uq:this.options.vg/a,x:0,y:0};PB(this,a);QB(this,this.Ks/2,this.Js/2);this.iQ=!0};z.e.Om=function(a){this.Fu=a.clientX;this.Gu=a.clientY;this.uG=this.ov.position();this.Aq.position()};
z.e.support=function(){return"getContext"in window.document.createElement("canvas")};z.v(z.SB,z.Q);z.TB=1;z.e=z.SB.prototype;z.e.ga=function(a){this.h=a;this.B()};
z.e.B=function(){this.TB=z.pm.Wu+"/upload_avatar";this.Mk=(0,window.$)((0,z.jn)('\x3cform target\x3d"av_up_frame" style\x3d"display:none;" method\x3d"post" enctype\x3d"multipart/form-data" action\x3d"\x3c%\x3duploadAction%\x3e"\x3e\x3clabel for\x3d"avt_file"\x3e\x3c/label\x3e\x3cinput type\x3d"file" accept\x3d"image/*" name\x3d"picture" id\x3d"avt_file" /\x3e\x3cinput type\x3d"hidden" name\x3d"handle_mode" value\x3d"upload" /\x3e\x3cinput type\x3d"hidden" name\x3d"type" value\x3d"\x3c%\x3dtype%\x3e" /\x3e\x3cinput type\x3d"hidden" name\x3d"dest_id" value\x3d"\x3c%\x3ddest_id%\x3e" /\x3e\x3cinput type\x3d"hidden" name\x3d"return_size" value\x3d"\x3c%\x3dreturn_size%\x3e" /\x3e\x3c/form\x3e',{uploadAction:this.TB,
type:this.Yq,dest_id:this.Yq===z.TB?z.S[3]:this.SE,return_size:this.aJ}));this.NK=(0,window.$)('\x3ciframe id\x3d"av_up_frame" name\x3d"av_up_frame" style\x3d"position: absolute; height: 0px; width: 0px; left: -9000px;"\x3e\x3c/iframe\x3e');this.NK.appendTo(window.document.body);this.input=this.Mk.find("input[type\x3dfile]")[0];z.A?(this.Mk.find("label").html((0,window.$)(this.h).html()),this.h.innerHTML="",(0,window.$)(this.h).append(this.Mk),this.Mk.addClass("avatar-editor-form-ie")):(this.Mk.insertAfter(this.h),
(0,window.$)(this.h).click(window.$.proxy(function(){this.input.click()},this)));this.o().g(this.input,"change",this.Jc).g(this.input,"click",function(a){!1===this.dispatchEvent("beforeopen")&&a.preventDefault()});this.o().g(z.X,"iframe_data",function(a){(a=a.zf)&&!a.r?"upload"===a.handle_mode?(this.Vl=a.url,this.zy=a.id,UB()||this.hp()):"resize"===a.handle_mode&&((0,window.$)(this.h).find("form").remove(),this.dE(a)):z.W.message(a.msg)})};
z.e.Jc=function(a){VB(this);a=this.input=a.target;if(UB()){if(a.files&&a.files[0]){this.file=a=a.files[0];var b=new window.FileReader;b.onload=(0,z.q)(function(a){this.Vl=a.target.result;this.hp()},this);b.readAsDataURL(a)}}else this.Mk[0].submit();YB(this)};z.e.hp=function(){var a=this.dialog.R();this.yy=new window.Image;this.yy.src=this.Vl;a=(0,window.$)(a);a.html("");a.append(this.yy);this.Jw=new OB;this.Jw.w(this.yy)};
z.e.dE=function(a){a&&!a.r?this.data=a:z.W.message(a.msg);this.dispatchEvent({type:"success",src:this.data});this.dialog.G(!1)};z.e.getData=function(){return this.data||null};z.e.ce=function(a){return this.data?this.data.url.replace(/(\.\w+)$/,"_"+a+"$1"):""};z.v(z.$B,z.ey);z.$B.prototype.Od=function(){return this.dispatchEvent("action")};z.Yq("goog-option",function(){return new z.$B(null)});z.v(z.aC,z.Q);z.e=z.aC.prototype;z.e.YB=!z.Oj;z.e.WB=!z.Oj;z.e.Ci=function(a){this.Zg=a};z.e.init=function(){this.Nd=z.I("zh-load-more");this.w(this.Qr)};
z.e.C=function(){z.aC.v.C.call(this);this.ln=1;fC(this);this.Ok=(0,window.$)(this.Nd);this.Nd&&(cC(this),this.o().g(this.Nd,"click",function(){this.Ws=!0;this.Pi&&"pending"===this.Pi.state()&&1===this.ln?(this.Pi.done((0,z.q)(this.hk,this)),this.aB=!0,z.bC(this,!0)):this.YB&&this.Yt?(this.hk(this.Yt),this.Yt=null):(z.bC(this,!0),z.dC(this))}),this.YB&&(this.AB=new z.Pk(this.Vz,100,this),this.o().g(window,"scroll",function(){this.AB.fire()})));gC(this,this.lb())};z.e.Yj=function(){z.dC(this,!0)};
z.e.Vz=function(){var a=this.Nd;a&&z.Lg(a)&&1E3>=a.getBoundingClientRect().top-z.Pe().height&&!(this.Yt||this.Pi&&"pending"===this.Pi.state())&&(this.WB&&(3===this.ln?(this.ln=1,this.aB=!1):(this.Ws=!1,this.ln++,this.aB=!0)),z.dC(this))};z.e.xI=function(a){return a};
z.e.hk=function(a){if(a&&!a.r){var b=a.msg,c=b[0],d=b[1],f;2<b.length&&(f=b[2],this.Nd.setAttribute("data-next",f));0<c&&(this.Vq(d),this.offset=this.Mz?this.Mz(this.lb()):this.offset+c);b=!0;b=this.Ds?this.Ds(a):!(-1===f||10>c);z.P(this.Nd,b);z.bC(this,!1);z.eC(this)}};z.e.lb=function(){return z.Xp(this.Zg,this.h)};z.e.uI=function(a){return a.id.split("-")[1]};
z.e.Vq=function(a,b){var c=z.na(a)?a.join(""):a,c=z.Xe(c+" "),d=z.Xp(this.Zg,c);gC(this,d);"prepend"===b?z.bf(c,this.h.firstChild):this.h.appendChild(c);fC(this)};z.e.ep=z.p;z.v(z.hC,z.F);z.hC.prototype.handleEvent=function(a){if("input"==a.type)z.A&&z.D(10)&&0==a.keyCode&&0==a.charCode||(iC(this),this.dispatchEvent(jC(a)));else if("keydown"!=a.type||Dp(a)){var b="keydown"==a.type?this.h.value:null;z.A&&229==a.keyCode&&(b=null);var c=jC(a);iC(this);this.na=z.wd(function(){this.na=null;this.h.value!=b&&this.dispatchEvent(c)},0,this)}};z.hC.prototype.D=function(){z.hC.v.D.call(this);this.S.H();iC(this);delete this.h};z.v(kC,z.F);var lC=0;kC.prototype.Rz=function(){this.el()};kC.prototype.el=function(){var a=this.Zh.value.length;if(a>this.vt){var b=this.Zh.scrollTop,c=this.Zh.scrollLeft;this.Zh.value=this.Zh.value.substring(0,this.vt);a=this.vt;this.Zh.scrollTop=b;this.Zh.scrollLeft=c}this.LE&&z.nf(this.LE,String(1==this.EN?a:this.vt-a))};kC.prototype.D=function(){kC.v.D.call(this);delete this.Zh;this.Py.H();this.Py=null};var rC;z.v(z.mC,z.Rj);z.e=z.mC.prototype;z.e.init=function(){this.Us||(this.Us=!0,this.B(),this.fc())};z.e.fc=function(){z.A||(new z.Us("搜索问题")).w(this.cd);this.ba=new z.ht("/redirect-question/autocomplete",this.cd,null,null,z.I("zh-question-redirect-diag-content"),!1);this.ba.kn=!1;this.ba.rh(!0);this.o().g(this.ba,"suggestionsupdate",ap);this.o().g(this.ba,"select",this.FS).g(this.HM,"click",function(){this.ta.G(!1)})};
z.e.FS=function(){var a=this.ba.wj();if("search_link"===a[0])window.open("/search?q\x3d"+(0,window.encodeURIComponent)(a[1])+"\x26type\x3dquestion");else{this.cd.value="";var b=a[3],a=a[1];this.ta.G(!1);this.cd.value="";this.xhr=new z.Z(!0);this.o().Aa(this.xhr,"complete",this.ZL);this.xhr.ajax("/question/redirect","qid\x3d"+this.pa+"\x26rqid\x3d"+b);this.pu=b;this.FI=a}};
z.e.ZL=function(){var a=z.Zn(this.xhr);a&&(a.r?z.W.message(a.msg):this.Ui?(this.Ui.innerHTML="已经重定向",this.Ui.setAttribute("data-disabled",1)):this.dispatchEvent("change"))};
z.e.B=function(){this.h=z.M("div",{id:"zh-question-redirect-diag"},["将问题跳转至",z.M("div",{id:"zh-question-redirect-diag-content"},this.cd=z.M("input",{type:"text","class":"zg-form-text-input"})),z.M("div","zm-command",this.HM=z.M("a",{href:"javascript:;","class":"zm-command-cancel",name:"cancel"},"放弃操作"))]);this.ta=new z.U(null);this.ta.Na("问题重定向");z.Fj(this.ta,null);this.ta.R().appendChild(this.h)};z.e.show=function(){this.init();this.ta.G(!0)};var NG={},NG=function(){z.F.call(this)};z.v(NG,z.Rj);NG.Av=[["需要详细阐述","答案过于简短或表述不清晰，请完善答案。"],["答非所问","没有正面或直接回答问题，请修改答案。"],["应作为问题的评论","该内容是对问题本身的评论而不是回答，请改为发布到评论。"],["应作为答案的评论","该内容是对另外一个答案的评论或回应，而不是回答问题，请改为发布到评论。"],["内容重复","与已有答案重复，请修改答案。"],["内容已过期","答案的时效性已过，请更新答案。"],["需要注明关联利益","有广告、推销嫌疑，请注明作者与利益方的关系。"]];NG.Oj=null;NG.aa=function(){NG.Oj||(NG.Oj=new NG,NG.Oj.init());return NG.Oj};z.e=NG.prototype;
z.e.init=function(){if(!this.h){this.B();this.fc();var a=new Pw(this.h);In(a);a.cG=!0;a.Bm(!0);a.G(!1);a.pA=0;a.U()&&a.ha();z.Qw(a,new z.qg(13,0,0,-22));this.oA=a}};z.e.fc=function(){this.o().g(this.h,"click",this.CS)};z.e.CS=function(a){"A"===a.target.tagName&&(a=a.target.getAttribute("data-index"),this.pN.AX(a),this.oA.G(!1))};
z.e.B=function(){var a=z.M("div",{id:"zh-answer-flag-popup","class":"zg-r5px zu-hovercard-wrap"},[z.M("div","zg-r5px zu-hovercard-inner",[z.M("div",{id:"zh-answer-flag-popup-header"},[z.M("a",{"class":"zg-right",href:"/question/19867017",target:"_blank"},"这是什么？"),"选择一个理由："]),this.lI=z.M("div",{id:"zh-answer-flog-options-wrap"})]),z.M("div","zu-hovercard-spin-top")]);z.w(NG.Av,function(a,c){var d=z.M("a",{href:"javascript:;","class":"zm-menu-item-link"},a[0]);d.setAttribute("data-index",c);this.lI.appendChild(d)},
this);window.document.body.appendChild(a);this.h=a};z.e.show=function(a,b){this.oA.setPosition(new z.Nw(a,1));nC(this,b.DX());this.oA.G(!0);this.pN=b};var qC;z.v(oC,z.Rj);oC.prototype.init=function(){this.B();this.nn()};
oC.prototype.B=function(){this.h=z.M("div",null,[z.M("div","zg-section",[z.M("div",null,"标记："),this.tl=z.M("select")]),z.M("div",null,[z.M("div",null,"原因"),this.vA=z.M("textarea",{style:"width:96%;border:solid 1px #666;height:66px;padding:5px"})]),this.Bn=z.M("div","zm-command",[z.M("a",{"class":"zg-mr10",href:"javascript:void(0);",name:"cancel"},"取消"),z.M("a",{"class":"zg-btn-blue",href:"javascript:void(0);",name:"confirm"},"确定")])]);this.tl.appendChild(z.M("option",{value:"no"},"选择标记原因"));z.w(NG.Av,
function(a,b){this.tl.appendChild(z.M("option",{value:b},a[0]))},this);this.ta=new z.U(null);this.ta.Na("标记答案");z.Fj(this.ta,null);this.ta.R().appendChild(this.h)};
oC.prototype.nn=function(){this.o().g(this.tl,"change",function(){var a=this.tl.value;this.vA.value="no"===a?"":NG.Av[+a][1]}).g(this.Bn,"click",function(a){"cancel"===a.target.name?this.ta.G(!1):this.vA.value&&"no"!==this.tl.value&&(this.yx=new z.Z(!0),this.o().g(this.yx,"complete",function(){var a=z.Zn(this.yx);a&&!a.r?(this.Ui.innerHTML="已经标记",this.ta.G(!1)):z.W.message(a.msg)}),a=z.Ao(this.vA.value),this.yx.ajax("/answer/flag","answer_id\x3d"+this.FL+"\x26flag\x3d"+this.tl.value+"\x26reason\x3d"+
(0,window.encodeURIComponent)(a)))})};oC.prototype.show=function(){this.ta.G(!0)};z.xC={digits:{required:"请填写数字验证码"},password:{required:"请填写密码"},password_repeat:{required:"请填写密码"},email:{required:"请填写邮箱"},phone_no:{required:"请填写手机号"}};var OG=z.u("Link");z.u("Edit Link");z.u("Text to display:");z.PG=z.u("Link to:");z.u("Web address");z.u("Link to a page or file somewhere else on the web");z.u("Test this link");
z.u("{$startBold}Not sure what to put in the box?{$endBold} First, find the page on the web that you want to link to. (A {$searchEngineLink}search engine{$endLink} might be useful.) Then, copy the web address from the box in your browser's address bar, and paste it into the box above.",{startBold:"\x3cb\x3e",endBold:"\x3c/b\x3e",searchEngineLink:"\x3ca href\x3d'http://www.google.com/' target\x3d'_new'\x3e",endLink:"\x3c/a\x3e"});z.u("To what URL should this link go?");z.u("Email address");z.u("Link to an email address");
z.u("Invalid email address");z.u("To what email address should this link?");z.u("{$preb}Be careful.{$postb} Remember that any time you include an email address on a web page, nasty spammers can find it too.",{preb:"\x3cb\x3e",postb:"\x3c/b\x3e"});z.u("Open this link in a new window");z.u("Image");z.v(yC,z.vt);yC.prototype.next=function(){do yC.v.next.call(this);while(-1==this.Vb);return this.node};z.v(z.zC,Rq);z.la(z.zC);var DC=0;z.e=z.zC.prototype;z.e.B=function(a){var b=this.Xf(a);a=a.L().B("DIV",b?b.join(" "):null,AC(this,a.Ua(),a.Pg(),a.L()));z.Wi(a,"grid");return a};z.e.Hw=function(a,b){var c=b.B("TABLE",this.T()+"-table",b.B("TBODY",this.T()+"-body",a));c.cellSpacing=0;c.cellPadding=0;return c};z.e.Yb=function(){return!1};z.e.w=function(){return null};
z.e.ka=function(a,b){if(a){var c=z.Me(window.document,"TBODY",this.T()+"-body",a)[0];if(c){var d=0;z.w(c.rows,function(a){z.w(a.cells,function(a){z.af(a);if(b){var c=b[d++];c&&a.appendChild(c)}})});if(d<b.length){for(var f=[],g=z.H(a),h=c.rows[0].cells.length;d<b.length;){var k=b[d++];f.push(BC(this,k,g));f.length==h&&(k=CC(this,f,g),c.appendChild(k),f.length=0)}if(0<f.length){for(;f.length<h;)f.push(BC(this,"",g));k=CC(this,f,g);c.appendChild(k)}}}z.Ip(a,!0,z.y)}};z.e.T=function(){return"goog-palette"};z.v(FC,z.F);z.e=FC.prototype;z.e.mh=null;z.e.Bf=null;z.e.Fl=function(){return this.He.length};z.e.di=function(a){return this.He[a]||null};z.e.Ga=function(a){this.Vi(a,this.Fl())};z.e.Vi=function(a,b){a&&(this.Am(a,!1),z.yb(this.He,b,0,a))};z.e.removeItem=function(a){a&&z.ub(this.He,a)&&a==this.mh&&(this.mh=null,this.dispatchEvent("select"))};z.e.nf=function(){return this.mh};z.e.lb=function(){return z.wb(this.He)};z.e.Df=function(a){a!=this.mh&&(this.Am(this.mh,!1),this.mh=a,this.Am(a,!0));this.dispatchEvent("select")};
z.e.vj=function(){var a=this.mh;return a?z.mb(this.He,a):-1};z.e.Np=function(a){this.Df(this.di(a))};z.e.clear=function(){var a=this.He;if(!z.na(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0;this.mh=null};z.e.D=function(){FC.v.D.call(this);delete this.He;this.mh=null};z.e.Am=function(a,b){a&&("function"==typeof this.Bf?this.Bf(a,b):"function"==typeof a.YA&&a.YA(b))};z.v(z.HC,$q);z.e=z.HC.prototype;z.e.yc=null;z.e.Ta=-1;z.e.oa=null;z.e.D=function(){z.HC.v.D.call(this);this.oa&&(this.oa.H(),this.oa=null);this.yc=null;this.Kn.H()};z.e.Cm=function(a){z.HC.v.Cm.call(this,a);KC(this);this.oa?(this.oa.clear(),GC(this.oa,a)):(this.oa=new FC(a),a=(0,z.q)(this.Am,this),this.oa.Bf=a,this.o().g(this.oa,"select",this.Cj));this.Ta=-1};z.e.Og=function(){return""};z.e.Gp=function(){};
z.e.od=function(a){z.HC.v.od.call(this,a);var b=EC(this.M,this,a.target);b&&a.relatedTarget&&z.mf(b,a.relatedTarget)||b==LC(this)||(a=this.Ua(),this.ub(a?z.mb(a,b):-1))};z.e.ge=function(a){z.HC.v.ge.call(this,a);if(this.bc()&&(a=EC(this.M,this,a.target),a!=LC(this))){var b=this.Ua();this.ub(b?z.mb(b,a):-1)}};z.e.Od=function(a){var b=LC(this);return b?(this.Df(b),z.HC.v.Od.call(this,a)):!1};
z.e.$b=function(a){var b=this.Ua(),b=b?b.length:0,c=this.yc.width;if(0==b||!this.isEnabled())return!1;if(13==a.keyCode||32==a.keyCode)return this.Od(a);if(36==a.keyCode)return this.ub(0),!0;if(35==a.keyCode)return this.ub(b-1),!0;var d=0>this.Ta?this.vj():this.Ta;switch(a.keyCode){case 37:if(-1==d||0==d)d=b;this.ub(d-1);a.preventDefault();return!0;case 39:return d==b-1&&(d=-1),this.ub(d+1),a.preventDefault(),!0;case 38:-1==d&&(d=b+c-1);if(d>=c)return this.ub(d-c),a.preventDefault(),!0;break;case 40:if(-1==
d&&(d=-c),d<b-c)return this.ub(d+c),a.preventDefault(),!0}return!1};z.e.Cj=function(){};z.e.Pg=function(){return this.yc};z.e.ub=function(a){a!=this.Ta&&(MC(this,this.Ta,!1),this.jz=this.Ta,this.Ta=a,MC(this,a,!0),this.dispatchEvent("j"))};z.e.vj=function(){return this.oa?this.oa.vj():-1};z.e.nf=function(){return this.oa?this.oa.nf():null};z.e.Np=function(a){this.oa&&this.oa.Np(a)};z.e.Df=function(a){this.oa&&this.oa.Df(a)};
z.e.Oc=function(a){a&&-1==this.Ta?this.ub(-1<this.jz?this.jz:0):a||this.ub(-1);z.HC.v.Oc.call(this,a)};z.e.Am=function(a,b){if(this.m()&&a){var c=a.parentNode;Ep(c,this.M.T()+"-cell-selected",b);z.Xi(c,"selected",b)}};z.v(IC,$q);z.v(z.NC,fy);z.la(z.NC);z.NC.prototype.B=function(a){return a.L().B("DIV",this.Xf(a).join(" ")+" goog-inline-block"," ")};z.NC.prototype.w=function(a,b){b=z.NC.v.w.call(this,a,b);z.bj(b,"goog-inline-block");return b};z.NC.prototype.T=function(){return"goog-toolbar-separator"};z.v(z.OC,Sr);z.la(z.OC);z.OC.prototype.ao=function(a){return"HR"==a.tagName?new z.gy(z.NC.aa()):z.OC.v.ao.call(this,a)};z.OC.prototype.T=function(){return"goog-toolbar"};z.OC.prototype.mF=function(){return z.WF};z.v(PC,oy);z.la(PC);PC.prototype.T=function(){return"goog-toolbar-button"};z.v(z.QC,z.gr);z.Yq("goog-toolbar-button",function(){return new z.QC(null)});z.v(RC,qy);z.la(RC);RC.prototype.createCaption=function(a,b){return RC.v.createCaption.call(this,SC(a,b),b)};RC.prototype.Ea=function(a,b){a&&TC(this.R(a),b)};RC.prototype.De=function(a){var b=a.m();this.Ea(b,a.W());z.bj(b,"goog-color-menu-button");RC.v.De.call(this,a)};z.v(UC,z.HC);UC.prototype.Dt=null;UC.prototype.dt=null;UC.prototype.Vx=function(){var a=this.nf();return a?(a=Np(a,"background-color"),WC(a)):null};UC.prototype.Mp=function(a){a=WC(a);this.Dt||(this.Dt=z.ob(this.pr,function(a){return WC(a)}));this.Np(a?z.mb(this.Dt,a):-1)};z.v(XC,z.sy);var ZC={HW:"#000 #444 #666 #999 #ccc #eee #f3f3f3 #fff".split(" "),bX:"#f00 #f90 #ff0 #0f0 #0ff #00f #90f #f0f".split(" "),YW:"#f4cccc #fce5cd #fff2cc #d9ead3 #d0e0e3 #cfe2f3 #d9d2e9 #ead1dc #ea9999 #f9cb9c #ffe599 #b6d7a8 #a2c4c9 #9fc5e8 #b4a7d6 #d5a6bd #e06666 #f6b26b #ffd966 #93c47d #76a5af #6fa8dc #8e7cc3 #c27ba0 #cc0000 #e69138 #f1c232 #6aa84f #45818e #3d85c6 #674ea7 #a64d79 #990000 #b45f06 #bf9000 #38761d #134f5c #0b5394 #351c75 #741b47 #660000 #783f04 #7f6000 #274e13 #0c343d #073763 #20124d #4c1130".split(" ")};
z.e=XC.prototype;z.e.Vx=function(){return this.W()};z.e.Mp=function(a){this.Ea(a)};z.e.Ea=function(a){for(var b=0,c;c=this.di(b);b++)"function"==typeof c.Mp&&c.Mp(a);XC.v.Ea.call(this,a)};z.e.oo=function(a){"function"==typeof a.target.Vx?this.Ea(a.target.Vx()):"none"==a.target.W()&&this.Ea(null);XC.v.oo.call(this,a);a.stopPropagation();this.dispatchEvent("action")};z.e.Bb=function(a,b){a&&0==this.Fl()&&(this.ph(YC(this.L())),this.Ea(this.W()));XC.v.Bb.call(this,a,b)};
z.Yq("goog-color-menu-button",function(){return new XC(null)});z.v($C,qy);z.la($C);$C.prototype.T=function(){return"goog-toolbar-menu-button"};z.v(aD,$C);z.la(aD);aD.prototype.createCaption=function(a,b){return ry(SC(a,b),this.T(),b)};aD.prototype.Ea=function(a,b){a&&TC(this.R(a),b)};aD.prototype.De=function(a){this.Ea(a.m(),a.W());z.bj(a.m(),"goog-toolbar-color-menu-button");aD.v.De.call(this,a)};z.v(bD,XC);z.Yq("goog-toolbar-color-menu-button",function(){return new bD(null)});z.v(cD,z.sy);z.Yq("goog-toolbar-menu-button",function(){return new cD(null)});z.v(dD,z.sy);z.e=dD.prototype;z.e.oa=null;z.e.C=function(){dD.v.C.call(this);fD(this);iD(this)};z.e.ga=function(a){dD.v.ga.call(this,a);(a=this.Og())?eD(this,a):this.nf()||this.Np(0)};z.e.D=function(){dD.v.D.call(this);this.oa&&(this.oa.H(),this.oa=null);this.Tw=null};z.e.oo=function(a){this.Df(a.target);dD.v.oo.call(this,a);a.stopPropagation();this.dispatchEvent("action")};z.e.Cj=function(){var a=this.nf();dD.v.Ea.call(this,a&&a.W());fD(this)};
z.e.ph=function(a){var b=dD.v.ph.call(this,a);a!=b&&(this.oa&&this.oa.clear(),a&&(this.oa?z.ch(a,function(a){hD(a);this.oa.Ga(a)},this):gD(this,a)));return b};z.e.Ga=function(a){hD(a);dD.v.Ga.call(this,a);this.oa?this.oa.Ga(a):gD(this,this.Xa());jD(this)};z.e.Vi=function(a,b){hD(a);dD.v.Vi.call(this,a,b);this.oa?this.oa.Vi(a,b):gD(this,this.Xa())};z.e.removeItem=function(a){dD.v.removeItem.call(this,a);this.oa&&this.oa.removeItem(a)};
z.e.Df=function(a){if(this.oa){var b=this.nf();this.oa.Df(a);a!=b&&this.dispatchEvent("change")}};z.e.Np=function(a){this.oa&&this.Df(this.oa.di(a))};z.e.Ea=function(a){if(null!=a&&this.oa)for(var b=0,c;c=this.oa.di(b);b++)if(c&&"function"==typeof c.W&&c.W()==a){this.Df(c);return}this.Df(null)};z.e.W=function(){var a=this.nf();return a?a.W():null};z.e.nf=function(){return this.oa?this.oa.nf():null};z.e.vj=function(){return this.oa?this.oa.vj():-1};
z.e.Bb=function(a,b){dD.v.Bb.call(this,a,b);this.rb()?this.Xa().ub(this.vj()):jD(this)};z.Yq("goog-select",function(){return new dD(null)});z.v(lD,dD);z.Yq("goog-toolbar-select",function(){return new lD(null)});var qD=[10,10,13,16,18,24,32,48];var QG,RG,AD,zD,SG,TG,UG,VG,pD,WG,XG,YG,ZG,sD,$G,aH,bH,cH,dH,eH,fH,gH,hH,iH,jH,kH,lH,mH,nH,oH,pH,qH,rH,sH,tH,uH,vH,wH,xH,yH,zH,AH,BH,CH,EH,FH,GH;
for(QG=z.u("Normal"),RG=z.u("Normal / serif"),AD=[{caption:QG,value:"arial,sans-serif"},{caption:RG,value:"times new roman,serif"},{caption:"Courier New",value:"courier new,monospace"},{caption:"Georgia",value:"georgia,serif"},{caption:"Trebuchet",value:"trebuchet ms,sans-serif"},{caption:"Verdana",value:"verdana,sans-serif"}],zD={ja:[{caption:"ＭＳ Ｐゴシック",value:"ms pgothic,sans-serif"},{caption:"ＭＳ Ｐ明朝",value:"ms pmincho,serif"},{caption:"ＭＳ ゴシック",value:"ms gothic,monospace"}],ko:[{caption:"굴림",value:"gulim,sans-serif"},
{caption:"바탕",value:"batang,serif"},{caption:"굴림체",value:"gulimche,monospace"}],"zh-tw":[{caption:"新細明體",value:"pmingliu,serif"},{caption:"細明體",value:"mingliu,serif"}],"zh-cn":[{caption:"宋体",value:"simsun,serif"},{caption:"黑体",value:"simhei,sans-serif"},{caption:"MS Song",value:"ms song,monospace"}]},SG=z.u("Small"),TG=z.u("Normal"),UG=z.u("Large"),VG=z.u("Huge"),pD=[{caption:SG,value:1},{caption:TG,value:2},{caption:UG,value:4},{caption:VG,value:6}],WG=z.u("Heading"),XG=z.u("Subheading"),YG=z.u("Minor heading"),
ZG=z.u("Normal"),sD=[{caption:WG,Ca:"H2"},{caption:XG,Ca:"H3"},{caption:YG,Ca:"H4"},{caption:ZG,Ca:"P"}],$G=z.u("Format"),aH=z.u("Format"),bH=z.u("Undo"),cH=z.u("Redo"),dH=z.u("Font"),eH=z.u("Font size"),fH=z.u("Text color"),gH=z.u("Bold"),hH=z.u("Italic"),iH=z.u("Underline"),jH=z.u("Text background color"),kH=z.u("Add or remove link"),lH=z.u("Numbered list"),mH=z.u("Bullet list"),nH=z.u("Decrease indent"),oH=z.u("Increase indent"),pH=z.u("Align left"),qH=z.u("Align center"),rH=z.u("Align right"),
sH=z.u("Justify"),tH=z.u("Remove formatting"),uH=z.u("Insert image"),vH=z.u("Strikethrough"),wH=z.u("Left-to-right"),xH=z.u("Right-to-left"),yH=z.u("Quote"),zH=z.u("Edit HTML source"),AH=z.u("Subscript"),BH=z.u("Superscript"),CH=z.u("Edit HTML"),z.DH={},EH=[{Ca:"+undo",V:bH,Pa:"tr-icon tr-undo",factory:BD,jb:!0},{Ca:"+redo",V:cH,Pa:"tr-icon tr-redo",factory:BD,jb:!0},{Ca:"+fontName",V:dH,Pa:"tr-fontName",factory:function(a,b,c,d,f,g){var h=wD(a,b,c,d,f,g);yD(h);eD(h,QG);z.bj(h.Xa().R(),"goog-menu-noaccel");
h.Li=function(a){var b=null;a&&0<a.length&&(b=z.$g(h.Xa(),mD(a)));b!=h.nf()&&h.Df(b)};return h},jb:!0},{Ca:"+fontSize",V:eH,Pa:"tr-fontSize",factory:function(a,b,c,d,f,g){var h=wD(a,b,c,d,f,g);oD(h);eD(h,TG);z.bj(h.Xa().R(),"goog-menu-noaccel");h.Li=function(a){var b;if(b=z.pa(a))b=a.match(NF),b="px"==(b&&b[0]||null);b&&(b=qD,a=Array.prototype.lastIndexOf.call(b,(0,window.parseInt)(a,10),b.length-1));a=0<a?a:null;a!=h.W()&&h.Ea(a)};return h},jb:!0},{Ca:"+bold",V:gH,Pa:"tr-icon tr-bold",jb:!0},{Ca:"+italic",
V:hH,Pa:"tr-icon tr-italic",jb:!0},{Ca:"+underline",V:iH,Pa:"tr-icon tr-underline",jb:!0},{Ca:"+foreColor",V:fH,Pa:"tr-icon tr-foreColor",factory:function(a,b,c,d,f,g){a=xD(a,b,c,d,f,g);a.Mp("#000");a.Li=z.Aa(CD,a);return a},jb:!0},{Ca:"+backColor",V:jH,Pa:"tr-icon tr-backColor",factory:function(a,b,c,d,f,g){a=xD(a,b,c,d,f,g);a.Mp("#FFF");a.Li=z.Aa(CD,a);return a},jb:!0},{Ca:"+link",V:kH,caption:OG,Pa:"tr-link",jb:!0},{Ca:"+insertOrderedList",V:lH,Pa:"tr-icon tr-insertOrderedList",jb:!0},{Ca:"+insertUnorderedList",
V:mH,Pa:"tr-icon tr-insertUnorderedList",jb:!0},{Ca:"+outdent",V:nH,Pa:"tr-icon tr-outdent",factory:z.tD},{Ca:"+indent",V:oH,Pa:"tr-icon tr-indent",factory:z.tD},{Ca:"+justifyLeft",V:pH,Pa:"tr-icon tr-justifyLeft",jb:!0},{Ca:"+justifyCenter",V:qH,Pa:"tr-icon tr-justifyCenter",jb:!0},{Ca:"+justifyRight",V:rH,Pa:"tr-icon tr-justifyRight",jb:!0},{Ca:"+justifyFull",V:sH,Pa:"tr-icon tr-justifyFull",jb:!0},{Ca:"+removeFormat",V:tH,Pa:"tr-icon tr-removeFormat",factory:z.tD},{Ca:"image",V:uH,Pa:"tr-icon tr-image",
factory:z.tD},{Ca:"+strikeThrough",V:vH,Pa:"tr-icon tr-strikeThrough",jb:!0},{Ca:"+subscript",V:AH,Pa:"tr-icon tr-subscript",jb:!0},{Ca:"+superscript",V:BH,Pa:"tr-icon tr-superscript",jb:!0},{Ca:"ltr",V:wH,Pa:"tr-icon tr-ltr",jb:!0},{Ca:"rtl",V:xH,Pa:"tr-icon tr-rtl",factory:function(a,b,c,d,f,g){var h=z.vD(a,b,c,d,f,g);h.Li=function(a){a=!!a;Ep(h.getParent().m(),"tr-rtl-mode",a);h.Mc(a)};return h},jb:!0},{Ca:"+BLOCKQUOTE",V:yH,Pa:"tr-icon tr-BLOCKQUOTE",jb:!0},{Ca:"+formatBlock",V:$G,caption:aH,
Pa:"tr-formatBlock",factory:function(a,b,c,d,f,g){var h=wD(a,b,c,d,f,g);rD(h);eD(h,ZG);z.bj(h.Xa().R(),"goog-menu-noaccel");h.Li=function(a){a=a&&0<a.length?a:null;a!=h.W()&&h.Ea(a)};return h},jb:!0},{Ca:"editHtml",V:zH,caption:CH,Pa:"tr-editHtml",factory:z.tD}],FH=0,GH;GH=EH[FH];FH++)z.DH[GH.Ca]=GH;EH=null;var HH={};HH.track=cp;z.v(z.DD,z.Xy);z.Ca(z.DD.prototype,HH);z.DD.prototype.defaults={Ek:null,title:"Distraction Free Mode",wM:"back",rU:"publish",Yn:"zu-editing-distraction-free",iV:"sticky-goog-scrollfloater",EV:"zm-editable-toolbar-container"};z.DD.prototype.nd=z.jb("FullScreenPlugin");z.DH.toggleFullScreen={Ca:"toggleFullScreen",V:"写作模式",Pa:"tr-icon tr-max",factory:z.tD};z.e=z.DD.prototype;z.e.Ge=z.Aa(z.so,{gX:"toggleFullScreen",zW:"enterFullScreen",AW:"exitFullScreen"});
z.e.D=function(){this.ea.H();z.N(this.h);this.J=this.iq=this.uc=this.Cb=this.h=null;z.DD.v.D.call(this)};
z.e.nw=function(){var a=this.J,b=window.document.createElement("div");b.id="zu-distraction-free-editor";b.innerHTML='\x3cdiv class\x3d"header"\x3e\x3cdiv class\x3d"wrapper"\x3e\x3ch1 class\x3d"title"\x3e'+a.title+'\x3c/h1\x3e\x3ca href\x3d"#" class\x3d"'+a.wM+'" name\x3d"return"\x3e返回\x3c/a\x3e\x3ca href\x3d"#" class\x3d"'+a.rU+'" name\x3d"save"\x3e发布\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"toolbar"\x3e\x3cdiv class\x3d"tools"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"content" class\x3d"grid"\x3e\x3c/div\x3e';window.document.body.appendChild(b);
this.ea.g(z.L("back",b),"click",function(a){a.preventDefault();ID(this)});this.ea.g(z.L("publish",b),"click",function(a){a.preventDefault();this.dispatchEvent("save")&&ID(this)});this.h=b;this.uc=z.L("content",b);this.iq=z.M("div",{className:"toolbar-info"});this.J.Ek||(this.J.Ek=this.F.Ha)};z.e.jf=function(a){this.h||this.nw();switch(a){case "enterFullScreen":FD(this);break;case "exitFullScreen":ID(this);break;case "toggleFullScreen":z.V.has(window.document.body,this.J.Yn)?ID(this):FD(this)}};
z.e.QH=function(){z.V.has(window.document.body,this.J.Yn)?ID(this):"writing"===window.location.hash.slice(1)&&FD(this)};z.e.fp=function(a){27===a.keyCode&&this.dispatchEvent("shouldExitFullScreenOnEscape")&&ID(this)};z.e.qJ=function(a){z.V[a?"add":"remove"](this.Cb,this.J.iV)};z.JD.prototype={Jc:function(a){if(a)this.GD.push(a);else{var b={current:this.cf,qo:this.qo(),Es:this.Es()};z.w(this.GD,function(a){(0,window.setTimeout)(function(){a.call(null,b)})})}},remove:function(a){a=this.items.indexOf(a);-1!==a&&(this.items.splice(a,1),this.Qo=Math.ceil(this.items.length/this.om),this.Jc());return a},qo:function(){return this.cf<this.Qo},Es:function(){return 1!==this.cf},next:function(){this.qo()&&(this.cf+=1,this.Jc())},prev:function(){this.Es()&&(--this.cf,this.Jc())},random:function(a){if(2<=
this.Qo){for(var b=[],c=1;c<this.Qo+1;c++)b.push(c);0!==a&&z.ub(b,this.cf);this.cf=b[Math.floor(Math.random()*b.length)]}else a===this.om&&this.items.reverse(),this.cf=1;this.Jc();return this.items.length>this.om}};z.ja(ND,z.WA);ND.prototype.C=function(){z.WA.prototype.C.call(this);this.OC=(0,window.$)(this.h).data("ac-type");switch(this.OC){case "popular_topics":OD(this);break;case "validation_reminder":PD(this);break;case "headline_reminder":QD(this);break;case "avatar_reminder":SD(this)}};ND.prototype.D=function(){this.h.parentNode.removeChild(this.h);z.WA.prototype.D.call(this)};ND.prototype.qs=function(){var a=this;window.$.post("/actioncard/uninterest",{type:this.OC},function(){(0,window.$)(a.h).slideUp(function(){return a.H()})})};z.ja(TD,z.WA);TD.prototype.ga=function(a){z.WA.prototype.ga.call(this,a);UD(this)};TD.prototype.C=function(){z.WA.prototype.C.call(this);var a=this.m();(0,window.$)(".js-adView",a).each(function(){var a=(0,window.$)(this);z.On(a[0],function(){Xv(a.data("view-track"))})});(0,window.$)("a.js-adLink",a).one("click",function(){var a=(0,window.$)(this),c=a.attr("href");a.attr("href",z.Zp(c,"click",1))})};TD.prototype.qs=function(){var a=this,b=(0,window.$)(this.m());Xv(b.data("close-track"));b.slideUp(function(){return a.H()})};
TD.prototype.YS=function(){window.open(IH,"_blank")};var IH="/promotion-intro";z.v(z.VD,z.ey);z.Yq("goog-checkbox-menuitem",function(){return new z.VD(null)});z.v(WD,Mw);WD.prototype.ha=function(a,b,c,d){var f=Ko(z.Ke(a)),g=this.Sh.x+f.x,f=this.Sh.y+f.y,h=Fs(a),g=g-h.x,f=f-h.y;Hs(new z.He(g,f),a,b,c,null,null,d)};z.v(XD,WD);XD.prototype.Mo=0;XD.prototype.Em=function(a){this.Mo=a};XD.prototype.ha=function(a,b,c,d){var f=lo(a),f=Mp(f),g;g=z.H(a);g=z.Re(g.Ka);g=new z.He(this.Sh.x+g.scrollLeft,this.Sh.y+g.scrollTop);var h=b,k=Hs(g,a,h,c,f,10,d);if(0!=(k&496)){if(k&16||k&32)h^=2;if(k&64||k&128)h^=1;k=Hs(g,a,h,c,f,10,d);0!=(k&496)&&Hs(g,a,b,c,f,this.Mo,d)}};z.v(z.YD,z.jy);z.e=z.YD.prototype;z.e.BV=!1;z.e.SG=0;z.e.Pf=null;z.e.ga=function(a){z.YD.v.ga.call(this,a);(a=a.getAttribute("for")||a.htmlFor)&&this.attach(this.L().m(a),1)};z.e.C=function(){z.YD.v.C.call(this);this.Ef.forEach(this.gD,this);var a=this.o();a.g(this,"action",this.FR);a.g(this.L().wa(),"mousedown",this.LH,!0);z.B&&a.g(this.L().wa(),"contextmenu",this.LH,!0)};
z.e.attach=function(a,b,c,d,f){a&&this.Ef.Nf(z.ua(a))||(a?(b={h:a,HJ:b,oR:c,mx:d?"contextmenu":"mousedown",zz:f},this.Ef.set(z.ua(a),b)):b=null,this.ya&&this.gD(b),a=z.Aa(this.lS,a),this.m()&&this.o().g(this.m(),"keydown",a))};z.e.lS=function(a,b){if(27==b.keyCode)a.focus();else{var c=z.bh(this,this.Ta);if(c){var c=c.m(),d=new z.Qc(b.jc,c);d.target=c;if(32==b.keyCode||13==b.keyCode)z.Wc(c)?z.td(c,"keydown",!1,d):z.qd(c,"keydown",!1,d);32==b.keyCode&&this.hide()}}};
z.e.gD=function(a){this.o().g(a.h,a.mx,this.eI);"contextmenu"!=a.mx&&this.o().g(a.h,"keydown",this.MS)};z.e.detach=function(a){if(!a||!this.Ef.Nf(z.ua(a)))throw Error("Menu not attached to provided element, unable to detach.");a=z.ua(a);if(this.ya){var b=this.Ef.get(a);this.o().qa(b.h,b.mx,this.eI)}this.Ef.remove(a)};z.e.xJ=function(a,b,c){b=z.ka(a.HJ)?new z.ly(a.h,a.HJ,!0):new XD(b,c);b.Em&&b.Em(5);z.ZD(this,b,a.oR,a.zz,a.h)};
z.e.hide=function(){this.U()&&(this.G(!1),this.U()||(this.SG=(0,z.G)(),this.Pf=null))};z.e.HG=function(){return this.U()||150>(0,z.G)()-this.SG};z.e.FR=function(){this.hide()};z.e.eI=function(a){$D(this,a)};z.e.MS=function(a){32!=a.keyCode&&13!=a.keyCode&&40!=a.keyCode||$D(this,a);40==a.keyCode&&z.Zr(this)};z.e.LH=function(a){this.U()&&!this.Mf(a.target)&&this.hide()};z.e.Zc=function(a){z.YD.v.Zc.call(this,a);this.hide()};z.e.D=function(){z.YD.v.D.call(this);this.Ef&&(this.Ef.clear(),delete this.Ef)};z.v(aE,z.Q);var bE="headline",JH={experience:"/topic/bio/update",headline:"/people/edit"},KH="例：游戏开发者，科幻游戏爱好者;例：交互设计师，专注 iOS 平台产品设计;例：从医五年，口腔医学领域;例：金融硕士，三年从业经验;例：SNS 深度用户，社交产品设计师;例：十年互联网人，做过产品，写过代码;例：摄影爱好者，专注人像摄影;例：旅行爱好者，脚步遍及 32 个国家;例：读中外历史，研究各国文化;例：三次创业，两次失败，一次成功;例：坚持健身四年，专注有氧抗阻训练;例：做过动画，画过漫画".split(";");z.e=aE.prototype;
z.e.B=function(){this.L();var a,b;"experience"===this.type?(b="添加我在 "+this.kI.Hi+" 话题下的话题经验",a="在 "+this.kI.Hi+" 话题下的话题经验"):(b="添加一句话介绍",a="一句话介绍");a='\n    \x3cdiv class\x3d"zm-bio-item '+(this.content.length?"normal":"empty")+'"\x3e\n      \x3cp class\x3d"zm-bio-item-title"\x3e'+z.Oa(a)+'\x3c/p\x3e\n      \x3cinput class\x3d"zm-bio-item-checkbox" type\x3d"checkbox"/\x3e\n      \x3cimg class\x3d"avatar" src\x3d"'+z.Oa(z.S.ce())+'"\x3e\n      \x3cdiv class\x3d"zm-bio-item-empty-tip"\x3e\n        \x3cspan class\x3d"sprite-topic-exprience-icon-add"\x3e\x3c/span\x3e\n        \x3ca href\x3d"javascript:;" name\x3d"edit"\x3e'+
z.Oa(b)+'\x3c/a\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d"zm-bio-item-content"\x3e\n        \x3cspan class\x3d"username"\x3e'+z.Oa(z.S[0])+'\x3c/span\x3e\n        \x3cspan class\x3d"content"\x3e\n          '+("，"+z.Oa(this.content))+'\n        \x3c/span\x3e\n        \x3ca href\x3d"javascript:;" name\x3d"edit" class\x3d"zu-edit-button"\x3e\x3ci class\x3d"zu-edit-button-icon"\x3e\x3c/i\x3e修改\x3c/a\x3e\n      \x3c/div\x3e\n    \x3c/div\x3e\n  ';a=(0,window.$)(a);this.h=a.get(0);this.bf();this.hC=
a.find(".zm-bio-item-checkbox");this.wq=a.find(".content");this.ga(this.h)};
z.e.bf=function(){var a=this.L(),b=(0,window.$)('\n    \x3cdiv class\x3d"zm-command"\x3e\n      \x3cspan class\x3d"limitTip"\x3e'+(40-this.content.length)+' / 40\x3c/span\x3e\n      \x3ca href\x3d"javascript:;" name\x3d"cancel"\x3e取消\x3c/a\x3e\n      \x3ca href\x3d"javascript:;" name\x3d"save" class\x3d"zg-r3px zg-btn-blue"\x3e保存\x3c/a\x3e\n    \x3c/div\x3e\n  ').get(0),c=a.B("textarea",{className:"zm-bio-item-editor-input",value:this.content});this.MN=a.B("div","zm-bio-item-editor",[a.B("div","zg-form-text-input",
c),b]);new z.Pr(c);a.appendChild(this.h,this.MN);this.Te=(0,window.$)(c);this.$G=a.Yf("limitTip",b);this.type!==bE&&this.Te.prop("placeholder",KH[Math.floor(Math.random()*KH.length)])};z.e.ga=function(a){aE.v.ga.call(this,a);this.Xp=this.content.length?"normal":"empty"};
z.e.C=function(){var a=this;aE.v.C.call(this);this.o().g(this.h,"click",function(){"normal"===this.Xp?this.Mc(!0):"empty"===this.Xp&&(dE(this,"editing"),cE(this))});(0,window.$)(this.h).find("a").click(function(b){switch((0,window.$)(b.target).prop("name")){case "edit":dE(a,"editing");cE(a);break;case "cancel":a.lo();break;case "save":a.zs()}b.stopPropagation()});this.Te.on("keyup",function(b){b=40-(0,window.$)(b.target).val().length;Ep(a.$G,"exceed",0>b);z.nf(a.$G,b+" / 40")})};
z.e.zs=function(){var a=this.Te.val();if(40>a.length){var b=this,c=JH[this.type];("experience"===this.type?window.$.post(c,{bio:a,tid:this.Gi}):window.$.post(c,{data:JSON.stringify({headline:a})})).then(function(){a.length?(b.wq.text("，"+a),b.Mc(!0),dE(b,"normal")):(b.wq.text(""),b.Mc(!1),dE(b,"empty"));b.ka(a)})}};z.e.lo=function(){this.content.length?dE(this,"normal"):dE(this,"empty")};z.e.ka=function(a){this.content=a;this.content.length?this.wq.text("，"+a):this.wq.text("")};
z.e.Mc=function(a){this.hC.prop("checked",a);a&&this.dispatchEvent("bio_item_checked")};z.e.Ua=function(){return this.content};z.e.getToken=function(){return this.Gi};z.e.tf=function(){return this.hC.prop("checked")};z.v(eE,z.Rj);var gE=null;z.e=eE.prototype;
z.e.render=function(a){var b=this;this.h=z.M("div","zu-bio-editor-wrap",[this.oQ=z.M("div","zu-bio-editor-inner-wrap"),this.tc=z.M("div","zm-command",[this.Dn=z.M("a",{name:"save",href:"#",className:"zg-r3px zg-btn-blue"},"完成")])]);var c=z.S[4];c.length&&kE(this,c,{type:bE,Gi:"headline"});z.w(this.pE,function(a){kE(this,a[1],{type:"experience",Hi:a[0][0],Gi:a[0][3]})},this);this.lQ&&z.P(this.tc,!1);a.appendChild(this.h);this.o().g(this.tc,"click",this.Qa);this.g("bio_item_checked",function(a){z.w(this.items,
function(b){b!==a.target&&b.Mc(!1)})});(0,window.$)(z.zj(this.ta)).click(function(){b.ia({action:"click_edit_topic_experience_close"})})};z.e.getSelection=function(){return this.items.find(function(a){return a.tf()})};z.e.Jx=function(){var a=this.getSelection();return a&&a.Ua()};z.e.Qa=function(a){(a=this.Vf(a.target))&&"save"===a.name&&(this.ta&&(lE(this),this.ta.G(!1)),this.dispatchEvent("change"),this.ia({action:"click_edit_topic_experience_submit"}))};
z.e.ia=function(a){this.dispatchEvent(Object.assign({type:"trackRequested",category:"edit_profile"},a))};var rE={eC:function(a,b){return window.$.post("/node/ColumnPostVoteBarV2",{method:b,params:{post_id:a}})},wF:function(a){return window.$.get("/node/ColumnPostVoteInfoV2",{params:{post_id:a}})}};z.v(z.mE,z.Q);var oE={Jf:1,Si:-1,FC:0};z.mE.prototype.defaults={RV:"up",IN:"down",jN:"count",Zt:"pressed"};z.Nb(z.mE.prototype,oE);z.e=z.mE.prototype;z.e.N=oE.FC;
z.e.w=function(a){z.mE.v.w.call(this,a);var b=this.J;a=this.X=(0,window.$)(a);this.xv=(0,window.$)("."+b.RV,a);this.mv=(0,window.$)("."+b.IN,a);this.kC=(0,window.$)("."+b.jN,a);b=this.xv.hasClass(this.J.Zt);a=this.mv.hasClass(this.J.Zt);b?this.N=oE.Jf:a&&(this.N=oE.Si);pE(this);this.xv.click(window.$.proxy(this.Qu,this));this.mv.click(window.$.proxy(this.Pu,this));return this};z.e.getState=function(){return this.N};
z.e.nc=z.Or(function(a){a!==this.N&&z.so(oE,a)&&(this.dispatchEvent({type:"action",data:{state:a}}),this.Wh&&"pending"===this.Wh.state()&&this.Wh.abort(),nE(this,this.N,a),this.N=a,pE(this),this.nV().done((0,z.q)(function(a){a.r||this.Jc()},this)))},!0);z.e.nV=function(){var a={};a[oE.Jf]="vote_up";a[oE.Si]="vote_down";a[oE.FC]="vote_neutral";return this.Wh=("post"===this.entryType?rE.eC:sE.eC)(this.zb,a[this.N])};z.e.Qu=function(){this.nc(this.N===oE.Si?oE.Jf:this.N^oE.Jf)};
z.e.Pu=function(){this.nc(this.N===oE.Jf?oE.Si:this.N^oE.Si)};z.e.Jc=function(){this.dispatchEvent("change")};z.v(z.qE,z.Q);z.e=z.qE.prototype;z.e.hb=function(){return this.vb.data("votecount")};z.e.Jc=function(){this.dispatchEvent("change")};z.e.wp=function(a){if(a=(0,z.bb)(a))a=(0,window.$)(a),this.vb.replaceWith(a),this.vb=a,this.fc(),this.Jc()};
z.e.fc=function(){function a(a,d){var f=z.M("div","zm-voters");a.appendChild(f);var g=z.M("div","listview");f.appendChild(g);var h=("post"===b.entryType?"/post/":"/answer/")+b.zb+"/voters_profile",k=new z.zl({use:[],source:function(){return window.$.get(h).then(function(a){var c=a.paging;c&&(c.total&&(b.vb.data("votecount",c.total),b.Jc()),h=c.next);return{results:a.payload,next:!!h}})}});k.w(g);k.mf().setAttribute("hidden","true");z.Bc(d,k);k.o().Aa(k,"next",function(){k.lb().length?(k.mf().removeAttribute("hidden"),
k.use("autoload",{$v:!1,viewport:f})):(k.H(),f.innerHTML='\x3cdiv class\x3d"empty-results"\x3e还没有人赞同\x3c/div\x3e')});return k.Yj()}var b=this;(0,window.$)("a.more",this.vb).click(function(){var c=z.W.async({modal:!0,title:b.hb()+" 人赞同",className:"zm-voters-dialog",Dw:window.$.Deferred(function(b){(0,window.setTimeout)(function(){a(c.R(),c).then(function(){b.resolve(null)})})}).promise()});c.o().g(b,"change",function(){c.Na(b.hb()+" 人赞同")})})};z.e.C=function(){this.vb=(0,window.$)(this.h);this.fc()};z.v(uE,z.sv);z.e=uE.prototype;z.e.C=function(){uE.v.C.call(this);this.ready(function(){if(this.Ma&&this.Ma.on)this.Ma.on("load",this.Hy,!1,this)})};
z.e.Hy=function(){var a=new vE(this,!0);z.Bc(this,a);this.o().g(a,LH,function(){var a=!this.Id&&this.Ma.Sb.FullScreenPlugin;a&&ED(a);(0,window.$)(this.jr).text("保存草稿并离开");(0,window.$)(this.h).find(".zu-edit-button span").text("修改（有未发布的编辑草稿）")}).g(a,DE,function(){(0,window.$)(this.jr).text("取消");(0,window.$)(this.h).find(".zu-edit-button span").text("修改")});var b=ov(this);this.o().g(b,"focus",function(){a.Rd.start()}).g(b,"blur",function(){z.yE(a);this.iN!==this.Zf()&&a.qu()}).g(this,"saveSuccess",
function(){delete z.dm.Xd;z.yE(a);z.BE(a)}).g(this,"save_unchanged",function(){delete z.dm.Xd;z.yE(a);z.BE(a)});a.w(this.tc);z.dm.Xd&&z.dm.Xd[0]&&(0,window.$)(this.jr).text("保存草稿并离开")};
z.e.gl=function(){this.tc=z.M("div","zm-command",[(0,window.$)('\x3cdiv class\x3d"draft-controls zg-left"\x3e\x3cspan class\x3d"draft-saved-info"\x3e\x3ca class\x3d"draft-clear-button goog-inline-block" href\x3d"#" data-tip\x3d"s$b$取消编辑并删除草稿"\x3e\x3ci class\x3d"zg-icon zg-icon-bin"\x3e\x3c/i\x3e\x3cspan class\x3d"hide-text"\x3e清除草稿\x3c/span\x3e\x3c/a\x3e\x3cspan class\x3d"draft-saved-time"\x3e\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e')[0],this.jr=z.M("a",{"class":"zm-command-cancel",name:"cancel",href:"#"},
"取消"),this.Dn=z.M("a",{"class":"zg-r3px zg-btn-blue",name:"save",href:"#"},"发布")]);this.Ib.appendChild(this.tc)};z.e.vx=function(){var a=this;window.$.get("/draft/get",{qid:this.Bp},function(b){b.r||(a.yu(b.msg),a.iN=b.msg)})};z.e.pF=function(){var a=[];if(!this.disabled){var b="修改";z.dm.Xd&&z.dm.Xd[0]&&(b="修改（有未发布的编辑草稿）");a.push('\x3ca href\x3d"javascript:;" class\x3d"zu-edit-button" name\x3d"edit"\x3e\x3ci class\x3d"zu-edit-button-icon"\x3e\x3c/i\x3e\x3cspan\x3e'+b+"\x3c/span\x3e\x3c/a\x3e")}return a.join("")};z.v(vE,z.Q);var LH="saveContent",DE="clearContent";z.e=vE.prototype;z.e.D=function(){zE(this);this.Rd.H();vE.v.D.call(this)};
z.e.w=function(a){this.h=a;this.Os=z.L("draft-saved-info",a);z.P(this.Os,!1);this.nG=z.L("draft-saved-time",a);this.XM=z.L("draft-clear-button",a);a=this.o().g(this.Rd,"tick",this.qu).g(this.XM,"click",this.YM).g(this.$r,"keydown",this.QQ);"oninput"in this.$r&&!z.A?a.g(this.$r,"input",this.qQ):a.g(this.$r,"keydown",this.rQ);var b=z.dm.Xd&&1E3*z.dm.Xd[1];b&&(AE(this,b),this.BB=(0,window.setInterval)((0,z.q)(function(){AE(this,b)},this),22E3))};
z.e.QQ=function(a){(a.metaKey||a.ctrlKey)&&"s"===z.il[a.keyCode]&&(this.fR(),this.isContentEditable||a.preventDefault())};z.e.ex=function(){(0,window.$)(window).on("beforeunload.DraftSaver",(0,z.q)(function(){return"你的修改还未成功保存，确认离开该页面吗？"},this))};z.e.Ir=function(){(0,window.$)(window).off("beforeunload.DraftSaver")};z.e.qQ=function(){z.yE(this);wE(this)};z.e.rQ=function(a){Ho(a.keyCode)&&(z.yE(this),wE(this))};z.e.ka=function(a){this.wb.ka(a);this.wb.Ip()};z.e.Ua=function(){return this.wb.Zf()};
z.e.eJ=function(){if(!this.Gd){var a=this.Ua();if(a){xE(this,"保存中…");var a=(new z.uh).add("qid",this.pa).add("content",a).add("timestamp",(0,z.G)()),b=new z.Z;b.ajax("/answer/draft/save",a.toString(),"POST");this.o().g(b,"success",(0,z.q)(this.gh,this));this.WG=b}}};z.e.eW=150;z.e.qu=z.$o(vE.prototype.eW,vE.prototype.eJ);z.e.gR=350;z.e.fR=z.$o(vE.prototype.gR,vE.prototype.eJ);z.e.tQ=3E3;z.e.pQ=z.$o(vE.prototype.tQ,function(){this.Gd||(this.Ua()?this.qu():z.BE(this))});
z.e.gh=function(a){a=z.Zn(a.target);var b="",c=!1;0===a.r?b="已保存":(b=a.msg||"保存失败！请稍后再试。",c=!0);zE(this);z.P(this.Os,!0);xE(this,b,c);this.Ir();"保存成功"===a.msg&&this.dispatchEvent(LH);this.Rd.start()};z.e.YM=function(a){a.preventDefault();z.W.confirm("清除草稿",this.BG?"你确定要清除保存的草稿并取消编辑吗？":"你确定要清除保存的草稿吗？",function(a){a&&(this.BG?(z.BE(this),this.wb.dispatchEvent("cancel_edit"),this.wb.Fi()):(this.ka(""),z.BE(this),tv(this.wb)))},this)};var GE=z.Kj(function(){var a=EE();(0,window.$)("body").append(a);return a});z.v(IE,z.Q);
IE.prototype.B=function(){IE.v.B.call(this);var a=(0,window.$)('\x3cdiv class\x3d"carousel"\x3e\x3cdiv class\x3d"carousel-navigation-btn"\x3e\x3cdiv class\x3d"carousel-left-btn copyright-ico-prev"\x3e \x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"carousel-content"\x3e\x3c/div\x3e\x3cdiv class\x3d"carousel-navigation-btn"\x3e\x3cdiv class\x3d"carousel-right-btn copyright-ico-next"\x3e \x3c/div\x3e\x3c/div\x3e\x3c/div\x3e');this.VQ=(0,window.$)(".carousel-left-btn",a);this.oU=(0,window.$)(".carousel-right-btn",a);
this.BD=(0,window.$)(".carousel-content",a);this.CD=(0,window.$)("\x3cdiv\x3e\x3c/div\x3e").addClass("carousel-navigation-dot-group");z.w(this.contents,function(a,c){this.BD.append(a);this.CD.append(this.Nr[c])},this);this.BD.append(this.CD);JE(this,0);this.ga(a[0]);this.X=(0,window.$)(this.h).addClass(this.className)};IE.prototype.C=function(){IE.v.C.call(this);this.VQ.click(window.$.proxy(this.prev,this));this.oU.click(window.$.proxy(this.next,this))};
IE.prototype.next=function(){JE(this,this.Hg+1)&&this.dispatchEvent({type:"rightShow",offset:this.Hg})};IE.prototype.prev=function(){JE(this,this.Hg-1)&&this.dispatchEvent({type:"leftShow",offset:this.Hg})};var NH;z.ja(z.ME,z.sv);z.e=z.ME.prototype;z.e.rF=function(){var a=(0,window.$)("#zh-question-title h2.zm-editable-content")[0];return{title:a&&(/answer\/\d+$/.test(window.location.pathname)?z.pf(a):a.firstChild.nodeValue)||"",Ek:this.kj}};z.e.Jx=function(){return this.cw};z.e.wu=function(a){this.mb=a};z.e.Wa=function(a,b){this.enabled=a;this.Us?(this.Fi(),this.Wb=b,this.cc.innerHTML=this.Wb):b&&(this.Wb=b)};z.e.ga=function(a){z.sv.prototype.ga.call(this,a);this.Us=!0;z.V.add(this.cc,"zu-answer-form-disabled-wrap")};
z.e.D=function(){this.Qs&&(z.N(this.Qs),this.oK=this.Qs=null);z.sv.prototype.D.call(this)};z.e.yj=function(a){this.wu(a.mb);this.Qq&&(this.Qq.checked=a.mb)};z.e.C=function(){z.sv.prototype.C.call(this);this.o().g(z.Hq,"anon_change",this.yj)};
z.e.bf=function(){z.sv.prototype.bf.call(this);var a=this.L(),b=z.S.kb();this.Qs=a.B("div","zh-answer-form clearfix",[b?rp(this.nK):"",this.oK=a.B("div",null,[a.B("div","zu-answer-form-title",[b?qp(this.nK):"我来回答这个问题",this.tD=a.B("span")])])]);b&&(b=z.gm.value,"TOPIC"===z.gm.type?PE(this,b):NE(this,b),(0,window.$)(this.tD).on("click","a.zu-edit-button",function(a){z.wi({category:"edit_profile",action:"click_edit_topic_experience_start",label:"add_answer_box_edit_topic_experience",attributes:{text:(0,window.$)(a.target).text()}})}));
a.Vs(this.Qs,this.kj);this.o().g(this.oK,"click",this.Qa);z.S.kb()?z.S.re||QE(this,'\x3cdiv class\x3d"activate-mask-tip-answer"\x3e'+(z.S.Rn?"为了正常使用知乎的提问、回答、评论和编辑功能，请验证你的邮箱。":"为了正常使用知乎的提问、回答、评论和编辑功能，请绑定你的手机或邮箱。")+"\x3c/div\x3e",'\x3cdiv class\x3d"zm-command"\x3e\x3ca class\x3d"zg-r3px zg-btn-blue" href\x3d"javascript:"\x3e我要激活\x3c/a\x3e\x3c/div\x3e'):QE(this,'\x3cdiv class\x3d"signin-mask-tip-answer"\x3e\x3c/div\x3e','\x3cdiv class\x3d"zm-command"\x3e\x3ca class\x3d"zg-r3px zg-btn-blue" href\x3d"javascript:"\x3e我要回答\x3c/a\x3e\x3c/div\x3e')};
z.e.os=function(a){switch(a){case "edit_bio":TE(this);break;case "cancel_delete":this.dispatchEvent(z.MH);break;case "answer_my_question":RE(this)}return!0};z.e.xe=function(){"editing"===this.status?this.Ib&&z.P(this.Ib,!0):this.Ib&&z.P(this.Ib,!1);z.P(this.jd,!1);this.cc&&z.P(this.cc,!this.enabled)};
z.e.gl=function(){var a=(0,z.jn)(NH);this.tc=z.Xe(a({questionStatus:z.R.status,statusText:{suggest:"建议修改",evaluate:"建议修改",close:"关闭"}[z.R.status]}));this.Dn=(0,window.$)(".submit-button",this.tc)[0];SE(this);this.aE=(0,window.$)("input[name\x3dcopyright-checkbox]",this.tc)[0];this.aE.checked=!this.wr;this.Ib.appendChild(this.tc);this.ready(function(){if(this.Ma&&this.Ma.on)this.Ma.on("load",this.Hy,!1,this)});z.pm.qb||LE()};
z.e.Hy=function(){var a=new vE(this);z.Bc(this,a);this.o().g(a,LH,function(){var a=!this.Id&&this.Ma.Sb.FullScreenPlugin;a&&ED(a)},!1,this);var b=ov(this);this.o().g(b,"focus",function(){a.Rd.start()}).g(b,"blur",function(){z.yE(a);a.qu()}).g(this,"saveSuccess",function(){z.yE(a);z.BE(a)});a.w(this.tc);this.GE=a};z.e.Qz=function(){var a=fE(),b=a.Jx(),a=(a=a.getSelection())&&a.type;a===bE?NE(this,b):"experience"===a?PE(this,b):OE(this,"","填写话题经验，提升回答可信度")};z.MH="cancel_delete_answer";
NH='\x3cdiv class\x3d"zm-command clearfix"\x3e\x3clabel class\x3d"zg-left anno-box"\x3e\x3cinput name\x3d"anno-checkbox" type\x3d"checkbox"\x3e 匿名 \x3cspan\x3e\x26nbsp\x3c/span\x3e\x3c/label\x3e \x3clabel class\x3d"zg-left copyright-box"\x3e\x3cinput name\x3d"copyright-checkbox" type\x3d"checkbox"\x3e未经许可，禁止转载'+(z.pm.qb?"":'\x3ca href\x3d"/terms#sec-licence-6" target\x3d"_blank"\x3e\x3ci class\x3d"zg-icon zg-icon-question-mark" style\x3d"margin-left: 5px;" id\x3d"copyright_question_mark" data-copyright-demo\x3d"true"\x3e\x3c/i\x3e\x3c/a\x3e')+
'\x3c/label\x3e \x3c% if (questionStatus !\x3d\x3d "normal") { %\x3e\x3cspan class\x3d"zg-gray-normal" style\x3d"margin-right:5px;"\x3e被\x3c%\x3d statusText %\x3e的问题不允许添加新的回答\x3c/span\x3e\x3ca class\x3d"zg-right" data-tip\x3d"s$b$为什么部分问题会被「关闭」「建议修改」？" href\x3d"/question/21290061 "\x3e\x3ci class\x3d"zg-icon zg-icon-question-mark"\x3e\x3c/i\x3e\x3c/a\x3e\x3c% } %\x3e\x3cspan class\x3d"\x3c%\x3d (questionStatus !\x3d\x3d "normal" ? "hidden" : "") %\x3e zg-right"\x3e\x3ca class\x3d"submit-button zg-btn-blue" name\x3d"save" href\x3d"javascript:"\x3e发布回答\x3c/a\x3e\x3c/span\x3e\x3cdiv class\x3d"draft-controls zg-right '+
(z.pm.qb?"draft-controls-mobile":"")+'"\x3e\x3cspan class\x3d"draft-saved-info"\x3e\x3ca class\x3d"draft-clear-button goog-inline-block" href\x3d"#" data-tip\x3d"s$b$删除草稿"\x3e\x3ci class\x3d"zg-icon zg-icon-bin"\x3e\x3c/i\x3e\x3cspan class\x3d"hide-text"\x3e清除草稿\x3c/span\x3e\x3c/a\x3e\x3cspan class\x3d"draft-saved-time"\x3e\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e';UE.prototype.Rb=function(){var a=[this.X.get(0)].concat(this.X.parents().get()),b=window.$.map(a,function(a){return(0,window.$)(a).data("navigable")})[0];this.zR=b&&window.$.grep(b.items(),function(b){return~window.$.inArray(b,a)})[0]};UE.prototype.getItem=function(){return this.zR};z.v(VE,$x);z.la(VE);VE.prototype.B=function(a){var b=VE.v.B.call(this,a);z.bj(b,"goog-submenu");WE(this,a,b);return b};VE.prototype.w=function(a,b){b=VE.v.w.call(this,a,b);z.bj(b,"goog-submenu");WE(this,a,b);var c=z.Me(window.document,"DIV","goog-menu",b);if(c.length){var d=new z.jy(a.L()),c=c[0];z.P(c,!1);a.L().wa().body.appendChild(c);d.w(c);a.ph(d,!0)}return b};
VE.prototype.ka=function(a,b){var c=this.R(a),d=c&&c.lastChild;VE.v.ka.call(this,a,b);d&&c.lastChild!=d&&z.aj(d,"goog-submenu-arrow")&&c.appendChild(d)};VE.prototype.De=function(a){VE.v.De.call(this,a);var b=a.R(),c=a.L(),c=z.Me(c.Ka,"SPAN","goog-submenu-arrow",b)[0];XE(a,c);c!=b.lastChild&&b.appendChild(c);z.Xi(a.m(),"haspopup","true")};z.v(YE,z.ey);var tF=218;z.e=YE.prototype;z.e.Yd=null;z.e.cB=null;z.e.Cz=!1;z.e.pc=null;z.e.Yr=!1;z.e.Oq=!0;z.e.IQ=!1;z.e.C=function(){YE.v.C.call(this);this.o().g(this.getParent(),"hide",this.XH);this.pc&&bF(this,this.pc,!0)};z.e.Db=function(){this.o().qa(this.getParent(),"hide",this.XH);this.pc&&(bF(this,this.pc,!1),this.Yr||(this.pc.Db(),z.N(this.pc.m())));YE.v.Db.call(this)};z.e.D=function(){this.pc&&!this.Yr&&this.pc.H();this.pc=null;YE.v.D.call(this)};
z.e.Oc=function(a,b){YE.v.Oc.call(this,a);b&&(this.Xa().yf=!0);a||(this.Yd&&z.xd(this.Yd),this.Yd=z.wd(this.Ig,tF,this))};z.e.Du=function(){var a=this.getParent();a&&Yr(a)==this&&(aF(this,!0),$E(this))};z.e.Ig=function(){var a=this.pc;a&&a.getParent()==this&&(aF(this,!1),z.ch(a,function(a){"function"==typeof a.Ig&&a.Ig()}))};z.e.G=function(a,b){var c=YE.v.G.call(this,a,b);c&&!this.U()&&this.Ig();return c};
z.e.$b=function(a){var b=a.keyCode,c=this.rd()?37:39,d=this.rd()?39:37;if(!this.Cz){if(!this.isEnabled()||b!=c&&b!=this.Fz)return!1;this.Du();z.Zr(this.Xa());ZE(this)}else if(!this.Xa().$b(a))if(b==d)this.Ig();else return!1;a.preventDefault();return!0};z.e.WR=function(){this.pc.getParent()==this&&(ZE(this),this.ei().Oc(this),$E(this))};z.e.XH=function(a){a.target==this.ei()&&(this.Ig(),ZE(this))};z.e.od=function(a){this.isEnabled()&&(ZE(this),this.cB=z.wd(this.Du,tF,this));YE.v.od.call(this,a)};
z.e.Od=function(a){ZE(this);if(Uq(this,8)||Uq(this,16))return YE.v.Od.call(this,a);this.Du();return!0};z.e.Ga=function(a){this.Xa().K(a,!0)};z.e.Vi=function(a,b){this.Xa().Sk(a,b,!0)};z.e.removeItem=function(a){(a=this.Xa().removeChild(a,!0))&&a.H()};z.e.di=function(a){return z.bh(this.Xa(),a)};z.e.Fl=function(){return z.ah(this.Xa())};z.e.lb=function(){return this.Xa().lb()};
z.e.Xa=function(){this.pc?this.Yr&&this.pc.getParent()!=this&&z.Zg(this.pc,this):this.ph(new z.jy(this.L()),!0);this.pc.m()||this.pc.B();return this.pc};z.e.ph=function(a,b){var c=this.pc;a!=c&&(c&&(this.Ig(),this.ya&&bF(this,c,!1)),this.pc=a,this.Yr=!b,a&&(z.Zg(a,this),a.G(!1,!0),a.gn=!1,a.Pe(!1),this.ya&&bF(this,a,!0)))};z.e.Mf=function(a){return this.Xa().Mf(a)};z.Yq("goog-submenu",function(){return new YE(null)});z.v(cF,YE);cF.prototype.$b=function(a){var b=cF.v.$b.call(this,a);a=(0,window.parseInt)(z.il[a.keyCode],10);(0,window.isNaN)(a)||this.Xa().ub(a-1);return b};z.v(z.dF,z.Q);z.e=z.dF.prototype;z.e.ga=function(a){z.dF.v.ga.call(this,a);this.o().g(a,"click",this.bT)};z.e.zN=function(){var a=this.Zu;z.Wp(a.m(),this.sK);z.ej(a.m(),[this.Hk,this.tK])};z.e.iM='\x3cdiv class\x3d"text zg-clear"\x3e\x3clabel class\x3d"zg-left"\x3e赞同\x3c/label\x3e\x3clabel class\x3d"zg-right"\x3e反对\x3c/label\x3e\x3c/div\x3e';z.e.xT='\x3cdiv class\x3d"text zg-clear votebar-text-post"\x3e\n  \x3clabel\x3e赞\x3c/label\x3e\n\x3c/div\x3e';
z.e.bT=z.Or(function(){this.Ia&&this.Ia.H();var a=new z.U(null);a.Cf(!0);a.Bm(!0);a.eF=!0;eF(this);this.o().Aa(a,"hide",this.zN);var b="post"===this.Zu.entryType?this.xT:this.iM,c=a.R();c.appendChild(this.Zu.m());c.appendChild(z.Xe(b));z.V.add(a.m(),this.Xw);a.G(!0);this.Ia=a;z.Bc(this,a)},!0);z.v(z.fF,z.Q);var gF={pa:null,sa:null,xE:!1,Br:z.R,Zl:!1,pj:"zm-item-expanded",PX:z.p,OX:z.p},AF={all_can_comment:"允许任何人评论",followee_can_comment:"允许我关注的人评论",nobody_can_comment:"关闭评论"};z.e=z.fF.prototype;z.e.$n=function(){return"#answer-"+this.sa};z.e.Kj=function(){var a=this;(0,window.$)("a[name\x3dreport]",this.Mb).on("click",function(){return a.OF()})};z.e.OF=function(){(new z.Oz({type:"answer",id:this.sa})).render()};
z.e.Lj=function(){var a=(0,window.$)("a[name\x3dshare]",this.Mb).get(0),b=(0,window.$)(".answer-date-link",this.Mb).get(0)||(0,window.$)(this.Mb).closest(".feed-item, .zm-item").find(".question_link").get(0);a&&b&&(b=b.href,/\/answer\//.test(b)||(b=b.replace(/#answer-\d+/,"")+"/answer/"+this.Za),z.fB(a,"answer",this.Za,b).Ob(this))};z.e.expand=function(){this.Jb||(this.Jb=!0,this.options.Zl||(z.V.add(this.h,this.options.pj),this.JB()),this.dispatchEvent("expand"))};
z.e.collapse=function(){if(this.Jb){this.Jb=!1;if(this.options.Zl)return this.dispatchEvent("collapse");this.IB();Zo(this.h,(0,z.q)(function(){z.V.remove(this.h,this.options.pj);this.dispatchEvent("collapse")},this))}};
z.e.Fy=function(){if(kF(this)){var a=(0,window.$)('\x3cbutton class\x3d"item-collapse js-collapse"\x3e\x3ci class\x3d"sprite-global-icon-fold-white"\x3e\x3c/i\x3e收起\x3c/button\x3e').appendTo((0,window.$)(".zm-meta-panel",this.Mb)).on("click",(0,z.q)(this.collapse,this)).get(0),b=new QA(0,{bottom:12,bD:!0,xb:(0,window.$)(".js-collapse-body",this.h)[0]});z.Bc(this,b);b.w(a);this.g("expand",function(a){a.target===a.currentTarget&&b.start()});this.g("collapse",function(a){a.target===a.currentTarget&&
b.stop()});b.start()}};z.e.JB=function(){z.yi("view_answer","click_expand_answer","answer_box_expand_answer")};z.e.IB=function(){z.yi("view_answer","click_collapse_answer","answer_box_collapse_answer")};z.e.Az=function(){(0,z.oB)("answer",this.Za,"read")};z.e.$j=function(){(0,z.oB)("answer",this.Za,/^\/question\//.test(window.location.pathname)?"read":"touch")};
z.e.C=function(){z.fF.v.C.call(this);iF(this);this.Xe=z.L("zm-item-answer-author-info",this.h);jF(this);this.Mb=this.Mb||z.L("zm-item-meta",this.h);(this.ni=z.L("zm-meta-panel",this.Mb))&&this.o().g(this.ni,"click",this.ip);if(this.Le)xF(this),this.Xe&&(this.mI=(this.mb=z.Wa(this.Xe.innerHTML,"匿名用户"))?null:this.Xe.innerHTML.replace(/src=".+?"/g,'src\x3d"'+z.S[2]+'"'),this.o().g(this.Xe,"click",function(a){"cancel-anon"===a.target.name&&z.Fq(!1)}));else{this.Ny();var a=(0,window.$)(".zm-item-rich-text",
this.h);if(this.wr){var b=a.data("entryUrl"),c=a.data("authorName");HE(a,b,c)}else(b=(0,window.$)(".copyright",this.Mb).data("author-avatar"))&&a.length&&FE(a,b)}mF(this);this.Nj();(0,window.$)(this.h).on("contentchange",window.$.proxy(this.Nj,this));this.fc();wF(this);this.Kj();this.Lj();z.Oj&&!z.Pj&&nF(this);(0,window.setTimeout)((0,z.q)(this.Fy,this))};z.e.Pp=function(a){var b=this.Nj();b&&z.Nu(b,a)};
z.e.Ny=function(){var a=z.L("zm-votebar",this.h)||z.L("zm-votebar",this.ni);if(a){var b=new z.mE(this.sa);b.w(a);b.Ob(this);this.pb=b;this.o().g(b,"change",this.UT).g(b,"action",function(a){a.data.state===oE.Jf?z.X.fb({type:"ga_click_vote_up",target:this}):a.data.state===oE.Si&&z.X.fb({type:"ga_click_vote_down",target:this})});(a=z.L("votenum-mobile",this.ni))&&(new z.dF(b)).w(a)}};
z.e.Nj=function(){if(this.Bh)return this.Bh;var a=z.L("zm-editable-content",this.h),b=this.pb&&this.pb.m();!this.Le&&!z.Oj&&b&&(0,window.$)(b).is(":visible")&&a&&230<(0,window.$)(a).height()&&(a=this.Bh=new Su(null,a),this.K(a),a.tag="votebar",a.eA=50,a.w(b))};z.e.UT=function(){this.Ik&&z.tE(this.Ik)};
z.e.fc=function(){this.Xe&&this.o().g(this.Xe,"click",this.Qa);this.Le&&(this.rM=z.S);this.o().g(z.Hq,"anon_change",function(a){this.Le?this.wu(a.mb):this.pb.getState()===oE.Jf&&z.tE(this.Ik)});oF(this);(0,window.$)(this.h).on("focusin focusout",function(a){(0,window.$)(this).toggleClass("focusin","focusin"===a.type)})};z.e.Vf=function(a){return z.gp(this.h,a)};
z.e.Qa=function(a){var b=this.Vf(a.target);if(b=b&&b.name)"edit"===b?(b=fE(),this.dw||(hE(b),this.o().g(b,"change",this.Qz).g(b,"trackRequested",function(a){a.label="answer_box_edit_topic_experience";z.wi(a)})),this.dw=!0,jE(b),z.wi({category:"edit_profile",action:"click_edit_topic_experience_start",label:"answer_box_edit_topic_experience",attributes:{text:(0,window.$)(a.target).text()}})):"complex"===b&&(a=z.L("zm-item-answer-summary",this.h),b=z.L("zm-item-rich-text",this.h),z.P(a,!1),z.P(b,!0))};
z.e.Qz=function(){var a=fE().Jx()||"",b=z.L("bio",this.Xe);if(!b){var c=z.L("author-link",this.Xe),b=z.M("span","bio");z.cf(b,c)}a&&(a="，"+qq(a),a=z.Oa(a));b.title=a;b.innerHTML=a};
z.e.wu=function(a){if(a)this.Xe.innerHTML='匿名用户\x3ca class\x3d"zg-link-gray cancel-anon" href\x3d"javascript:void(0);" name\x3d"cancel-anon"\x3e取消匿名\x3c/a\x3e';else if(this.Le)if(this.mI)this.Xe.innerHTML=this.mI+'\x3ca name\x3d"edit" class\x3d"zu-edit-button" href\x3d"#"\x3e\x3ci class\x3d"zu-edit-button-icon"\x3e\x3c/i\x3e修改话题经验\x3c/a\x3e';else{a=[];var b=z.S;a.push(1===b||0===b?"匿名用户":['\x3ca data-tip\x3d"p$t$',b[1],'" href\x3d"/people/',b[1],'" title\x3d"'+b[0]+'" class\x3d"','zm-item-link-avatar"\x3e',
'\x3cimg class\x3d"zm-item-img-avatar" src\x3d"'+b[2]+'" /\x3e',"\x3c/a\x3e"].join(""));a.push(z.pp(z.S,"zm-item-answer-creator"));this.Xe.innerHTML=a.join("")}};z.e.bI=function(){var a=(0,window.$)(this.h);a.hide("fast",function(){a.remove()});this.H()};
z.e.ip=function(a){var b=this.Vf(a.target),c=b&&b.name;if(c)switch(c){case "addcomment":"添加评论"===(0,window.$)(b).text().trim()?this.ia({category:"comment",action:"click_add_answer_comment_start"}):this.ia({category:"comment",action:"click_view_answer_comments"});this.sg();break;case "remove":this.ps();break;case "thanks":z.X.fb({type:"ga_click_thank_answer",target:b});this.Bs();break;case "comment_opt":this.Bw||zF(this);break;case "admin":pF(this);break;case "nohelp":this.HF(a);break;case "favo":z.X.fb({type:"ga_click_collect_answer_box",
target:b}),this.zj()}};z.e.HF=hF(function(a){a=a.target;var b=!!a.m;z.X.fb({type:"ga_click_answer_not_helpful",target:b?a.m():a});this.ia({category:"not_helpful",action:"click_answer_not_helpful"});this.Ww&&"pending"===this.Ww.state()&&this.Ww.abort();var c,d;d=b?a.Og():a.innerHTML;d=(c=-1<d.indexOf("撤销"))?"没有帮助":"撤销没有帮助";b?a.Gp(d):a.innerHTML=d;c=c?"/answer/helpful":"/answer/not_helpful";b||z.kp(a);this.Ww=window.$.post(c,{aid:this.sa})},!0);
z.e.AP=function(){z.fh?fw():hB(this.Za);this.dispatchEvent({type:"trackRequested",category:"share",action:"click_share_answer_start"})};z.e.zj=hF(function(){var a=z.zy.aa();Cy(a,this.sa);a.show();this.ia({category:"collect",action:"click_collect_answer_start"})},!0);z.e.sg=function(){if(!this.va){var a=(0,window.$)(".toggle-comment",this.Mb)[0];this.va=new IA(this.sa,"answer");this.va.render(this.Mb);MA(this.va,a);this.va.Dm(this.$n())}this.va.Gf();(0,window.$)(this.ni).toggleClass("focusin",this.va.wc())};
z.e.ms=hF(function(a){this.va&&this.va.wc()?this.va.xl():this.sg();a.preventDefault()});
z.e.Bs=hF(function(){var a=(0,window.$)("a[name\x3dthanks]",this.ni)[0];a&&!z.V.has(a,"disabled")&&(!0===window.$.parseJSON(a.getAttribute("data-thanked"))?(tp(a,"感谢"),a.setAttribute("data-thanked",!1),window.$.post("/answer/cancel_thanks",{aid:this.sa}),this.ia({category:"thank",action:"click_thank_answer"})):(tp(a,"取消感谢"),a.setAttribute("data-thanked",!0),window.$.post("/answer/thanks",{aid:this.sa}),this.ia({category:"thank",action:"click_recall_thank_answer"})),z.kp(a))});
z.e.TA=function(a){sE.TA(this.sa,a);(0,window.$)(".copyright",this.Mb).text(a?"作者保留权利":"禁止转载").attr("href",a?"/terms#sec-licence-1":"/terms#sec-licence-6")};z.e.GO=function(a){var b=a.target;a=b.W();"禁止转载"===a?this.TA(!b.tf()):"删除"===a?this.ps():a in AF&&window.$.post("/answer/comment_permission",{answer_id:this.sa,permission:a}).done((0,z.q)(function(a){a&&!a.r&&z.w(this.Cw,function(a){a.Mc(a===b)})},this))};
z.e.ps=function(){z.W.confirm("你确定要删除自己的答案吗？","答案内容不会被永久删除，你还可以撤消本次删除操作。",function(a){a&&(this.ji=!0,this.status=-1,z.BF(this))},this)};z.e.m=function(){return this.h};z.e.ia=function(a){this.dispatchEvent(Object.assign({type:"trackRequested"},a))};z.v(CF,z.WA);CF.prototype.Vj="question_link";CF.prototype.us=function(){var a=this.Sr["question-id"];this.dispatchEvent({type:"ignore",key:"question-id",value:a});window.$.post("/question/uninterest",{qid:a})};z.v(DF,CF);DF.prototype.C=function(){DF.v.C.call(this);EF(this)};DF.prototype.se=function(){DF.v.se.call(this);z.ol(z.ol(this.Qd.register("c",this.sg,this),{group:"操作",name:"打开评论"}).register("shift+c",this.hy,this),{group:"操作",name:"定位到评论框"})};z.v(z.FF,CF);z.e=z.FF.prototype;
z.e.C=function(){z.FF.v.C.call(this);this.Wv=GF(this.h);this.Zy="1"===this.Wv.getAttribute("data-isowner");this.wr="1"===this.Wv.getAttribute("data-copyable");this.Rs();this.g("collapse",(0,z.q)(function(a){a.target===a.currentTarget&&HF(this,!1)},this))};
z.e.Yx=function(){var a=aB(this),b;switch(a){case "feed":b=bB(this);a+="_answer"+(b?"_"+b:"");break;case "people_profile_activities":b={member_voteup_answer:"_vote_up_answer",member_answer_question:"_answer_question"}[this.h.getAttribute("data-type-detail")],a+=b||""}return a+(this.wc()?"_expand":"")};
z.e.Rs=function(){var a=this.gM=new z.fF({pa:this.Sr["question-id"],sa:this.zb,Br:{Za:this.Sr["question-url-token"]},Zl:!0});lF(a,z.L("zm-item-meta",this.h));this.K(a);a.w(this.Wv);this.g("expandRequest",(0,z.q)(this.expand,this));this.g("expand",function(b){b.target===b.currentTarget&&(a.expand(),a.Pp(!0))});this.g("collapse",function(b){b.target===b.currentTarget&&(a.collapse(),a.Pp(!1))})};z.e.se=function(){z.FF.v.se.call(this);z.ol(this.Qd.register("o",this.Gf,this),{group:"操作",name:"显示全部/收起"})};
z.e.pn=function(){z.FF.v.pn.call(this,{"a[name\x3dexpandQuestionDetail]":function(){HF(this,!0)}})};z.v(IF,z.WA);IF.prototype.C=function(){IF.v.C.call(this);var a=z.L("column",this.h);z.On(a,this.$j,this)};IF.prototype.$j=function(){(0,z.oB)("column",this.gf,"touch")};z.v(z.JF,z.WA);z.e=z.JF.prototype;z.e.Vj="post-link";z.e.C=function(){z.JF.v.C.call(this);this.Ao();this.rG();this.sG();this.Lj();var a=(0,window.$)(".post-content",this.h),b=a.data("entryUrl"),c=a.data("authorName");HE(a,b,c);this.g("expand",(0,z.q)(this.Pp,this,!0));this.g("collapse",(0,z.q)(this.Pp,this,!1))};z.e.Yx=function(){return"feed_article_"+bB(this)+(this.wc()?"_expand":"")};z.e.Pp=function(a){var b=this.Nj();b&&z.Nu(b,a)};
z.e.Nj=function(){if(this.Bh)return this.Bh;var a=!z.Oj,b=z.L("zm-editable-content",this.h),c=this.pb&&this.pb.m();a&&c&&(0,window.$)(c).is(":visible")&&b&&230<(0,window.$)(b).height()&&(a=this.Bh=new Su(null,b),this.K(a),a.tag="votebar",a.eA=50,a.w(c))};z.e.Lj=function(){var a=(0,window.$)("a[name\x3dshare], .js-share",this.h).get(0),b=(0,window.$)(".post-link, .js-title-link",this.h).get(0);a&&b&&z.fB(a,"post",this.gf,b.href).Ob(this)};
z.e.us=function(){(0,window.$)(".feed-hide-options",this.h).show().siblings().hide();window.$.post(z.Zk("/post/uninterest"),{id:this.zb})};z.e.VF=function(){(0,window.$)(".feed-hide-options",this.h).hide().siblings().show();window.$.post(z.Zk("/post/undo_uninterest"),{id:this.zb})};z.e.MF=function(a){a=(0,window.$)(a.currentTarget);var b=a.data();z.W.confirm(a.attr("title"),z.Zk("确定%s吗？",a.text()),function(a){a&&(this.NF(),window.$.post(z.Zk("/%s/uninterest",b.type),{id:b.id}))},this)};
z.e.Ao=function(){var a=new z.jB;this.K(a);a.w(this.h);this.g("expandRequest",(0,z.q)(this.expand,this));this.g("expand",function(b){b.target===b.currentTarget&&a.expand()});this.g("collapse",function(b){b.target===b.currentTarget&&a.collapse()});a.bz&&this.o().Aa(a,"expand",this.Az);z.On(this.h,this.$j,this)};
z.e.se=function(){z.JF.v.se.call(this);z.ol(this.Qd.register("v",function(){this.pb&&this.pb.Qu()},this),{group:"操作",name:"赞同"});z.ol(this.Qd.register("d",function(){this.pb&&this.pb.Pu()},this),{group:"操作",name:"反对"});z.ol(z.ol(z.ol(this.Qd.register("o",this.Gf,this),{group:"操作",name:"显示全部/收起"}).register("c",this.sg,this),{group:"操作",name:"打开评论"}).register("shift+c",this.hy,this),{group:"操作",name:"定位到评论框"})};
z.e.rG=function(){var a=z.L("zm-votebar",this.h);a&&(this.pb=new z.mE(this.zb,this.entryType),z.Bc(this,this.pb),this.pb.w(a),(a=z.L("votenum-mobile",this.h))&&(new z.dF(this.pb)).w(a))};z.e.sG=function(){var a=z.L("zm-item-vote-info",this.h);if(a){var b=new z.qE(this.zb,this.entryType);z.Bc(this,b);b.w(a);this.pb&&this.o().g(this.pb,"change",function(){z.tE(b)}).g(b,"change",function(){var a=z.L("zm-item-vote-count",this.h),d=(0,window.$)(".zm-votebar .count",this.h)[0];a&&tp(a,b.hb());d&&tp(d,b.hb())})}};z.v(KF,z.WA);z.e=KF.prototype;z.e.C=function(){KF.v.C.call(this);this.Mj()};z.e.Vj="roundtable_link";z.e.us=function(){window.$.post("/roundtable/"+this.gf,{action:"mute"});this.dispatchEvent({type:"ignore",key:"roundtable-id",value:this.zb})};z.e.Mj=function(){z.On(this.h,this.$j,this)};z.e.$j=function(){(0,z.oB)("roundtable",this.gf,"touch")};z.v(z.MF,z.Q);z.MF.prototype.C=function(){this.o().g(this.h,"click",this.Qa)};z.MF.prototype.Qa=function(a){var b=z.gp(this.h,a.target);this.yn&&this.yn(b);b&&b.name&&"focus"===b.name&&(0,z.qB)(b,this.Ex,function(){b.getAttribute("data-followme")&&(z.V.has(b,"zg-btn-follow")?b.setAttribute("data-tip","s$b$对方已关注你"):b.setAttribute("data-tip","s$b$已互相关注"))},this.Dx,{BX:"question"===this.Ex?"关注问题":null})};z.MF.prototype.SA=z.l(45);}).call(this, __z_z__);
//# sourceURL=/static/revved/-/js/closure/common.aac66658.js