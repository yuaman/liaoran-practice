(function(z){
var mM=function(a){a.ki=!1;a.status=0;z.EF(a)};var nM=function(a){a.az=!0;a.iE=z.Io(a.m()).height;z.zG+=a.iE;z.w(z.Mu,function(a){a&&!a.az&&a.xl&&a.zp()})};var oM=function(a){var b={};z.w(a.data.md(),function(a){b[a]=this.data.get(a)},a);return b};var pM=function(){this.vB="";this.uL=qM};var rM=function(){this.qk="";this.jL=sM};var tM=function(a){return a instanceof pM&&a.constructor===pM&&a.uL===qM?a.vB:"type_error:Const"};var uM=function(){this.BI="";this.xL=vM};
var wM=function(a){function b(a){if(z.na(a))z.w(a,b);else{if(!(a instanceof z.Fd)){var g=null;a.Gy&&(g=a.Cl());a=z.Jd(z.Oa(a.Hj?a.Rg():String(a)),g)}d+=z.Id(a);a=a.Cl();0==c?c=a:0!=a&&c!=a&&(c=null)}}var c=0,d="";z.w(arguments,b);return z.Jd(d,c)};var xM=function(a,b){b.all=!0;return z.mo(a,b)};var yM=function(){z.it.call(this,null,null,"搜索话题");this.Fe="";this.data=[z.jm[0]]};var zM=function(a,b){return window.$.post("/question/askpeople",{qid:a,uid:b,op:"remove"})};
var AM=function(a){return 1===a?!0:z.na(a)?a[3]===z.S[3]:!1};
var BM=function(a){if(!CM.test("input"))throw Error("Invalid tag name \x3cinput\x3e.");if("INPUT"in DM)throw Error("Tag name \x3cinput\x3e is not allowed for SafeHtml.");var b=null,c="\x3cinput";if(a)for(var d in a){if(!CM.test(d))throw Error('Invalid attribute name "'+d+'".');var f=a[d];if(null!=f){var g;g=d;if(f instanceof pM)f=tM(f);else if("style"==g.toLowerCase()){if(!z.ta(f))throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof f+" given: "+f);
if(!(f instanceof z.Dd)){var h="",k=void 0;for(k in f){if(!/^[-_a-zA-Z0-9]+$/.test(k))throw Error("Name allows only [-_a-zA-Z0-9], got: "+k);var m=f[k];if(null!=m){if(m instanceof pM)m=tM(m);else if(EM.test(m)){for(var n=!0,t=!0,C=0;C<m.length;C++){var J=m.charAt(C);"'"==J&&t?n=!n:'"'==J&&n&&(t=!t)}n&&t||(m="zClosurez")}else m="zClosurez";h+=k+":"+m+";"}}f=h?(new z.Dd).yo(h):z.Ml}f=f instanceof z.Dd&&f.constructor===z.Dd&&f.iL===z.Ed?f.vA:"type_error:SafeStyle"}else{if(/^on/i.test(g))throw Error('Attribute "'+
g+'" requires goog.string.Const value, "'+f+'" given.');if(g.toLowerCase()in FM)if(f instanceof uM)f=f instanceof uM&&f.constructor===uM&&f.xL===vM?f.BI:"type_error:TrustedResourceUrl";else if(f instanceof rM)f=f instanceof rM&&f.constructor===rM&&f.jL===sM?f.qk:"type_error:SafeUrl";else if(z.pa(f))f instanceof rM||(f=f.Hj?f.Rg():String(f),GM.test(f)||(f="about:invalid#zClosurez"),h=new rM,h.qk=f,f=h),f=f.Rg();else throw Error('Attribute "'+g+'" on tag "input" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+
f+'" given.');}f.Hj&&(f=f.Rg());g=g+'\x3d"'+z.Oa(String(f))+'"';c+=" "+g}}d=void 0;null!=d?z.na(d)||(d=[d]):d=[];!0===HM.input?c+="\x3e":(b=wM(d),c+="\x3e"+z.Id(b)+"\x3c/input\x3e",b=b.Cl());(a=a&&a.dir)&&(b=/^(ltr|rtl|auto)$/i.test(a)?0:null);return z.Jd(c,b)};var IM=function(a,b){var c=z.sb(a,b,void 0);return 0<=c?(Array.prototype.splice.call(a,c,1),!0):!1};var JM=function(){z.Q.call(this);this.xf="zm-pm-item"};
var KM=function(a){if(a.nb().length){var b=new z.zl;b.use("locationSource",{param:function(a){return{start:a[a.length-1].getAttribute("data-token")}}});b.w(a.tt)}};var LM=function(a,b){z.W.confirm("删除私信","你确定要删除这封私信吗？",function(a){a&&MM(this,b)},a)};var MM=function(a,b){var c=new z.Z(!0);a.o().Aa(c,"success",function(){var a=z.Zn(c);a.r?z.W.message(a.msg):window.location.reload()});c.ajax("/inbox/delete","type\x3dsingle\x26token\x3d"+b)};var NM=function(){z.Q.call(this);this.xf="zm-pm-item"};
var OM=function(a){var b=new z.Z(!0);b.on("success",function(){var a=z.Zn(b);a.r?z.W.message(a.msg):window.location.reload()});b.ajax("/inbox/delete","type\x3dthread\x26token\x3d"+a)};var PM=function(a,b,c,d,f){z.aC.call(this,a,b,f);this.Gx=c||"people";this.aO=d||["zg-follow","zg-unfollow"]};var QM=function(a,b,c,d){z.F.call(this);this.h=a;this.Gx=b||"people";this.$N=c||["zg-btn-follow","zg-btn-unfollow"];this.text=d||["关注","取消关注"]};var RM=function(a){z.F.call(this);this.url=a||"/topic"};
var SM=function(a,b,c){var d=c[0],f="";"topic"!==d[0]&&d[3]&&(f='data-parent\x3d"'+d[3]+'"');b.html('\x3ca href\x3d"'+("topic"===d[0]?"/topic/"+d[2]+"/organize/entire":"javascript:;")+'" data-token\x3d"'+d[2]+'" '+f+' name\x3d"'+d[0]+'"\x3e'+d[1]+"\x3c/a\x3e\x3cul class\x3d'zm-topic-organize-list'\x3e\x3c/ul\x3e");"topic"!==c[0][0]&&b.addClass("zm-topic-organize-loadmore");b=(0,window.$)("ul",(0,window.$)(b));if(1<c.length)for(c=c[1],d=0;d<c.length;d++){var f=c[d],g=(0,window.$)("\x3cli\x3e").addClass("zm-topic-organize-item");
b.append(g);SM(a,g,f)}};var TM=function(a,b,c){z.mv.call(this,a,b,c)};var UM=function(){z.Q.call(this);var a=z.jm;this.Ff=a[0][3];this.Ii=a[0];this.iw=a[4];this.cz=a[5];this.ih="topic"};
var VM=function(){(0,window.$)(".zm-topic-list-container").on("click",".js-questionUnhelpful",function(a){a=(0,window.$)(a.currentTarget);var b=a.data("qid"),c=a.data("isRevert");if(b)return c?(a.text("没有帮助").data("isRevert",!1),window.$.post("/question/revert-unhelpful",{qid:b})):(a.text("撤销没有帮助").data("isRevert",!0),window.$.post("/question/unhelpful",{qid:b})),!1})};
var WM=function(){var a=z.I("zh-topic-log-list");a&&((new PM(a,null,null,null,!0)).init(),(0,window.$)(a).on("click",'a[name\x3d"revert"]',z.Vo(function(a){!1!==a&&z.pC(this)},z.tC({lq:!0}))))};var XM=function(a){if(z.I("zh-topic-admin-page-wrap")){var b=z.I("zh-topic-del-btn");b&&a.o().g(b,"click",a.$R)}};var YM=function(a,b){var c=z.Me(window.document,"li",null,a.Vv);z.w(c,function(a){a.getAttribute("data-token")===b[1]&&z.P(a,!1)})};
var ZM=function(a){var b=z.I("zh-topic-followers-list-wrap");b&&(a=new PM(b,["/topic",(0,window.encodeURI)(a.Ii[1]),"followers"].join("/"),null,["zg-btn-follow","zg-btn-unfollow"],!0),a.Di("zm-person-item"),a.init())};
var $M=function(a){var b=z.I("zh-topic-side-head");if(b){var c=z.L("zu-entry-focus-button",b);c&&a.o().g(c,"click",function(){(0,z.qB)(c,"topic","",["zg-btn-green","zg-btn-white"])});a.ig=z.I("zh-topic-operation-menu");a.ig&&a.o().g(a.ig,"click",a.fB)}if(b=z.I("zh-current-topic-bio")){var d=new z.mv(!0,"/topic/bio/update","bio");z.nv(d,["tid\x3d"+a.Ff]);d.Wb='\x3ca href\x3d"javascript:;" name\x3d"edit"\x3e你在 '+a.Ii[0]+" 话题中的经验\x3c/a\x3e";d.wE=!0;d.w(b)}};var aN=function(a){z.$e(a,z.Xe('\x3ca href\x3d"/question/23261456" class\x3d"zg-link-gray-normal"\x3e\x3ci class\x3d"icon-info" style\x3d"vertical-align: -3px; margin-right: 6px"\x3e\x3c/i\x3e如何参与知乎话题的公共编辑？\x3c/a\x3e'))};
var bN=function(a){if(z.I("zh-topic-organize-page-wrap")){var b=z.I("zh-topic-organize-parent-editor");if(b)if(z.S.Js){var c=new z.qt(null,a.Ff,!0);c.Ht=!0;c.w(b);c.addEventListener("remove_tag",function(a){(a=a.data&&a.data.id)&&(0,window.$)("#wedge-"+a).remove()})}else aN(b);if(b=z.I("zh-topic-organize-child-editor"))z.S.Js?(c=new z.qt(null,a.Ff,!1),c.Ht=!0,c.w(b),(0,window.$)("a.entire-link").insertAfter(c.Pn).show()):aN(b);(0,window.$)("#zm-topic-manage-relation").on("change",'[type\x3d"checkbox"]',
function(){var a=(0,window.$)(this).closest("li").attr("id").split("-")[1];window.$.post("/topic/update",{action:"set_topic_edge",parent_topic_id:a,topic_id:z.jm[0][3],edge:this.checked^0}).done(function(a){if(!a)return z.W.message("网络异常");if(a.r)return z.W.message(a.msg)})});a.Uv=z.I("zh-topic-alias-input");new z.qk(a.Uv,"输入话题别名");a.Vv=z.I("zh-topic-alias-list");a.o().g(z.I("zh-topic-alias-container"),"click",a.PS);if(b=z.I("zh-topic-merge"))a.Oa=new yM,a.Oa.w(b);(b=z.I("zh-topic-merge-btn"))&&a.o().g(b,
"click",a.mS)}};var cN=function(){var a=z.I("zh-topic-organize-page-children");a&&(new RM("/topic/"+(0,window.encodeURIComponent)(z.jm[0][1])+"/organize/entire")).w(a)};var dN=function(a){var b=z.I("zh-topic-side-related-topics");b&&(a.TT=b,a.DA=new z.Z(!1),a.o().g(a.DA,"complete",a.wS),a.DA.ajax("/topic/related?tid\x3d"+a.Ff))};
var eN=function(a){if(z.S.oX)(0,window.$)("div.topic-avatar").addClass("disabled");else{var b=z.L("zm-entry-head-avatar-edit-button");if(b){var c=new z.SB(2,z.jm[0][3]);c.w(b);var d=z.L("zm-avatar-editor-preview");z.E(c,"beforepost",function(){(0,window.$)("\x3cdiv class\x3d'avatar-edit-preview-loading topic'\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e").appendTo(d.parentNode)});z.E(c,"success",function(){window.$.post("/topic/"+z.jm[0][1]+"/avatar",{avatar_path:c.getData().url}).then(function(a){if(!a)return z.W.message("网络异常");
if(a.r)return z.W.message(a.msg);d&&(d.src=c.getData().url)}).always(function(){(0,window.$)(".avatar-edit-preview-loading").remove()})});a.o().g(c,"beforeopen",z.Vo(z.tC({lq:!0}),z.Or(z.p,!0)))}}};var fN=function(a){gN(a);hN(a);a.gh&&a.o().g(a.gh,"afterload",function(b){z.X.fb({type:"ga_click_topic_more",data:b.data,target:a.gh.Nd})})};
var gN=function(a){var b=z.I("zh-topic-feed-list");if(b){var c=new z.zl;a.K(c);c.use("locationSource",{qt:0,offset:function(a){return z.lb(a).getAttribute("data-score")}});c.use("childConstructor",{factory:z.NF}).use("expandLimit");c.w(b);a.o().g(c,"click!",function(a){"comment"===a.namespace&&a.Ac.fill("category",this.ih).fill("label","topic_activity")})}};
var hN=function(a){var b=z.I("zh-topic-top-page-list");if(b){var c=new z.zl({pg:!1});a.K(c);c.use("childConstructor",{factory:z.NF}).use("expandLimit");c.w(b);a.o().g(c,"click!",function(a){"comment"===a.namespace&&a.Ac.fill("category",this.ih).fill("label","topic_activity")})}};
var iN=function(){function a(a){if(!a)return z.W.message("网络异常");if(a.r)return z.W.message(a.msg)}(0,window.$)("#zh-topic-manage-relation-form").on("change",'input[type\x3d"radio"]',function(){window.$.post("/topic/update",{action:"set_topic_weaknode",topic_id:z.jm[0][3],weak:(0,window.$)(this).val()}).done(a)});(0,window.$)("#zh-topic-manage-lock-form").on("change",'[type\x3d"checkbox"]',function(){window.$.post("/topic/lock",{url_token:z.jm[0][1],lock_type:this.name,lock_value:(0,window.$)(this).is(":checked")?
1:0}).done(a)})};var jN=function(a){var b=(0,window.$)(".topic-info a[name\x3dshare]"),c=b.get(0),d=window.location.href,f={hot:[/\/topic\/\d+$/,/\/topic\/\d+\/newest/],top_answers:[/\/topic\/\d+\/top-answers/],unanswered:[/\/topic\/\d+\/unanswered/,/\/topic\/\d+\/questions/]},g=Object.keys(f).find(function(a){return f[a].some(function(a){return a.test(window.location.pathname)})})||"";c&&(z.fB(c,"topic",a.Ii[1],d).Hb(a),b.click(function(){z.T("share","click_share_topic_page",g)}))};
var kN=function(a){z.Q.call(this,a)};var lN=function(a,b,c){var d,f,g=[];for(d in c)f=c[d],z.oa(f)?z.w(f,(0,z.q)(function(a){g.push(BM({type:"hidden",name:d,value:String(a)}))},a)):g.push(BM({type:"hidden",name:d,value:String(f)}));z.Ge(b,wM(g))};var mN=function(a){return window.$.get("/node/ExploreAnswerListV2",{params:JSON.stringify({offset:a,type:"day"})})};var nN=function(a){return window.$.get("/node/ExploreHotFavlistsInnerV2",{params:JSON.stringify({offset:a})})};
var oN=function(a){return window.$.get("/node/ExploreAnswerListV2",{params:JSON.stringify({offset:a,type:"month"})})};var pN=function(){z.F.call(this)};var qN=function(){z.Q.call(this);var a=z.lh||[0,0];this.ot=a[0];this.visible=!!a[1];this.ih="collection"};
var rN=function(a){var b=z.I("zh-list-answer-wrap");if(b){(0,window.$)(b).on("click","a[name\x3dunfavo]",window.$.proxy(a.IP,a));var c=new z.zl({pg:!1});a.K(c);c.use("childConstructor",{Vh:z.IF}).use("expandLimit");c.w(b);a.o().g(c,"click!",function(a){"comment"===a.namespace&&a.Ac.fill("category",this.ih).fill("label","collection_answer")})}};
var sN=function(){var a=z.I("zh-favlist-following-wrap");a&&((new PM(a,null,"favlist",null,!0)).init(),(0,window.$)(a).on("click","a.zg-unfollow",function(a){"/collections"===window.location.pathname&&(a=(0,window.$)(a.target).attr("href"),/\/collection\/\d+\/followers/.test(a)?z.wi({category:"collection",action:"visit_collection_followers",label:"collections_my_followed_collections_collection_followers_count"}):z.wi({category:"collection",action:"click_unfollow_collection",label:"collections_my_followed_collections_unfollow_collection"}))}).on("click",
".zm-item-title \x3e a",function(){var a=window.location.pathname;"/collections"===a?z.wi({category:"collection",action:"visit_collection",label:"collections_my_followed_collections_collection"}):"/collections/mine"===a&&z.wi({category:"collection",action:"visit_collection",label:"collections_my_collection"})}))};
var tN=function(a){var b=z.I("zh-list-side-head");if(b){var c=z.L("zu-entry-focus-button",b);c&&a.o().g(c,"click",function(){(0,z.qB)(c,"favlist","",["zg-btn-green","zg-btn-white"])});a.ig=z.I("zh-list-operation-menu");a.ig&&a.o().g(a.ig,"click",a.fB)}(b=z.I("zh-single-answer-author-info"))&&(new QM(b)).init();(b=z.I("zh-list-create-new-list"))&&a.o().g(b,"click",a.YU);(b=z.I("zh-fav-list-side-bar-creator"))&&(new QM(b)).init();(0,window.$)("#zh-fav-list-side-bar-report").on("click",function(){(new z.Oz({type:"favlist",
id:a.ot})).render()})};var uN=function(a){z.W.confirm("删除收藏夹","你确定要删除这个收藏夹吗？",function(a){a&&(a=new z.fp,a.add("favlist_id",this.ot),a.add("_xsrf",(new z.Ri(window.document)).get("_xsrf")),(new kN).post(oM(a),"/collection/delete"))},a)};
var vN=function(a){a.va||(a.va=new z.hA(a.ot,"favlist"),a.K(a.va),a.o().g(a.va,"click!",function(a){"comment"===a.namespace&&(a.Ac.fill("category",this.ih).fill("label","collection"),a.Ac.action=a.Ac.action.replace("favlist","collection"))}),z.lA(a.va,a.Nb,(0,window.$)(".toggle-comment",a.Nb)[0]))};var wN=function(a){a.fK=new z.Z(!0);a.o().g(a.fK,"complete",function(){window.location.reload()});a.fK.ajax("/collection/update","favlist_id\x3d"+a.ot+"\x26is_public\x3d1")};
var xN=function(a,b){z.F.call(this);this.pa=a;this.Ib=b;this.data=z.R};var yN=function(a){a.Rt&&a.Rt.ka(a.data.ob?"撤消匿名身份":"使用匿名身份")};var zN=function(a,b){return a?b?new z.dE(a):new z.ey(a):new z.iy};var AN=function(a){a.sk.innerHTML="";z.P(a.sk,!1);a.Mo=!1;a.lm.Ip("问题重定向");z.xq("/question/unredirect",null,"POST","qid\x3d"+a.pa+"\x26rqid\x3d"+a.uu)};var BN=function(a,b){z.Q.call(this);this.KT=a;this.eD=b};var CN=function(a,b,c,d,f){z.sv.call(this,d,b,c);this.pa=a;this.dz=this.Bp=!1;this.eT=f};
var DN=function(a,b){a.dz=b};var EN=function(){var a=z.M("select",{style:"1px solid #999 "}),b=z.M("option",{value:"none"},"请选择一个修改理由...");a.appendChild(b);z.w(FN,function(b,d){var f=z.M("option",{value:b.value},d+1+". "+b.label);a.appendChild(f)});return a};var GN=function(a,b,c){a.rH.innerHTML=b;z.V.set(a.rH,c||"zg-error-text")};var HN=function(){z.Q.call(this)};var IN=function(){z.U.call(this);this.Cf(!0);this.G(!0)};
var JN=function(a,b){a.Na("提问无人问津？");a.ka(b);a.ha();(0,window.$)(".js-gonext",a.h).on("click",function(){var b=(0,window.$)(this).parents('[class^\x3d"view"]').attr("class");"view-starting"===b?(a.Na("第一条"),KN(a,"firsttip")):"view-firsttip"===b?(a.Na("第二条"),KN(a,"secondtip")):"view-secondtip"===b?(a.Na("第三条"),KN(a,"thirdtip")):"view-thirdtip"===b&&a.G(!1)})};var LN=function(a,b){a.Na("邀请回答小窍门");a.ka(b);a.ha();(0,window.$)(".js-close",a.h).on("click",function(){a.G(!1)})};
var KN=function(a,b){(0,window.$)('[class^\x3d"view"]',a.h).hide();(0,window.$)(".view-"+b,a.h).show()};var MN=function(a,b){z.Q.call(this);this.JT=a;this.qp=b;this.Z=null;this.mb=!1;this.Vl=null;this.Qj=[];this.xc=!1;this.dR="loading";this.yG="zg-btn-white"};var NN=function(a){var b=a.dR;a.X.addClass(b).html(ON);window.$.get("/node/QuestionInvitePanelV2",{params:{question_id:a.JT}}).done(function(c){a.xc=!0;a.X.removeClass(b);c=(0,window.$)(c);a.X.replaceWith(c);a.h=c[0];c.toggle(a.wc());a.X=c;PN(a)})};
var PN=function(a){var b=a.m();a.o().g(z.Hq,"anon_change",a.MR);(0,window.$)(".cancel-anon",b).click(window.$.proxy(a.BO,a));if(!(0,window.$)(".error-message",b).length){var c=z.L("search-input",b),d=z.L("invite-title",b);a.Jy(c,d);a.Av=(0,window.$)(".suggest-persons",b);a.Av.on("click","button",window.$.proxy(a.FF,a));(0,window.$)(".js-more",b).one("click",function(){(0,window.$)(".person",this.Av).show();(0,window.$)(this).remove()});a.Fq=(0,window.$)(".invite-status",b);a.Fq.on("click","button",
window.$.proxy(a.CO,a)).on("mouseenter mouseleave",".invited-shortlist",function(a){(0,window.$)(".invited-hovercard",this).toggleClass("in","mouseenter"===a.type)});QN(a)}};var RN=function(a,b){var c=z.R;a.dispatchEvent(new z.Iz("click!invitation",{category:"invitation",action:"ask_to_answer",label:b,value:c.FG?null:c.ve}))};var SN=function(a,b){return!!z.rb(a.Qj,function(a){return a.id===b})};
var TN=function(a,b,c){var d=(0,window.$)(".invite-button",a.Av).filter(function(){return this.getAttribute("data-uid")===b}).get(0);d&&UN(a,d,c)};var UN=function(a,b,c){a=a.yG;c?(z.V.add(b,a),z.nf(b,"收回邀请")):(z.V.remove(b,a),z.nf(b,"邀请回答"))};var QN=function(a){a.Qj=window.$.map((0,window.$)(".invited-fulllist",a.Fq).children(),a.tI)};var VN=function(a,b){a.Qj&&IM(a.Qj,function(a){return a.id===b})&&WN(a)};
var WN=function(a){var b=a.Qj,c={each:z.w,fullList:function(){return(0,z.jn)(XN,{persons:b,helper:c})}};b.length?a.Fq.html((0,z.jn)(YN,{persons:b,helper:c,maxInvites:15})):a.Fq.html("你可以通过邀请其他用户来更快获得回答")};var ZN=function(a){z.Q.call(this);this.data=a;this.va=null};var $N=function(a){var b=z.L("panel-container",a.h);b&&(a.dm=new HN,a.K(a.dm),a.dm.w(b),a.va=new z.hA(a.data.pa,"question"),a.dm.K(a.va),z.lA(a.va,a.dm.m(),(0,window.$)(".toggle-comment",a.h)[0]),a.Mj(),a.Nj(),aO(a))};
var aO=function(a){if("normal"===z.R.status){var b=new MN(a.data.pa,a.data.Xa);b.render(a.dm.m());var c=(0,window.$)('a[name\x3d"invite"]',a.m());a.o().g(b,["expand","collapse"],function(a){c.text("expand"===a.type?"收起邀请":"邀请回答")});a.dm.K(b);z.R.aV&&(b.Nc(!0),a.dispatchEvent(new z.Iz("show!invitation",{category:"invitation",action:"ask_to_answer_card",label:""})));a.Yy=b}};
var bO=function(a,b){var c=a.ML;c||(c=new z.gE,c.w(z.I("zh-question-admin-menu")),z.ch(c,function(a){a.Ea(a.m().getAttribute("data-action"))}),a.o().g(c,"action",function(a){a=this.OC=a.target;(new z.Lz).open(a.m(),{id:this.data.pa,type:"question"},(0,z.q)(this.fN,this))}),a.ML=c);c.U()?c.G(!1):z.hE(c,new z.ly(b,1,!0),0,new z.qg(5,0,5,0))};
var cO=function(a){z.W.confirm("删除问题","你确定要删除这个问题吗？相关的评论也将被删除。",function(a){if(a){var c=new z.Z(!0);z.E(c,"complete",function(){var a=z.Zn(c);a&&!a.r?window.location.href="/":z.W.message(a.msg)});c.ajax("/question/delete/"+this.data.pa)}},a)};var dO=function(a){z.iF.call(this,a)};var eO=function(){z.Q.call(this);this.data=z.R||{};this.pa=this.data.pa;this.Mo=!1;this.Xi={};this.cw=[];this.Vq=[];this.ri=0;this.fk=z.hm&&z.hm.url_token?z.hm:null};
var fO=function(a){z.S.jh&&window.$.post("/question/popup",{action:"no_answer",question_token:a.data.Xa},function(a){a&&JN(new IN,a)})};
var gO=function(a){(0,window.$)(".js-ignore-invite").click(function(){(0,window.$)(".question-invited-by").hide();window.$.post("/question/askpeople",{qid:a.data.Xa,uid:z.S.fg,op:"pass"})});(0,window.$)(".js-invite-others").click(window.$.proxy(function(){var a=(0,window.$)('#zh-question-meta-wrap a[name\x3d"invite"]')[0];a&&(z.yo(a,{dC:function(){return!1},$v:!0}),this.gu.Yy.Nc(!0))},a))};
var hO=function(a){"close"===z.R.status||z.R.Ho||(a.Oa=new z.it(a.data.Qm,a.data.pa),a.Oa.yt=5,a.Oa.Bt=1,a.Oa.RC=!0,a.Oa.Ht=!0,a.Oa.w(z.L("zm-tag-editor",a.h)),a.o().g(a.Oa,["remove_tag","add_tag"],function(){z.X.fb("ga_edit_question_topic_changed")}),a.o().g(a.Oa,"start_editing",function(){z.X.fb("ga_question_topic_edit_finish_changed")}),a.Oa.addEventListener("beforeedit",z.tC({tp:!0})))};
var iO=function(a){var b=z.I("zh-question-title");z.R.Ho?b.children[0].appendChild(z.Xe('\x3ca class\x3d"Button Button--text QuestionPage-titleButton" href\x3d"/question/24501563" target\x3d"_blank" data-tip\x3d"s$t$该问题已被锁定公共编辑"\x3e\x3cspan class\x3d"sprite-global-icon-lock"\x3e\x3c/span\x3e\x3c/a\x3e')):"false"!==b.getAttribute("data-editable")&&(a.dd=new CN(a.data.pa,"/question/title","content",!1,!0),a.dd.wE=!0,a.dd.Id=!0,a.dd.Bp=!0,DN(a.dd,AM(a.data.jh)),a.dd.w(b),a.o().g(a.dd,"change",function(){z.Hq.dispatchEvent("question_title_change");
window.document.title=this.dd.Ua()+" - 知乎"}),a.o().g(a.dd,"click_edit",function(){z.X.fb("ga_question_title_edit_start")}),a.o().g(a.dd,"cancel_edit",function(){z.X.fb("ga_question_title_edit_cancel")}),a.o().g(a.dd,"save_changed",function(){z.X.fb("ga_question_title_edit_save_changed")}),a.o().g(a.dd,"save_unchanged",function(){z.X.fb("ga_question_title_edit_save_unchanged")}),a.dd.addEventListener("beforeedit",z.tC({tp:!0})))};
var jO=function(a,b){var c=z.I("zh-question-detail");if(c){var d=new z.jB;a.o().g(d,"expand",b).g(d,"invalid",b);d.w(c)}};var kO=function(a){a.RD&&(a.data.rr=+a.RD.innerHTML,z.S.lb()||(a.data.rr=0),z.P(a.Rh,0<a.data.rr),a.Wq&&z.nf(a.Wq,a.data.ve?a.data.ve+" 个回答":"还没有回答"),a.Mm&&z.P(a.Mm,1<a.data.ve),z.P(a.Rh,0<a.data.rr))};
var lO=function(a){var b=z.I("zh-question-answer-wrap");if(b){var c=new z.zl({use:["expandLimit","nodeSource"],pg:a.data.ve>a.data.kT&&!z.L("question-page-pager")});a.K(c);a.o().g(c,"itemcreated",function(a){c.K(mO(this,a.item));(0,window.$)("img.lazy",a.item).lazyload({data_attribute:"actualsrc",threshold:400})});c.w(b)}};
var mO=function(a,b,c){var d=new dO({pa:a.pa});d.Hb(a);d.w(b);a.Xi[d.sa]=d;a.Vq.push(d.sa);a.o().g(d,"change",a.Tz);d.Me&&(a.ri=d.sa,d.rM=z.S,a.o().g(d.ue,"change",a.pP),a.hM=d);d.Rj?d.Me&&a.yn.appendChild(d.m()):a.cw.push({added_time:d.Ow,vote:c,aid:d.sa});d.ki&&z.P(d.m(),!1);return d};
var nO=function(a){var b=null,c=null,d,f={suggest:"建议修改",evaluate:"建议修改",close:"关闭"};z.dm.Xd||"normal"===z.R.status||(c="被"+f[z.R.status]+'的问题不允许添加新的回答。\x3ca data-tip\x3d"s$b$为什么部分问题会被「关闭」「建议修改」？" href\x3d"//www.zhihu.com/question/21290061"\x3e\x3ci class\x3d"zg-icon zg-icon-question-mark"\x3e\x3c/i\x3e\x3c/a\x3e');a.ri?(d=a.Xi[a.ri],b="#answer-"+d.sa,d=d.ki):a.fk&&(b="/question/"+z.R.Xa+"/answer/"+a.fk.url_token,d=a.fk.is_delete);b&&(c=d?'你已经删除了对该问题的回答，如果需要修改，请先 \x3ca href\x3d"javascript:;" name\x3d"cancel_delete"\x3e撤消删除\x3c/a\x3e':
'一个问题你只能回答一次，但你可以对 \x3ca href\x3d"'+b+'"\x3e现有的回答\x3c/a\x3e 进行修改');!z.S.jh||a.ri||a.fk||(c='添加回答：\x3ca href\x3d"javascript:;" name\x3d"answer_my_question"\x3e回答自己的提问\x3c/a\x3e');a.data.cz&&(c='该问题目前已经被锁定，无法添加新答案。\x3ca href\x3d"/question/19604313" target\x3d"_blank"\x3e问题为什么会被锁定？\x3c/a\x3e');c&&a.xb.Wa(!1,c)};
var oO=function(a){a.Wq=z.I("zh-question-answer-num");a.Xq=z.I("zh-question-answer-wrap");a.Rh=z.I("zh-question-collapsed-link");a.yn=z.I("zh-question-collapsed-wrap");a.RD=z.I("zh-question-collapsed-num");a.dD=z.I("zh-question-answer-form-wrap");a.Dk=z.I("zh-question-notification-summary");a.Mm=z.I("zh-answers-filter");a.hu=z.I("zh-add-question-sug");a.Wq&&(a.data.ve=+a.Wq.getAttribute("data-num"));a.Xq&&(a.data.kT=+a.Xq.getAttribute("data-pagesize"));a.Rh&&a.o().g(a.Rh,"click",a.mV);a.hu&&a.o().g(a.hu,
"click",a.CF);a.Mm&&z.Sm&&a.o().g(a.Mm,"click",function(a){a.stopPropagation();z.V.add(this.Mm,"activated");this.o().Aa(window.document,"click",function(){z.V.remove(this.Mm,"activated")})})};var pO=function(a,b){var c=z.I("zh-question-collapsed-switcher");b?(c.name="collap",a.QD=!0,z.P(a.yn,!0),z.V.add(a.Rh,"zu-question-collap-title-active")):(a.QD=!1,c.name="expand",z.P(a.yn,!1),z.V.remove(a.Rh,"zu-question-collap-title-active"))};
var qO=function(a){a.aN=!0;var b=a.yn,c=window.$.get("/node/QuestionCollapsedAnswerListV2",{params:{question_id:a.data.pa}});c.done(function(c){c=z.Xe(c);pO(a,!0);z.V.remove(b,"zm-question-collapsed-list-loading");b.appendChild(c);z.w(z.ff(b),function(b){b!==d&&mO(a,b,99999)});(0,window.$)("img.lazy",b).lazyload({data_attribute:"actualsrc",threshold:400})});var d=z.ff(b)[0];d&&(z.P(d,!1),c.done(function(){z.P(d,!0)}));z.P(b,!0);z.V.add(b,"zm-question-collapsed-list-loading")};
var rO=function(a){if(a.dD){a.xb=new z.RE(a.data.ob,z.S);a.K(a.xb);a.xb.w(a.dD);z.dm.Xd&&z.dm.Xd.length?a.xb.ka(z.dm.Xd[0]):!z.pm.rb&&z.y&&a.xb.ka("\x3cp\x3e\x3c/p\x3e");if(!(a.data.cz||a.ri||a.fk&&a.fk.url_token))if(a.data.hn&&a.data.hn.length&&a.data.hn[3]!==z.S.fg)a.xb.Wa(!1,"只有 "+z.pp(a.data.hn)+" 能回答此问题");else if("normal"===z.R.status||z.dm.Xd)z.S.jh||a.xb.qg();a.o().g(a.xb,"change",a.KR);a.o().g(a.xb,z.OH,a.VR);a.xb.ready(function(){var a=this.Tx();a&&"writing"===window.location.hash.slice(1)&&
a.execCommand("toggleFullScreen")})}};var sO=function(a,b){if(b=b||window.location.hash.slice(1)){var c=b.split("-"),d=c[1];"answer"===c[0]&&(c=a.kF(d))&&(c.Rj&&!a.QD?tO(a,a.Rh):tO(a,c.m()))}};var tO=function(a,b){if(b){var c=z.Qg(window.document.body).top,d=a.QP?z.Ig(a.Dk).height:0,c={paddingTop:c+d};"number"===window.$.type(c)&&(c={offsetTop:c});c.dC=xM;z.yo(b,c);z.kp(b);a.sj&&a.sj.uq()}};var uO=function(){eO.call(this);this.data=z.R;this.pa=this.data.pa};
var vO=function(a){var b=(0,window.$)(".awesome-answer-list").get(0);if(b){var c=new z.zl({use:["expandLimit"],pg:!1});a.K(c);a.o().g(c,"itemcreated",function(a){var b=new z.IF;b.w(a.item);c.K(b)});c.w(b)}};var wO=function(a,b){var c=(0,window.$)("#js-sidebar-author-info");if(!(0,window.$)("a[name\x3dfocus]",c).length){var d={0:"fullname",1:"url_token",2:"avatar_path",3:"hash",4:"headline"},f=z.pb(z.S,function(a,b,c){a[d[c]]=b;return a},{}),f=(0,z.jn)(a.sM,{author:!b&&f});c.html(f)}};
var xO=function(){var a=(0,window.$)("#zh-question-answer-collestions");a.length&&(0,window.$)("a[name\x3dfocus]",a).click(function(){(0,z.qB)(this,"favlist")})};var yO=function(a){a.Ib?a.Ib.ki?(a.Nr.innerHTML=a.Ib.Me?'你已经删除了对该问题的回答，如果需要修改，请先 \x3ca href\x3d"javascript:;" name\x3d"cancel_delete"\x3e撤消删除\x3c/a\x3e':"此答案已经被作者删除",z.P(a.Ib.m(),!1)):z.P(a.Ib.m(),!0):a.Nr.innerHTML="此答案已经被作者删除"};var zO=function(a){z.Q.apply(this,arguments)};
var AO=function(a){var b=window.$.makeArray((0,window.$)("\x3cdiv\x3e").html(a.MK.html()).children().add(a.$a.children()));a.kA=new z.JD(b,BO);a.Gq.on("click",function(){CO(a,a.$a.find("."+a.Ix).length)})};
var DO=function(a){a.$a.on("click","[data-follow]",function(b){var c=(0,window.$)(b.target),d={id:c.data("id"),name:c.closest(".topic-item").find("h3 a").text(),dY:c.data("token")};c.hasClass(a.Ix)?(b=(0,window.$)(b.target).closest(".topic-item"),a.kA.remove(b[0]),1===a.$a.find("."+a.Ix).length&&(a.Gq.hasClass("disabled")?a.wb.fadeOut():(0,window.setTimeout)(function(){CO(a,0)})),a.dispatchEvent({type:EO,data:d})):c.hasClass(a.OV)&&a.dispatchEvent({type:FO,data:d})})};
var CO=function(a,b){a.Gq.hasClass("disabled")||(a.kA.random(b)||(a.Gq.addClass("disabled"),a.wb.find(".hidden-topics-plaza").show()),a.$a.html(z.LD(a.kA)))};var GO=function(a){z.Q.apply(this,arguments)};
var HO=function(a){a.o().g(window,"hashchange",a.UF);a.UF({data:!0});a.wb.on("click",".zm-topic-cat-more a",function(){var b=a.Gh.find(IO).length;window.$.get("/followed_topics",{offset:b,limit:JO-b},function(b){b.payload.length&&(b=b.payload.map(function(b){return KO(a,b)}).join(""),a.Gh.append(b));a.Gh.find(".zm-topic-cat-more").remove();+(0,window.$)(".topic-feed-title .follow-topics-count").text()>JO&&a.Gh.append('\x3cli class\x3d"zm-topic-cat-more js-topic-all"\x3e\x3ca target\x3d"_blank" class\x3d"zg-link-gray" href\x3d"'+
(0,window.$)(".topic-feed-title a").attr("href")+'"\x3e查看全部\x3c/a\x3e\x3c/li\x3e')})})};var LO=function(a){a.Dq.on("click","a",function(b){(0,window.$)(b.currentTarget).hasClass("current")||(a.Dq.find("a").removeClass(MO),(0,window.$)(b.currentTarget).addClass(MO),NO(a))})};var OO=function(a,b){var c=a.wb.find(".no-topics"),d=a.wb.find(".topic-feed-title a"),f=d.find("span"),g=+f.text();(g+=b)?(d.show(),c.hide()):(d.hide(),c.show());f.html(g);a.DQ&&PO(a,g)};
var PO=function(a,b){a.xv||(a.xv=(0,window.$)('\x3ca href\x3d"#" class\x3d"new-follow-topics"\x3e新关注 \x3cspan\x3e'+b+"\x3c/span\x3e 个话题，点击查看\x3c/a\x3e"),a.xv.insertBefore(".topic-recommend").click(function(a){a.preventDefault();window.location.reload()}));a.xv[b?"show":"hide"]().find("span").html(b)};var QO=function(a,b){return a.filter(function(a,d){return(0,window.$)(d).text()===b})};
var RO=function(a){a.eg&&(a.removeChild(a.eg),a.eg.H(),a.eg=null);var b=a.$a,c=new z.zl({use:["autoload"]});a.K(c);c.use("nodeSource",{offset:function(){return Number(b.find(".feed-item").last().data("score"))||0}});c.use("childConstructor",{factory:z.NF}).use("expandLimit");c.w(b.get(0));a.o().g(c,"next",a.VC);a.eg=c};
var NO=function(a,b){var c=a.Dq.find(".current").data("feedType"),c={params:{topic_id:b,feed_type:c}},d=a.$a.data("init");window.$.extend(!0,d,c);a.$a.attr("data-init",JSON.stringify(d));a.$a.empty();a.eg.Ko()&&RO(a);a.eg.Uh();a.wz=a.eg.Zj()};
var SO=function(a,b,c){a.xz&&"pending"===a.xz.state()&&a.xz.abort();a.xz=window.$.get("/node/TopicAvatarV2",{params:{topic_id:b,avatar_type:"topic"}},function(b){if(b&&b.r)z.W.message("错误");else{var f=c.data("href");a.Ym.find(".js-topic-title-avatar").html(b).attr("href",f);a.Ym.find(".js-topic-title-name").text(c.text()).attr("href",f);a.Ym.show()}})};var KO=function(a,b){a.RJ||(a.RJ=(0,z.jn)(TO));return a.RJ(b)};var UO=function(){z.Q.call(this)};var VO=function(){z.Q.call(this);this.BU=z.qm.searchKeyword};
var WO=function(){var a=(0,window.$)("#js-search-question-form");a.length&&a.submit(function(b){b.preventDefault();b=z.xv.aa();b.show();z.yv(b,(0,window.$)(".title-input",a).val())})};var XO=function(a){var b=(0,window.encodeURIComponent)(a.BU);(0,window.$)("ul.list[data-paging]").on("click",".item a[href!\x3d#]",function(a){a=a.currentTarget;a.host&&(a=(0,window.$)(a).closest(".item").index()+1,z.Vi.set("s-q",b),z.Vi.set("s-i",a),z.Vi.set("sid",(0,z.ln)()))})};
var YO=function(a){function b(a,b){var h=(0,window.$)(a);window.$.each(b(),function(a,b){h.on("click",a,function(a){d.apply(null,c(b,a))})})}function c(a,b){return z.ob(a,function(a){return z.sa(a)?a(b):a})}var d=z.Aa(z.T,"search");b(".related-topics",function(){return{"a.avatar-link":["visit_topic","search_result_card_topic_avatar"],"a.name-link":["visit_topic","search_result_card_topic"],"a[href$\x3dquestions]":["visit_topic_questions","search_result_card_topic"],"a[href$\x3dtop-answers]":["visit_topic_topanswers",
"search_result_card_topic"],"a[href$\x3dfollowers]":["visit_topic_followers","search_result_card_topic"],"button.zg-btn-follow":["click_follow_topic","search_result_card_topic"],"button.zg-btn-unfollow":["click_unfollow_topic","search_result_card_topic"],'a[href^\x3d"/search?"]':["click_search_result_more","search_result_card_topic"]}});b(".related-users",function(){return{"a.avatar-link":["visit_people_profile","search_result_card_people_avatar"],"a.name-link":["visit_people_profile","search_result_card_people"],
"a[href$\x3danswers]":["visit_people_answers","search_result_card_people"],"a[href$\x3dfollowers]":["visit_people_followers","search_result_card_people"],"a[href$\x3dposts]":["visit_people_posts","search_result_card_people"],"button.zg-btn-follow":["click_follow_people","search_result_card_people"],"button.zg-btn-unfollow":["click_unfollow_people","search_result_card_people"],'a[href^\x3d"/search?"]':["click_search_result_more","search_result_card_people"]}});b(window.document.body,function(){var a=
z.Aa(z.La,"search_result_%s_more_button");return{"ul.list.contents + .zu-button-more":["click_search_result_more",a("all")],"ul.list.users + .zu-button-more":["click_search_result_more",a("user")],"ul.list.topics + .zu-button-more":["click_search_result_more",a("topic")]}});b(".search-tabs",function(){var a=z.Aa(z.La,"search_result_tab_%s");return{'a[href^\x3d"/search?type\x3dquestion"]':["click_search_result_tab",a("all")],'a[href^\x3d"/search?type\x3dpeople"]':["click_search_result_tab",a("user")],
'a[href^\x3d"/search?type\x3dtopic"]':["click_search_result_tab",a("topic")]}});b(".range-selector",function(){var a=z.Aa(z.La,"search_result_range_%s");return{'a[href*\x3d"range\x3d1d"]':["click_search_result_range",a("1d")],'a[href*\x3d"range\x3d1w"]':["click_search_result_range",a("1w")],'a[href*\x3d"range\x3d3m"]':["click_search_result_range",a("3m")]}});b("ul.list.contents",function(){function a(){return function(a){return"search_result_all_list_"+((0,window.$)(a.target).closest(".item").index()+
1)+""}}return{".js-title-link":["visit_question",a()],".js-expand, .summary":["click_expand",a()],".js-collapse":["click_collapse_answer",a()],"a.zg-follow":["click_follow_question",a()],"a.zg-unfollow":["click_unfollow_question",a()]}});b("ul.list.users",function(){function a(b){return function(a){return"search_result_user_list_"+((0,window.$)(a.target).closest(".item").index()+1)+(b||"")}}return{"a.avatar-link":["visit_people_profile",a("_avatar")],"a.name-link":["visit_people_profile",a()],"a[href$\x3danswers]":["visit_people_answers",
a()],"a[href$\x3dfollowers]":["visit_people_followers",a()],"a[href$\x3dposts]":["visit_people_posts",a()],"button.zg-btn-follow":["click_follow_people",a()],"button.zg-btn-unfollow":["click_unfollow_people",a()]}});b("ul.list.topics",function(){function a(b){return function(a){return"search_result_topic_list_"+((0,window.$)(a.target).closest(".item").index()+1)+(b||"")}}return{"a.avatar-link":["visit_topic",a("_avatar")],"a.name-link":["visit_topic",a()],"a[href$\x3dquestions]":["visit_topic_questions",
a()],"a[href$\x3dfollowers]":["visit_topic_followers",a()],"button.zg-btn-follow":["click_follow_topic",a()],"button.zg-btn-unfollow":["click_unfollow_topic",a()]}});a.o().g(a,"click!",function(a){"comment"===a.namespace&&a.Ac.fill("category","search").fill("label","search_result_answer")})};var ZO=function(a){$O||(this.Un=a,this.Fh=(0,window.$)(this.Un.m()),(0,window.setTimeout)((0,z.q)(this.Rb,this)))};
var aP=function(a){(0,window.setTimeout)(function(){window.$.ajax({type:"POST",url:"/zreactor/deliver",data:JSON.stringify(a),contentType:"application/json",processData:!1})},50)};
var bP=function(a){var b=cP[a.Fh.data("type")];z.On(a.Fh[0],function(){dP(a,"display")},a.Un);a.Un.o().g(a.Un,"expand",function(c){c.target instanceof z.WA&&dP(a,"expand_"+b)}).g(a.Un,"collapse",function(c){c.target instanceof z.WA&&dP(a,"collapse_"+b)});a.Fh.on("click",'a[name\x3d"nohelp"]',function(){var b=!!(0,window.$)(this).data("revert");dP(a,b?"unhelpful":"revert_unhelpful");(0,window.$)(this).data("revert",!b)});window.$.each({".actioncard-body .more":"view_all",".actioncard-body .next:not(.disabled)":"next_page",
".actioncard-body .prev:not(.disabled)":"prev_page",".actioncard-body .items a":"open_topic",".js-validate, .js-headline-input, .js-choose-image":"open_form",'.zg-follow[data-follow^\x3d"t:"], .zg-btn-follow[data-follow^\x3d"t:"]':"follow_topic",'.zg-unfollow[data-follow^\x3d"t:"], .zg-btn-unfollow[data-follow^\x3d"t:"]':"unfollow_topic",'a.zg-follow:not([data-follow^\x3d"t:"]):not([data-follow^\x3d"m:"])':"follow_"+eP[b],'a.zg-unfollow:not([data-follow^\x3d"t:"]):not([data-follow^\x3d"m:"])':"unfollow_"+
eP[b],"a.toggle-comment":"expand_comments",'a[name\x3d"addnew"]':"comment",".content h2 a":"open_"+fP[b],"a.ignore:not(.close)":"uninterest","a.revert":"revert_uninterest","a.ignore.close":"confirm_uninterest","button.up.pressed":"vote_up_"+b,"button.down.pressed":"vote_down_"+b,"button.up:not(.pressed)":"revert_vote_up_"+b,"button.down:not(.pressed)":"revert_vote_down_"+b,'a[name\x3d"favo"]':"collect_answer",'a[name\x3d"thanks"]':"thanks",'a[name\x3d"share"]':"share",'a[name\x3d"report"], .js-report':"report",
"a.answer-date-link":"open_answer"},function(b,d){a.Fh.on("click",b,function(){dP(a,d)})})};var dP=function(a,b){var c=window.$.extend({},gP(a),{action_type:b,time:(0,z.G)()});c.object_id&&("display"===b?a.wT(c):aP(c))};
var gP=function(a){var b=a.uC,c=window.$.extend({},b.data("meta"),{create:a.Fh.find(".source .time").data("timestamp"),offset:(0,window.$)(".feed-item").index(a.Fh)+1});return{mid:z.qm.ga_vars.user_hash,object_type:cP[a.Fh.data("type")],object_id:b.data("id"),object_meta:c,context:hP,others:""}};var iP=function(a,b,c){z.aC.call(this,a,b,c)};var jP=function(){z.Q.call(this);this.Ie=[];this.gm=0;this.MQ=!!(0,window.$)("#is-topstory").length;this.YE="feed-item-hook"};
var kP=function(a){var b="/node/"+a.Bd.data("init").nodename,b=a.Dt=new iP(a.Ur,b,!0);a.o().g(b,"itemcreated",function(a){this.Ie.push(a.data.PQ)}).g(b,"ignore",function(a){lP(this,a.key,a.value)});b.Di(a.YE);b.Hb(a);b.init();if(a.Bd.data("delayed"))z.Hq.on("guider2:topicselected",(0,z.q)(b.Zj,b))};var mP=function(a){a.Bd.on("click",".js-more-similar",function(){(0,window.$)(this).parent().slideUp("fast").nextUntil(":not(.hidden)").slideDown("fast")})};
var lP=function(a,b,c){a.Ie.forEach(function(a){a.Sn[b]===c&&(0,window.$)(a.h).fadeOut(150)})};var nP=function(a){a.Bd.on("click contextmenu","a",function(a){var c=a.currentTarget.href,d=c.includes("topic/"),c=c.includes("people/");if(d||c)if("click"!==a.type||a.ctrlKey||a.metaKey)c="",c="contextmenu"===a.type?"contextmenu":a.ctrlKey?"ctrl_click":"meta_click",z.wi({category:"open_link_in_new_tab",action:c,label:d?"topic":"people"})})};var oP=function(){z.F.call(this);this.zy=[];this.rE=[]};
var pP=function(a){for(var b=[],c=0;3>c;c++){var d=a.rE.shift();d&&b.push(d)}3===b.length?(a.ut.innerHTML=b.join(""),qP(a)):rP(a)};var qP=function(a){var b=z.Xp("suggest-item",a.ut);z.w(b,function(a){this.zy.push(a.id.split("-")[1])},a)};var rP=function(a){a.ut.innerHTML='\x3cimg class\x3d"bubble-loading" src\x3d"'+z.pm.rB+'/img/noti-loading.gif"\x3e';window.$.post("/lookup/suggest_member",{ids:a.zy.join(",")}).done((0,z.q)(a.YR,a))};var sP=function(){this.interval=3E4};
var tP=function(a){a.Rd||(a.Rd=(0,window.setInterval)((0,z.q)(function(){uP()},a),a.interval))};var uP=function(){(0,window.$)(".feed-item-hook .time").each(function(){(0,window.$)(this).text(z.ui((0,window.$)(this).data("timestamp")))})};var vP=function(){z.Q.call(this)};
var wP=function(){var a=(0,window.$)("#js-global-notify");if(a.length){var b=new z.Lu;b.w(a[0]);nM(b);(0,window.$)(".zu-global-notify-close",a).click(function(){var c=(0,window.$)(this).data("id");window.$.post("/notice/read",{nid:c});b.H();a.remove()})}};var xP=function(){z.Q.call(this)};var yP=function(){z.Q.call(this);this.ih="explore";this.WN="explore_feed"};
var zP=function(a){var b=(0,window.$)("#js-explore-tab");if(b.length){var c=(0,window.$)(".tab-panel",b),d=(0,window.$)(".tab-nav",b),b=function(){var b={"daily-hot":0,"monthly-hot":1}[window.location.hash.slice(1)]||0;d.removeClass("active").eq(b).addClass("active");b=c.hide().eq(b).show().children("[data-type]");if(!b.data("inited")){b.data("inited",!0);var g={daily:mN,monthly:oN}[b.data("type")],g=new AP(g);g.use("expandLimit");a.K(g);g.w(b[0])}};a.o().g(window,"hashchange",b);b()}};
var BP=function(a){var b=(0,window.$)("#zh-recommend-list-full\x3e.zh-general-list")[0];if(b){var c=new z.zl;c.use("nodeSource");z.Uk(c,function(a){var b=z.NF(a);b&&(c.K(b),b.w(a))});a.K(c);c.w(b)}};
var CP=function(){function a(a,b,c,d,m){c=(0,window.$)(c.target).closest(d,c.delegateTarget).index();z.zi(a,b,m,c+1)}var b=z.Aa(a,"view_answer","visit_answer"),c=z.Aa(a,"view_topic","visit_topic"),d=z.Aa(a,"view_roundtable","visit_roundtable");(0,window.$)("#zh-recommend").on("click","a.question_link",function(a){b(a,".feed-item","editor_recommendations_question_title")});(0,window.$)('div[data-type\x3d"daily"]').on("click","a.question_link",function(a){b(a,".feed-item","daily_trending_question_title")});
(0,window.$)('div[data-type\x3d"monthly"]').on("click","a.question_link",function(a){b(a,".feed-item","monthly_trending_question_title")});(0,window.$)("ul.hot-topics").on("click",'a[href*\x3d"topic"]',function(a){c(a,"li","explore_sidebar_trending_topics_name")});(0,window.$)("ul.hot-roundtables").on("click",'a[href*\x3d"roundtable"]',function(a){d(a,"li","explore_sidebar_trending_roundtable")});(0,window.$)("ul.hot-topics").on("click","img.avatar",function(a){c(a,"li","explore_sidebar_trending_topics_avatar")})};
var AP=function(a){z.Tk.call(this,{source:DP(a),use:["autoload"]})};var DP=function(a){return function(){return a((0,window.$)(this.nb()).last().data("offset")).then(function(a){return{results:a}})}};var qM={};z.OF.prototype.WA=z.Y(45,function(a){this.xn=a});z.mv.prototype.Tx=z.Y(43,function(){return this.Ma});z.Fd.prototype.Cl=z.Y(3,function(){return this.xE});pM.prototype.Hj=!0;pM.prototype.Rg=function(){return this.vB};pM.prototype.toString=function(){return"Const{"+this.vB+"}"};var sM={},vM={};
rM.prototype.Hj=!0;rM.prototype.Rg=function(){return this.qk};rM.prototype.Gy=!0;rM.prototype.Cl=function(){return 1};var EM=/^[-,."'%_!# a-zA-Z0-9]+$/;uM.prototype.Hj=!0;uM.prototype.Rg=function(){return this.BI};uM.prototype.Gy=!0;uM.prototype.Cl=function(){return 1};
var GM=/^(?:(?:https?|mailto|ftp):|[^&:/?#]*(?:[/?#]|$))/i,FM={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},HM={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},CM=/^[a-zA-Z0-9-]+$/,DM={EMBED:!0,IFRAME:!0,LINK:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,TEMPLATE:!0};z.v(yM,z.it);z.e=yM.prototype;z.e.w=function(a){this.h=a;this.rg=z.L("zm-tag-editor-labels",this.h);this.Ke(!0);this.xe();this.fc()};
z.e.Rn=function(){this.Vc||(this.Vc=z.M("div","zm-tag-editor-editor",[this.Pn=z.M("div","zg-section zg-clear"),this.gf=z.M("div","zg-section zm-tag-editor-command-buttons-wrap",[this.pb=z.I("zh-topic-merge-input"),z.M("a",{"class":"zg-mr15 zg-btn-blue",href:"#",name:"add",style:"display:none;"},"添加"),this.aF=z.I("zh-topic-merge-btn")])]),z.cf(this.Vc,this.rg),this.Wg(this.gf))};
z.e.Wg=function(a){this.ba=new z.ht("/topic/autocomplete",this.pb,null,null,a,!0);this.ba.sh(!0);this.ba.bm=this.Le;this.ba.Np(this.wm());this.ba.tx=[this.Fe];this.o().g(this.ba,"select",this.$o);this.o().g(this.ba,"suggestionsupdate",this.Rv)};z.e.wm=function(){return(0,z.q)(function(a){return z.nb(a,function(a){return z.uo(this.data,function(c){return c[1]!==a[1]&&3<a.length})},this)},this)};z.e.$o=function(){var a=this.ba.yj().slice(1);a&&3<a.length&&(this.mE=a,this.Xe(a[3],a[0]))};
z.e.Xe=function(a,b){var c=this;(0,window.setTimeout)(function(){c.pb.value=b})};z.e.Pe=function(){};z.ja(JM,z.Q);
JM.prototype.init=function(){this.tt=z.I("zh-pm-detail-item-wrap");this.o().g(this.tt,"click",this.Qa);var a=z.I("zh-pm-editor-form");if(a){var b=this.nb()[0],c=void 0,c=b?(0,window.$)(b).data():z.mh?{member:z.mh.id,name:z.mh.Nx}:{},b=this.zu=new z.lx({nu:!0,Xk:"to_admin"===c.type?[!0,{Jt:!1}]:!0});b.vq=!1;b.ph(a);b.show();z.nx(b,c.member,c.name);c.token&&(a=c.type,b.fq=c.token,b.CB=a);b.focus()}KM(this);this.Mj()};
JM.prototype.Mj=function(){(0,window.$)("#zh-pm-detail-item-wrap").on("click","a[name\x3dreport]",function(a){(new z.Oz({type:"message",id:(0,window.$)(a.currentTarget).closest(".zm-pm-item").data("token")})).render()})};JM.prototype.nb=function(){return z.ff(this.tt)};
JM.prototype.Qa=function(a){var b=z.gp(this.tt,a.target);if(b&&(a=z.Pp(b,this.xf))){a=(0,window.$)(a).data();var c=a.token;switch(b.name){case "reply":this.zu.show();var b=this.zu,d=a.type;b.fq=c;b.CB=d;z.nx(this.zu,a.member,a.name,!1);this.zu.focus();break;case "delete":LM(this,c)}}};z.ja(NM,z.Q);
NM.prototype.init=function(){var a=z.I("zh-create-pm");a&&this.o().g(a,"click",this.XR);var a=z.I("zh-pm-item-wrap"),b=new z.zl;b.use("locationSource",{param:function(a){return{start:a[a.length-1].getAttribute("data-token")}}});b.w(a);this.o().g(a,"click",this.Qa);(0,window.$)(function(){(0,window.$)("#zh-change-pm-admin").change(function(){var a=(0,window.$)(this).find("option:selected").attr("data-token");window.location.href="self"===a?"/admin_feedback":"/admin_feedback/"+a})});(0,window.$)("#zh-pm-item-wrap").on("click","a[name\x3dreport]",
function(a){(new z.Oz({type:"message",id:(0,window.$)(a.currentTarget).closest(".zm-pm-item").data("token")})).render()})};NM.prototype.XR=function(){var a=new z.lx({nu:!0});a.show();z.nx(a,-1);z.Wa(window.location.pathname,"admin_inbox")?a.Qp("admin"):a.Qp((0,window.$)("#zh-change-pm-admin option:selected").attr("data-token"))};
NM.prototype.Qa=function(a){var b=z.gp(this.TX,a.target);if(b){a=b.name;b=z.Pp(b,this.xf);if(!b||!a)return!0;var c=(0,window.$)(b).data(),d=c.member,f=c.name;switch(a){case "reply":a=!0;"to_admin"===c.type&&(a=[!0,{Jt:!1}]);z.Or((0,z.q)(function(){var a=new z.lx({nu:!0,Xk:!1});a.show();var b=c.type;a.fq=c.token;a.CB=b;z.nx(a,d,f,!1);a.qd.focus()},this),a)();break;case "delete":var g=b.getAttribute("data-token");z.W.confirm("删除私信会话","你确定要删除与 "+f+"的所有会话吗？",function(a){a&&OM(g)},this);break;case "edit":z.lp(this.cd,
this.Bh),this.Pm=-1}}};z.v(PM,z.aC);PM.prototype.init=function(a){PM.v.init.call(this,a);this.fc(this.h)};PM.prototype.$B=function(a){this.$B=a};PM.prototype.fc=function(a){if(this.$B){var b=new z.OF,c=this.aO;b.Kx=this.Gx;b.Jx=c||b.Jx;this.xn&&b.WA(this.xn);b.w(a)}};PM.prototype.WA=function(a){this.xn=a};z.v(QM,z.Rj);QM.prototype.init=function(){this.o().g(this.h,"click",this.bp)};QM.prototype.bp=function(a){a=z.gp(this.h,a.target);"focus"===(a&&a.name)&&(0,z.qB)(a,this.Gx,null,this.$N,{follow_text:this.text[0],unfollow_text:this.text[1]})};z.v(RM,z.Rj);z.e=RM.prototype;z.e.w=function(a){this.element=a;var b=(0,window.$)("\x3cul\x3e");this.VJ=(0,window.$)("\x3cli\x3e");b.append(this.VJ);(0,window.$)(a).append(b);this.WJ||(this.WJ=!0,this.NB=new z.Z(!0),this.o().Aa(this.NB,"success",this.dS),this.NB.ajax(this.url,null,"POST"))};z.e.dS=function(){var a=z.Zn(this.NB);a&&(a&&a.r?z.W.message(a.msg):(SM(this,this.VJ,a.msg),this.WJ=!1,this.C()))};z.e.C=function(){this.o().g(this.element,"click",this.bp)};
z.e.bp=function(a){var b=(a=a.target)?a.name:"";if(b)switch(b){case "load":case "loadmore":this.vz(a);break;case "topic":window.location.href=a.href}};z.e.vz=function(a){if(!this.Ro){var b=a.getAttribute("data-token"),c=a.getAttribute("data-parent");this.Ro=!0;this.$j=new z.Z(!0);this.o().Aa(this.$j,"success",this.Rq);this.SA=a.parentNode;this.SA.innerHTML='\x3cspan class\x3d"zg-gray"\x3e加载中...\x3c/a\x3e';this.$j.ajax(this.url+"?child\x3d"+b+"\x26parent\x3d"+c,null,"POST")}};
z.e.Rq=function(){var a=z.Zn(this.$j);if(a)if(a&&a.r)z.W.message(a.msg);else if(a=a.msg,a[1]){(0,window.$)(this.SA).hide();for(var b=(0,window.$)(this.SA.parentNode),c=0;c<a[1].length;c++){var d=a[1][c],f=(0,window.$)("\x3cli\x3e").addClass("zm-topic-organize-item");"topic"!==d[0][0]&&f.addClass("zm-topic-organize-loadmore");b.append(f);SM(this,f,d)}this.Ro=!1}};z.v(TM,z.mv);TM.prototype.hh=function(a){z.jm[0][0]===a?this.Gi():TM.v.hh.apply(this,arguments)};TM.prototype.WC=function(a){if(a=z.Zn(a.target))a.r?z.W.message(a.msg):a.msg&&(window.location.href=a.msg)};z.v(UM,z.Q);z.e=UM.prototype;z.e.init=function(){z.EG.K(this);this.w(window.document.body)};
z.e.C=function(){UM.v.C.call(this);$M(this);var a=z.I("zh-topic-top-answerer");a&&(new QM(a,"people",["zg-follow","zg-unfollow"])).init();if(a=z.I("zh-topic-direct-question-list"))a=new PM(a,null,"question",null,!0),a.Di("question-item"),a.init();if(a=z.I("zh-topic-title"))this.dd=new TM(!1,"/topic/update","title"),z.nv(this.dd,["tid\x3d"+this.Ff]),this.dd.addEventListener("beforeedit",z.tC({lq:!0})),this.dd.w(a),(0,window.$)(a).on("click",".js-pin",function(){var a=(0,window.$)(this),c=a.attr("data-action");
window.$.post(c,{tid:z.jm[0][3]}).done(function(c){if(!c)return z.W.message("网络异常");if(c.r)return z.W.message(c.msg);c=a.hasClass("pin")?'\x3ca href\x3d"javascript:;" data-action\x3d"/pin-topic/remove" class\x3d"js-pin zg-gray unpin topic-hover-content"\x3e\x3ci class\x3d"z-icon-unpin"\x3e\x3c/i\x3e取消常去话题\x3c/a\x3e':'\x3ca href\x3d"javascript:;" data-action\x3d"/pin-topic/add" class\x3d"js-pin zg-gray pin topic-hover-content"\x3e\x3ci class\x3d"z-icon-pin"\x3e\x3c/i\x3e设为常去话题\x3c/a\x3e';a.replaceWith(c)})});
if(a=z.I("zh-topic-desc"))(0,window.$)(a).find(".zm-editable-content").data("editable-maxlength"),this.ml=new z.sv(!0,"/topic/update","description"),this.ml.Wb='\x3ca href\x3d"javascript:;" name\x3d"edit"\x3e添加话题描述\x3c/a\x3e\x3c/div\x3e',z.nv(this.ml,["tid\x3d"+this.Ff]),this.ml.vw=!1,this.ml.jK=!1,this.ml.addEventListener("beforeedit",z.tC({lq:!0})),this.ml.w(a);if(a=z.I("zh-topic-faq"))this.Bx=new z.sv(!0,"/topic/"+(0,window.encodeURIComponent)(z.jm[0][1])+"/faq","content"),this.Bx.Wb='\x3cdiv class\x3d"zm-topic-faq-container"\x3e\x3cdiv class\x3d"zg-gray-normal"\x3e常见问题是该话题下经常会提到的问题的整理，以便后来者查阅（\x3ca href\x3d"/question/20388061" class\x3d"zg-link-litblue"\x3e如何创建？\x3c/a\x3e）\x3c/div\x3e\x3ca href\x3d"javascript:;" name\x3d"edit" class\x3d"zg-link-litblue"\x3e\x3cspan class\x3d"zg-blue-edit"\x3e\x3c/span\x3e为「'+
z.jm[0][0]+"」添加常见问题\x3c/a\x3e\x3c/div\x3e",this.Bx.vw=!1,this.Bx.w(a);eN(this);fN(this);ZM(this);bN(this);cN();dN(this);XM(this);WM();(a=z.L("zm-topic-feed-container"))&&(new QM(a,"question",["zg-follow","zg-unfollow"])).init();(a=z.I("zh-topic-side-children-list"))&&(new QM(a,"topic",["zg-follow","zg-unfollow"])).init();iN();(0,window.$)(".js-may-disable").click(z.Or(z.p,!0));VM();jN(this)};
z.e.mS=function(){this.Er=this.Oa.mE;if(!this.qH&&this.Er){this.qH=!0;this.Hz=new z.Z(!0);this.o().Aa(this.Hz,"success",this.TL);this.Hz.ajax("/topic/"+(0,window.encodeURIComponent)(z.jm[0][1])+"/demand","action\x3dmerge\x26target_topic_id\x3d"+this.Er[3]);var a=z.I("zh-topic-merged-msg");z.P(z.I("zh-topic-merge"),!1);z.P(a,!0);a=z.Me(window.document,"a",null,a)[0];a.href="/topic/"+this.Er[1];a.innerHTML=this.Er[0];this.Oa&&(this.Oa.pb.value="")}};
z.e.TL=function(){var a=z.Zn(this.Hz);if(!a)return z.W.message("网络异常");if(a.r)return z.W.message(a.msg);this.qH=!1};z.e.$R=function(){this.tE||(this.tE=!0,this.$w=new z.Z(!0),this.o().Aa(this.$w,"success",this.RL),this.$w.ajax("/topic/"+(0,window.encodeURIComponent)(z.jm[0][1])+"/demand","action\x3dremove"))};
z.e.RL=function(){var a=z.Zn(this.$w);if(!a)return z.W.message("网络异常");if(a.r)return z.W.message(a.msg);a=z.I("zh-topic-del-msg");z.P(z.I("zh-topic-del-btn"),!1);z.P(a,!0);this.Oa&&(this.Oa.pb.value="");this.tE=!1};
z.e.PS=function(a){if((a=a.target)&&a.name)if("add"===a.name){if(a=this.Uv.value)this.Wv=new z.Z(!0),this.o().Aa(this.Wv,"complete",this.QL),this.Wv.ajax(window.location.href,"action\x3dadd_alias\x26alias\x3d"+(0,window.encodeURIComponent)(a))}else"remove"===a.name?(this.EA=new z.Z(!0),a=a.parentNode.getAttribute("data-token"),this.o().Aa(this.EA,"complete",this.WL),this.EA.ajax(window.location.href,"action\x3dremove_alias\x26alias_token\x3d"+a)):"remove-merged"===a.name&&(this.FA=new z.Z(!0),a=a.parentNode.getAttribute("data-token"),
this.o().Aa(this.FA,"complete",this.XL),this.FA.ajax("/topic/"+(0,window.encodeURIComponent)(z.jm[0][1]+"/demand"),"action\x3dremove\x26target_topic_id\x3d"+a))};z.e.XL=function(){var a=z.Zn(this.FA);if(!a)return z.W.message("网络异常");if(a.r)return z.W.message(a.msg);YM(this,a.msg)};z.e.WL=function(){var a=z.Zn(this.EA);if(!a)return z.W.message("网络异常");if(a.r)return z.W.message(a.msg);YM(this,a.msg)};
z.e.QL=function(){var a=z.Zn(this.Wv);if(!a)return z.W.message("网络异常");if(a.r)return z.W.message(a.msg);var a=a.msg,b=z.M("li");b.setAttribute("data-token",a[1]);b.innerHTML=a[0]+' \x3ca name\x3d"remove" href\x3d"javascript:;" class\x3d"zg-link-gray"\x3e移除\x3c/a\x3e';this.Vv.appendChild(b);this.Uv.value="";z.P(this.Vv.parentNode,!0)};
z.e.fB=function(a){this.dA?this.jb.U()?this.jb.G(!1):(this.jb.G(!0),a.stopPropagation(),a.preventDefault(),this.al()):(a.stopPropagation(),a.preventDefault(),this.Lj(),this.al());this.dA=!0};z.e.al=function(){this.o().Aa(window.document,"click",function(){this.jb.G(!1)})};
z.e.Lj=function(){var a=z.I("zh-topic-side-head"),b=this.ig.getAttribute("data-auth");this.jb=new z.jy;this.vy=!0;"f-topic-manage"===b&&this.jb.Ga(this.US=new z.ey("管理话题"));this.jb.Ga(this.VS=new z.ey("组织话题"));this.jb.Ga(this.TS=new z.ey("话题日志"));this.vy&&(this.jb.render(a),this.o().g(this.jb,"action",this.Dj))};z.e.Dj=function(a){var b="";a.target===this.US?b="admin":a.target===this.VS?b="organize":a.target===this.TS&&(b="log");window.location.href=["/topic",this.Ii[1],b].join("/")};
z.e.wS=function(){var a=z.Zn(this.DA);if(a&&!a.r){var b=[];z.w(a,function(a){b.push(z.op(a,null,!0))});this.TT.innerHTML=b.join("")+'\x3cdiv class\x3d"zg-clear"\x3e\x3c/div\x3e';a.length&&z.P(z.I("zh-topic-side-related-topics-wrap"),!0)}};z.v(kN,z.Q);kN.prototype.B=function(){this.h=this.L().B("FORM",{method:"POST",style:"display:none"})};kN.prototype.post=function(a,b,c){var d=this.m();d||(this.render(),d=this.m());d.action=b||"";d.target=c||"";lN(this,d,a);d.submit()};z.v(pN,z.Rj);pN.prototype.init=function(){var a=z.Un(new z.oh(window.location.href),"group_id");a&&(this.gk=new z.Z(!1),this.o().Aa(this.gk,"success",this.mA),a&&this.gk.ajax("/noti7/read","group_id\x3d"+a,"POST"))};pN.prototype.mA=function(){var a=z.Zn(this.gk);if(a&&!a.r&&a.msg){var b=a.msg;if(!0===b||"true"===b||"True"===b)return;this.AR=a.msg;this.dispatchEvent("change")}(a=z.DG)&&z.Jw(a)};z.v(qN,z.Q);z.e=qN.prototype;z.e.init=function(){z.EG.K(this);this.w(window.document.body)};
z.e.C=function(){qN.v.C.call(this);tN(this);if(this.Nb=z.I("zh-list-meta-wrap"))this.o().g(this.Nb,"click",this.kp),z.Un(new z.oh(window.location.href),"fc")&&vN(this);var a=z.I("zh-favlists-wrap");a&&(new PM(a,null,"favlist",null,!0)).init();rN(this);(a=z.I("zh-favlist-log-list-wrap"))&&(new PM(a,null,"favlist",null,!0)).init();sN();if(a=z.I("zh-favlist-followers-wrap"))a=new PM(a,null,"people",["zg-btn-follow","zg-btn-unfollow"],!0),a.Di("zm-profile-section-item"),a.$B(!0),a.init();this.o().g(window,
"hashchange",this.UX);this.Ny();this.Yo=new pN;this.Yo.init()};z.e.IP=function(a){a=a.target;var b=a.id.split("-"),c=b[1],b=b[2];(new z.Z(!0)).ajax("/collection/remove","answer_id\x3d"+c+"\x26favlist_id\x3d"+b);if(b=z.uf(a,"div","zm-item"))a=z.Xp("zm-item-answer",b),1===a.length?z.N(b):(a=z.rb(a,function(a){return a.getAttribute("data-aid")===c}))&&z.N(a.parentNode)};z.e.YU=z.Or(function(){z.zy.aa().show(!0);z.yi("collect","click_add_collection_start","collections_sidebar_create_collection")},!0);
z.e.fB=function(a){this.dA?this.jb.U()?this.jb.G(!1):(this.jb.G(!0),a.stopPropagation(),a.preventDefault(),this.al()):(a.stopPropagation(),a.preventDefault(),this.Lj(),this.al());this.dA=!0};z.e.al=function(){this.o().Aa(window.document,"click",function(){this.jb.G(!1)})};z.e.Lj=function(){var a=z.I("zh-list-side-head");this.jb=new z.jy;this.vy=!0;this.visible||this.jb.Ga(this.XS=new z.ey("设置为公开"));this.jb.Ga(this.SS=new z.ey("删除此收藏夹"));this.vy&&(this.jb.render(a),this.o().g(this.jb,"action",this.Dj))};
z.e.kp=function(a){a=a.target;switch(a&&a.name){case "edit":z.Dy(z.zy.aa());break;case "addcomment":z.wi({category:"collect",action:"click_add_collection_comment_start",label:"collection_collection_name_add_collection_comment_start"});vN(this);this.va.Gf();this.va.wc()&&this.va.Ji("view_comments",(0,window.parseInt)(z.pf(a),10)||0);break;case "remove":uN(this)}};
z.e.Dj=function(a){a.target===this.XS?z.W.confirm("确定设置收藏夹为公开？","收藏夹设置为公开后，将不能再设置为私密。",function(a){a&&wN(this)},this):a.target===this.SS&&uN(this)};z.e.Ny=function(){var a=1,b=(0,window.$)("ul.hot-favlists"),c=null;(0,window.$)("#js-hot-fav-switch").click(function(){c&&"pending"===c.state()||(a=5<=a?1:a+1,c=nN(a).done(function(a){b.html(a)}))})};z.v(xN,z.Rj);
xN.prototype.init=function(){if(this.sk=z.I("zh-question-redirect-info"))this.sk.innerHTML&&(this.Mo=!0),this.o().g(this.sk,"click",function(a){"cancel"===a.target.name&&AN(this)});var a=z.I("zh-question-side-header-wrap");if(z.pm.rb&&!z.pm.NG&&a){var b=z.I("zh-question-filter-wrap");b?z.bf(a,b):a.style[z.A?"styleFloat":"cssFloat"]="none"}(this.ig=z.I("zh-question-operation-menu"))&&this.Lj();this.o().g(z.Hq,"anon_change",function(a){var b=z.I("zh-question-side-invitation-anon");b&&z.P(b,a.ob);(b=
z.I("zh-question-side-invitation-notanon"))&&z.P(b,!a.ob);this.lm&&this.lm.Wa(AM(this.data.jh)||!a.ob)})};
xN.prototype.Lj=function(){this.jb=new z.jy;var a=this.data.hn,b=this.ig.getAttribute("data-auth"),b=b?b.split(","):[];if(null==a||0===a)this.jb.Ga(this.Rt=zN("使用匿名身份",!1)),yN(this),z.om("question_op_redirect")||"close"===z.R.status||z.R.Ho||(this.jb.Ga(this.lm=zN(this.Mo?"撤消重定向":"问题重定向")),this.lm.Wa(AM(this.data.jh)||!this.data.ob)),z.x(b,"auth-f-manage")&&this.jb.Ga(this.WS=zN("更新话题页显示",!1)),this.o().g(this.jb,"action",this.Dj),this.Rt&&this.o().g(z.Hq,"anon_change",function(){yN(this)}),this.Ib&&
z.x(b,"auth-pu-mark")&&(this.jb.Ga(this.cA=zN("优质回答",!0)),this.cA.Mc(this.Ib.GQ)),a=new z.sy("Settings",this.jb),a.uk=!0,z.uy(a),a.w(this.ig)};
xN.prototype.Dj=function(a){if(a.target===this.Rt)z.Fq(this.data.ob?0:1);else if(a.target===this.lm){if(!1===z.tC({tp:!0})())return!1;this.up||(this.up=new z.mC(this.pa),this.o().g(this.up,"change",this.iR));this.jb.G(!1);this.Mo?AN(this):this.up.show()}else a.target===this.RS?(a=this.RS.tf()?"/unlock_summary":"/lock_summary",z.xq("/question/"+this.data.Xa+a,function(){window.top!==window?window.top.location.href="/question/"+z.R.Xa:window.location.reload()},"POST")):a.target===this.WS?window.$.post("/refresh_topic_feeds",
{q:z.R.Xa}).done(function(a){a.r||z.W.message("操作成功！")}):a.target===this.cA&&(a=this.cA.tf()?"/good_mark":"/good_unmark",window.$.post("/answer/"+this.Ib.Xa+a).done(function(a){a.r||z.W.message("操作成功！")}))};
xN.prototype.iR=function(){this.sk.innerHTML='\x3cdiv class\x3d"zg-wrap"\x3e\x3cdiv class\x3d"zu-global-nitify-inner"\x3e\x3cspan class\x3d"zu-global-notify-icon"\x3e\x3c/span\x3e此问题将跳转至 \x3ca href\x3d"/question/'+this.up.uu+'"\x3e'+this.up.FI+'\x3c/a\x3e（\x3ca href\x3d"javascript:;" name\x3d"cancel"\x3e撤消重定向\x3c/a\x3e）\x3c/div\x3e\x3c/div\x3e';z.P(this.sk,!0);this.Mo=!0;this.lm.Ip("撤消重定向")};z.v(BN,z.Q);BN.prototype.B=function(){BN.v.B.call(this);this.h=z.Xe(EP)};BN.prototype.C=function(){BN.v.C.call(this);this.Bd=(0,window.$)(this.m());this.Fm=z.ct("answer",this.eD);var a=z.aw(window.location.protocol+"//"+window.location.hostname+"/question/"+this.KT+"/answer/"+this.eD);(0,window.$)(".js-qrcode-image",this.Bd).attr("src",a);this.Rb()};
BN.prototype.Rb=function(){var a=this;(0,window.$)("button.weibo",this.Bd).click(function(){a.Fm.done(function(a){a.r||(z.eB(a.msg.sina),z.yi("share","click_share_answer_to_weibo_start","answer_box_after_submit_answer"))})})};var EP='\x3cdiv class\x3d"answer-share-tip"\x3e分享我的回答到\x3cbutton class\x3d"wechat hidden-phone"\x3e\x3cdiv class\x3d"qr-code"\x3e扫描二维码\x3cimg class\x3d"js-qrcode-image" alt\x3d"微信分享二维码"\x3e\x3c/div\x3e\x3cspan class\x3d"ico z-ico-wechat"\x3e\x3c/span\x3e微信\x3c/button\x3e\x3cbutton class\x3d"weibo"\x3e\x3cspan class\x3d"ico z-ico-weibo"\x3e\x3c/span\x3e微博\x3c/button\x3e\x3c/div\x3e';z.v(CN,z.sv);var FN=[{value:"精简文字描述",label:"精简文字描述"},{value:"补充必要的信息",label:"补充必要的信息"},{value:"改进标点或格式",label:"改进标点或格式"},{value:"other",label:"其他"}];z.e=CN.prototype;z.e.w=function(a){CN.v.w.call(this,a);this.o().g(z.Hq,"anon_change",this.Aj)};z.e.Aj=function(a){this.dz||z.V.enable(this.h,"zm-editable-disabled",a.ob)};
z.e.hl=function(){CN.v.hl.call(this);this.AA=z.M("div",{"class":"zm-editable-require-reason-wrap",style:"padding:10px 0 0 0"},[z.M("a",{"class":"zg-right zg-link-litblue",href:"/question/19550238/answer/12202028",target:"_blank"},"为什么问题可以被公共编辑？"),EN(),this.rH=z.M("span"),this.MT=z.M("div",{"class":"zg-form-text-input",style:"height:22px;margin:10px 0 0 0;display:none"},this.LT=z.M("textarea",{style:"width:100%;height:22px !important;min-height:22px !important;"}))]);z.bf(this.AA,this.tc);this.Bp&&
GN(this," * 必选","zg-gray-normal");var a=z.Me(window.document,"select",null,this.AA)[0];this.o().g(a,"change",function(){z.P(this.MT,"other"===a.value);GN(this," * 必选","zg-gray-normal")})};
z.e.hh=function(a){var b=z.Me(window.document,"select",null,this.AA)[0],c=b.value;if(this.Bp){if("none"===c){GN(this,"请选择一个修改理由");return}if("other"===b.value&&(c=z.Ao(this.LT.value),!c)){GN(this,"请填写修改理由");return}}"title"===this.Hr&&-1===a.indexOf("?")&&-1===a.indexOf("？")?GN(this,"还没有输入问号"):("none"===c&&(c=""),this.params=["id\x3d"+this.pa+"\x26reason\x3d"+(0,window.encodeURIComponent)(c)+"\x26question_id\x3d"+this.pa],this.dispatchEvent("change"),CN.v.hh.call(this,a),GN(this,"* 必选","zg-gray-normal"),
this.Bp=!0)};z.e.Zf=function(){return this.Id&&this.eT?(0,z.hn)(z.uq(this.Ma.value)):CN.v.Zf.call(this)};z.e.Mg=function(){(0,window.$)(window).on("beforeunload.EditorWithReason",(0,z.q)(function(){return"你对问题的修改还未保存，确认离开该页面吗？"},this))};z.e.Yh=function(){(0,window.$)(window).off("beforeunload.EditorWithReason")};z.e.Gi=function(){CN.v.Gi.call(this);this.Yh()};z.e.qg=function(){CN.v.qg.call(this);this.Mg()};z.v(HN,z.Q);HN.prototype.K=function(a,b){HN.v.K.call(this,a,b);this.o().g(a,"beforeexpand",this.FP)};HN.prototype.FP=function(a){var b=a.target;z.ch(this,function(a){b!==a&&a.wc()&&a.Nc(!1)})};HN.prototype.H=function(){this.o().H();HN.v.H.call(this)};z.v(IN,z.U);IN.prototype.C=function(){IN.v.C.call(this);z.Nj(this,490);(0,window.$)(this.m()).addClass("user-guiding-dialog")};z.v(MN,z.Q);z.e=MN.prototype;z.e.B=function(){MN.v.B.call(this);this.h=z.M("div",{className:"question-invite-panel"})};z.e.C=function(){MN.v.C.call(this);this.X=(0,window.$)(this.m())};z.e.D=function(){MN.v.D.call(this);this.Z&&this.Z.H();delete this.Z;delete this.Vl;delete this.Qj};z.e.wc=function(){return this.mb};z.e.Gf=function(){this.Nc(!this.mb)};
z.e.Nc=function(a){a!==this.wc()&&(this.dispatchEvent(a?"beforeexpand":"beforecollapse"),a&&!this.xc&&NN(this),this.mb=a,this.X.toggle(a),this.dispatchEvent(a?"expand":"collapse"))};
z.e.Jy=function(a){var b=this,c=(0,z.jn)(FP),d=new z.Ss(a,{Le:20,source:"/question/ac/invite-people?question_token\x3d"+this.qp,vk:this.m(),placeholder:"搜索你想邀请的人",ud:function(a,b,d){d.innerHTML=c(a.data)},filter:function(a){return z.nb(a,function(a){return!SN(b,a.member_hash)})},select:function(){return""},format:function(a){return a}});d.Ai=function(){return!1};var f=d.M;f.className="suggest-persons search";f.mh="person";f.sh(!1);var g=(0,window.$)(".suggest-persons-wrapper",this.h),h=z.Kj(function(){(0,window.$)(f.m()).on("click",
"button",window.$.proxy(b.FF,b))}),k=(0,window.$)(".invite-title .spinner-gray");(0,window.$)(".search-input",this.h).on("input",function(){k.css("display","inline-block")});d.addEventListener("show",function(){k.hide();var a=f.m();g.hide();(0,window.$)(".no-result-tips",b.h).remove();var c=(0,window.$)(".person",a);5<c.length&&(c.hide().slice(0,5).show(),(0,window.$)('\x3ca class\x3d"js-more" href\x3d"#"\x3e更多搜索结果\x3c/a\x3e').appendTo(a).one("click",function(){c.show();(0,window.$)(this).remove();
return!1}));h()});d.addEventListener("hide",function(){k.hide();a.value.length?(0,window.$)(".no-result-tips",b.h).length||(g.hide(),(0,window.$)('\x3cspan class\x3d"no-result-tips"\x3e没有找到你想邀请的人\x3c/span\x3e').appendTo(b.h)):(g.show(),(0,window.$)(".no-result-tips",b.h).remove())});d.addEventListener("dismiss",function(){(0,window.$)(".no-result-tips",b.h).remove();g.show()});this.Z=d};z.e.MR=function(){this.wc()?(this.Z&&this.Z.H(),NN(this)):this.xc=!1};z.e.BO=function(){z.Fq(0)};
z.e.FF=z.Or(function(a){var b=a.target,c=this.tI((0,window.$)(b).parents(".person"));this.Vl&&"pending"===this.Vl.state()&&this.Vl.abort();a=b.getAttribute("data-type");var d=z.V.has(b,this.yG),f=(0,z.q)(function(a){a?(UN(this,b,!0),this.Qj.unshift(c),WN(this),TN(this,c.id,!0),this.QM()):(UN(this,b,!1),VN(this,c.id),TN(this,c.id,!1))},this);d?(this.Vl=zM(this.qp,c.id),f(!1)):(this.Vl=window.$.post("/question/askpeople",{qid:this.qp,uid:c.id,_source_type:a,op:"add"}).done(function(a){a.r&&(z.W.message(a.msg),
f(!1))}),f(!0),RN(this,a))},!0);z.e.CO=function(a){a=a.target.getAttribute("data-uid");zM(this.qp,a);TN(this,a,!1);VN(this,a)};z.e.QM=z.Kj(function(){z.S.jh&&window.$.post("/question/popup",{action:"invite",question_token:this.qp},function(a){a&&LN(new IN,a)})});z.e.tI=function(a){var b=(0,window.$)(".zm-item-link-avatar",a),c=(0,window.$)(".zg-link",a);return{id:String((0,window.$)("button",a).data("uid")),avatar:(0,window.$)("img",b).attr("src"),fullname:c.text(),url_token:b.attr("href").split("/").slice(-1)[0]}};
var ON='\x3ci class\x3d"icon icon-spike"\x3e\x3c/i\x3e\x3cdiv class\x3d"spinner"\x3e正在加载，请稍等 \x3ci class\x3d"spinner-gray"\x3e\x3c/i\x3e\x3c/div\x3e',YN='你已邀请 \x3cspan class\x3d"invited-shortlist"\x3e\x3c% helper.each(persons.slice(0, 2), function(person, i, sliced) { %\x3e\x3ca href\x3d"/people/\x3c%\x3dperson.url_token%\x3e" class\x3d"zg-link-gray" target\x3d"_blank"\x3e\x3c%\x3dperson.fullname%\x3e\x3c/a\x3e\x3c%\x3d i !\x3d\x3d sliced.length - 1 ? "、" : ""%\x3e\x3c% }); %\x3e\x3c%\x3dhelper.fullList()%\x3e\x3c/span\x3e\x3c% if (persons.length \x3e 2) { %\x3e 等 \x3c%\x3dpersons.length%\x3e 人 \x3c% } %\x3e\x3c% if (persons.length \x3c maxInvites) { %\x3e ，还可以邀请 \x3c%\x3dmaxInvites - persons.length%\x3e 人\x3c% } %\x3e',
XN='\x3cdiv class\x3d"invited-hovercard"\x3e\x3ci class\x3d"icon icon-spike"\x3e\x3c/i\x3e\x3cul class\x3d"invited-fulllist"\x3e\x3c% helper.each(persons, function(person, i) { %\x3e\x3cli\x3e\x3ca title\x3d"\x3c%-person.fullname%\x3e" class\x3d"zm-item-link-avatar" href\x3d"/people/\x3c%\x3dperson.url_token%\x3e" target\x3d"_blank"\x3e\x3cimg src\x3d"\x3c%\x3dperson.avatar%\x3e" class\x3d"zm-item-img-avatar"\x3e\x3c/a\x3e\x3ca href\x3d"/people/\x3c%\x3dperson.url_token%\x3e" class\x3d"zg-link-gray" title\x3d"\x3c%-person.fullname%\x3e" target\x3d"_blank"\x3e\x3c%\x3dperson.fullname%\x3e\x3c/a\x3e\x3cbutton class\x3d"cancel-button zg-link-btn zg-link-gray" data-uid\x3d"\x3c%\x3dperson.id%\x3e"\x3e收回邀请\x3c/button\x3e\x3c/li\x3e\x3c% }) %\x3e\x3c/ul\x3e\x3c/div\x3e',
FP='\x3ca data-tip\x3d"p$t$\x3c%\x3durl_token%\x3e" class\x3d"zm-item-link-avatar" href\x3d"/people/\x3c%\x3durl_token%\x3e" title\x3d"\x3c%\x3dfullname%\x3e" target\x3d"_blank"\x3e\x3cimg src\x3d"\x3c%\x3davatar_path%\x3e" class\x3d"zm-item-img-avatar"\x3e\x3c/a\x3e\x3cdiv class\x3d"content"\x3e\x3cbutton class\x3d"invite-button zg-btn zg-btn-green" data-uid\x3d"\x3c%\x3dmember_hash%\x3e" data-type\x3d"search"\x3e邀请回答\x3c/button\x3e\x3cdiv class\x3d"describe"\x3e\x3ca data-tip\x3d"p$t$\x3c%\x3durl_token%\x3e" href\x3d"/people/\x3c%\x3durl_token%\x3e" class\x3d"zg-link" target\x3d"_blank"\x3e\x3c%\x3dhighlighted_fullname%\x3e\x3c/a\x3e\x3c% if(headline) { %\x3e ，\x3cspan class\x3d"bio" title\x3d"\x3c%-headline%\x3e"\x3e\x3c%\x3dhighlighted_headline%\x3e\x3c/span\x3e \x3c% } %\x3e\x3c/div\x3e\x3cdiv class\x3d"reason"\x3e\x3c% if (detailed_info) {%\x3e \x3c%\x3ddetailed_info%\x3e\x3c% } %\x3e\x3c% if (topic["answer_num"]) {%\x3e在 \x3ca href\x3d"/people/\x3c%\x3durl_token%\x3e/topic/\x3c%\x3dtopic["url_token"]%\x3e/answers" data-tip\x3d"t$b$\x3c%\x3dtopic["url_token"]%\x3e" data-token\x3d"\x3c%\x3dtopic["url_token"]%\x3e" data-topicid\x3d"\x3c%\x3dtopic["id"]%\x3e" target\x3d"_blank"\x3e \x3c%\x3dtopic["name"]%\x3e \x3c/a\x3e 话题下有 \x3c%\x3dtopic["answer_num"]%\x3e 个回答 \x3c% } %\x3e\x3c/div\x3e\x3c/div\x3e';z.v(ZN,z.Q);z.e=ZN.prototype;z.e.C=function(){ZN.v.C.call(this);this.o().g(this.h,"click",this.kp);$N(this);this.o().g(this,"click!",function(a){"comment"===a.namespace&&a.Ac.fill("label","question")});this.g("trackRequested",function(a){a.label="question_box";z.wi(a)})};z.e.Mj=function(){var a=this.h.querySelector("a[name\x3dreport-question]");if(a){var b=this;a.addEventListener("click",function(){(new z.Oz({type:"question",id:b.data.pa})).render()})}};
z.e.Nj=function(){var a=(0,window.$)('a[name\x3d"share"]',this.m()).get(0);a&&z.fB(a,"question",this.data.Xa,window.location.protocol+"//"+window.location.host+"/question/"+this.data.Xa).Hb(this)};
z.e.kp=function(a){var b=(a=z.gp(this.h,a.target))&&a.name;if(b)switch(b){case "addcomment":"添加评论"===window.$.trim((0,window.$)(a).text())?z.Or(this.qs).call(this,a):this.qs(a);break;case "remove":cO(this);break;case "admin":bO(this,a);break;case "invite":this.Yy.Gf(),this.dispatchEvent(new z.Iz("click!invitation",{category:"invitation",action:(this.Yy.wc()?"show":"hide")+"_ask_to_answer_card",label:"?",value:this.data.ve}))}};
z.e.qs=function(a){this.va.Gf();this.va.wc()&&this.va.Ji("view_comments",(0,window.parseInt)(z.pf(a),10)||0)};z.e.fN=function(a){this.OC.W(a.msg.action);this.OC.Ip(a.msg.caption)};z.v(dO,z.iF);dO.prototype.w=function(a){var b=this;dO.v.w.call(this,a);this.Me&&this.Bu(this.Fr.ob);this.g("trackRequested",function(a){a.label="answer_box";a.value=(0,window.$)(b.h).index(".zm-item-answer")+1;z.wi(a)})};dO.prototype.U=function(){return(0,window.$)(this.h).is(":visible")};z.v(eO,z.Q);z.e=eO.prototype;z.e.init=function(){z.EG.K(this);this.w(window.document.body)};z.e.C=function(){eO.v.C.call(this);this.Ry();gO(this);this.Yo=new pN;this.o().g(this.Yo,"change",this.mA);this.Yo.init();this.sJ();var a=z.I("zh-question-meta-wrap");a&&(this.gu=new ZN(this.data),this.K(this.gu),this.gu.w(a),this.gu.Hb(this));fO(this);(a=z.qm.topic_errors_info)&&z.Rn(a)};
z.e.sJ=function(){this.data.Xa=z.R.Xa;this.Ao(!0);z.S.lb()&&(hO(this),iO(this));oO(this);(this.Ew=z.I("zg-question-suggested-topics"))&&this.o().g(this.Ew,"click",this.JR);this.zo();this.o().g(window,"hashchange",function(a){a=a.jc;a.oldURL&&"writing"===a.oldURL.split("#")[1]||sO(this)});lO(this);rO(this);nO(this);sO(this,null);kO(this);z.em&&(0,window.setTimeout)(function(){window.location.href=z.em},5E3)};
z.e.Ry=function(){(0,z.oB)("question",this.data.Xa,"read");this.o().g(this,["click!","show!"],function(a){"comment"===a.namespace&&a.Ac.fill("category","question_answer").fill("label","question_answer");"invitation"===a.namespace&&a.Ac.fill("label","question_page")})};z.e.mA=function(){this.QP=!0;this.Dk=(0,window.$)(this.Yo.AR)[0];z.cf(this.Dk,z.L("zu-top"));z.P(this.Dk,!0);z.pm.rb||(this.sj=new z.Lu,this.sj.w(this.Dk),nM(this.sj));this.o().g(this.Dk,"click",this.CF);sO(this)};
z.e.Ao=function(a){z.S.lb()&&a?jO(this,this.gQ):jO(this,z.p)};
z.e.gQ=function(a){"close"===z.R.status||z.R.Ho||(a=a.target.m(),this.Pb=new CN(this.data.pa,"/question/detail","content",!0,null,600),DN(this.Pb,AM(this.data.jh)),z.L("zm-editable-content",a).innerHTML&&(this.Pb.Bp=!0),this.Pb.w(a),this.o().g(this.Pb,"click_edit",function(){z.X.fb("ga_question_supplement_edit_start")}),this.o().g(this.Pb,"cancel_edit",function(){z.X.fb("ga_question_supplement_edit_cancel")}),this.o().g(this.Pb,"save_changed",function(){z.X.fb("ga_question_supplement_edit_save_changed")}),
this.o().g(this.Pb,"save_unchanged",function(){z.X.fb("ga_question_supplement_edit_save_unchanged")}),this.Pb.addEventListener("beforeedit",z.tC({tp:!0})))};
z.e.CF=function(a){if("close"===a.target.name){if(this.sj&&(z.Ou(this.sj),z.Nu(this.sj,!1),window.history.replaceState)){a=new z.oh(window.location.href);var b=a.Jd();b.remove("q");b.remove("psq");window.history.replaceState({},"",a.Ne+"?"+b.toString())}z.P(this.Dk,!1);z.P(this.hu,!1)}else if("A"===a.target.tagName&&"zh-question-suggest-reask"===a.target.id&&(z.P(this.hu,!1),z.xv.aa().show()),b="a"===(0,window.$)(a.target).prop("tagName").toLowerCase()?a.target:this.Vf(a.target,"A"))a.preventDefault(),
a.stopPropagation(),a=b.getAttribute("data-source")||b.href,b=a.indexOf("#"),a=0>b?null:a.substr(b+1),sO(this,a?(0,window.decodeURIComponent)(a):a)};z.e.pP=function(){var a=this.hM,b=a.m(),c=a.ue.Ua()[0];z.P(b,!1);c=z.Xe((0,z.bb)(c));z.bf(c,b);this.Xi[a.sa]=null;this.Vq=z.nb(this.Vq,function(b){return b!==a.sa},this);var d=999;this.cw=z.nb(this.cw,function(b){b.aid===a.sa&&(d=b.vote);return b.aid!==a.sa},this);z.N(b);a.H();mO(this,c,d)};
z.e.Tz=function(a){a=a.target;if(a instanceof dO){var b=a.m();switch(a.Iv){case "collap":this.yn.appendChild(b);z.V.add(b,"zm-item-collapsed");this.data.ve--;kO(this);break;case "cancel_collap":this.Xq.appendChild(b);z.V.remove(b,"zm-item-collapsed");tO(this,b);this.data.ve++;kO(this);break;case "set_delete":nO(this);this.data.ve--;kO(this);break;case "cancel_delete":tO(this,this.Xi[this.ri].m()),nO(this),this.data.ve++,kO(this)}}};z.e.kF=function(a){return this.Xi[a]};
z.e.mV=function(a){(a=z.gp(this.Rh,a.target))&&a.name&&("expand"===a.name?(this.aN||qO(this),pO(this,!0)):pO(this,!1))};z.e.VR=function(){var a=this.Xi[this.ri],b;a?(mM(a),tO(this,a.m())):(b=this.fk,a=new z.Z(!0),this.o().Aa(a,"success",function(){window.location.href="/question/"+z.R.Xa+"/answer/"+b.url_token}),a.ajax("/answer/unremove","aid\x3d"+b.id))};
z.e.KR=function(){var a=this.xb,b=a.Uq.checked,c=Number(!a.bE.checked),a={modal:!0,title:"确认放弃匿名身份？",content:"你在该问题下的赞同和关注行为将以实名显示。"},d=(0,z.q)(function(){if(!this.xhr||!this.xhr.bc()){var a=this.xb.Zf();if(a){var d=new z.Z(!0),h=new z.uh,k=b?1:0;h.add("id",this.pa).add("content",a).add("anon",k).add("copyable",c);d.on("success",function(){z.R.ob!==k&&(z.R.ob=k,z.Hq.dispatchEvent(new z.Gq(k)));var a=z.Zn(this.xhr);a?a.r?z.W.alert(a.msg):(a=z.Xe((0,z.bb)(a.msg[0])),this.Xq.appendChild(a),mO(this,a,
this.Vq.length),z.kp(a),nO(this),z.DE(this.xb.HE),z.GE(this.xb.HE),this.xb.H(),z.R.ob||(new BN(this.data.Xa,this.Xi[this.ri].Xa)).render((0,window.$)(".zu-main-content-inner").get(0)),this.data.ve++,kO(this)):z.W.message("网络异常")},!1,this);d.ajax("/answer/add",h.toString());this.xhr=d}}},this);z.R.ob&&!b?z.W.confirm(a,function(a){a&&d()}):d()};z.e.Vf=function(){};
z.e.JR=function(a){if((a=this.Vf(a.target))&&a.name){var b=a.name;"close"===b?z.P(this.Ew,!1):"addtag"===b&&(this.Oa.Xe(a.id.split("-")[1],a.innerHTML),z.P(a,!1))}};z.e.zo=function(){this.iB=new xN(this.pa);this.iB.init()};z.v(uO,eO);z.e=uO.prototype;z.e.sJ=function(){(this.Nr=z.I("zh-single-answer-disable-wrap"))&&this.o().g(this.Nr,"click",this.mU);this.Vs();this.zo();xO();this.Ao(!1);var a=(0,window.$)("#zh-question-answer-collections \x3e .zh-general-list").get(0);if(a){var b=new z.zl({use:["autoload","nodeSource"]});this.K(b);b.w(a)}vO(this)};z.e.Ry=function(){this.o().g(this,["click!","show!"],function(a){"invitation"===a.namespace&&a.Ac.fill("label","answer_page")});uO.v.Ry.call(this)};
z.e.mU=function(a){a.target&&a.target.name&&mM(this.Ib)};z.e.Vs=function(){var a=z.L("zm-item-answer",z.I("zh-question-answer-wrap"));if(a){this.Ib=new dO({pa:this.pa,yE:!0});this.K(this.Ib);this.Ib.w(a);a=this.o();a.g(this.Ib,"change",this.Tz);if(this.Ib.Me){a.g(z.Hq,"anon_change",function(a){wO(this,a.ob)});var b=this.Ib.ue;b&&a.g(b,"change",function(){var a=(0,z.bb)(b.Ua()[0]),a=z.Xe(a);z.Wp(a,this.Ib.h);this.Ib.H();this.Vs(a)})}yO(this);this.Ib.sg();this.Ib.va.nD=!1}};
z.e.kF=function(a){if(this.Ib.sa===a)return this.Ib};z.e.sM='\x3ch3\x3e关于作者\x3c/h3\x3e\x3c% if (author) { %\x3e\x3ca class\x3d"zm-list-avatar-link" href\x3d"/people/\x3c%\x3d author.url_token %\x3e" tabindex\x3d"-1"\x3e\x3cimg class\x3d"zm-list-avatar-medium" src\x3d"\x3c%\x3d author.avatar_path.replace("_s.","_m.") %\x3e"/\x3e\x3c/a\x3e\x3cdiv class\x3d"zm-list-content-medium"\x3e\x3ch2 class\x3d"zm-list-content-title"\x3e\x3ca href\x3d"/people/\x3c%\x3d author.url_token %\x3e"\x3e\x3c%\x3d author.fullname %\x3e\x3c/a\x3e\x3c/h2\x3e\x3cdiv class\x3d"zg-gray-normal"\x3e\x3c%\x3d author.headline || "" %\x3e\x3c/div\x3e\x3c/div\x3e\x3c% } else { %\x3e\x3ca class\x3d"zm-list-avatar-link" href\x3d"javascript:;"\x3e\x3cimg class\x3d"zm-list-avatar-medium" src\x3d"http://img.zhihu.dev:4080/66/6b/666b0abfc_m.jpg"/\x3e\x3c/a\x3e\x3cdiv class\x3d"zm-list-content-medium"\x3e\x3ch2 class\x3d"zm-list-content-title"\x3e匿名用户\x3c/h2\x3e\x3c/div\x3e\x3c% } %\x3e';
z.e.zo=function(){this.iB=new xN(this.pa,this.Ib);this.iB.init();var a=z.I("js-sidebar-author-info");a&&(new QM(a)).init()};z.e.Tz=function(a){a=a.target;if(a instanceof dO)switch(a.Iv){case "collap":z.V.add(a.m(),"zm-item-collapsed");break;case "cancel_collap":z.V.remove(a.m(),"zm-item-collapsed");break;case "set_delete":case "cancel_delete":yO(this),window.location.reload()}};z.ja(zO,z.Q);zO.prototype.C=function(){z.Q.prototype.C.call(this);this.wb=(0,window.$)(this.m());this.Gq=this.wb.find(".js-pager");this.$a=this.wb.find(".js-list");this.MK=this.wb.find(".js-hidden-list");this.Ix=(this.wJ=!!this.wb.closest(".zu-main-sidebar").length)?"zg-follow":"zg-btn-follow";this.OV=this.wJ?"zg-unfollow":"zg-btn-unfollow";AO(this);DO(this)};var EO="follow_topic",FO="unfollow_topic",BO=6;z.ja(GO,z.Q);z.e=GO.prototype;z.e.init=function(){this.w((0,window.$)(".js-topic-feed-page")[0])};
z.e.C=function(){z.Q.prototype.C.call(this);this.wb=(0,window.$)(this.m());this.DQ=!this.wb.find(IO).length;this.Gh=this.wb.find(".js-topic-cat-main");this.Ym=this.wb.find(".js-topic-title");this.Dq=this.wb.find(".js-feed-switcher");var a=(0,window.$)(".topic-recommend");if(a.length){var b=new zO;b.w(a[0]);this.o().g(b,EO,this.aP).g(b,FO,this.JP)}this.$a=this.wb.find(".zh-general-list");this.$a.length&&RO(this);HO(this);LO(this);this.Bo()};
z.e.UF=function(a){var b=(0,window.decodeURIComponent)(window.location.hash.slice(1)),c=this.Gh.find(IO),b=QO(c,b);!b.length&&a.data?(b=c.eq(0),this.wb.find(IO+"."+GP).removeClass(GP),b.addClass(GP),this.Ym.show(),this.VC(),window.location.hash=""):b.length&&(a=b.data("id"),this.$a.hide(),this.Ym.hide(),c=b,this.wb.find(IO+"."+GP).removeClass(GP),c.addClass(GP),c=this.Dq.find("a"),c.removeClass(MO),c.eq(0).addClass(MO),NO(this,a),SO(this,a,b))};
z.e.aP=function(a){OO(this,1);a=a.data;this.Gh.find(".zm-topic-cat-more").length||this.Gh.append(KO(this,a))};z.e.JP=function(a){OO(this,-1);this.Gh.find('li[data-id\x3d"'+a.data.id+'"]').remove()};z.e.VC=function(){if(!this.$a.show().children().length)return this.$a.html('\x3cp class\x3d"zg-gray-normal" style\x3d"text-align:center;line-height:4;"\x3e该话题暂无动态\x3c/p\x3e')};
z.e.Bo=function(){function a(a,c){var d={action:a,category:"topic"};c&&(d.attributes=c);z.wi(d)}this.wb.on("click",".js-topic-cat-main .zm-topic-cat-item",function(b){a("click_topic",{topic_id:(0,window.$)(b.currentTarget).data("id")})}).on("click",".topic-recommend .zg-follow",function(){a("click_follow_topic")}).on("click",".topic-recommend .js-pager",function(){a("click_change_topics")}).on("click",".js-topic-more a",function(){a("click_expand")}).on("click",".js-topic-all a",function(){a("click_read_more")})};
var GP="current",MO="current",IO=".zm-topic-cat-item",JO=100,TO='\x3cli class\x3d"zm-topic-cat-item" data-id\x3d"\x3c%\x3d id %\x3e" data-href\x3d"/topic/\x3c%\x3d url_token %\x3e"\x3e\x3ca href\x3d"#\x3c%\x3d name %\x3e"\x3e\x3c%\x3d name %\x3e\x3c/a\x3e\x3c/li\x3e';z.v(UO,z.Q);UO.prototype.init=function(){z.EG.K(this);this.w(window.document.body)};UO.prototype.C=function(){UO.v.C.call(this);this.Oy("zh-question-followers-list-wrap")};UO.prototype.Oy=function(a){if(a=z.I(a)){var b=new z.zl;this.K(b);b.use("locationSource");b.w(a)}};z.v(VO,z.Q);VO.prototype.init=function(){z.EG.K(this);this.w(window.document.body);this.Ws();XO(this);YO(this);WO()};
VO.prototype.Ws=function(){function a(a){if((0,window.$)(a).hasClass("article-item"))return new VO.prototype.Zm;var b=new z.Q;(0,window.$)(".answer-item",a).each(function(){var a=new z.mB.prototype.Sk;a.cm="actions";a.Ik="zm-votebar";a.On="z-icon-fold";a.$p="sprite-global-icon-fold-white";b.K(a);a.w(this)});return b}var b=this;(0,window.$)("[data-paging]").each(function(){var c=new z.zl({use:["dataPagingSource"]});c.use("childConstructor",{factory:a});var d=(0,window.$)(this).data("navigable");d&&
c.use("shortcut",d);b.K(c);c.w(this)})};VO.prototype.Zm=function(){z.$D.call(this);this.Og="entry-expaneded";this.cm="actions";this.Ik="zm-votebar";this.On="z-icon-fold";this.$p="sprite-global-icon-fold-white"};z.v(VO.prototype.Zm,z.$D);
VO.prototype.Zm.prototype.Ao=function(){var a=new z.jB({yr:"post-content",BB:"script.content"});this.K(a);a.w(this.h);this.g("expandRequest",(0,z.q)(this.expand,this));this.g("expand",function(b){b.target===b.currentTarget&&a.expand()});this.g("collapse",function(b){b.target===b.currentTarget&&a.collapse()})};
VO.prototype.Zm.prototype.Co=function(){var a,b,c=(0,window.$)("."+this.Ik,this.m())[0];c&&(a=new z.UD(this.Ab,this.entryType),this.K(a),z.Bc(this,a),a.w(c),(c=(0,window.$)(".js-mobi-vote",this.m())[0])&&(new z.YD(a)).w(c));if(c=(0,window.$)(".zm-item-vote-info",this.m())[0])b=new z.vE(this.Ab,this.entryType),this.K(b),z.Bc(this,b),b.w(c);a&&b&&this.o().g(a,"change",function(){z.yE(b)}).g(b,"change",function(){(0,window.$)("[data-bind-votecount]",this.m()).text(b.ib())})};
VO.prototype.Zm.prototype.sG=z.p;var hP=(0,window.$)("#is-topstory").length?"topstory2":"homefeed",$O=z.A&&!z.D(9),cP={ac:"actioncard",q:"question",a:"answer",p:"article",c:"column",r:"roundtable"},eP={question:"question",answer:"question",article:"column",column:"column",roundtable:"roundtable"},fP={question:"question",answer:"question",article:"article",column:"column",roundtable:"roundtable"};ZO.prototype.Rb=function(){this.uC=(0,window.$)('meta[itemprop\x3d"ZReactor"]',this.Fh);this.uC.length&&(bP(this),this.hQ())};
ZO.prototype.wT=function(){var a=[],b=z.$o(550,function(){a.length&&(aP(a),a=[])});return function(c){a.push(c);b()}}();
ZO.prototype.hQ=z.Kj(function(){z.E(z.X,"click_feed_fresh",function(a){aP({mid:z.qm.ga_vars.user_hash,object_type:"btn",object_id:2,object_meta:{load_items:a.data.count},action_type:"click",context:hP,others:"",time:(0,z.G)()})});z.E(z.X,"topstory_feed_more",function(){aP({mid:z.qm.ga_vars.user_hash,object_type:"btn",object_id:1,object_meta:{next:(0,window.$)("#js-home-feed-list .feed-item").length+1},action_type:"click",context:hP,others:"",time:(0,z.G)()})})});z.v(iP,z.aC);iP.prototype.ik=function(a){a&&!a.r&&(a=a.msg,a.length?(z.P(this.Nd,0<a.length),this.offset+=a.length,this.Zq(a),z.bC(this,!1),z.eC(this)):this.Pk.hide())};var HP={ROUNDTABLE_ADD_RELATED:"roundtable",ARTICLE_VOTE_UP:"post_vote",ARTICLE_CREATE:"post_create",RECOMMENDED:"feed_recommended",QUESTION_FOLLOW:"feed_question_follow",QUESTION_CREATE:"feed_question",ANSWER_VOTE_UP:"feed_answer_vote",ANSWER_CREATE:"feed_answer_answer"};
iP.prototype.HP=function(a){var b=a.currentTarget.h.getAttribute("data-feedtype"),b=HP[b];"comment"===a.namespace&&b&&a.Ac.fill("category","feed").fill("label",b)};iP.prototype.gp=function(a){var b=z.NF(a);this.K(b);this.o().g(b,"click!",this.HP);b.w(a);new ZO(b);return b};iP.prototype.xI=function(a){return{params:a,method:"next"}};z.ja(jP,z.Q);jP.prototype.C=function(){z.Q.prototype.C.call(this);this.Ur=this.m();this.Bd=(0,window.$)(this.Ur);kP(this);this.Wm=(0,window.$)("#zh-main-feed-fresh-button");this.Wm.length&&(this.Wm.click(window.$.proxy(this.RT,this)),this.MQ?this.o().g(z.X,"topstory2",this.AH):this.o().g(z.X,"homefeed",this.AH));mP(this);nP(this)};jP.prototype.AH=function(a){if(a=(0,window.parseInt)(a.zf,10))this.gm+=a,this.Wm.text((99<this.gm?"99+":this.gm)+" 条新动态").show()};
jP.prototype.RT=function(){this.Wm.text("加载中…");var a=this.gm,b=this;this.Dt.offset=a;this.Dt.Fi="live";z.dC(this.Dt,!0,null,function(c){b.Wm.hide();b.gm=0;if(c&&c.msg.length){b.rv||(b.rv=(0,window.$)('\x3cdiv class\x3d"feed-item-hook feed-divider"\x3e\x3cspan\x3e上次你看到这里\x3c/span\x3e\x3c/div\x3e'));var d=(0,window.$)("."+b.YE,b.Bd).eq(0);d.length&&3<=a?b.rv.insertBefore(d):b.rv.remove();b.Dt.Zq(c.msg,"prepend")}})};z.v(oP,z.Rj);oP.prototype.init=function(){var a=z.I("home-suggest-block");a&&(this.h=a,a=z.I("home-suggest-close-button"),this.o().Aa(a,"click",function(){(new z.Z(!0)).ajax("/option","key\x3dno_show_lookup\x26value\x3d1");z.P(this.h,!1)}),a=z.I("home-suggest-refresh-button"),this.o().g(a,"click",this.vS),this.ut=z.I("home-suggest-list"),rP(this))};oP.prototype.vS=function(){pP(this);return!0};
oP.prototype.YR=function(a){a.r||((a=a.msg)&&z.na(a)&&a.length?(this.zy=[],this.rE=a,pP(this)):this.ut.innerHTML="")};z.la(sP);z.v(vP,z.Q);vP.prototype.init=function(){z.EG.K(this);this.w(window.document.body)};vP.prototype.C=function(){vP.v.C.call(this);z.Or(z.p,{Jt:!0})();var a=z.I("js-home-feed-list");if(a){var b=new jP;this.K(b);b.w(a)}z.I("home-settings-page-wrap")&&(a=z.I("zh-topic-block-editor"))&&(new z.tt(z.km)).w(a);(new oP).init();wP();a=sP.aa();tP(a)};z.v(xP,z.Q);xP.prototype.init=function(){z.EG.K(this);this.w(window.document.body)};xP.prototype.C=function(){xP.v.C.call(this);var a=(0,window.$)("#zh-following-question-item-list").children(".zh-general-list");if(a.length){var b=new z.zl;this.K(b);b.use("nodeSource");b.w(a.get(0))}};z.v(yP,z.Q);yP.prototype.init=function(){z.EG.K(this);this.w(window.document.body)};yP.prototype.C=function(){yP.v.C.call(this);zP(this);this.Ny();BP(this);CP();this.o().g(this,"click!",function(a){"comment"===a.namespace&&a.Ac.fill("category",this.ih).fill("label",this.WN)})};
yP.prototype.Ny=function(){var a=1,b=(0,window.$)("ul.hot-favlists"),c=null;(0,window.$)("#js-hot-fav-switch").click(function(){c&&"pending"===c.state()||(a=5<=a?1:a+1,c=nN(a).done(function(a){b.html(a)}))});b.on("click",".content \x3e a",function(){var a=(0,window.$)(this).closest("li").index()+1;z.wi({category:"collection",action:"visit_collection",label:"explore_sidebar_trending_collections_collection_name",value:a})})};z.v(AP,z.zl);
AP.prototype.C=function(){AP.v.C.call(this);this.use("childConstructor",{Vh:z.IF})};z.Fa("ZH.entryQuestionFollowersPage",function(){(new UO).init()});z.Fa("ZH.entrySQ",function(){(new eO).init()});z.Fa("ZH.entrySA",function(){(new uO).init()});z.Fa("ZH.entryL",function(){(new qN).init()});z.Fa("ZH.entryT",function(){(new UM).init()});z.Fa("ZH.entrySearch",function(){(new VO).init()});z.Fa("ZH.entryPM",function(){(new NM).init()});z.Fa("ZH.entryPMDetail",function(){(new JM).init()});z.Fa("ZH.entryTopicFeed",function(){(new GO).init()});z.Fa("ZH.entryHome",function(){(new vP).init()});
z.Fa("ZH.entryQuestionFollowing",function(){(new xP).init()});z.Fa("ZH.entryExplore",function(){(new yP).init()});z.kg("page-main");}).call(this, __z_z__);
//# sourceURL=/static/revved/-/js/closure/page-main.478b0493.js